"use strict";(globalThis.webpackChunk_openmrs_esm_outpatient_app=globalThis.webpackChunk_openmrs_esm_outpatient_app||[]).push([[308],{9838:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(272),a=i.n(n),r=i(2609),o=i.n(r)()(a());o.push([e.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-outpatient__base-visit-type__visitTypeOverviewWrapper___DGNH9{margin:1rem 0rem;border:.0625rem solid #e0e0e0}.-esm-outpatient__base-visit-type__tablet___FGLuc{background-color:#fff}.-esm-outpatient__base-visit-type__desktop___UhPaC{background-color:#f4f4f4}.-esm-outpatient__base-visit-type__desktop___UhPaC .-esm-outpatient__base-visit-type__paginationContainer___efge8 div{background-color:#f4f4f4}.-esm-outpatient__base-visit-type__visitTypeOverviewWrapper___DGNH9 div:nth-child(3)>div:nth-child(2){position:relative}.-esm-outpatient__base-visit-type__visitTypeOverviewWrapper___DGNH9 div:nth-child(3) span *{display:none}.-esm-outpatient__base-visit-type__radioButtonGroup___SEGAC{display:flex;flex-direction:column;align-items:flex-start;margin-top:.5rem;min-height:4rem;width:100%;font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-outpatient__base-visit-type__radioButton___i_SAj{padding:.25rem 1rem;margin:.5rem 0}.-esm-outpatient__base-visit-type__content___rEhyH{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);color:#525252;margin-top:1rem;margin-bottom:.5rem}.-esm-outpatient__base-visit-type__desktopHeading___KoNA1 h4{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252}.-esm-outpatient__base-visit-type__tabletHeading___ixfFt h4{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);color:#525252}.-esm-outpatient__base-visit-type__desktopHeading___KoNA1,.-esm-outpatient__base-visit-type__tabletHeading___ixfFt{text-align:left;text-transform:capitalize;margin-bottom:1rem}.-esm-outpatient__base-visit-type__desktopHeading___KoNA1 h4:after,.-esm-outpatient__base-visit-type__tabletHeading___ixfFt h4:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-outpatient__base-visit-type__heading___JzY5S:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-outpatient__base-visit-type__tile___WFLYy{text-align:center;border:1px solid #e0e0e0}html[dir=rtl] .-esm-outpatient__base-visit-type__desktopHeading___KoNA1,html[dir=rtl] .-esm-outpatient__base-visit-type__tabletHeading___ixfFt{text-align:right}',"",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/patient-search/visit-form/base-visit-type.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,oEACE,gBAAA,CACA,6BAAA,CAGF,kDACE,qBDTM,CCYR,mDACE,wBDdM,CCgBN,sHACE,wBDjBI,CCqBR,sGACE,iBAAA,CAGF,4FACE,YAAA,CAGF,4DACE,YAAA,CACA,qBAAA,CACA,sBAAA,CACA,gBCZW,CDaX,eCsBW,CDrBX,UAAA,CEuyBE,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CFnyBJ,uDACE,mBAAA,CACA,cAAA,CAGF,mDE8xBI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CF5xBF,aDzCQ,CC0CR,eChBW,CDiBX,mBC3BW,CD+BX,6DEsxBE,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CFpxBA,aDjDM,CCsDR,4DE+wBE,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CF7wBA,aDxDM,CC4DV,mHAEE,eAAA,CACA,yBAAA,CACA,kBCtCW,CDwCX,qIACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAIJ,yDACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAGF,gDACE,iBAAA,CACA,wBAAA,CAKA,+IAEE,gBAAA",sourceRoot:""}]),o.locals={visitTypeOverviewWrapper:"-esm-outpatient__base-visit-type__visitTypeOverviewWrapper___DGNH9",tablet:"-esm-outpatient__base-visit-type__tablet___FGLuc",desktop:"-esm-outpatient__base-visit-type__desktop___UhPaC",paginationContainer:"-esm-outpatient__base-visit-type__paginationContainer___efge8",radioButtonGroup:"-esm-outpatient__base-visit-type__radioButtonGroup___SEGAC",radioButton:"-esm-outpatient__base-visit-type__radioButton___i_SAj",content:"-esm-outpatient__base-visit-type__content___rEhyH",desktopHeading:"-esm-outpatient__base-visit-type__desktopHeading___KoNA1",tabletHeading:"-esm-outpatient__base-visit-type__tabletHeading___ixfFt",heading:"-esm-outpatient__base-visit-type__heading___JzY5S",tile:"-esm-outpatient__base-visit-type__tile___WFLYy"};const s=o},4184:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(272),a=i.n(n),r=i(2609),o=i.n(r)()(a());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-outpatient__visit-form__container___qoviZ{margin:1rem 0rem;background-color:#fff}.-esm-outpatient__visit-form__container___qoviZ section{margin:.25rem 1rem 0}.-esm-outpatient__visit-form__heading___cpMdO{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);margin:1rem}.-esm-outpatient__visit-form__sectionTitle___gXCoK{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin-bottom:1rem}.-esm-outpatient__visit-form__dateTimeSection___GchC7{display:flex}.-esm-outpatient__visit-form__radioButton___NMWRr{margin:1rem 0}.-esm-outpatient__visit-form__headerGridRow___umZvW{border-bottom:.0625rem solid #e0e0e0;margin:0}.-esm-outpatient__visit-form__dataGridRow___sGn3y{display:grid;grid-template-columns:50% 10% 1fr;margin:.5rem 1rem;width:100%}.-esm-outpatient__visit-form__form___fAoxL{background-color:#fff;display:flex;flex-direction:column;justify-content:space-between}.-esm-outpatient__visit-form__button___a_ISE{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-outpatient__visit-form__tablet___CBO_E{padding:1.5rem 1rem;background-color:#fff}.-esm-outpatient__visit-form__desktop___QRadB{padding:0rem}@media screen and (max-width: 600px){.-esm-outpatient__visit-form__dateTimeSection___GchC7{flex-direction:column}}.-esm-outpatient__visit-form__backButton___u4ZAa{align-items:center;display:flex;justify-content:flex-start;margin:.5rem 0;padding:0;font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-outpatient__visit-form__backButton___u4ZAa button{display:flex}.-esm-outpatient__visit-form__backButton___u4ZAa button svg{order:1;margin-right:.5rem;margin-left:0rem !important}.-esm-outpatient__visit-form__backButton___u4ZAa button span{order:2}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/patient-search/visit-form/visit-form.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,gDACE,gBAAA,CACA,qBDCc,CCCd,wDACE,oBAAA,CAIJ,8CC6zBI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD3zBF,WEgBW,CFbb,mDCwzBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CDtzBF,aDfQ,CCgBR,kBEUW,CFPb,sDACE,YAAA,CAGF,kDACE,aAAA,CAGF,oDACE,oCAAA,CACA,QAAA,CAGF,kDACE,YAAA,CACA,iCAAA,CACA,iBAAA,CACA,UAAA,CAGF,2CACE,qBDtCc,CCuCd,YAAA,CACA,qBAAA,CACA,6BAAA,CAGF,6CACE,WAAA,CACA,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAGF,6CACE,mBAAA,CACA,qBD5DM,CC+DR,8CACE,YAAA,CAGF,qCACE,sDACE,qBAAA,CAAA,CAIJ,iDACE,kBAAA,CACA,YAAA,CACA,0BAAA,CACA,cAAA,CACA,SAAA,CC2vBE,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDxvBF,wDACE,YAAA,CAEA,4DACE,OAAA,CACA,kBElEO,CFmEP,2BAAA,CAGF,6DACE,OAAA",sourceRoot:""}]),o.locals={container:"-esm-outpatient__visit-form__container___qoviZ",heading:"-esm-outpatient__visit-form__heading___cpMdO",sectionTitle:"-esm-outpatient__visit-form__sectionTitle___gXCoK",dateTimeSection:"-esm-outpatient__visit-form__dateTimeSection___GchC7",radioButton:"-esm-outpatient__visit-form__radioButton___NMWRr",headerGridRow:"-esm-outpatient__visit-form__headerGridRow___umZvW",dataGridRow:"-esm-outpatient__visit-form__dataGridRow___sGn3y",form:"-esm-outpatient__visit-form__form___fAoxL",button:"-esm-outpatient__visit-form__button___a_ISE",tablet:"-esm-outpatient__visit-form__tablet___CBO_E",desktop:"-esm-outpatient__visit-form__desktop___QRadB",backButton:"-esm-outpatient__visit-form__backButton___u4ZAa"};const s=o},88:(e,t,i)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}i.d(t,{A:()=>a});var a=function(e,t){var i,a,r=(i=e.split(":"),a=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,a,r=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(r.push(n.value),!t||r.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw a}}return r}}(i,a)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(i,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],s=r[1];return"12"===o&&"AM"===t&&(o="00"),"PM"===t&&(o="12"===o?o:parseInt(o,10)+12),[o,s]}},3308:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Q});var n=i(5206),a=i.n(n),r=i(8879),o=i.n(r),s=i(9457),l=i(2155),c=i(6759),u=i(4924),A=i(2870),d=i(6520),m=i(7279);const _=function(e){var t=e.width,i=void 0===t?"61":t,a=e.height,r=void 0===a?"59":a;return n.createElement("svg",{width:i,height:r,viewBox:"0 0 61 59"},n.createElement("title",null,"Empty data illustration"),n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("path",{d:"M38.133 13.186H21.947c-.768.001-1.39.623-1.39 1.391V50.55l-.186.057-3.97 1.216a.743.743 0 01-.927-.493L3.664 12.751a.742.742 0 01.492-.926l6.118-1.874 17.738-5.43 6.119-1.873a.741.741 0 01.926.492L38.076 13l.057.186z",fill:"#E0E0E0"}),n.createElement("path",{d:"M41.664 13L38.026 1.117A1.576 1.576 0 0036.056.07l-8.601 2.633-17.737 5.43-8.603 2.634a1.578 1.578 0 00-1.046 1.97l12.436 40.616a1.58 1.58 0 001.969 1.046l5.897-1.805.185-.057v-.194l-.185.057-5.952 1.822a1.393 1.393 0 01-1.737-.923L.247 12.682a1.39 1.39 0 01.923-1.738L9.772 8.31 27.51 2.881 36.112.247a1.393 1.393 0 011.737.923L41.47 13l.057.186h.193l-.057-.185z",fill:"#8D8D8D"}),n.createElement("path",{d:"M11.378 11.855a.836.836 0 01-.798-.59L9.385 7.361a.835.835 0 01.554-1.042l16.318-4.996a.836.836 0 011.042.554l1.195 3.902a.836.836 0 01-.554 1.043l-16.318 4.995a.831.831 0 01-.244.037z",fill:"#C6C6C6"}),n.createElement("circle",{fill:"#C6C6C6",cx:17.636,cy:2.314,r:1.855}),n.createElement("circle",{fill:"#FFF",fillRule:"nonzero",cx:17.636,cy:2.314,r:1.175}),n.createElement("path",{d:"M55.893 53.995H24.544a.79.79 0 01-.788-.789V15.644a.79.79 0 01.788-.788h31.349a.79.79 0 01.788.788v37.562a.79.79 0 01-.788.789z",fill:"#E0E0E0"}),n.createElement("path",{d:"M41.47 13H21.948a1.579 1.579 0 00-1.576 1.577V52.4l.185-.057V14.577c.001-.768.623-1.39 1.391-1.39h19.581L41.471 13zm17.02 0H21.947a1.579 1.579 0 00-1.576 1.577v42.478c0 .87.706 1.576 1.576 1.577H58.49a1.579 1.579 0 001.576-1.577V14.577a1.579 1.579 0 00-1.576-1.576zm1.39 44.055c0 .768-.622 1.39-1.39 1.392H21.947c-.768-.001-1.39-.624-1.39-1.392V14.577c0-.768.622-1.39 1.39-1.39H58.49c.768 0 1.39.622 1.39 1.39v42.478z",fill:"#8D8D8D"}),n.createElement("path",{d:"M48.751 17.082H31.686a.836.836 0 01-.835-.835v-4.081c0-.46.374-.834.835-.835H48.75c.461 0 .834.374.835.835v4.08c0 .462-.374.835-.835.836z",fill:"#C6C6C6"}),n.createElement("circle",{fill:"#C6C6C6",cx:40.218,cy:9.755,r:1.855}),n.createElement("circle",{fill:"#FFF",fillRule:"nonzero",cx:40.218,cy:9.755,r:1.13})))};var p=i(1354),v=i.n(p),f=i(1583),C=i.n(f),g=i(7378),y=i.n(g),h=i(5993),b=i.n(h),E=i(4154),D=i.n(E),w=i(8141),B=i.n(w),S=i(9838),T={};T.styleTagTransform=B(),T.setAttributes=b(),T.insert=y().bind(null,"head"),T.domAPI=C(),T.insertStyleElement=D(),v()(S.Z,T);const k=S.Z&&S.Z.locals?S.Z.locals:void 0;function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}const F=function(e){var t,i,r=e.onChange,o=e.visitTypes,s=(0,u.useTranslation)().t,c="tablet"===(0,A.useLayoutType)(),p=(t=(0,n.useState)(""),i=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,a,r=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(r.push(n.value),!t||r.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw a}}return r}}(t,i)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?x(e,t):void 0}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=p[0],f=p[1],C=(0,n.useMemo)((function(){return(0,m.Z)(v)?o:o.filter((function(e){return-1!==e.display.toLowerCase().search(v.toLowerCase())}))}),[v,o]),g=a().useMemo((function(){return(0,d.Z)((function(e){return f(e)}),300)}),[]),y=(0,A.usePagination)(C,5),h=y.results;return y.currentPage,y.goTo,a().createElement("div",{className:"".concat(k.visitTypeOverviewWrapper," ").concat(c?k.tablet:k.desktop)},h.length?a().createElement(a().Fragment,null,c?a().createElement(l.mh4,null,a().createElement(l.olm,{onChange:function(e){return g(e.target.value)},placeholder:s("searchForAVisitType","Search for a visit type"),labelText:""})):a().createElement(l.olm,{onChange:function(e){return g(e.target.value)},placeholder:s("searchForAVisitType","Search for a visit type"),labelText:""}),a().createElement(l.SYO,{className:k.radioButtonGroup,defaultSelected:1===(null==h?void 0:h.length)&&h[0].uuid,orientation:"vertical",onChange:r,name:"radio-button-group",valueSelected:(null==h?void 0:h.length)>=1&&h[0].uuid},h.map((function(e){var t=e.uuid,i=e.display,n=e.name;return a().createElement(l.EUY,{key:t,className:k.radioButton,id:n,labelText:i,value:t})})))):a().createElement(l.mh4,null,a().createElement(l.n9L,{className:k.tile},a().createElement("div",{className:c?k.tabletHeading:k.desktopHeading},a().createElement("h4",null,s("visitType","Visit type"))),a().createElement(_,null),a().createElement("p",{className:k.content},s("noVisitTypes","There are no visit types to display for this patient")))))};var O=i(8053),H=i(88),G=i(3255);function I(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var M=function(e){return t=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){I(e,t,i[t])}))}return e}({},e),i=null!=(i={display:e.name})?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i.push.apply(i,n)}return i}(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})),t;var t,i},P=function(e){var t,i=e.patientUuid,r=e.patientProgramEnrollment,o=e.onChange,s=e.locationUuid,c=function(e,t,i,a){var r,o=(0,A.useConfig)().visitTypeResourceUrl,s=(0,A.useConfig)().showRecommendedVisitTypeTab,l="".concat(o).concat(e,"/program/").concat(i,"/enrollment/").concat(t,"?intendedLocationUuid=").concat(a),c=(0,G.ZP)(s&&e&&t&&i?l:null,A.openmrsFetch),u=c.data,d=c.error,m=c.isLoading,_=(0,n.useMemo)((function(){var e,t;return null!==(r=null==u||null===(e=u.data)||void 0===e||null===(t=e.visitTypes)||void 0===t?void 0:t.allowed.map(M))&&void 0!==r?r:[]}),[u]);return{recommendedVisitTypes:_,error:d,isLoading:m}}(i,null==r?void 0:r.uuid,null==r||null===(t=r.program)||void 0===t?void 0:t.uuid,s),u=c.recommendedVisitTypes,d=(c.error,c.isLoading);return a().createElement("div",{style:{marginTop:"0.625rem"}},d?a().createElement(l.iZ7,null):a().createElement(F,{onChange:o,visitTypes:u,patientUuid:i}))},N=a().memo(P),z=i(6002),R=i(8697),L=i(4184),j={};j.styleTagTransform=B(),j.setAttributes=b(),j.insert=y().bind(null,"head"),j.domAPI=C(),j.insertStyleElement=D(),v()(L.Z,j);const U=L.Z&&L.Z.locals?L.Z.locals:void 0;var V=i(2303);function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function W(){return W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},W.apply(this,arguments)}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,a,r=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(r.push(n.value),!t||r.length!==t);o=!0);}catch(e){s=!0,a=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw a}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e){var t=e.children;return e.isTablet?a().createElement(l.mh4,null,t):a().createElement("div",null,t)}const Q=function(e){var t,i=e.patientUuid,r=e.toggleSearchType,d=e.closePanel,_=e.mode,p=(0,u.useTranslation)().t,v="tablet"===(0,A.useLayoutType)(),f=(0,A.useLocations)(),C=(0,A.useSession)(),g=function(){var e=(0,A.useConfig)().defaultFacilityUrl,t=(0,V.Z)(e,A.openmrsFetch),i=t.data,n=t.error,a=t.isLoading;return{defaultFacility:i?null==i?void 0:i.data:null,isLoading:a,isError:n}}(),y=g.defaultFacility,h=g.isLoading,b=(0,A.useConfig)(),E=q((0,n.useState)(b.showRecommendedVisitTypeTab?0:1),2),D=E[0],w=E[1],B=q((0,n.useState)(!1),2),S=B[0],T=B[1],k=q((0,n.useState)(!1),2),x=k[0],I=k[1],M=q((0,n.useState)((new Date).getHours()>=12?"PM":"AM"),2),P=M[0],L=M[1],j=q((0,n.useState)(new Date),2),Z=j[0],Q=j[1],K=q((0,n.useState)(o()(new Date).format("hh:mm")),2),X=K[0],J=K[1],$=(0,n.useMemo)((function(){return{patientUuid:i}}),[i]),ee=(0,A.useVisitTypes)(),te=q((0,n.useState)(!0),2),ie=(te[0],te[1]),ne=function(e){var t,i="/ws/rest/v1/programenrollment?patient=".concat(e,"&v=").concat("custom:(uuid,display,program,dateEnrolled,dateCompleted,location:(uuid,display))"),a=(0,G.ZP)(e?i:null,A.openmrsFetch),r=a.data,o=a.error,s=a.isLoading,l=(0,n.useMemo)((function(){return null!==(t=null==r?void 0:r.data.results.sort((function(e,t){return t.dateEnrolled>e.dateEnrolled?1:-1})).filter((function(e){return null===e.dateCompleted})))&&void 0!==t?t:[]}),[null==r?void 0:r.data.results]);return{activePatientEnrollment:(0,z.Z)(l,(function(e){var t;return null==e||null===(t=e.program)||void 0===t?void 0:t.uuid})),error:o,isLoading:s}}(i),ae=ne.activePatientEnrollment,re=ne.isLoading,oe=q((0,n.useState)(ae[0]),2),se=oe[0],le=oe[1],ce=(0,O.P4)("","").mutate,ue=b.concepts.visitQueueNumberAttributeUuid,Ae=q((0,n.useState)(""),2),de=Ae[0],me=Ae[1],_e=q((0,n.useState)(""),2),pe=_e[0],ve=_e[1];(0,n.useEffect)((function(){var e;(null==f?void 0:f.length)&&C?(me(null==C||null===(e=C.sessionLocation)||void 0===e?void 0:e.uuid),ve((null==ee?void 0:ee.length)>0?ee[0].uuid:null)):!h&&y&&(me(null==y?void 0:y.uuid),ve((null==ee?void 0:ee.length)>0?ee[0].uuid:null))}),[f,C,h]);var fe=(0,n.useCallback)((function(e){var t,n,a,r,l;e.preventDefault();var c=null===(t=null==e?void 0:e.target.queueLocation)||void 0===t?void 0:t.value,u=null===(n=null==e?void 0:e.target.service)||void 0===n?void 0:n.value,m=null===(a=null==e?void 0:e.target.priority)||void 0===a?void 0:a.value,_=null===(r=null==e?void 0:e.target.status)||void 0===r?void 0:r.value,v=null===(l=null==e?void 0:e.target.sortWeight)||void 0===l?void 0:l.value;if(pe){I(!0);var f=q((0,H.A)(X,P),2),C=f[0],g=f[1],y={patient:i,startDatetime:(0,A.toDateObjectStrict)((0,A.toOmrsIsoString)(new Date(o()(Z).year(),o()(Z).month(),o()(Z).date(),C,g))),visitType:pe,location:de,attributes:[]},h=new AbortController;(0,A.saveVisit)(y,h).pipe((0,s.P)()).subscribe((function(e){201===e.status&&(0,O.U8)(e.data.uuid,u,i,m,_,v,c,ue).then((function(e){201===e.status&&((0,A.showToast)({kind:"success",title:p("startVisit","Start a visit"),description:p("startVisitQueueSuccessfully","Patient has been added to active visits list and queue.","".concat(C," : ").concat(g))}),d(),ce())}),(function(e){(0,A.showNotification)({title:p("queueEntryError","Error adding patient to the queue"),kind:"error",critical:!0,description:null==e?void 0:e.message})}))}),(function(e){(0,A.showNotification)({title:p("startVisitError","Error starting visit"),kind:"error",critical:!0,description:null==e?void 0:e.message})}))}else T(!0)}),[d,ce,i,de,p,P,Z,ue,X,pe]);return a().createElement(l.l09,{className:U.form,onChange:function(){ie((function(e){return!e}))},onSubmit:fe},a().createElement("div",null,v&&a().createElement(l.X2j,{className:U.headerGridRow},a().createElement(A.ExtensionSlot,{name:"visit-form-header-slot",className:U.dataGridRow,state:$})),a().createElement("div",{className:U.backButton},!0===_?null:a().createElement(l.zxk,{kind:"ghost",renderIcon:function(e){return a().createElement(c.Xd,W({size:24},e))},iconDescription:p("backToScheduledVisits","Back to scheduled visits"),size:"sm",onClick:function(){return r(R.a.SCHEDULED_VISITS,i)}},a().createElement("span",null,p("backToScheduledVisits","Back to scheduled visits")))),a().createElement(l.Kqy,{gap:8,className:U.container},a().createElement("section",{className:U.section},a().createElement("div",{className:U.sectionTitle},p("dateAndTimeOfVisit","Date and time of visit")),a().createElement("div",{className:U.dateTimeSection},a().createElement(l.Mtg,{dateFormat:"d/m/Y",datePickerType:"single",id:"visitDate",style:{paddingBottom:"1rem"},maxDate:(new Date).toISOString(),onChange:function(e){var t=q(e,1)[0];return Q(t)},value:Z},a().createElement(l.aj6,{id:"visitStartDateInput",labelText:p("date","Date"),placeholder:"dd/mm/yyyy",style:{width:"100%"}})),a().createElement(Y,{isTablet:v},a().createElement(l.jII,{id:"visitStartTime",labelText:p("time","Time"),onChange:function(e){return J(e.target.value)},pattern:"^(1[0-2]|0?[1-9]):([0-5]?[0-9])$",style:{marginLeft:"0.125rem",flex:"none"},value:X},a().createElement(l.M6n,{id:"visitStartTimeSelect",onChange:function(e){return L(e.target.value)},value:P,labelText:p("time","Time"),"aria-label":p("time","Time")},a().createElement(l.QlF,{value:"AM",text:"AM"}),a().createElement(l.QlF,{value:"PM",text:"PM"})))))),a().createElement("section",{className:U.section},a().createElement("div",{className:U.sectionTitle},p("facility","Facility")),a().createElement(l.PhF,{labelText:p("selectFacility","Select a facility"),id:"location",invalidText:"Required",value:de,defaultSelected:de,onChange:function(e){return me(e.target.value)}},de?null:a().createElement(l.QlF,{text:p("selectOption","Select an option"),value:""}),(0,m.Z)(y)?(null==f?void 0:f.length)>0?f.map((function(e){return a().createElement(l.QlF,{key:e.uuid,text:e.display,value:e.uuid},e.display)})):null:a().createElement(l.QlF,{key:null==y?void 0:y.uuid,text:null==y?void 0:y.display,value:null==y?void 0:y.uuid},null==y?void 0:y.display))),b.showRecommendedVisitTypeTab&&a().createElement("section",null,a().createElement("div",{className:U.sectionTitle},p("program","Program")),a().createElement(l.cwH,{legendText:p("selectProgramType","Select program type")},a().createElement(l.SYO,{defaultSelected:null==se||null===(t=se.program)||void 0===t?void 0:t.uuid,orientation:"vertical",onChange:function(e){return le(ae.find((function(t){return t.program.uuid===e})))},name:"program-type-radio-group",valueSelected:"default-selected"},ae.map((function(e){var t=e.uuid,i=e.display,n=e.program;return a().createElement(l.EUY,{key:t,className:U.radioButton,id:t,labelText:i,value:n.uuid})}))))),a().createElement("section",null,a().createElement("div",{className:U.sectionTitle},p("visitType","Visit Type")),a().createElement(l.GHR,{selectedIndex:D,className:U.contentSwitcher,onChange:function(e){var t=e.index;return w(t)}},a().createElement(l.rsf,{name:"recommended",text:p("recommended","Recommended")}),a().createElement(l.rsf,{name:"all",text:p("all","All")})),0===D&&!re&&a().createElement(N,{onChange:function(e){ve(e),T(!1)},patientUuid:i,patientProgramEnrollment:se,locationUuid:de}),1===D&&a().createElement(F,{onChange:function(e){ve(e),T(!1)},visitTypes:ee,patientUuid:i})),S&&a().createElement("section",null,a().createElement(l.K0D,{style:{margin:"0",minWidth:"100%"},kind:"error",lowContrast:!0,title:p("missingVisitType","Missing visit type"),subtitle:p("selectVisitType","Please select a Visit Type")}))),a().createElement(A.ExtensionSlot,{name:"add-queue-entry-slot"})),a().createElement(l.uVA,{className:v?U.tablet:U.desktop},a().createElement(l.zxk,{className:U.button,kind:"secondary",onClick:d},p("discard","Discard")),a().createElement(l.zxk,{className:U.button,disabled:x,kind:"primary",type:"submit"},p("startVisit","Start visit"))))}},8697:(e,t,i)=>{var n,a;i.d(t,{K:()=>a,a:()=>n}),function(e){e.BASIC="basic",e.ADVANCED="advanced",e.SEARCH_RESULTS="search_results",e.SCHEDULED_VISITS="scheduled-visits",e.VISIT_FORM="visit_form",e.QUEUE_SERVICE_FORM="queue_service_form",e.QUEUE_ROOM_FORM="queue_room_form"}(n||(n={})),function(e){e[e.SHOW=0]="SHOW",e[e.HIDE=1]="HIDE"}(a||(a={}))}}]);