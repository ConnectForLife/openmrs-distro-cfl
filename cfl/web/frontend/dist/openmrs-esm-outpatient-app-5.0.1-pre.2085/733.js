"use strict";(globalThis.webpackChunk_openmrs_esm_outpatient_app=globalThis.webpackChunk_openmrs_esm_outpatient_app||[]).push([[733],{7674:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(272),o=n.n(s),r=n(2609),i=n.n(r)()(o());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.28572;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.28572;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-outpatient__remove-queue-entry__skeleton___eFvo4{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}#-esm-outpatient__remove-queue-entry__subHeading___YoXVP{font-size:.875rem;font-weight:600;line-height:1.28572;letter-spacing:.16px;color:#161616}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./../../node_modules/carbon-components/src/globals/scss/_css--reset.scss","webpack://./../../node_modules/carbon-components/src/globals/scss/vendor/@carbon/elements/scss/type/_reset.scss","webpack://./../../node_modules/carbon-components/src/globals/scss/vendor/@carbon/elements/scss/type/_font-family.scss","webpack://./../../node_modules/carbon-components/src/globals/scss/vendor/@carbon/elements/scss/icons/mixins.scss","webpack://./../../node_modules/carbon-components/src/globals/scss/vendor/@carbon/elements/scss/type/_styles.import.scss","webpack://./../../node_modules/carbon-components/src/globals/scss/_helper-mixins.scss","webpack://./src/remove-queue-entry-dialog/remove-queue-entry.scss","webpack://./../../node_modules/carbon-components/src/globals/scss/vendor/@carbon/elements/scss/themes/generated/_mixins.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCpBE,2ZAiFE,SAAA,CACA,QAAA,CACA,QAAA,CACA,YAAA,CACA,cAAA,CACA,uBAAA,CAIF,6BAIE,eAAA,CACA,mBAAA,CAGF,4BACE,YAAA,CAIF,mFAYE,aAAA,CAGF,KACE,aAAA,CAGF,IACE,oBAAA,CAGF,IACE,kBAAA,CAGF,MAEE,eAAA,CAGF,aAEE,WAAA,CAGF,wDAIE,UAAA,CAGF,MACE,wBAAA,CACA,gBAAA,CAGF,EACE,qBAAA,CAIF,OACE,QAAA,CC3KJ,KACE,cAAA,CAGF,KC0CA,eAAA,CDvCE,gEAViB,CAWjB,iCAAA,CACA,kCAAA,CACA,iCAAA,CAGF,KACE,wGAhBiB,CAmBnB,OC6BA,eAAA,CCxDA,8CACE,IACE,eAAA,CAAA,CFkCJ,GGghBE,kBA0LsB,CA1LtB,eA0LsB,CA1LtB,iBA0LsB,CA1LtB,gBA0LsB,CHtsBxB,GG4gBE,cA0LsB,CA1LtB,eA0LsB,CA1LtB,gBA0LsB,CA1LtB,gBA0LsB,CHlsBxB,GGwgBE,iBA0LsB,CA1LtB,eA0LsB,CA1LtB,mBA0LsB,CA1LtB,gBA0LsB,CH9rBxB,GGogBE,iBA0LsB,CA1LtB,eA0LsB,CA1LtB,eA0LsB,CA1LtB,gBA0LsB,CH1rBxB,GGggBE,cA0LsB,CA1LtB,eA0LsB,CA1LtB,iBA0LsB,CA1LtB,gBA0LsB,CHtrBxB,GG4fE,iBA0LsB,CA1LtB,eA0LsB,CA1LtB,mBA0LsB,CA1LtB,oBA0LsB,CHlrBxB,EGwfE,cA0LsB,CA1LtB,eA0LsB,CA1LtB,eA0LsB,CA1LtB,gBA0LsB,CH9qBxB,EAII,aAAA,CAMJ,GACE,iBAAA,CIoHF,iEACE,GACE,UAAA,CACA,mBAAA,CACA,qBAAA,CAGF,IACE,SAAA,CACA,mBAAA,CACA,qBAAA,CAGF,IACE,mBAAA,CACA,sBAAA,CAGF,IACE,mBAAA,CACA,sBAAA,CAGF,IACE,mBAAA,CACA,sBAAA,CAGF,IACE,mBAAA,CACA,sBAAA,CAGF,IACE,mBAAA,CACA,qBAAA,CAGF,IACE,mBAAA,CACA,qBAAA,CAGF,KACE,UAAA,CACA,mBAAA,CACA,qBAAA,CAAA,CCrPN,yDF4jBI,iBA0LsB,CA1LtB,eA0LsB,CA1LtB,mBA0LsB,CA1LtB,oBA0LsB,CEpvBxB,aC2CQ",sourceRoot:""}]),i.locals={subHeading:"-esm-outpatient__remove-queue-entry__subHeading___YoXVP",skeleton:"-esm-outpatient__remove-queue-entry__skeleton___eFvo4"};const a=i},8179:(e,t,n)=>{n.d(t,{EQ:()=>A,J$:()=>i,JB:()=>r,b7:()=>a});var s=n(8879),o=n.n(s),r=(window.getOpenmrsSpaBase,"".concat(window.spaBase,"/home")),i="YYYY-MM-DDTHH:mm:ss.SSSZZ",a=o()((new Date).setUTCHours(0,0,0,0)).format(i),A=Intl.DateTimeFormat().resolvedOptions().timeZone},8733:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var s=n(5206),o=n.n(s),r=n(4924),i=n(2155),a=n(2870),A=n(8179),l=n(8879),c=n.n(l),u=n(8053),m=n(3255),C=n(9457);function d(e,t,n,s,o,r,i){try{var a=e[r](i),A=a.value}catch(e){return void n(e)}a.done?t(A):Promise.resolve(A).then(s,o)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(s,o){var r=e.apply(t,n);function i(e){d(r,s,o,i,a,"next",e)}function a(e){d(r,s,o,i,a,"throw",e)}i(void 0)}))}}var p=function(e,t){var n,s,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,s&&(o=2&r[0]?s.return:r[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,r[1])).done)return o;switch(s=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,s=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],s=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},f=c()(new Date).format(A.J$);function g(){return g=B((function(e,t,n,s,o,r){var i;return p(this,(function(A){switch(A.label){case 0:return i=new AbortController,s?((null==r?void 0:r.length)&&r.forEach((l=B((function(e){return p(this,(function(t){switch(t.label){case 0:return[4,Promise.all([h("Completed",e.uuid)])];case 1:return t.sent(),[2]}}))})),function(e){return l.apply(this,arguments)})),[4,Promise.all([(0,u.TW)(e,t,n)])]):[3,2];case 1:return A.sent(),[2,(0,a.updateVisit)(o,s,i).pipe((0,C.P)()).subscribe((function(e){return e.status}),(function(e){return e}))];case 2:return[4,Promise.all([(0,u.TW)(e,t,n)]).then((function(e){return e})).catch((function(e){return e}))];case 3:return[2,A.sent()];case 4:return[2]}var l}))})),g.apply(this,arguments)}function h(e,t){return b.apply(this,arguments)}function b(){return(b=B((function(e,t){var n;return p(this,(function(s){return n="/ws/rest/v1/appointments/".concat(t,"/status-change"),[2,(0,a.openmrsFetch)(n,{body:{toStatus:e,onDate:f,timeZone:A.EQ},method:"POST",headers:{"Content-Type":"application/json"}})]}))}))).apply(this,arguments)}var v=n(1354),y=n.n(v),E=n(1583),L=n.n(E),w=n(7378),_=n.n(w),k=n(5993),G=n.n(k),F=n(4154),x=n.n(F),q=n(8141),I=n.n(q),D=n(7674),S={};S.styleTagTransform=I(),S.setAttributes=G(),S.insert=_().bind(null,"head"),S.domAPI=L(),S.insertStyleElement=x(),y()(D.Z,S);const T=D.Z&&D.Z.locals?D.Z.locals:void 0,H=function(e){var t=e.queueEntry,n=e.closeModal,s=(0,r.useTranslation)().t,l=(0,a.useVisit)(t.patientUuid).currentVisit,c=(0,u.P4)("","").mutate,C=(new AbortController,function(e,t){var n,s=new AbortController,o="/ws/rest/v1/appointments/search",r=(0,m.ZP)(o,(function(){return(0,a.openmrsFetch)(o,{method:"POST",signal:s.signal,headers:{"Content-Type":"application/json"},body:{patientUuid:e,startDate:t}})})),i=r.data,A=r.error,l=r.isLoading,c=r.isValidating,u=(null==i||null===(n=i.data)||void 0===n?void 0:n.length)?i.data.filter((function(e){return"CheckedIn"===e.status})):null;return{data:i?u:null,isError:A,isLoading:l,isValidating:c}}(t.patientUuid,A.b7)),d=C.data;return o().createElement("div",null,o().createElement(i.xBx,{closeModal:n,label:s("serviceQueue","Service queue"),title:s("removeFromQueueAndEndVisit","Remove patient from queue and end active visit?")}),o().createElement(i.fef,null,o().createElement("p",{className:T.subHeading,id:"subHeading"},s("endVisitWarningMessage","Ending this visit will remove this patient from the queue and will not allow you to fill another encounter form for this patient"))),o().createElement(i.mzw,null,o().createElement(i.zxk,{kind:"secondary",onClick:n},s("cancel","Cancel")),o().createElement(i.zxk,{kind:"danger",onClick:function(){var e,o,r={location:null==l||null===(e=l.location)||void 0===e?void 0:e.uuid,startDatetime:(0,a.parseDate)(null==l?void 0:l.startDatetime),visitType:null==l||null===(o=l.visitType)||void 0===o?void 0:o.uuid,stopDatetime:new Date},i=(0,a.toDateObjectStrict)((0,a.toOmrsIsoString)(new Date));(function(e,t,n,s,o,r){return g.apply(this,arguments)})(t.queueUuid,t.queueEntryUuid,i,r,t.visitUuid,d).then((function(e){n(),c(),(0,a.showToast)({critical:!0,kind:"success",description:s("queueEntryRemovedSuccessfully","Queue entry removed successfully"),title:s("queueEntryRemoved","Queue entry removed")})}))}},s("endVisit","End Visit"))))}}}]);