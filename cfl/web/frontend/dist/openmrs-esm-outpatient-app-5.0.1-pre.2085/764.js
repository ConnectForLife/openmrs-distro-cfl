"use strict";(globalThis.webpackChunk_openmrs_esm_outpatient_app=globalThis.webpackChunk_openmrs_esm_outpatient_app||[]).push([[764],{8456:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(272),i=n.n(a),o=n(2609),r=n.n(o)()(i());r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-outpatient__appointment-details__widgetCard___gTpX9{border:1px solid #d0e2ff;border-left:none;border-right:none;background-color:#edf5ff;padding:1rem}.-esm-outpatient__appointment-details__title___BUu2V{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);color:#525252;margin-bottom:.25rem}.-esm-outpatient__appointment-details__subtitle___MilF3{color:#525252;font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-outpatient__appointment-details__content___c6yuG{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);background-color:#edf5ff;padding:1rem;border:1px solid #d0e2ff}.-esm-outpatient__appointment-details__tile___bleS8{text-align:center}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/patient-info/appointment-details.scss","webpack://./../../node_modules/@carbon/colors/index.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CClDF,0DACE,wBAAA,CACA,gBAAA,CACA,iBAAA,CACA,wBCGQ,CDFR,YEqBW,CFlBb,qDG6zBI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CH3zBF,aDVQ,CCWR,oBAAA,CAGF,wDACE,aDfQ,CIq0BN,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CHlzBJ,uDGkzBI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CHhzBF,wBCdQ,CDeR,YEIW,CFHX,wBAAA,CAGF,oDACE,iBAAA",sourceRoot:""}]),r.locals={widgetCard:"-esm-outpatient__appointment-details__widgetCard___gTpX9",title:"-esm-outpatient__appointment-details__title___BUu2V",subtitle:"-esm-outpatient__appointment-details__subtitle___MilF3",content:"-esm-outpatient__appointment-details__content___c6yuG",tile:"-esm-outpatient__appointment-details__tile___bleS8"};const s=r},8470:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(272),i=n.n(a),o=n(2609),r=n.n(o)()(i());r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-outpatient__contact-details__heading___uvzJN{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);color:#525252}.-esm-outpatient__contact-details__container___BWFOS{background-color:#edf5ff;display:grid;grid-template-columns:1fr 1fr;border-top:1px solid #d0e2ff;margin-top:.125rem}.-esm-outpatient__contact-details__container___BWFOS>div{padding:1rem}.-esm-outpatient__contact-details__container___BWFOS>div:first-child{border-right:1px solid #d0e2ff}.-esm-outpatient__contact-details__container___BWFOS ul>li{padding:.25rem 0;color:#525252;font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/patient-info/contact-details.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CClDF,mDCq0BI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CDn0BF,aDFQ,CCKV,qDACE,wBDCc,CAAA,YAAA,CCCd,6BAAA,CACA,4BAAA,CACA,kBEJW,CFMX,yDACE,YEaS,CFVX,qEACE,8BAAA,CAGF,2DACE,gBAAA,CACA,aDtBM,CEq0BN,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA",sourceRoot:""}]),r.locals={heading:"-esm-outpatient__contact-details__heading___uvzJN",container:"-esm-outpatient__contact-details__container___BWFOS"};const s=r},5877:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(272),i=n.n(a),o=n(2609),r=n.n(o)()(i());r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-outpatient__patient-info__container___wWCpc{border-bottom:.0125rem solid #c6c6c6;background-color:#fff;padding:0}.-esm-outpatient__patient-info__patientInfoContainer___ShZun{background-color:#fff;padding:0 0 0 1rem;display:flex;align-items:center;min-height:7rem}.-esm-outpatient__patient-info__activePatientInfoContainer___bXbiN{background-color:#edf5ff;padding:0 0 0 1rem;display:flex;align-items:center;min-height:7rem}.-esm-outpatient__patient-info__patientName___qdrPy{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-outpatient__patient-info__patientInfoContent___ZOueA{margin:1rem 0 0 1rem;width:100%}.-esm-outpatient__patient-info__demographics___N1p6L{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#525252;margin-top:.25rem}.-esm-outpatient__patient-info__identifier___rCeJ9{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#8d8d8d}.-esm-outpatient__patient-info__patientInfoRow___ZwNGd{display:flex;justify-content:space-between;align-items:center}.-esm-outpatient__patient-info__patientInfoRow___ZwNGd>button{min-height:2rem}.-esm-outpatient__patient-info__patientEditBtn___bVb0E{color:#161616;margin:.5rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/patient-info/patient-info.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,kDACE,oCAAA,CACA,qBDLM,CCMN,SAAA,CAGF,6DACE,qBDVM,CCWN,kBAAA,CACA,YAAA,CACA,kBAAA,CACA,eAAA,CAGF,mEACE,wBDPc,CCQd,kBAAA,CACA,YAAA,CACA,kBAAA,CACA,eAAA,CAGF,oDCgzBI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD5yBJ,2DACE,oBAAA,CACA,UAAA,CAGF,qDCuyBI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CDryBF,aDhCQ,CCiCR,iBEtBW,CFyBb,mDCiyBI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CD/xBF,aDxCM,CC2CR,uDACE,YAAA,CACA,6BAAA,CACA,kBAAA,CAEA,8DACE,eAAA,CAIJ,uDACE,aDrDM,CCsDN,YErCW",sourceRoot:""}]),r.locals={container:"-esm-outpatient__patient-info__container___wWCpc",patientInfoContainer:"-esm-outpatient__patient-info__patientInfoContainer___ShZun",activePatientInfoContainer:"-esm-outpatient__patient-info__activePatientInfoContainer___bXbiN",patientName:"-esm-outpatient__patient-info__patientName___qdrPy",patientInfoContent:"-esm-outpatient__patient-info__patientInfoContent___ZOueA",demographics:"-esm-outpatient__patient-info__demographics___N1p6L",identifier:"-esm-outpatient__patient-info__identifier___rCeJ9",patientInfoRow:"-esm-outpatient__patient-info__patientInfoRow___ZwNGd",patientEditBtn:"-esm-outpatient__patient-info__patientEditBtn___bVb0E"};const s=r},5865:(e,t,n)=>{n.d(t,{L:()=>c,N:()=>s});var a=n(3255),i=n(2870),o=n(8879),r=n.n(o);function s(e){var t,n,o,s="/ws/rest/v1/visit?patient=".concat(e,"&v=").concat("custom:(uuid,encounters:(uuid,form:(uuid,display),encounterDatetime,orders:full,obs:(uuid,concept:(uuid,display,conceptClass:(uuid,display)),display,groupMembers:(uuid,concept:(uuid,display),value:(uuid,display)),value),encounterType:(uuid,display),encounterProviders:(uuid,display,encounterRole:(uuid,display),provider:(uuid,person:(uuid,display)))),visitType:(uuid,name,display),startDatetime,stopDatetime,patient"),c=(0,a.ZP)(e?s:null,i.openmrsFetch),l=c.data,d=c.error,A=c.isLoading,u=c.isValidating,p=null===(o=null==l||null===(t=l.data)||void 0===t||null===(n=t.results)||void 0===n?void 0:n.filter((function(e){return r()(e.startDatetime).isBefore(r()().startOf("day"))})))||void 0===o?void 0:o.shift();return{visits:l?p:null,isError:d,isLoading:A,isValidating:u}}function c(e,t){if(!e||!t)return"";var n=e.search(/\D/),a=parseInt(e.substring(0,n)),i=e.search(/\//),o=e.substring(n);if(i>=0){o=e.substring(n,i);var r=e.substring(i+1).search(/\D/),s=parseInt(e.substr(i+1,r)),c=e.substring(i+1+r);return"".concat(t," ").concat(o," (").concat(t/a*s," ").concat(c,")")}return"".concat(a*t," ").concat(o)}},2764:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(5206),i=n.n(a),o=n(4924),r=n(2155),s=n(7631),c=n(2074),l=n(2870),d=n(8879),A=n.n(d),u=n(3255),p="/ws/rest/v1/appointments/search",m=n(1354),_=n.n(m),f=n(1583),g=n.n(f),C=n(7378),v=n.n(C),h=n(5993),b=n.n(h),y=n(4154),D=n.n(y),E=n(8141),w=n.n(E),B=n(8456),N={};N.styleTagTransform=w(),N.setAttributes=b(),N.insert=v().bind(null,"head"),N.domAPI=g(),N.insertStyleElement=D(),_()(B.Z,N);const I=B.Z&&B.Z.locals?B.Z.locals:void 0;var k=n(5865),F=function(e){var t,n,a=e.pastVisit,s=e.isLoading,c=(0,o.useTranslation)().t;return s?i().createElement("div",{className:I.widgetCard},i().createElement(r.lSo,{description:c("loading","Loading..."),role:"progressbar"})):a?i().createElement("div",{className:I.widgetCard},i().createElement(i().Fragment,null,i().createElement("p",{className:I.title},c("lastEncounter","Last encounter")),i().createElement("p",{className:I.subtitle},(0,l.formatDatetime)((0,l.parseDate)(null==a?void 0:a.startDatetime))," ·"," ",(null==a?void 0:a.visitType)?null==a||null===(t=a.visitType)||void 0===t?void 0:t.display:"--"," ·"," ",(null==a?void 0:a.location)?null===(n=a.location)||void 0===n?void 0:n.display:"--"))):i().createElement("p",{className:I.content},c("noLastEncounter","There is no last encounter to display for this patient"))},T=function(e){var t,n,a=e.upcomingAppointment,s=e.isLoading,c=(0,o.useTranslation)().t;return s?i().createElement("div",{className:I.widgetCard},i().createElement(r.lSo,{description:c("loading","Loading..."),role:"progressbar"})):a?i().createElement("div",{className:I.widgetCard},i().createElement(i().Fragment,null,i().createElement("p",{className:I.title},c("returnDate","Return date")),i().createElement("p",{className:I.subtitle},(0,l.formatDatetime)((0,l.parseDate)(null==a?void 0:a.startDateTime))," ·"," ",(null==a?void 0:a.service)?null==a||null===(t=a.service)||void 0===t?void 0:t.name:"--"," ·"," ",(null==a?void 0:a.location)?null==a||null===(n=a.location)||void 0===n?void 0:n.name:"--"," "))):i().createElement("p",{className:I.content},c("noReturnDate","There is no return date to display for this patient"))};const S=function(e){var t=e.patientUuid,n=((0,o.useTranslation)().t,function(e,t){var n,a=new AbortController,i=(0,u.ZP)(p,(function(){return(0,l.openmrsFetch)(p,{method:"POST",signal:a.signal,headers:{"Content-Type":"application/json"},body:{patientUuid:e,startDate:t}})})),o=i.data,r=i.error,s=i.isLoading,c=i.isValidating,d=(null==o||null===(n=o.data)||void 0===n?void 0:n.length)?o.data.sort((function(e,t){return t.startDateTime>e.startDateTime?1:-1})):null;return{upcomingAppointment:(null==d?void 0:d.find((function(e){return A()(e.startDateTime/1e3*1e3).isAfter(A()())})))||null,isError:r,isLoading:s,isValidating:c}}(t,A()((new Date).toISOString()).subtract(6,"month").toISOString())),a=n.upcomingAppointment,r=n.isLoading,s=(0,k.N)(t),c=s.visits,d=s.isLoading;return i().createElement(i().Fragment,null,i().createElement(F,{pastVisit:c,isLoading:d}),i().createElement(T,{upcomingAppointment:a,isLoading:r}))};var z=n(2303),Z=n(8470),L={};L.styleTagTransform=w(),L.setAttributes=b(),L.insert=v().bind(null,"head"),L.domAPI=g(),L.insertStyleElement=D(),_()(Z.Z,L);const P=Z.Z&&Z.Z.locals?Z.Z.locals:void 0;var O=function(e){var t=e.address,n=(0,o.useTranslation)().t;return i().createElement("div",null,i().createElement("p",{className:P.heading},n("placeOfResidence","Place of Residence")),i().createElement("ul",null,t?i().createElement(i().Fragment,null,i().createElement("li",null,t.postalCode),i().createElement("li",null,t.city),i().createElement("li",null,t.state),i().createElement("li",null,t.country)):"--"))},R=function(e){var t=e.contact,n=e.patientUuid,a=(0,o.useTranslation)().t,s=(null==t?void 0:t.length)?t[0].value:"--",c=function(e){var t=(0,l.useConfig)().contactAttributeType,n=function(e){var t,n=(0,z.Z)("/ws/rest/v1/patient/".concat(e,"?v=").concat("custom:(uuid,display,identifiers:(identifier,uuid,preferred,location:(uuid,name),identifierType:(uuid,name,format,formatDescription,validator)),person:(uuid,display,gender,birthdate,dead,age,deathDate,birthdateEstimated,causeOfDeath,preferredName:(uuid,preferred,givenName,middleName,familyName),attributes,preferredAddress:(uuid,preferred,address1,address2,cityVillage,longitude,stateProvince,latitude,country,postalCode,countyDistrict,address3,address4,address5,address6,address7)))"),l.openmrsFetch),a=n.data,i=n.error;return{isLoading:n.isLoading,attributes:null!==(t=null==a?void 0:a.data.person.attributes)&&void 0!==t?t:[],error:i}}(e),a=n.attributes,i=n.isLoading,o=a.filter((function(e){var n=e.attributeType;return null==t?void 0:t.some((function(e){return n.uuid===e}))}));return{contactAttributes:null!=o?o:[],isLoading:i}}(n),d=c.isLoading,A=c.contactAttributes;return i().createElement("div",null,i().createElement("p",{className:P.heading},a("contactDetails","Contact Details")),i().createElement("ul",null,i().createElement("li",null,s),d?i().createElement(r.lSo,{description:a("loading","Loading...")}):null==A?void 0:A.map((function(e){var t=e.attributeType,n=e.value,a=e.uuid;return i().createElement("li",{key:a},t.display," : ",n)}))))};const x=function(e){var t=e.patientId,n=e.address,a=e.contact,o=n?n.find((function(e){return"home"===e.use})):void 0;return i().createElement("div",{className:P.container},i().createElement(O,{address:o}),i().createElement(R,{contact:a,patientUuid:t}))};var M=n(5877),G={};G.styleTagTransform=w(),G.setAttributes=b(),G.insert=v().bind(null,"head"),G.domAPI=g(),G.insertStyleElement=D(),_()(M.Z,G);const V=M.Z&&M.Z.locals?M.Z.locals:void 0;function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function q(){return q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},q.apply(this,arguments)}const U=function(e){var t,n,d,A,u,p,m,_=e.patient,f=e.handlePatientInfoClick,g=(0,o.useTranslation)().t,C=(p=(0,a.useState)(!1),m=2,function(e){if(Array.isArray(e))return e}(p)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,o=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return o}}(p,m)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(p,m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=C[0],h=C[1],b="".concat(null===(n=null===(t=_.name)||void 0===t?void 0:t[0].given)||void 0===n?void 0:n.join(" ")," ").concat(null==_||null===(d=_.name)||void 0===d?void 0:d[0].family),y=i().useMemo((function(){return{patientUuid:_.id,patientName:b}}),[_.id,b]);return i().createElement(r.Ohc,{className:V.container,onClick:f},i().createElement("div",{className:"".concat(v?V.activePatientInfoContainer:V.patientInfoContainer)},i().createElement(l.ExtensionSlot,{name:"patient-photo-slot",state:y}),i().createElement("div",{className:V.patientInfoContent},i().createElement("div",{className:V.patientInfoRow},i().createElement("span",{className:V.patientName},b),i().createElement(l.ConfigurableLink,{to:"${openmrsSpaBase}/patient/".concat(_.id,"/edit"),className:V.patientEditBtn,title:g("editPatientDetails","Edit Patient Details")},i().createElement(s.I8,{size:16}))),i().createElement("div",{className:V.patientInfoRow},i().createElement("div",{className:V.demographics},i().createElement("span",null,(null!==(A=_.gender)&&void 0!==A?A:g("unknown","Unknown")).replace(/^\w/,(function(e){return e.toUpperCase()}))," ·"," "),i().createElement("span",null,(0,l.age)(_.birthDate)," · "),i().createElement("span",null,(0,l.formatDate)((0,l.parseDate)(_.birthDate),{mode:"wide",time:!1})))),i().createElement("div",{className:V.patientInfoRow},i().createElement("span",{className:V.identifier},_.identifier.length?_.identifier.map((function(e){return e.value})).join(", "):"--"),i().createElement(r.zxk,{kind:"ghost",renderIcon:function(e){return v?i().createElement(c.Kh,q({size:16},e)):i().createElement(c._M,q({size:16},e))},iconDescription:"Toggle contact details",onClick:function(e){return function(e){e.stopPropagation(),h((function(e){return!e}))}(e)}},v?g("showLess","Show less"):g("showAllDetails","Show all details"))))),v&&i().createElement(i().Fragment,null,i().createElement(x,{patientId:_.id,address:null!==(u=_.address)&&void 0!==u?u:[],contact:_.contact}),i().createElement(S,{patientUuid:_.id})))}},2303:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(3255),i=(0,n(4729).xD)(a.ZP,(e=>(t,n,a)=>(a.revalidateOnFocus=!1,a.revalidateIfStale=!1,a.revalidateOnReconnect=!1,e(t,n,a))))}}]);