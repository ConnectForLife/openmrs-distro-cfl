"use strict";(globalThis.webpackChunk_openmrs_esm_outpatient_app=globalThis.webpackChunk_openmrs_esm_outpatient_app||[]).push([[286],{2033:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(272),a=n.n(i),o=n(2609),s=n.n(o)()(a());s.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-outpatient__visit-form-queue-fields__sectionTitle____gtmV{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin-bottom:1rem}.-esm-outpatient__visit-form-queue-fields__section___xZFbb{margin:.5rem}.-esm-outpatient__visit-form-queue-fields__sectionHidden___eXfmf{display:none}.-esm-outpatient__visit-form-queue-fields__container___V0HNP{margin:1rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/patient-search/visit-form-queue-fields/visit-form-queue-fields.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,gECs0BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CDp0BF,aDDQ,CCER,kBEwBW,CFrBb,2DACE,YEUW,CFPb,iEACE,YAAA,CAGF,6DACE,WEYW",sourceRoot:""}]),s.locals={sectionTitle:"-esm-outpatient__visit-form-queue-fields__sectionTitle____gtmV",section:"-esm-outpatient__visit-form-queue-fields__section___xZFbb",sectionHidden:"-esm-outpatient__visit-form-queue-fields__sectionHidden___eXfmf",container:"-esm-outpatient__visit-form-queue-fields__container___V0HNP"};const r=s},8179:(e,t,n)=>{n.d(t,{EQ:()=>l,J$:()=>s,JB:()=>o,b7:()=>r});var i=n(8879),a=n.n(i),o=(window.getOpenmrsSpaBase,"".concat(window.spaBase,"/home")),s="YYYY-MM-DDTHH:mm:ss.SSSZZ",r=a()((new Date).setUTCHours(0,0,0,0)).format(s),l=Intl.DateTimeFormat().resolvedOptions().timeZone},2296:(e,t,n)=>{n.d(t,{Su:()=>o,xD:()=>s}),n(3255);var i=n(2303),a=n(2870);function o(e){var t,n,o="/ws/rest/v1/queue?location=".concat(e),s=(0,i.Z)(e?o:null,a.openmrsFetch),r=s.data,l=s.isLoading;return{services:r?null==r||null===(t=r.data)||void 0===t||null===(n=t.results)||void 0===n?void 0:n.map((function(e){return e.display})):[],allServices:r?null==r?void 0:r.data.results:[],isLoading:l}}function s(e,t){var n,o="/ws/rest/v1/queue-entry-metrics?service=".concat(e,"&status=").concat("Waiting","&location=").concat(t),s=(0,i.Z)(e?o:null,a.openmrsFetch).data;return{serviceCount:s?null==s||null===(n=s.data)||void 0===n?void 0:n.count:0}}n(8179)},4286:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var i=n(5206),a=n.n(i),o=n(2155),s=n(1995),r=n(8053),l=n(2296),c=n(1354),u=n.n(c),d=n(1583),m=n.n(d),v=n(7378),f=n.n(v),p=n(5993),_=n.n(p),g=n(4154),A=n.n(g),h=n(8141),E=n.n(h),b=n(2033),y={};y.styleTagTransform=E(),y.setAttributes=_(),y.insert=f().bind(null,"head"),y.domAPI=m(),y.insertStyleElement=A(),u()(b.Z,y);const C=b.Z&&b.Z.locals?b.Z.locals:void 0;var S=n(2870),T=n(4924);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,a,o=[],s=!0,r=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(e){r=!0,a=e}finally{try{s||null==n.return||n.return()}finally{if(r)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e){var t=e.children;return e.isTablet?a().createElement(o.mh4,null,t):a().createElement("div",null,t)}const N=function(){var e,t=(0,T.useTranslation)().t,n="tablet"===(0,S.useLayoutType)(),c=(0,r.W_)().priorities,u=(0,r.$z)().statuses,d=(0,s.J)().queueLocations,m=(0,S.useConfig)(),v=m.concepts.defaultStatusConceptUuid,f=m.concepts.defaultPriorityConceptUuid,p=m.concepts.emergencyPriorityConceptUuid,_=q((0,i.useState)(null===(e=d[0])||void 0===e?void 0:e.id),2),g=_[0],A=_[1],h=(0,l.Su)(g),E=h.allServices,b=(h.isLoading,q((0,i.useState)(f),2)),y=b[0],w=b[1],N=q((0,i.useState)(v),2),x=N[0],D=N[1],k=q((0,i.useState)(0),2),P=k[0],B=k[1],Z=q((0,i.useState)(""),2),L=Z[0],H=Z[1];return(0,i.useEffect)((function(){y===p&&B(1)}),[y]),(0,i.useEffect)((function(){(null==E?void 0:E.length)>0&&H(E[0].uuid)}),[E]),(0,i.useEffect)((function(){(null==d?void 0:d.length)>0&&A(d[0].id)}),[d]),a().createElement("div",{className:C.container},a().createElement("section",{className:C.section},a().createElement("div",{className:C.sectionTitle},t("queueLocation","Queue Location")),a().createElement(F,{isTablet:n},a().createElement(o.PhF,{labelText:t("selectQueueLocation","Select a queue location"),id:"queueLocation",name:"queueLocation",invalidText:"Required",value:g,onChange:function(e){return A(e.target.value)}},g?null:a().createElement(o.QlF,{text:t("selectLocation","Select a queue location"),value:""}),(null==d?void 0:d.length)>0&&d.map((function(e){return a().createElement(o.QlF,{key:e.id,text:e.name,value:e.id},e.name)}))))),a().createElement("section",{className:C.section},a().createElement("div",{className:C.sectionTitle},t("service","Service")),(null==E?void 0:E.length)?a().createElement(o.PhF,{labelText:t("selectService","Select a service"),id:"service",name:"service",invalidText:"Required",value:L,onChange:function(e){return H(e.target.value)}},L?null:a().createElement(o.QlF,{text:t("selectService","Select a queue service"),value:""}),(null==E?void 0:E.length)>0&&E.map((function(e){return a().createElement(o.QlF,{key:e.uuid,text:e.name,value:e.uuid},e.name)}))):a().createElement(o.K0D,{className:C.inlineNotification,kind:"error",lowContrast:!0,subtitle:t("configureServices","Please configure services to continue."),title:t("noServicesConfigured","No services configured")})),a().createElement("section",{className:"".concat(C.section," ").concat(C.sectionHidden)},a().createElement("div",{className:C.sectionTitle},t("status","Status")),a().createElement(o.PhF,{labelText:t("selectStatus","Select a status"),id:"status",name:"status",invalidText:"Required",value:x,onChange:function(e){return D(e.target.value)}},u?null:a().createElement(o.QlF,{text:t("chooseStatus","Select a status"),value:""}),(null==u?void 0:u.length)>0&&u.map((function(e){return a().createElement(o.QlF,{key:e.uuid,text:e.display,value:e.uuid},e.display)})))),a().createElement("section",{className:C.section},a().createElement("div",{className:C.sectionTitle},t("priority","Priority")),(null==c?void 0:c.length)?a().createElement(o.SYO,{className:C.radioButtonWrapper,name:"priority",id:"priority",defaultSelected:f,onChange:function(e){w(e)}},(null==c?void 0:c.length)>0&&c.map((function(e){var t=e.uuid,n=e.display;return a().createElement(o.EUY,{key:t,labelText:n,value:t})}))):a().createElement(o.K0D,{className:C.inlineNotification,kind:"error",lowContrast:!0,subtitle:t("configurePriorities","Please configure priorities to continue."),title:t("noPrioritiesConfigured","No priorities configured")})),a().createElement("section",{className:"".concat(C.section," ").concat(C.sectionHidden)},a().createElement(o.oil,{type:"number",id:"sortWeight",name:"sortWeight",labelText:t("sortWeight","Sort weight"),value:P})))}}}]);