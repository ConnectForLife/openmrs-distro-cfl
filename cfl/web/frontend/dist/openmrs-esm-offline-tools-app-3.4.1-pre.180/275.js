"use strict";(self.webpackChunk_openmrs_esm_offline_tools_app=self.webpackChunk_openmrs_esm_offline_tools_app||[]).push([[275],{787:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(361),i=n.n(o)()((function(e){return e[1]}));i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-offline-tools__no-actions-empty-state-styles__productiveHeading01___TiIrt{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}.-esm-offline-tools__no-actions-empty-state-styles__productiveHeading02___iM5gC{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.-esm-offline-tools__no-actions-empty-state-styles__productiveHeading03___tdejo{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.-esm-offline-tools__no-actions-empty-state-styles__productiveHeading04___oqCAF{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}.-esm-offline-tools__no-actions-empty-state-styles__bodyShort01___EdNA4{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.-esm-offline-tools__no-actions-empty-state-styles__bodyLong01___C7rrN{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.-esm-offline-tools__no-actions-empty-state-styles__label01___YtcGv{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.-esm-offline-tools__no-actions-empty-state-styles__emptyStateContainer___9ElZ8{padding:2rem;display:flex;flex-direction:column;justify-content:center;align-items:center}.-esm-offline-tools__no-actions-empty-state-styles__emptyStateContainer___9ElZ8 .-esm-offline-tools__no-actions-empty-state-styles__emptyStateDescription___HBNSX{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px;white-space:pre-line;text-align:center}",""]),i.locals={productiveHeading01:"-esm-offline-tools__no-actions-empty-state-styles__productiveHeading01___TiIrt",productiveHeading02:"-esm-offline-tools__no-actions-empty-state-styles__productiveHeading02___iM5gC",productiveHeading03:"-esm-offline-tools__no-actions-empty-state-styles__productiveHeading03___tdejo",productiveHeading04:"-esm-offline-tools__no-actions-empty-state-styles__productiveHeading04___oqCAF",bodyShort01:"-esm-offline-tools__no-actions-empty-state-styles__bodyShort01___EdNA4",bodyLong01:"-esm-offline-tools__no-actions-empty-state-styles__bodyLong01___C7rrN",label01:"-esm-offline-tools__no-actions-empty-state-styles__label01___YtcGv",emptyStateContainer:"-esm-offline-tools__no-actions-empty-state-styles__emptyStateContainer___9ElZ8",emptyStateDescription:"-esm-offline-tools__no-actions-empty-state-styles__emptyStateDescription___HBNSX"};const a=i},4405:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(361),i=n.n(o)()((function(e){return e[1]}));i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-offline-tools__offline-actions-table-styles__productiveHeading01___IhQeL{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}.-esm-offline-tools__offline-actions-table-styles__productiveHeading02___h2dmS{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.-esm-offline-tools__offline-actions-table-styles__productiveHeading03___ve-hw{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.-esm-offline-tools__offline-actions-table-styles__productiveHeading04___JIR3E{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}.-esm-offline-tools__offline-actions-table-styles__bodyShort01___I8GGX{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.-esm-offline-tools__offline-actions-table-styles__bodyLong01___hBZ7-{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.-esm-offline-tools__offline-actions-table-styles__label01___N5vjY{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.-esm-offline-tools__offline-actions-table-styles__tableContainer___g0Osy{background-color:transparent}.-esm-offline-tools__offline-actions-table-styles__tableHeaderContainer___FibAg{display:grid;grid-template-rows:auto auto;grid-template-columns:1fr 1fr auto;padding-top:1rem}.-esm-offline-tools__offline-actions-table-styles__tableHeaderContainer___FibAg .-esm-offline-tools__offline-actions-table-styles__tableSearch___9cdiM{grid-row:2;grid-column:2;align-self:end}.-esm-offline-tools__offline-actions-table-styles__tableHeaderContainer___FibAg .-esm-offline-tools__offline-actions-table-styles__tablePrimaryAction___OvHk1{grid-row:2;grid-column:3;align-self:end}.omrs-breakpoint-gt-tablet .-esm-offline-tools__offline-actions-table-styles__tableHeaderContainer___FibAg{grid-template-columns:1fr 20% 250px auto}.omrs-breakpoint-gt-tablet .-esm-offline-tools__offline-actions-table-styles__tableHeaderContainer___FibAg .-esm-offline-tools__offline-actions-table-styles__tableSearch___9cdiM{grid-row:1;grid-column:3}.omrs-breakpoint-gt-tablet .-esm-offline-tools__offline-actions-table-styles__tableHeaderContainer___FibAg .-esm-offline-tools__offline-actions-table-styles__tablePrimaryAction___OvHk1{grid-row:1;grid-column:4}",""]),i.locals={productiveHeading01:"-esm-offline-tools__offline-actions-table-styles__productiveHeading01___IhQeL",productiveHeading02:"-esm-offline-tools__offline-actions-table-styles__productiveHeading02___h2dmS",productiveHeading03:"-esm-offline-tools__offline-actions-table-styles__productiveHeading03___ve-hw",productiveHeading04:"-esm-offline-tools__offline-actions-table-styles__productiveHeading04___JIR3E",bodyShort01:"-esm-offline-tools__offline-actions-table-styles__bodyShort01___I8GGX",bodyLong01:"-esm-offline-tools__offline-actions-table-styles__bodyLong01___hBZ7-",label01:"-esm-offline-tools__offline-actions-table-styles__label01___N5vjY",tableContainer:"-esm-offline-tools__offline-actions-table-styles__tableContainer___g0Osy",tableHeaderContainer:"-esm-offline-tools__offline-actions-table-styles__tableHeaderContainer___FibAg",tableSearch:"-esm-offline-tools__offline-actions-table-styles__tableSearch___9cdiM",tablePrimaryAction:"-esm-offline-tools__offline-actions-table-styles__tablePrimaryAction___OvHk1"};const a=i},8627:(e,t,n)=>{n.d(t,{a:()=>_,u:()=>d});var o=n(1602),i=n.n(o),a=n(8478),l=n(9351),r=n(9136);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function c(e,t,n,o,i,a,l){try{var r=e[a](l),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(o,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function l(e){c(a,o,i,l,r,"next",e)}function r(e){c(a,o,i,l,r,"throw",e)}l(void 0)}))}}function _(){return(0,r.ZP)("offlineActions/pending",(function(){return(0,a.getFullSynchronizationItems)()}))}function d(e){var t=e?(0,l.Z)(e.map((function(e){var t;return null==e||null===(t=e.descriptor)||void 0===t?void 0:t.patientUuid})).filter(Boolean)):null;return(0,r.ZP)((function(){return["patients"].concat(function(e){if(Array.isArray(e))return s(e)}(e=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var e}),(function(){return Promise.all(t.map((function(e){return function(e){return u.apply(this,arguments)}(e)})))}))}function u(){return(u=f(i().mark((function e(t){var n,o,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,a.getSynchronizationItems)("patient-registration");case 3:if(o=e.sent,null==(l=null===(n=o.find((function(e){var n;return(null===(n=e.fhirPatient)||void 0===n?void 0:n.id)===t})))||void 0===n?void 0:n.fhirPatient)){e.next=9;break}e.t0=l,e.next=12;break;case 9:return e.next=11,(0,a.fetchCurrentPatient)(t).then((function(e){return e.data}));case 11:e.t0=e.sent;case 12:return e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},7275:(e,t,n)=>{n.d(t,{Z:()=>M});var o=n(1602),i=n.n(o),a=n(8478),l=n(6983),r=n.n(l),s=n(2680),c=n(9784),f=n(487),_=n.n(f),d=n(631),u=n.n(d),m=n(2052),p=n.n(m),g=n(4010),y=n.n(g),b=n(1469),h=n.n(b),v=n(9329),S=n.n(v),w=n(4405),A={};A.styleTagTransform=S(),A.setAttributes=y(),A.insert=p().bind(null,"head"),A.domAPI=u(),A.insertStyleElement=h(),_()(w.Z,A);const C=w.Z&&w.Z.locals?w.Z.locals:void 0;function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function H(){return H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},H.apply(this,arguments)}var T=function(){return r().createElement(c.TableContainer,{className:C.tableContainer},r().createElement("div",{className:C.tableHeaderContainer},r().createElement(c.SearchSkeleton,{className:C.tableSearch})),r().createElement(c.DataTableSkeleton,{showToolbar:!1,showHeader:!1}))};function P(e){var t,n=e.syncItem,o=null!==(t=n.descriptor.displayName)&&void 0!==t?t:"-";return(0,a.canBeginEditSynchronizationItemsOfType)(n.type)?r().createElement(c.Link,{onClick:function(){return(0,a.beginEditSynchronizationItem)(n.id).catch((function(e){return(0,a.createErrorHandler)()(e)}))}},o):r().createElement(r().Fragment,null,o)}function k(e){var t=e.patientUuid,n=e.patientName;return t?r().createElement(c.Link,{onClick:function(){return(0,a.navigate)({to:"".concat(window.getOpenmrsSpaBase(),"patient/").concat(t,"/chart")})}},n):r().createElement(r().Fragment,null,"-")}function I(e){var t=e.rowIds,n=e.headers,o=e.cellsById,i=e.inputValue,a=e.getCellId;return t.filter((function(e){return n.some((function(t){var n,l,r,s=t.key,c=a(e,s),f=o[c].value;return(null!==(r=null!==(l=null==f||null===(n=f.filterableValue)||void 0===n?void 0:n.toString())&&void 0!==l?l:null==f?void 0:f.toString())&&void 0!==r?r:"").toLowerCase().includes(i.toLowerCase())}))}))}const x=function(e){var t,n,o,i=e.isLoading,f=e.data,_=void 0===f?[]:f,d=e.hiddenHeaders,u=e.disableEditing,m=e.disableDelete,p=e.onDelete,g=(0,s.useTranslation)().t,y=(n=(0,l.useState)(10),o=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,a=[],l=!0,r=!1;try{for(n=n.call(e);!(l=(o=n.next()).done)&&(a.push(o.value),!t||a.length!==t);l=!0);}catch(e){r=!0,i=e}finally{try{l||null==n.return||n.return()}finally{if(r)throw i}}return a}}(n,o)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=y[0],h=y[1],v=(0,a.usePagination)(_),S=v.results,w=v.currentPage,A=v.goTo,x="desktop"===(0,a.useLayoutType)()?"sm":void 0,z=[{key:"createdOn",header:g("offlineActionsTableCreatedOn","Date & Time")},{key:"patient",header:g("offlineActionsTablePatient","Patient")},{key:"action",header:g("offlineActionsTableAction","Action")},{key:"error",header:g("offlineActionsTableError","Error")}].filter((function(e){return!(null==d?void 0:d.includes(e.key))})),N=S.map((function(e){var t,n,o,i,a,l=function(e){var t,n,o=e.item,i=e.patient;if(null===(t=o.descriptor)||void 0===t?void 0:t.patientUuid){var a=null==i||null===(n=i.name)||void 0===n?void 0:n[0];return a?"".concat(a.given.join(" ")," ").concat(a.family):o.descriptor.patientUuid}}(e);return{id:e.item.id.toString(),createdOn:null===(t=e.item.createdOn)||void 0===t?void 0:t.toLocaleDateString(),patient:{value:r().createElement(k,{patientUuid:null===(n=e.item.descriptor)||void 0===n?void 0:n.patientUuid,patientName:l}),filterableValue:l},action:{value:r().createElement(P,{syncItem:e.item}),filterableValue:null!==(i=e.item.descriptor.displayName)&&void 0!==i?i:"-"},error:null!==(a=null===(o=e.item.lastError)||void 0===o?void 0:o.message)&&void 0!==a?a:"-"}}));return i?r().createElement(T,null):r().createElement(c.DataTable,{rows:N,headers:z,filterRows:I},(function(e){var n=e.rows,o=e.headers,i=e.getTableProps,a=e.getHeaderProps,l=e.getRowProps,s=e.getTableContainerProps,f=e.getSelectionProps,d=e.onInputChange,y=e.selectedRows;return r().createElement(c.TableContainer,H({className:C.tableContainer},s()),r().createElement("div",{className:C.tableHeaderContainer},0===y.length&&r().createElement(c.Search,{className:C.tableSearch,labelText:g("offlinePatientsTableSearchLabel","Search this list"),placeholder:g("offlinePatientsTableSearchPlaceholder","Search this list"),size:x,onChange:d,light:!0}),y.length>0&&r().createElement(c.Button,{className:C.tablePrimaryAction,kind:"danger",size:x,disabled:u||m,onClick:function(){return p(y.map((function(e){return+e.id})))}},1===y.length?g("offlineActionsTableDeleteAction","Delete action"):g("offlineActionsTableDeleteActions","Delete {count} actions",{count:y.length}))),r().createElement(c.Table,H({},i(),{isSortable:!0,useZebraStyles:!0}),r().createElement(c.TableHead,null,r().createElement(c.TableRow,null,r().createElement(c.TableSelectAll,H({},f(),{disabled:u})),o.map((function(e){return r().createElement(c.TableHeader,H({},a({header:e}),{isSortable:!0}),e.header)})))),r().createElement(c.TableBody,null,n.map((function(e){return r().createElement(c.TableRow,H({},l({row:e})),r().createElement(c.TableSelectRow,H({},f({row:e}),{disabled:u})),e.cells.map((function(e){var n;return r().createElement(c.TableCell,{key:e.id},null!==(t=null===(n=e.value)||void 0===n?void 0:n.value)&&void 0!==t?t:e.value)})))})))),r().createElement(c.Pagination,{pageSizes:[10,20,30,40,50],page:w,pageSize:b,totalItems:_.length,onChange:function(e){var t=e.page,n=e.pageSize;A(t),h(n)}}))}))};var z=n(8627),N=n(787),D={};D.styleTagTransform=S(),D.setAttributes=y(),D.insert=p().bind(null,"head"),D.domAPI=u(),D.insertStyleElement=h(),_()(N.Z,D);const Z=N.Z&&N.Z.locals?N.Z.locals:void 0;var O=n(9735);const L=function(){var e=(0,s.useTranslation)().t;return r().createElement(c.Tile,{light:!0,className:Z.emptyStateContainer},r().createElement("img",{src:O,alt:e("offlineActionsNoActionsEmptyStateImageAlt","No Pending Actions Image")}),r().createElement("h4",{className:Z.productiveHeading01},e("offlineActionsNoActionsEmptyStateTitle","No actions pending upload")),r().createElement("span",{className:Z.emptyStateDescription},e("offlineActionsNoActionsEmptyStateContent","All offline actions have been uploaded successfully,\nand merged with the online patient records.")))};function j(e,t,n,o,i,a,l){try{var r=e[a](l),s=r.value}catch(e){return void n(e)}r.done?t(s):Promise.resolve(s).then(o,i)}function F(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function l(e){j(a,o,i,l,r,"next",e)}function r(e){j(a,o,i,l,r,"throw",e)}l(void 0)}))}}const M=function(e){var t,n=e.patientUuid,o=(0,s.useTranslation)().t,l=(0,a.useStore)((0,a.getOfflineSynchronizationStore)()),c=(0,z.a)(),f=c.data,_=c.mutate,d=(0,z.u)(f).data,u=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(t){return{item:t,patient:e.find((function(e){var n;return e.id===(null===(n=t.descriptor)||void 0===n?void 0:n.patientUuid)}))}}))}(n?null==f?void 0:f.filter((function(e){return e.descriptor.patientUuid===n})):f,d),m=!f||!d,p=!!l.synchronization,g=(t=F(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,a.showModal)("offline-tools-confirmation-modal",{title:o("offlineActionsDeleteConfirmationModalTitle","Delete offline actions"),children:o("offlineActionsDeleteConfirmationModalContent","Are you sure that you want to delete all selected offline actions? This cannot be undone!"),confirmText:o("offlineActionsDeleteConfirmationModalConfirm","Delete forever"),cancelText:o("offlineActionsDeleteConfirmationModalCancel","Cancel"),closeModal:function(){return n()},onConfirm:F(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(t.map((function(e){return(0,a.deleteSynchronizationItem)(e)})));case 2:_();case 3:case"end":return e.stop()}}),e)})))});case 1:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)});return r().createElement(r().Fragment,null,m||(null==f?void 0:f.length)>0?r().createElement(x,{isLoading:m,data:u,hiddenHeaders:n?["patient"]:[],disableEditing:p,disableDelete:!1,onDelete:g}):r().createElement(L,null))}},9735:(e,t,n)=>{e.exports=n.p+"6cff3b9b777791485be4.svg"}}]);