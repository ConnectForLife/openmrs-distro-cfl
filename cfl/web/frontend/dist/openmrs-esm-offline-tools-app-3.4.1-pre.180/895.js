(self.webpackChunk_openmrs_esm_offline_tools_app=self.webpackChunk_openmrs_esm_offline_tools_app||[]).push([[895],{6060:(n,e,t)=>{"use strict";t.d(e,{Z:()=>a});var o=t(361),i=t.n(o)()((function(n){return n[1]}));i.push([n.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-offline-tools__synchronizing-notification-styles__productiveHeading01___IXbQA{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}.-esm-offline-tools__synchronizing-notification-styles__productiveHeading02___hVDYW{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.-esm-offline-tools__synchronizing-notification-styles__productiveHeading03___jIzsd{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.-esm-offline-tools__synchronizing-notification-styles__productiveHeading04___HlVaH{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}.-esm-offline-tools__synchronizing-notification-styles__bodyShort01___XqYp6{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.-esm-offline-tools__synchronizing-notification-styles__bodyLong01___tXh\\+9{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.-esm-offline-tools__synchronizing-notification-styles__label01___yi5xl{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.-esm-offline-tools__synchronizing-notification-styles__notificationLoadingContainer___E-paW{display:flex;gap:.5rem;justify-content:space-between;align-items:center}",""]),i.locals={productiveHeading01:"-esm-offline-tools__synchronizing-notification-styles__productiveHeading01___IXbQA",productiveHeading02:"-esm-offline-tools__synchronizing-notification-styles__productiveHeading02___hVDYW",productiveHeading03:"-esm-offline-tools__synchronizing-notification-styles__productiveHeading03___jIzsd",productiveHeading04:"-esm-offline-tools__synchronizing-notification-styles__productiveHeading04___HlVaH",bodyShort01:"-esm-offline-tools__synchronizing-notification-styles__bodyShort01___XqYp6",bodyLong01:"-esm-offline-tools__synchronizing-notification-styles__bodyLong01___tXh+9",label01:"-esm-offline-tools__synchronizing-notification-styles__label01___yi5xl",notificationLoadingContainer:"-esm-offline-tools__synchronizing-notification-styles__notificationLoadingContainer___E-paW"};const a=i},1217:(n,e,t)=>{"use strict";t.d(e,{Q:()=>s,_:()=>r});var o,i,a,l=t(7644),r={home:"home",offlineTools:"offline-tools",offlineToolsPatients:"offline-tools/patients",offlineToolsPatientOfflineData:"offline-tools/patients/:patientUuid/offline-data",offlineToolsActions:"offline-tools/actions"},s=(o={},a="network-first",(i=l.omrsOfflineCachingStrategyHttpHeaderName)in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,o)},8895:(n,e,t)=>{"use strict";t.r(e),t.d(e,{backendDependencies:()=>Z,importTranslation:()=>U,setupOpenMRS:()=>X,version:()=>j});var o=t(7644),i=t(1217),a=t(6983),l=t.n(a),r={slot:"patient-chart-offline-actions-dashboard-slot",config:{columns:1,type:"grid"},name:"Offline actions"},s=t(8613),f=t(1602),c=t.n(f);function u(n,e,t,o,i,a,l){try{var r=n[a](l),s=r.value}catch(n){return void t(n)}r.done?e(s):Promise.resolve(s).then(o,i)}function d(n){return function(){var e=this,t=arguments;return new Promise((function(o,i){var a=n.apply(e,t);function l(n){u(a,o,i,l,r,"next",n)}function r(n){u(a,o,i,l,r,"throw",n)}l(void 0)}))}}var p=t(8478),_=t(2680),m=t(9784),h=t(487),y=t.n(h),g=t(631),v=t.n(g),b=t(2052),w=t.n(b),z=t(4010),S=t.n(z),A=t(1469),L=t.n(A),O=t(9329),k=t.n(O),C=t(6060),x={};x.styleTagTransform=k(),x.setAttributes=S(),x.insert=w().bind(null,"head"),x.domAPI=v(),x.insertStyleElement=L(),y()(C.Z,x);const P=C.Z&&C.Z.locals?C.Z.locals:void 0;function T(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=n[t];return o}var E=!0,H=0;function N(n){var e=n.mySynchronizationIndex,t=(0,_.useTranslation)().t,o=B(e),i=D(o);return o?l().createElement("div",{className:P.notificationLoadingContainer},i?t("offlineActionsSynchronizationNotificationCanceling","Canceling..."):t("offlineActionsSynchronizationNotificationStatus","{current} / {total} actions",{current:o.totalCount-o.pendingCount,total:o.totalCount}),l().createElement(m.Loading,{small:!0,withOverlay:!1})):l().createElement(l().Fragment,null,t("offlineActionsSynchronizationNotificationSynchronized","The offline action synchronization has finished."))}function I(n){var e=n.mySynchronizationIndex,t=(0,_.useTranslation)().t,o=B(e),i=D(o);return o?l().createElement(m.NotificationActionButton,{onClick:function(){return null==o?void 0:o.abortController.abort()},disabled:i},t("offlineActionsSynchronizationNotificationCancelUpload","Cancel upload")):null}function B(n){var e=(0,p.useStore)((0,p.getOfflineSynchronizationStore)());return n===H?e.synchronization:void 0}function D(n){var e,t,o,i=null==n?void 0:n.abortController,l=(t=(0,a.useState)(null!==(e=null==i?void 0:i.signal.aborted)&&void 0!==e&&e),o=2,function(n){if(Array.isArray(n))return n}(t)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,i,a=[],l=!0,r=!1;try{for(t=t.call(n);!(l=(o=t.next()).done)&&(a.push(o.value),!e||a.length!==e);l=!0);}catch(n){r=!0,i=n}finally{try{l||null==t.return||t.return()}finally{if(r)throw i}}return a}}(t,o)||function(n,e){if(n){if("string"==typeof n)return T(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?T(n,e):void 0}}(t,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=l[0],s=l[1];return(0,a.useEffect)((function(){var n=function(){return s(!0)};return null==i||i.signal.addEventListener("abort",n),function(){return null==i?void 0:i.signal.removeEventListener("abort",n)}}),[i]),r}var j="3.4.1-pre.180",U=t(3979),Z={"webservices.rest":"^2.24.0"};function X(){var n,e,a="@openmrs/esm-offline-tools-app",f={featureName:"offline-tools",moduleName:a};return(0,o.setupDynamicOfflineDataHandler)({id:"esm-offline-tools-app:patient",displayName:"Offline tools",type:"patient",isSynced:function(n){return d(c().mark((function e(){var t,i,a,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=["/ws/fhir2/R4/Patient/".concat(n)],i=t.map((function(n){return window.origin+(0,o.makeUrl)(n)})),e.next=4,caches.open("omrs-spa-cache-v1");case 4:return a=e.sent,e.next=7,a.keys();case 7:return l=e.sent.map((function(n){return n.url})),e.abrupt("return",i.every((function(n){return l.includes(n)})));case 9:case"end":return e.stop()}}),e)})))()},sync:function(n){return d(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.messageOmrsServiceWorker)({type:"registerDynamicRoute",pattern:"/ws/fhir2/R4/Patient/".concat(n)});case 2:return e.next=4,(0,o.fetchCurrentPatient)(n,{headers:i.Q});case 4:case"end":return e.stop()}}),e)})))()}}),n=function(n){n.synchronization||(E=!0),E&&n.synchronization&&(E=!1,H++,(0,p.showNotification)({title:(0,_.getI18n)().t("offlineActionsSynchronizationNotificationTitle","Upload"),description:l().createElement(N,{mySynchronizationIndex:H}),action:l().createElement(I,{mySynchronizationIndex:H})}))},(0,p.getOfflineSynchronizationStore)().subscribe(n),(0,o.registerBreadcrumbs)([{path:"".concat(window.spaBase,"/").concat(i._.offlineTools),title:"Offline tools",parent:"".concat(window.spaBase,"/").concat(i._.home)},{path:"".concat(window.spaBase,"/").concat(i._.offlineToolsPatients),title:"Offline patients",parent:"".concat(window.spaBase,"/").concat(i._.offlineTools)},{path:"".concat(window.spaBase,"/").concat(i._.offlineToolsPatientOfflineData),title:"Offline data",parent:"".concat(window.spaBase,"/").concat(i._.offlineToolsPatients)},{path:"".concat(window.spaBase,"/").concat(i._.offlineToolsActions),title:"Actions",parent:"".concat(window.spaBase,"/").concat(i._.offlineTools)}]),{pages:[{load:(0,o.getAsyncLifecycle)((function(){return Promise.all([t.e(136),t.e(978),t.e(194),t.e(259)]).then(t.bind(t,3259))}),f),route:"offline-tools",online:!0,offline:!0}],extensions:[{name:"offline-tools-link",slot:"app-menu-slot",load:(0,o.getAsyncLifecycle)((function(){return t.e(733).then(t.bind(t,7733))}),f),online:!0,offline:!0},{name:"offline-tools-nav-items",load:(0,o.getAsyncLifecycle)((function(){return t.e(391).then(t.bind(t,391))}),{featureName:"nav-items",moduleName:a}),online:!0,offline:!0},{name:"offline-tools-confirmation-modal",load:(0,o.getAsyncLifecycle)((function(){return t.e(541).then(t.bind(t,1541))}),f),online:!0,offline:!0},{name:"offline-tools-dashboard-patients-card",slot:"offline-tools-dashboard-cards",load:(0,o.getAsyncLifecycle)((function(){return Promise.all([t.e(136),t.e(827),t.e(316)]).then(t.bind(t,7316))}),f),online:!0,offline:!0},{name:"offline-tools-dashboard-actions-card",slot:"offline-tools-dashboard-cards",load:(0,o.getAsyncLifecycle)((function(){return Promise.all([t.e(136),t.e(351),t.e(827),t.e(412)]).then(t.bind(t,6412))}),f),online:!0,offline:!0},{name:"offline-tools-page-offline-patients-link",slot:"offline-tools-page-slot",load:(0,o.getSyncLifecycle)((function(){return(0,s.Z)({page:"patients",title:"Offline patients"})}),f),meta:{name:"patients",slot:"offline-tools-page-offline-patients-slot"},online:!0,offline:!0},{name:"offline-tools-page-offline-patients",slot:"offline-tools-page-offline-patients-slot",load:(0,o.getAsyncLifecycle)((function(){return Promise.all([t.e(136),t.e(978),t.e(194),t.e(991)]).then(t.bind(t,8991))}),f),online:!0,offline:!0},{name:"offline-tools-page-actions-link",slot:"offline-tools-page-slot",load:(0,o.getSyncLifecycle)((function(){return(0,s.Z)({page:"actions",title:"Offline actions"})}),f),meta:{name:"actions",slot:"offline-tools-page-actions-slot"},online:!0,offline:!0},{name:"offline-tools-page-actions",slot:"offline-tools-page-actions-slot",load:(0,o.getAsyncLifecycle)((function(){return Promise.all([t.e(136),t.e(351),t.e(275),t.e(319)]).then(t.bind(t,6319))}),f),online:{canSynchronizeOfflineActions:!0},offline:{canSynchronizeOfflineActions:!1}},{id:"offline-tools-patient-chart-actions-widget",slot:"patient-chart-summary-dashboard-slot",order:0,load:(0,o.getAsyncLifecycle)((function(){return Promise.all([t.e(136),t.e(351),t.e(275),t.e(126)]).then(t.bind(t,9126))}),f),meta:{columnSpan:4},online:!0,offline:!0},{id:"offline-tools-patient-chart-actions-dashboard",order:0,slot:r.slot,load:(0,o.getAsyncLifecycle)((function(){return Promise.all([t.e(136),t.e(351),t.e(275),t.e(126)]).then(t.bind(t,9126))}),f),online:!0,offline:!0},{id:"offline-tools-patient-chart-actions-dashboard-link",slot:"patient-chart-dashboard-slot",order:12,load:(0,o.getSyncLifecycle)((e=r,function(n){var t=n.basePath;return l().createElement("div",{key:e.name},l().createElement(o.ConfigurableLink,{to:"".concat(t,"/").concat(encodeURIComponent(e.name))},e.name))}),f),meta:r,online:!0,offline:!0},{name:"offline-tools-opt-in-offline-mode-button",slot:"user-panel-slot",order:1,load:(0,o.getAsyncLifecycle)((function(){return t.e(639).then(t.bind(t,5639))}),f),online:!0,offline:!1}]}}},8613:(n,e,t)=>{"use strict";t.d(e,{Z:()=>r});var o=t(7644),i=t(6983),a=t.n(i),l=t(1217);function r(n){var e=n.page,t=n.title;return a().createElement("div",{key:e},a().createElement(o.ConfigurableLink,{to:"${openmrsSpaBase}/"+l._.offlineTools+(e?"/".concat(e):""),className:"bx--side-nav__link"},t))}},3979:(n,e,t)=>{var o={"./en.json":[3574,574]};function i(n){if(!t.o(o,n))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=o[n],i=e[0];return t.e(e[1]).then((()=>t(i)))}i.keys=()=>Object.keys(o),i.id=3979,n.exports=i}}]);