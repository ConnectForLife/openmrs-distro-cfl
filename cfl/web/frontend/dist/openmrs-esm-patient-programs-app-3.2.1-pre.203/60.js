"use strict";(self.webpackChunk_openmrs_esm_patient_programs_app=self.webpackChunk_openmrs_esm_patient_programs_app||[]).push([[60],{3467:(e,t,r)=>{r.d(t,{x:()=>f});var n=r(7896),o=r(6666),a=r(2159),i=r(3980),l=r.n(i),s=r(9902),c=r.n(s),u=(0,s.createContext)(null),d=["as","children","dir"];function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){var t=e.as,r=void 0===t?"span":t,i=e.children,l=e.dir,f=void 0===l?"auto":l,p=(0,a.Z)(e,d),g=(0,s.useContext)(u),h={},v=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},g);if(g){var b=g.direction,y=g.getTextDirection;if(y&&y.current){var E=function(e){if("string"==typeof e)return e;var t=c().Children.map(e,(function(e){return"string"==typeof e?e:null})).filter((function(e){return null!==e}));return 1===t.length?t[0]:t}(i),w=y.current(E);b!==w?(h.dir=w,v.direction=w):"auto"===b&&(h.dir=w)}else b!==f?(h.dir=f,v.direction=f):"auto"===b&&(h.dir=f)}else h.dir=f,v.direction=f;return c().createElement(u.Provider,{value:v},c().createElement(r,(0,n.Z)({},p,h),i))}f.propTypes={as:l().oneOfType([l().func,l().string,l().elementType]),children:l().node.isRequired,dir:l().oneOf(["ltr","rtl","auto"])}},1223:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(9902);const o="undefined"!=typeof window?n.useLayoutEffect:n.useEffect},5351:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(9601),o=r.n(n),a=r(2609),i=r.n(a)()(o());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-patient-programs__programs-detailed-summary__skeleton___vysuL{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}.-esm-patient-programs__programs-detailed-summary__widgetCard___q9_pO{border:1px solid #e0e0e0}",""]),i.locals={widgetCard:"-esm-patient-programs__programs-detailed-summary__widgetCard___q9_pO",skeleton:"-esm-patient-programs__programs-detailed-summary__skeleton___vysuL"};const l=i},3156:(e,t,r)=>{r.d(t,{Z:()=>c});var n=r(9902),o=r.n(n),a=r(7030),i=r(4924),l=r(4850),s=r(3771);const c=function(e){var t=e.enrollment,r=(0,i.useTranslation)().t,n="eligible"===t.enrollmentStatus?t.enrollmentFormUuid:t.discontinuationFormUuid,c=function(e){s.formEntrySub.next({formUuid:n,encounterUuid:""}),(0,s.launchPatientWorkspace)("patient-form-entry-workspace",{workspaceTitle:"".concat(null==t?void 0:t.display," ").concat(e," Form")})};return"eligible"===t.enrollmentStatus?o().createElement(a.Z,{onClick:function(){return c(r("enrollment","Enrollment"))},renderIcon:l.Z,kind:"tertiary",size:"small"},r("enroll","Enroll")):o().createElement(a.Z,{onClick:function(){return c(r("discontinue","Discontinue"))},renderIcon:l.Z,kind:"danger--ghost",size:"small"},r("discontinue","Discontinue"))}},1187:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ie});var n,o=r(9902),a=r.n(o),i=r(8011),l=r(5495),s=["children"],c=a().forwardRef((function(e,t){var r=e.children,o=(0,l._)(e,s);return a().createElement(l.I,(0,l.a)({width:16,height:16,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:t},o),n||(n=a().createElement("path",{d:"M2 26H30V28H2zM25.4 9c.8-.8.8-2 0-2.8 0 0 0 0 0 0l-3.6-3.6c-.8-.8-2-.8-2.8 0 0 0 0 0 0 0l-15 15V24h6.4L25.4 9zM20.4 4L24 7.6l-3 3L17.4 7 20.4 4zM6 22v-3.6l10-10 3.6 3.6-10 10H6z"})),r)})),u=r(321),d=r.n(u),m=r(1195),f=r.n(m),p=r(3275),g=r.n(p),h=r(7162),v=r.n(h),b=r(2094),y=r.n(b),E=r(757),w=r.n(E),O=r(5351),P={};P.styleTagTransform=w(),P.setAttributes=v(),P.insert=g().bind(null,"head"),P.domAPI=f(),P.insertStyleElement=y(),d()(O.Z,P);const k=O.Z&&O.Z.locals?O.Z.locals:void 0;var _=r(3771),Z=r(4924),C=r(4076),j=r(8580),S=r(1145),x=r(7030),T=r(160),z=r(5223),D=r(2965),L=r(364),I=r(7500),q=r(8345),M=r(1358),A=r(2427),X=r(3783),F=r(3066),U=r(3523);const V=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}(e,t,r)};var H=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const B=function(e){return H.test(e)};var W="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",R="\\ud83c[\\udffb-\\udfff]",N="[^\\ud800-\\udfff]",$="(?:\\ud83c[\\udde6-\\uddff]){2}",K="[\\ud800-\\udbff][\\udc00-\\udfff]",Y="(?:"+W+"|"+R+")?",G="[\\ufe0e\\ufe0f]?",J=G+Y+"(?:\\u200d(?:"+[N,$,K].join("|")+")"+G+Y+")*",Q="(?:"+[N+W+"?",W,$,K,"[\\ud800-\\udfff]"].join("|")+")",ee=RegExp(R+"(?="+R+")|"+Q+J,"g");const te=function(e){return B(e)?function(e){return e.match(ee)||[]}(e):function(e){return e.split("")}(e)},re=function(e){e=(0,U.Z)(e);var t=B(e)?te(e):void 0,r=t?t[0]:e.charAt(0),n=t?V(t,1).join(""):e.slice(1);return r.toUpperCase()+n};var ne=r(3156);function oe(){return oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oe.apply(this,arguments)}function ae(e){var t=e.programEnrollmentId,r=a().useCallback((function(){return(0,_.launchPatientWorkspace)("programs-form-workspace",{programEnrollmentId:t})}),[t]);return a().createElement(x.Z,{kind:"ghost",renderIcon:c,iconDescription:"Edit Program",onClick:r,hasIconOnly:!0})}const ie=function(e){var t,r,n=e.patientUuid,o=(0,Z.useTranslation)().t,l=o("programEnrollments","Program enrollments"),s=o("carePrograms","Care Programs"),c=!!(0,F.useConfig)().customUrl,u=(0,C.b$)(n),d=u.enrollments,m=u.isLoading,f=u.isError,p=u.isValidating,g=u.availablePrograms,h=u.eligiblePrograms,v=u.configurablePrograms,b=(0,F.usePagination)(c?v:null!=d?d:[],5),y=b.results,E=(b.goTo,b.currentPage,a().useMemo((function(){return[{key:"display",header:o("activePrograms","Active programs")},{key:"location",header:o("location","Location")},{key:"dateEnrolled",header:o("dateEnrolled","Date enrolled")},{key:"status",header:o("status","Status")},{key:"actions",header:o("actions","Actions")}]}),[o])),w=a().useMemo((function(){return null==y?void 0:y.map((function(e){var t,r;return{id:e.uuid,display:e.display,location:null===(t=e.location)||void 0===t?void 0:t.display,dateEnrolled:e.dateEnrolled?(0,F.formatDatetime)(new Date(e.dateEnrolled)):"--",status:c?(r=e.enrollmentStatus,re((0,U.Z)(r).toLowerCase())):e.dateCompleted?"".concat(o("completedOn","Completed On")," ").concat((0,F.formatDate)(new Date(e.dateCompleted))):o("active","Active"),actions:c?a().createElement(ne.Z,{enrollment:e}):a().createElement(ae,{programEnrollmentId:e.uuid})}}))}),[c,y,o]),O=a().useCallback((function(){return(0,_.launchPatientWorkspace)("programs-form-workspace")}),[]);return m?a().createElement(j.Z,{role:"progressbar"}):f?a().createElement(_.ErrorState,{error:f,headerTitle:s}):(null==d?void 0:d.length)?a().createElement("div",{className:k.widgetCard},a().createElement(_.CardHeader,{title:s},a().createElement("span",null,p?a().createElement(S.Z,null):null),a().createElement(x.Z,{kind:"ghost",renderIcon:i.Z,iconDescription:"Add programs",onClick:O,disabled:(null==g?void 0:g.length)&&0===(null==h?void 0:h.length)},o("add","Add"))),a().createElement(T.Z,null,(null==g?void 0:g.length)&&0===(null==h?void 0:h.length)&&a().createElement(z.K0,{style:{minWidth:"100%",margin:"0rem",padding:"0rem"},kind:"info",lowContrast:!0,subtitle:o("noEligibleEnrollments","There are no more programs left to enroll this patient in"),title:o("fullyEnrolled","Enrolled in all programs")}),a().createElement(D.ZP,{rows:w,headers:E,isSortable:!0,size:"short"},(function(e){var n=e.rows,o=e.headers,i=e.getHeaderProps,l=e.getTableProps;return a().createElement(L.Z,oe({},l(),{useZebraStyles:!0}),a().createElement(I.Z,null,a().createElement(q.Z,null,o.map((function(e){var r;return a().createElement(M.Z,oe({className:"".concat(k.productiveHeading01," ").concat(k.text02)},i({header:e,isSortable:e.isSortable})),null!==(t=null===(r=e.header)||void 0===r?void 0:r.content)&&void 0!==t?t:e.header)})))),a().createElement(A.Z,null,n.map((function(e){return a().createElement(q.Z,{key:e.id},e.cells.map((function(e){var t;return a().createElement(X.Z,{key:e.id},null!==(r=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==r?r:e.value)})))}))))})))):a().createElement(_.EmptyState,{displayText:l,headerTitle:s,launchForm:O})}},4076:(e,t,r)=>{r.d(t,{Bw:()=>d,YX:()=>p,b$:()=>g,df:()=>f,o9:()=>u,oI:()=>m});var n=r(9857),o=r(3066),a=r(4200),i=r(3863),l=r(8827),s=r(819);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u="custom:(uuid,display,program,dateEnrolled,dateCompleted,location:(uuid,display))";function d(e){var t,r=(0,n.ZP)("/ws/rest/v1/programenrollment?patient=".concat(e,"&v=").concat(u),o.openmrsFetch),i=r.data,l=r.error,s=r.isValidating,c=(null==i||null===(t=i.data)||void 0===t?void 0:t.results.length)>0?null==i?void 0:i.data.results.sort((function(e,t){return t.dateEnrolled>e.dateEnrolled?1:-1})):null,d=null==c?void 0:c.filter((function(e){return!e.dateCompleted}));return{data:i?(0,a.Z)(c,(function(e){var t;return null==e||null===(t=e.program)||void 0===t?void 0:t.uuid})):null,isError:l,isLoading:!i&&!l,isValidating:s,activeEnrollments:d}}function m(e){var t,r,a=(0,n.ZP)("/ws/rest/v1/program?v=custom:(uuid,display,allWorkflows,concept:(uuid,display))",o.openmrsFetch),c=a.data,u=a.error,d=null!==(r=null==c||null===(t=c.data)||void 0===t?void 0:t.results)&&void 0!==r?r:null;return{data:d,isError:u,isLoading:!c&&!u,eligiblePrograms:(0,i.Z)(d,(function(t){return!(0,l.Z)((0,s.Z)(e,"program.uuid"),t.uuid)}))}}function f(e,t){if(!e)return null;var r=e.program,n=e.patient,a=e.dateEnrolled,i=e.dateCompleted,l=e.location;return(0,o.openmrsObservableFetch)("/ws/rest/v1/programenrollment",{method:"POST",headers:{"Content-Type":"application/json"},body:{program:r,patient:n,dateEnrolled:a,dateCompleted:i,location:l},signal:t.signal})}function p(e,t,r){if(!t&&!t.program)return null;t.program;var n=t.dateEnrolled,a=t.dateCompleted,i=t.location;return(0,o.openmrsObservableFetch)("/ws/rest/v1/programenrollment/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:{dateEnrolled:n,dateCompleted:a,location:i},signal:r.signal})}var g=function(e){var t,r,a=(0,o.useConfig)().customUrl,i=d(e),l=i.data,s=i.isError,u=i.isLoading,f=i.isValidating,p=i.activeEnrollments,g=m(l),h=g.data,v=g.eligiblePrograms,b=function(e){var t,r=(0,o.useConfig)().customUrl,a=(0,n.ZP)(r?"".concat(r).concat(e):null,o.openmrsFetch),i=a.data,l=a.error;return{configurablePrograms:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:[],isLoading:!i&&!l,error:l}}(e),y=b.configurablePrograms,E=b.isLoading,w=b.error;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){c(e,t,r[t])}))}return e}({enrollments:l},a?{isLoading:E,isError:w}:{isLoading:u,isError:s}),r=null!=(r={isValidating:f,activeEnrollments:p,availablePrograms:h,eligiblePrograms:v,configurablePrograms:y})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})),t}}}]);