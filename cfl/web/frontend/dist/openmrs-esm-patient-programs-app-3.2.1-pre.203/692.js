"use strict";(self.webpackChunk_openmrs_esm_patient_programs_app=self.webpackChunk_openmrs_esm_patient_programs_app||[]).push([[692],{6983:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(9601),o=r.n(n),a=r(2609),l=r.n(a)()(o());l.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-patient-programs__programs-overview__skeleton___ptnzT{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}.-esm-patient-programs__programs-overview__widgetCard___W1HJv{border:1px solid #e0e0e0}",""]),l.locals={widgetCard:"-esm-patient-programs__programs-overview__widgetCard___W1HJv",skeleton:"-esm-patient-programs__programs-overview__skeleton___ptnzT"};const i=l},3156:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(9902),o=r.n(n),a=r(7030),l=r(4924),i=r(4850),s=r(3771);const d=function(e){var t=e.enrollment,r=(0,l.useTranslation)().t,n="eligible"===t.enrollmentStatus?t.enrollmentFormUuid:t.discontinuationFormUuid,d=function(e){s.formEntrySub.next({formUuid:n,encounterUuid:""}),(0,s.launchPatientWorkspace)("patient-form-entry-workspace",{workspaceTitle:"".concat(null==t?void 0:t.display," ").concat(e," Form")})};return"eligible"===t.enrollmentStatus?o().createElement(a.Z,{onClick:function(){return d(r("enrollment","Enrollment"))},renderIcon:i.Z,kind:"tertiary",size:"small"},r("enroll","Enroll")):o().createElement(a.Z,{onClick:function(){return d(r("discontinue","Discontinue"))},renderIcon:i.Z,kind:"danger--ghost",size:"small"},r("discontinue","Discontinue"))}},7692:(e,t,r)=>{r.r(t),r.d(t,{default:()=>U});var n=r(9902),o=r.n(n),a=r(8011),l=r(321),i=r.n(l),s=r(1195),d=r.n(s),c=r(3275),u=r.n(c),m=r(7162),g=r.n(m),p=r(2094),f=r.n(p),h=r(757),b=r.n(h),v=r(6983),y={};y.styleTagTransform=b(),y.setAttributes=g(),y.insert=u().bind(null,"head"),y.domAPI=d(),y.insertStyleElement=f(),i()(v.Z,y);const E=v.Z&&v.Z.locals?v.Z.locals:void 0;var w=r(3066),P=r(8580),k=r(1145),_=r(7030),Z=r(160),O=r(5223),C=r(2965),S=r(364),j=r(7500),z=r(8345),T=r(1358),x=r(2427),D=r(3783),L=r(3771),X=r(4924),q=r(4076),A=r(6635),F=r(3156);function I(){return I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I.apply(this,arguments)}const U=function(e){var t,r,n=e.basePath,l=e.patientUuid,i=(0,w.useConfig)(),s=(0,X.useTranslation)().t,d=s("programs","Program enrollments"),c=s("carePrograms","Care Programs"),u=s("seeAll","See all"),m=window.spaBase+n+"/programs",g=!!i.customUrl,p=(0,q.b$)(l),f=p.enrollments,h=p.isLoading,b=p.isError,v=p.activeEnrollments,y=p.isValidating,U=p.availablePrograms,M=p.eligiblePrograms,V=p.configurablePrograms,B=(0,w.usePagination)(g?V:null!=f?f:[],5),H=B.results,W=B.goTo,N=B.currentPage,J=o().useCallback((function(){return(0,L.launchPatientWorkspace)("programs-form-workspace")}),[]),$=[{key:"display",header:s("activePrograms","Active programs")},{key:"location",header:s("location","Location")},{key:"dateEnrolled",header:s("dateEnrolled","Date enrolled")},{key:"status",header:s("status","Status")},{key:"actions",header:s("actions","Actions")}],K=o().useMemo((function(){return null==H?void 0:H.map((function(e){var t;return{id:e.uuid,display:e.display,location:null===(t=e.location)||void 0===t?void 0:t.display,dateEnrolled:e.dateEnrolled?(0,w.formatDatetime)(new Date(e.dateEnrolled)):"--",status:g?(0,A.capitalize)(e.enrollmentStatus):e.dateCompleted?"".concat(s("completedOn","Completed On")," ").concat((0,w.formatDate)(new Date(e.dateCompleted))):s("active","Active"),actions:o().createElement(F.Z,{enrollment:e})}}))}),[g,H,s]);return h?o().createElement(P.Z,{role:"progressbar"}):b?o().createElement(L.ErrorState,{error:b,headerTitle:c}):(g?V.length:null==v?void 0:v.length)?o().createElement("div",{className:E.widgetCard},o().createElement(L.CardHeader,{title:c},o().createElement("span",null,y?o().createElement(k.Z,null):null),o().createElement(_.Z,{kind:"ghost",renderIcon:a.Z,iconDescription:"Add programs",onClick:J,disabled:(null==U?void 0:U.length)&&0===(null==M?void 0:M.length)},s("add","Add"))),o().createElement(Z.Z,null,(null==U?void 0:U.length)&&0===(null==M?void 0:M.length)&&o().createElement(O.K0,{style:{minWidth:"100%",margin:"0rem",padding:"0rem"},kind:"info",lowContrast:!0,subtitle:s("noEligibleEnrollments","There are no more programs left to enroll this patient in"),title:s("fullyEnrolled","Enrolled in all programs")}),o().createElement(C.ZP,{rows:K,headers:g?$:$.filter((function(e){return"actions"!==e.key})),isSortable:!0,size:"short"},(function(e){var n=e.rows,a=e.headers,l=e.getHeaderProps,i=e.getTableProps;return o().createElement(S.Z,I({},i(),{useZebraStyles:!0}),o().createElement(j.Z,null,o().createElement(z.Z,null,a.map((function(e){var r;return o().createElement(T.Z,I({className:"".concat(E.productiveHeading01," ").concat(E.text02)},l({header:e,isSortable:e.isSortable})),null!==(t=null===(r=e.header)||void 0===r?void 0:r.content)&&void 0!==t?t:e.header)})))),o().createElement(x.Z,null,n.map((function(e){return o().createElement(z.Z,{key:e.id},e.cells.map((function(e){var t;return o().createElement(D.Z,{key:e.id},null!==(r=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==r?r:e.value)})))}))))}))),o().createElement(L.PatientChartPagination,{currentItems:H.length,onPageNumberChange:function(e){var t=e.page;return W(t)},pageNumber:N,pageSize:5,totalItems:g?V.length:null==f?void 0:f.length,dashboardLinkUrl:m,dashboardLinkLabel:u})):o().createElement(L.EmptyState,{displayText:d,headerTitle:c,launchForm:J})}},4076:(e,t,r)=>{r.d(t,{Bw:()=>u,YX:()=>p,b$:()=>f,df:()=>g,o9:()=>c,oI:()=>m});var n=r(9857),o=r(3066),a=r(4200),l=r(3863),i=r(8827),s=r(819);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var c="custom:(uuid,display,program,dateEnrolled,dateCompleted,location:(uuid,display))";function u(e){var t,r=(0,n.ZP)("/ws/rest/v1/programenrollment?patient=".concat(e,"&v=").concat(c),o.openmrsFetch),l=r.data,i=r.error,s=r.isValidating,d=(null==l||null===(t=l.data)||void 0===t?void 0:t.results.length)>0?null==l?void 0:l.data.results.sort((function(e,t){return t.dateEnrolled>e.dateEnrolled?1:-1})):null,u=null==d?void 0:d.filter((function(e){return!e.dateCompleted}));return{data:l?(0,a.Z)(d,(function(e){var t;return null==e||null===(t=e.program)||void 0===t?void 0:t.uuid})):null,isError:i,isLoading:!l&&!i,isValidating:s,activeEnrollments:u}}function m(e){var t,r,a=(0,n.ZP)("/ws/rest/v1/program?v=custom:(uuid,display,allWorkflows,concept:(uuid,display))",o.openmrsFetch),d=a.data,c=a.error,u=null!==(r=null==d||null===(t=d.data)||void 0===t?void 0:t.results)&&void 0!==r?r:null;return{data:u,isError:c,isLoading:!d&&!c,eligiblePrograms:(0,l.Z)(u,(function(t){return!(0,i.Z)((0,s.Z)(e,"program.uuid"),t.uuid)}))}}function g(e,t){if(!e)return null;var r=e.program,n=e.patient,a=e.dateEnrolled,l=e.dateCompleted,i=e.location;return(0,o.openmrsObservableFetch)("/ws/rest/v1/programenrollment",{method:"POST",headers:{"Content-Type":"application/json"},body:{program:r,patient:n,dateEnrolled:a,dateCompleted:l,location:i},signal:t.signal})}function p(e,t,r){if(!t&&!t.program)return null;t.program;var n=t.dateEnrolled,a=t.dateCompleted,l=t.location;return(0,o.openmrsObservableFetch)("/ws/rest/v1/programenrollment/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:{dateEnrolled:n,dateCompleted:a,location:l},signal:r.signal})}var f=function(e){var t,r,a=(0,o.useConfig)().customUrl,l=u(e),i=l.data,s=l.isError,c=l.isLoading,g=l.isValidating,p=l.activeEnrollments,f=m(i),h=f.data,b=f.eligiblePrograms,v=function(e){var t,r=(0,o.useConfig)().customUrl,a=(0,n.ZP)(r?"".concat(r).concat(e):null,o.openmrsFetch),l=a.data,i=a.error;return{configurablePrograms:null!==(t=null==l?void 0:l.data)&&void 0!==t?t:[],isLoading:!l&&!i,error:i}}(e),y=v.configurablePrograms,E=v.isLoading,w=v.error;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){d(e,t,r[t])}))}return e}({enrollments:i},a?{isLoading:E,isError:w}:{isLoading:c,isError:s}),r=null!=(r={isValidating:g,activeEnrollments:p,availablePrograms:h,eligiblePrograms:b,configurablePrograms:y})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})),t}}}]);