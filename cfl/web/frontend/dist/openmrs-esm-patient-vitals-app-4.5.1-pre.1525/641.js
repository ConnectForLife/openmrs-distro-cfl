(globalThis.webpackChunk_openmrs_esm_patient_vitals_app=globalThis.webpackChunk_openmrs_esm_patient_vitals_app||[]).push([[641],{1757:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var n=i(272),r=i.n(n),a=i(2609),o=i.n(a)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-vitals__vitals-biometrics-form__productiveHeading03___pv0zR,.-esm-patient-vitals__vitals-biometrics-form__vitalsTitle___KrUnH{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-vitals__vitals-biometrics-form__vitalsTitle___KrUnH{margin:0 .5rem 1rem 0}.-esm-patient-vitals__vitals-biometrics-form__danger___Sl84T{color:#da1e28}.-esm-patient-vitals__vitals-biometrics-form__button___w5V8j{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-vitals__vitals-biometrics-form__tablet___kfbT3{padding:1.5rem 1rem;background-color:#fff}.-esm-patient-vitals__vitals-biometrics-form__desktop___M2h6I{padding:0rem}.-esm-patient-vitals__vitals-biometrics-form__form___X68Me{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 6rem)}.-esm-patient-vitals__vitals-biometrics-form__grid___MnsKn{margin:1rem}.-esm-patient-vitals__vitals-biometrics-form__row___XW3d8{margin:.5rem 0rem 0rem;display:flex;flex-flow:row wrap}.-esm-patient-vitals__vitals-biometrics-form__column___ZeB6k{flex-grow:1;flex-basis:0}.-esm-patient-vitals__vitals-biometrics-form__spacer___dYIyX{margin-top:3rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/vitals/vitals-biometrics-form/vitals-biometrics-form.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CClDF,4ICq0BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDj0BJ,kEAEE,qBAAA,CAGF,6DACE,aDKO,CCFT,6DACE,WAAA,CACA,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAGF,6DACE,mBAAA,CACA,qBD3BM,CC8BR,8DACE,YAAA,CAGF,2DACE,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,yBAAA,CAGF,2DACE,WAAA,CAGF,0DACE,sBAAA,CACA,YAAA,CACA,kBAAA,CAGF,6DACE,WAAA,CACA,YAAA,CAGF,6DACE,eAAA",sourceRoot:""}]),o.locals={productiveHeading03:"-esm-patient-vitals__vitals-biometrics-form__productiveHeading03___pv0zR",vitalsTitle:"-esm-patient-vitals__vitals-biometrics-form__vitalsTitle___KrUnH",danger:"-esm-patient-vitals__vitals-biometrics-form__danger___Sl84T",button:"-esm-patient-vitals__vitals-biometrics-form__button___w5V8j",tablet:"-esm-patient-vitals__vitals-biometrics-form__tablet___kfbT3",desktop:"-esm-patient-vitals__vitals-biometrics-form__desktop___M2h6I",form:"-esm-patient-vitals__vitals-biometrics-form__form___X68Me",grid:"-esm-patient-vitals__vitals-biometrics-form__grid___MnsKn",row:"-esm-patient-vitals__vitals-biometrics-form__row___XW3d8",column:"-esm-patient-vitals__vitals-biometrics-form__column___ZeB6k",spacer:"-esm-patient-vitals__vitals-biometrics-form__spacer___dYIyX"};const l=o},1785:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var n=i(272),r=i.n(n),a=i(2609),o=i.n(a)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-vitals__vitals-biometrics-input__label01___jkE3w,.-esm-patient-vitals__vitals-biometrics-input__vitalsBiometricInputLabel01___sY9Bu{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-patient-vitals__vitals-biometrics-input__bodyLong01___ddl2G,.-esm-patient-vitals__vitals-biometrics-input__textarea___AVm9q{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-patient-vitals__vitals-biometrics-input__productiveHeading04___DGZWE,.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5,.-esm-patient-vitals__vitals-biometrics-input__textInput___sxOQM{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-patient-vitals__vitals-biometrics-input__inputContainer___OFahY{width:11.625rem;border-bottom:.063rem solid #8d8d8d;margin-bottom:1rem}.-esm-patient-vitals__vitals-biometrics-input__vitalsBiometricInputLabel01___sY9Bu{color:#525252;margin-bottom:.5rem}.-esm-patient-vitals__vitals-biometrics-input__textInput___sxOQM{border:none;text-align:center;padding:0;color:#161616}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5{height:4.875rem;display:flex;justify-content:center;flex-direction:column;text-align:center;padding:.5rem;color:#525252;background-color:#fff}.omrs-breakpoint-gt-tablet .-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5{background-color:#f4f4f4}.-esm-patient-vitals__vitals-biometrics-input__textarea___AVm9q{border:none;text-align:left}.-esm-patient-vitals__vitals-biometrics-input__textarea___AVm9q textarea{border-bottom:none}.-esm-patient-vitals__vitals-biometrics-input__centerDiv___BrhaH{display:flex;flex-direction:row;align-items:center;text-align:center;margin:0;padding:0}.-esm-patient-vitals__vitals-biometrics-input__unitName___bqjSg{margin-bottom:.5rem}.-esm-patient-vitals__vitals-biometrics-input__disableInput___L56tw{background-color:#f4f4f4}.-esm-patient-vitals__vitals-biometrics-input__danger___c0A8K{color:#da1e28}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/vitals/vitals-biometrics-form/vitals-biometrics-input.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,kJCs0BI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CDl0BJ,kICk0BI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CD9zBJ,sNC8zBI,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,sDAAA,CD1zBJ,sEACE,eAAA,CACA,mCAAA,CACA,kBEYW,CFTb,mFAEE,aDnBQ,CCoBR,mBEJW,CFOb,iEACE,WAAA,CAEA,iBAAA,CACA,SAAA,CACA,aD7BM,CCgCR,0EAEE,eAAA,CACA,YAAA,CACA,sBAAA,CACA,qBAAA,CACA,iBAAA,CACA,aEtBW,CFuBX,aDvCQ,CCwCR,qBD5CM,CC+CR,qGACA,wBDjDQ,CCoDR,gEACE,WAAA,CAEA,eAAA,CAEA,yEACE,kBAAA,CAIJ,iEACE,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,iBAAA,CACA,QAAA,CACA,SAAA,CAGF,gEACE,mBEnDW,CFsDb,oEACE,wBD5EM,CC+ER,8DACE,aD5DO",sourceRoot:""}]),o.locals={label01:"-esm-patient-vitals__vitals-biometrics-input__label01___jkE3w",vitalsBiometricInputLabel01:"-esm-patient-vitals__vitals-biometrics-input__vitalsBiometricInputLabel01___sY9Bu",bodyLong01:"-esm-patient-vitals__vitals-biometrics-input__bodyLong01___ddl2G",textarea:"-esm-patient-vitals__vitals-biometrics-input__textarea___AVm9q",productiveHeading04:"-esm-patient-vitals__vitals-biometrics-input__productiveHeading04___DGZWE",textInputContainer:"-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5",textInput:"-esm-patient-vitals__vitals-biometrics-input__textInput___sxOQM",inputContainer:"-esm-patient-vitals__vitals-biometrics-input__inputContainer___OFahY",centerDiv:"-esm-patient-vitals__vitals-biometrics-input__centerDiv___BrhaH",unitName:"-esm-patient-vitals__vitals-biometrics-input__unitName___bqjSg",disableInput:"-esm-patient-vitals__vitals-biometrics-input__disableInput___L56tw",danger:"-esm-patient-vitals__vitals-biometrics-input__danger___c0A8K"};const l=o},857:(e,t,i)=>{var n=i(7772).Symbol;e.exports=n},3366:(e,t,i)=>{var n=i(857),r=i(2107),a=i(7157),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?r(e):a(e)}},1242:(e,t,i)=>{var n="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;e.exports=n},2107:(e,t,i)=>{var n=i(857),r=Object.prototype,a=r.hasOwnProperty,o=r.toString,l=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,l),i=e[l];try{e[l]=void 0;var n=!0}catch(e){}var r=o.call(e);return n&&(t?e[l]=i:delete e[l]),r}},7157:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},7772:(e,t,i)=>{var n=i(1242),r="object"==typeof self&&self&&self.Object===Object&&self,a=n||r||Function("return this")();e.exports=a},537:(e,t,i)=>{var n=i(3366),r=i(5125);e.exports=function(e){return"number"==typeof e||r(e)&&"[object Number]"==n(e)}},5125:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},4641:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>F});var n=i(268),r=i.n(n),a=i(4924),o=i(906),l=i(6217),s=i(1336),c=i(8425),u=i(269),m=i(1354),d=i.n(m),p=i(1583),_=i.n(p),A=i(7378),v=i.n(A),g=i(5993),b=i.n(g),f=i(4154),y=i.n(f),h=i(8141),C=i.n(h),w=i(1785),E={};E.styleTagTransform=C(),E.setAttributes=b(),E.insert=v().bind(null,"head"),E.domAPI=_(),E.insertStyleElement=y(),d()(w.Z,E);const x=w.Z&&w.Z.locals?w.Z.locals:void 0;function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function O(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function S(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){O(e,t,i[t])}))}return e}const j=function(e){var t,i,l=e.title,c=e.onInputChange,u=e.textFields,m=e.unitSymbol,d=e.textFieldStyles,p=e.textFieldWidth,_=e.placeholder,A=e.disabled,v=e.inputIsNormal,g=(0,a.useTranslation)().t,b="tablet"===(0,o.useLayoutType)(),f=(t=(0,n.useState)(!1),i=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(t,i)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?B(e,t):void 0}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=f[0],h=f[1];return r().createElement("div",{className:x.inputContainer,style:{width:p}},r().createElement("p",{className:x.vitalsBiometricInputLabel01},l),r().createElement("div",{className:"".concat(x.textInputContainer," ").concat(A&&x.disableInput," ").concat(!v&&x.danger),style:S({},d)},r().createElement("div",{className:x.centerDiv},u.map((function(e){return"number"===e.type?r().createElement(n.Fragment,{key:e.name},r().createElement(s.oil,{style:S({},d),className:"".concat(x.textInput," ").concat(A&&x.disableInput," ").concat(e.className," ").concat(!v&&x.danger),id:e.name,invalid:y,type:e.type,min:e.min,max:e.max,name:e.name,onChange:function(e){return t=e.target.value,void h(!(Number(t)||""===t));var t},onInput:c,labelText:"",value:e.value,title:e.name,light:b}),null==e?void 0:e.separator):r().createElement(s.Kx8,{key:e.name,style:S({},d),className:x.textarea,id:e.name,name:e.name,labelText:"",onChange:c,rows:2,placeholder:_,value:e.value,title:e.name,light:b})}))),r().createElement("p",{className:x.unitName},m)),!v||y?r().createElement(s.lXp,{className:x.danger},g("numericInputError","Must be a number with in acceptable ranges")):null)};var N=i(1757),I={};I.styleTagTransform=C(),I.setAttributes=b(),I.insert=v().bind(null,"head"),I.domAPI=_(),I.insertStyleElement=y(),d()(N.Z,I);const U=N.Z&&N.Z.locals?N.Z.locals:void 0;function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function P(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function k(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){P(e,t,i[t])}))}return e}function R(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i.push.apply(i,n)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const F=function(e){var t,i,m,d,p,_,A,v,g,b,f,y,h=e.patientUuid,C=e.closeWorkspace,w=(0,a.useTranslation)().t,E="tablet"===(0,o.useLayoutType)(),x=(0,o.useSession)(),B=(0,o.usePatient)(h),O=(0,o.useVisit)(h).currentVisit,S=(0,u.yL)(h).mutate,N=(0,o.useConfig)(),I=(0,l.useVitalsConceptMetadata)(),D=I.data,P=I.conceptMetadata,F=I.conceptRanges,M=N.biometrics,G=T((0,n.useState)(),2),X=G[0],V=G[1],W=T((0,n.useState)(),2),L=W[0],q=W[1],z=T((0,n.useState)(!1),2),Y=z[0],Z=z[1],H=null===(i=null==O||null===(t=O.encounters)||void 0===t?void 0:t.find((function(e){var t;return(null==e||null===(t=e.form)||void 0===t?void 0:t.uuid)===N.vitals.formUuid})))||void 0===i?void 0:i.uuid,K={midUpperArmCircumferenceRange:F.get(N.concepts.midUpperArmCircumferenceUuid),diastolicBloodPressureRange:F.get(N.concepts.diastolicBloodPressureUuid),systolicBloodPressureRange:F.get(N.concepts.systolicBloodPressureUuid),oxygenSaturationRange:F.get(N.concepts.oxygenSaturationUuid),respiratoryRateRange:F.get(N.concepts.respiratoryRateUuid),temperatureRange:F.get(N.concepts.temperatureUuid),weightRange:F.get(N.concepts.weightUuid),heightRange:F.get(N.concepts.heightUuid),pulseRange:F.get(N.concepts.pulseUuid)};return(0,n.useEffect)((function(){if((null==X?void 0:X.height)&&(null==X?void 0:X.weight)){var e=(0,c.V)(Number(X.weight),Number(X.height));q(e)}}),[null==X?void 0:X.weight,null==X?void 0:X.height]),N.vitals.useFormEngine?r().createElement(o.ExtensionSlot,{extensionSlotName:"form-widget-slot",state:{view:"form",formUuid:N.vitals.formUuid,visitUuid:null==O?void 0:O.uuid,visitTypeUuid:null==O||null===(m=O.visitType)||void 0===m?void 0:m.uuid,patientUuid:null!=h?h:null,patient:B,encounterUuid:H,closeWorkspace:C}}):r().createElement(s.l09,{className:U.form},r().createElement("div",{className:U.grid},r().createElement(s.Kqy,null,r().createElement(s.sgG,{className:U.column},r().createElement("p",{className:U.vitalsTitle},w("recordVitals","Record vitals"))),r().createElement(s.X2j,{className:U.row},r().createElement(s.sgG,{className:U.column},r().createElement(j,{title:w("temp","Temp"),onInputChange:function(e){V(R(k({},X),{temperature:e.target.value}))},textFields:[{name:w("temperature","Temperature"),type:"number",value:(null==X?void 0:X.temperature)||"",min:K.temperatureRange.lowAbsolute,max:K.temperatureRange.highAbsolute}],unitSymbol:null!==(d=D.get(N.concepts.temperatureUuid))&&void 0!==d?d:"",inputIsNormal:(0,c.X)(P,N.concepts.temperatureUuid,null==X?void 0:X.temperature)})),r().createElement(s.sgG,{className:U.column},r().createElement(j,{title:w("bloodPressure","Blood Pressure"),onInputChange:function(e){"systolic"===e.target.name?V(R(k({},X),{systolicBloodPressure:e.target.value})):V(R(k({},X),{diastolicBloodPressure:e.target.value}))},textFields:[{name:w("systolic","systolic"),separator:"/",type:"number",value:(null==X?void 0:X.systolicBloodPressure)||"",min:K.systolicBloodPressureRange.lowAbsolute,max:K.systolicBloodPressureRange.highAbsolute},{name:w("diastolic","diastolic"),type:"number",value:(null==X?void 0:X.diastolicBloodPressure)||"",min:K.diastolicBloodPressureRange.lowAbsolute,max:K.diastolicBloodPressureRange.highAbsolute}],unitSymbol:null!==(p=D.get(N.concepts.systolicBloodPressureUuid))&&void 0!==p?p:"",inputIsNormal:(0,c.X)(P,N.concepts.systolicBloodPressureUuid,null==X?void 0:X.systolicBloodPressure)&&(0,c.X)(P,N.concepts.diastolicBloodPressureUuid,null==X?void 0:X.diastolicBloodPressure)})),r().createElement(s.sgG,{className:U.column},r().createElement(j,{title:w("pulse","Pulse"),onInputChange:function(e){V(R(k({},X),{pulse:e.target.value}))},textFields:[{name:w("pulse","Pulse"),type:"number",value:(null==X?void 0:X.pulse)||"",min:K.pulseRange.lowAbsolute,max:K.pulseRange.highAbsolute}],unitSymbol:null!==(_=D.get(N.concepts.pulseUuid))&&void 0!==_?_:"",inputIsNormal:(0,c.X)(P,N.concepts.pulseUuid,null==X?void 0:X.pulse)})),r().createElement(s.sgG,{className:U.column},r().createElement(j,{title:w("spo2","SpO2"),onInputChange:function(e){V(R(k({},X),{oxygenSaturation:e.target.value}))},textFields:[{name:w("oxygenSaturation","Oxygen Saturation"),type:"number",value:(null==X?void 0:X.oxygenSaturation)||"",min:K.oxygenSaturationRange.lowAbsolute,max:K.oxygenSaturationRange.highAbsolute}],unitSymbol:null!==(A=D.get(N.concepts.oxygenSaturationUuid))&&void 0!==A?A:"",inputIsNormal:(0,c.X)(P,N.concepts.oxygenSaturationUuid,null==X?void 0:X.oxygenSaturation)}))),r().createElement(s.X2j,{className:U.row},r().createElement(s.sgG,{className:U.column},r().createElement(j,{title:w("respirationRate","Respiration Rate"),onInputChange:function(e){V(R(k({},X),{respiratoryRate:e.target.value}))},textFields:[{name:w("respirationRate","Respiration Rate"),type:"number",value:(null==X?void 0:X.respiratoryRate)||"",min:K.respiratoryRateRange.lowAbsolute,max:K.respiratoryRateRange.highAbsolute}],unitSymbol:null!==(v=D.get(N.concepts.respiratoryRateUuid))&&void 0!==v?v:"",inputIsNormal:(0,c.X)(P,N.concepts.respiratoryRateUuid,null==X?void 0:X.respiratoryRate)}))),r().createElement(s.X2j,{className:U.row},r().createElement(s.sgG,{className:U.column},r().createElement(j,{title:w("notes","Notes"),onInputChange:function(e){V(R(k({},X),{generalPatientNote:e.target.value}))},textFields:[{name:w("notes","Notes"),type:"textArea",value:null==X?void 0:X.generalPatientNote}],textFieldWidth:"26.375rem",placeholder:w("additionalNoteText","Type any additional notes here"),inputIsNormal:!0})))),r().createElement(s.Kqy,{className:U.spacer},r().createElement(s.sgG,{className:U.column},r().createElement("p",{className:U.vitalsTitle},w("recordBiometrics","Record biometrics"))),r().createElement(s.X2j,{className:U.row},r().createElement(s.sgG,{className:U.column},r().createElement(j,{title:w("weight","Weight"),onInputChange:function(e){V(R(k({},X),{weight:e.target.value}))},textFields:[{name:w("weight","Weight"),type:"number",value:(null==X?void 0:X.weight)||"",min:K.weightRange.lowAbsolute,max:K.weightRange.highAbsolute}],unitSymbol:null!==(g=D.get(N.concepts.weightUuid))&&void 0!==g?g:"",inputIsNormal:(0,c.X)(P,N.concepts.weightUuid,null==X?void 0:X.weight)})),r().createElement(s.sgG,{className:U.column},r().createElement(j,{title:w("height","Height"),onInputChange:function(e){V(R(k({},X),{height:e.target.value}))},textFields:[{name:w("height","Height"),type:"number",value:(null==X?void 0:X.height)||"",min:K.heightRange.lowAbsolute,max:K.heightRange.highAbsolute}],unitSymbol:null!==(b=D.get(N.concepts.heightUuid))&&void 0!==b?b:"",inputIsNormal:!0})),r().createElement(s.sgG,{className:U.column},r().createElement(j,{title:w("bmiCalc","BMI (calc.)"),onInputChange:function(){},textFields:[{name:w("bmi","BMI"),type:"number",value:L||""}],unitSymbol:M.bmiUnit,disabled:!0,inputIsNormal:(y=L,void 0===y||""===y||y>=18.5&&y<=24.9)})),r().createElement(s.sgG,{className:U.column},r().createElement(j,{title:w("muac","MUAC"),onInputChange:function(e){V(R(k({},X),{midUpperArmCircumference:e.target.value}))},textFields:[{name:w("muac","MUAC"),type:"number",value:(null==X?void 0:X.midUpperArmCircumference)||"",min:K.midUpperArmCircumferenceRange.lowAbsolute,max:K.midUpperArmCircumferenceRange.highAbsolute}],unitSymbol:null!==(f=D.get(N.concepts.midUpperArmCircumferenceUuid))&&void 0!==f?f:"",inputIsNormal:(0,c.X)(P,N.concepts.midUpperArmCircumferenceUuid,null==X?void 0:X.midUpperArmCircumference)}))))),r().createElement(s.uVA,{className:E?U.tablet:U.desktop},r().createElement(s.zxk,{className:U.button,kind:"secondary",onClick:function(){return C()}},w("discard","Discard")),r().createElement(s.zxk,{className:U.button,kind:"primary",onClick:function(e){e.preventDefault();var t=!0;for(var i in X)if(0==(0,c.X)(P,N.concepts[i+"Uuid"],X[i])){t=!1,(0,o.showNotification)({title:w("vitalsAndBiometricsSaveError","Error saving vitals and biometrics"),kind:"error",critical:!0,description:w("checkForValidity","Some of the values entered are invalid")});break}if(t){var n;Z(!0);var r=new AbortController;(0,u.tX)(N.vitals.encounterTypeUuid,N.vitals.formUuid,N.concepts,h,X,new Date,r,null==x||null===(n=x.sessionLocation)||void 0===n?void 0:n.uuid).then((function(e){201===e.status&&(S(),C(),(0,o.showToast)({critical:!0,kind:"success",title:w("vitalsAndBiometricsRecorded","Vitals and Biometrics saved"),description:w("vitalsAndBiometricsNowAvailable","They are now visible on the Vitals and Biometrics page")}))})).catch((function(e){(0,o.createErrorHandler)(),(0,o.showNotification)({title:w("vitalsAndBiometricsSaveError","Error saving vitals and biometrics"),kind:"error",critical:!0,description:null==e?void 0:e.message})})).finally((function(){r.abort()}))}},disabled:Y,type:"submit"},w("saveAndClose","Save and close"))))}},8425:(e,t,i)=>{"use strict";i.d(t,{V:()=>a,X:()=>o});var n=i(537),r=i.n(n);function a(e,t){if(e&&t)return e>0&&t>0?Number((e/Math.pow(t/100,2)).toFixed(1)):void 0}function o(e,t,i){if(void 0===i||""===i)return!0;var n=e.find((function(e){return e.uuid===t}));return!r()(null==n?void 0:n.lowAbsolute)||!r()(null==n?void 0:n.hiAbsolute)||Number(i)>=Number(n.lowAbsolute)&&Number(i)<=Number(n.hiAbsolute)}},269:(e,t,i)=>{"use strict";i.d(t,{WK:()=>g,tQ:()=>v,tX:()=>p,wA:()=>A,yL:()=>d});var n=i(3255),r=i(906),a=i(6217),o=i(8425);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){s(e,t,i[t])}))}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i.push.apply(i,n)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){var t,i,l,d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],p=(0,r.useConfig)().concepts,_=(0,a.useVitalsConceptMetadata)().conceptMetadata,b=[p.heightUuid,p.midUpperArmCircumferenceUuid,p.weightUuid],f=d?Object.values(p).join(","):Object.values(p).filter((function(e){return!b.includes(e)})).join(","),y="".concat(r.fhirBaseUrl,"/Observation?subject:Patient=").concat(e,"&code=")+f+"&_summary=data&_sort=-date"+"&_count=".concat(100,"\n        "),h=(0,n.ZP)(y,r.openmrsFetch),C=h.data,w=h.error,E=h.isLoading,x=h.isValidating,B=h.mutate,O=function(e){switch(e){case p.systolicBloodPressureUuid:return"systolic";case p.diastolicBloodPressureUuid:return"diastolic";case p.pulseUuid:return"pulse";case p.temperatureUuid:return"temperature";case p.oxygenSaturationUuid:return"spo2";case p.respiratoryRateUuid:return"respiratoryRate";case p.heightUuid:return"height";case p.weightUuid:return"weight";case p.midUpperArmCircumferenceUuid:return"muac"}},S=function(e){var t,i,n,r,a,o,l,s;return{code:null==e||null===(t=e.code)||void 0===t||null===(i=t.coding)||void 0===i||null===(n=i[0])||void 0===n?void 0:n.code,interpretation:A(null==e||null===(r=e.valueQuantity)||void 0===r?void 0:r.value,v(null==e||null===(a=e.code)||void 0===a||null===(o=a.coding)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.code,_)),recordedDate:null==e?void 0:e.effectiveDateTime,value:null==e||null===(s=e.valueQuantity)||void 0===s?void 0:s.value}},j=new Map,N=null==C||null===(t=C.data)||void 0===t||null===(i=t.entry)||void 0===i?void 0:i.map((function(e){return null!==(l=e.resource)&&void 0!==l?l:[]})).map(S);null==N||N.map((function(e){var t,i,n=new Date(new Date(e.recordedDate)).toISOString();j.has(n)&&j.get(n)?j.set(n,u(c({},j.get(n)),(s(t={},O(e.code),e.value),s(t,O(e.code)+"Interpretation",e.interpretation),t))):e.value&&j.set(n,(s(i={},O(e.code),e.value),s(i,O(e.code)+"Interpretation",e.interpretation),i))}));var I=Array.from(j).map((function(e,t){var i=m(e,2),n=i[0],r=i[1];return u(c({},r),{id:t.toString(),bmi:(0,o.V)(Number(r.weight),Number(r.height)),date:n,bloodPressureInterpretation:g(r.systolic,r.diastolic,p,_)})}));return{vitals:I,isError:w,isLoading:E,isValidating:x,mutate:B}}function p(e,t,i,n,a,o,l,s){return(0,r.openmrsFetch)("/ws/rest/v1/encounter",{method:"POST",headers:{"Content-Type":"application/json"},signal:l.signal,body:{patient:n,encounterDatetime:o,location:s,encounterType:e,form:t,obs:_(a,i)}})}function _(e,t){return Object.entries(e).filter((function(e){var t=m(e,2);return t[0],null!=t[1]})).map((function(e){var i=m(e,2),n=i[0],r=i[1];return{concept:t[n+"Uuid"],value:r}}))}function A(e,t){return(null==t?void 0:t.hiCritical)&&e>=t.hiCritical?"critically_high":(null==t?void 0:t.hiNormal)&&e>t.hiNormal?"high":(null==t?void 0:t.lowCritical)&&e<=t.lowCritical?"critically_low":(null==t?void 0:t.lowNormal)&&e<t.lowNormal?"low":"normal"}function v(e,t){return e&&(null==t?void 0:t.length)?null==t?void 0:t.find((function(t){return t.uuid===e})):null}function g(e,t,i,n){var r=A(e,v(null==i?void 0:i.systolicBloodPressureUuid,n)),a=A(t,v(null==i?void 0:i.diastolicBloodPressureUuid,n));return"critically_high"===r||"critically_high"===a?"critically_high":"critically_low"===r||"critically_low"===a?"critically_low":"high"===r||"high"===a?"high":"low"===r||"low"===a?"low":"normal"}}}]);