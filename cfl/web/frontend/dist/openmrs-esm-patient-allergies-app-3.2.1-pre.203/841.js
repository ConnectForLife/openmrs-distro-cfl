"use strict";(self.webpackChunk_openmrs_esm_patient_allergies_app=self.webpackChunk_openmrs_esm_patient_allergies_app||[]).push([[841],{4336:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(9601),i=n.n(r),a=n(2609),l=n.n(a)()(i());l.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-patient-allergies__allergies-overview__skeleton___ig0DL{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}.-esm-patient-allergies__allergies-overview__widgetCard___inKPd{border:1px solid #e0e0e0}",""]),l.locals={widgetCard:"-esm-patient-allergies__allergies-overview__widgetCard___inKPd",skeleton:"-esm-patient-allergies__allergies-overview__skeleton___ig0DL"};const o=l},9841:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var r=n(9902),i=n.n(r),a=n(8011),l=n(8580),o=n(1145),s=n(7030),c=n(160),d=n(3806),u=n(364),g=n(7500),m=n(8804),p=n(1358),f=n(2427),v=n(3783),h=n(4924),b=n(3771),y=n(3066),_=n(8179),w=n(6705),P=n(321),k=n.n(P),E=n(1195),O=n.n(E),S=n(3275),Z=n.n(S),j=n(7162),z=n.n(j),x=n(2094),C=n.n(x),I=n(757),T=n.n(I),A=n(4336),D={};D.styleTagTransform=T(),D.setAttributes=z(),D.insert=Z().bind(null,"head"),D.domAPI=O(),D.insertStyleElement=C(),k()(A.Z,D);const q=A.Z&&A.Z.locals?A.Z.locals:void 0;function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(){return X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X.apply(this,arguments)}const B=function(e){var t,n,r=e.patient,P=e.showAddAllergyButton,k=e.basePath,E=(0,h.useTranslation)().t,O=E("allergyIntolerances","allergy intolerances"),S=E("allergies","Allergies"),Z=E("seeAll","See all"),j=window.spaBase+k+"/allergies",z=(0,w.PI)(r.id),x=z.allergies,C=z.isError,I=z.isLoading,T=z.isValidating,A=(0,y.usePagination)(null!=x?x:[],_.mI),D=A.results,B=A.goTo,L=A.currentPage,N=[{key:"display",header:E("name","Name")},{key:"reactions",header:E("reactions","Reactions")}],U=i().useMemo((function(){return null==D?void 0:D.map((function(e){var t,n,r;return n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){M(e,t,n[t])}))}return e}({},e),r=null!=(r={reactions:"".concat((null===(t=e.reactionManifestations)||void 0===t?void 0:t.join(", "))||""," ").concat(e.reactionSeverity?"(".concat(e.reactionSeverity,")"):"")})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})),n}))}),[D]),H=i().useCallback((function(){return(0,b.launchPatientWorkspace)(_.Hz)}),[]);return I?i().createElement(l.Z,{role:"progressbar"}):C?i().createElement(b.ErrorState,{error:C,headerTitle:S}):(null==x?void 0:x.length)?i().createElement("div",{className:q.widgetCard},i().createElement(b.CardHeader,{title:S},i().createElement("span",null,T?i().createElement(o.Z,null):null),P&&i().createElement(s.Z,{kind:"ghost",renderIcon:a.Z,iconDescription:"Add allergies",onClick:H},E("add","Add"))),i().createElement(c.Z,null,i().createElement(d.ZP,{rows:U,headers:N,isSortable:!0,size:"short"},(function(e){var r=e.rows,a=e.headers,l=e.getHeaderProps,o=e.getTableProps;return i().createElement(u.Z,X({},o(),{useZebraStyles:!0}),i().createElement(g.Z,null,i().createElement(m.Z,null,a.map((function(e){var n;return i().createElement(p.Z,X({className:"".concat(q.productiveHeading01," ").concat(q.text02)},l({header:e,isSortable:e.isSortable})),null!==(t=null===(n=e.header)||void 0===n?void 0:n.content)&&void 0!==t?t:e.header)})))),i().createElement(f.Z,null,r.map((function(e){return i().createElement(m.Z,{key:e.id},e.cells.map((function(e){var t;return i().createElement(v.Z,{key:e.id},null!==(n=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==n?n:e.value)})))}))))}))),i().createElement(b.PatientChartPagination,{currentItems:D.length,onPageNumberChange:function(e){var t=e.page;return B(t)},pageNumber:L,pageSize:_.mI,dashboardLinkUrl:j,dashboardLinkLabel:Z,totalItems:x.length})):i().createElement(b.EmptyState,{displayText:O,headerTitle:S,launchForm:H})}},6705:(e,t,n)=>{n.d(t,{PI:()=>l});var r=n(9857),i=n(5573),a=n(3066);function l(e){var t,n,i=(0,r.ZP)("".concat(a.fhirBaseUrl,"/AllergyIntolerance?patient=").concat(e),a.openmrsFetch),l=i.data,s=i.error,c=i.isValidating,d=(null==l||null===(t=l.data)||void 0===t?void 0:t.total)>0?null==l?void 0:l.data.entry.map((function(e){return null!==(n=e.resource)&&void 0!==n?n:[]})).map(o).sort((function(e,t){return t.lastUpdated>e.lastUpdated?1:-1})):null;return{allergies:l?d:null,isError:s,isLoading:!l&&!s,isValidating:c}}function o(e){var t,n,r,a,l,o,s,c,d,u,g,m,p,f,v,h=null===(t=null==e?void 0:e.reaction[0])||void 0===t||null===(n=t.manifestation)||void 0===n?void 0:n.map((function(e){var t;return null===(t=e.coding[0])||void 0===t?void 0:t.display}));return{id:null==e?void 0:e.id,clinicalStatus:null===(a=null==e||null===(r=e.clinicalStatus)||void 0===r?void 0:r.coding[0])||void 0===a?void 0:a.display,criticality:null==e?void 0:e.criticality,display:null===(o=null==e||null===(l=e.code)||void 0===l?void 0:l.coding[0])||void 0===o?void 0:o.display,recordedDate:null==e?void 0:e.recordedDate,recordedBy:null==e||null===(s=e.recorder)||void 0===s?void 0:s.display,recorderType:null==e||null===(c=e.recorder)||void 0===c?void 0:c.type,note:null==e||null===(d=e.note)||void 0===d||null===(u=d[0])||void 0===u?void 0:u.text,reactionToSubstance:null===(p=null===(g=null==e?void 0:e.reaction[0])||void 0===g||null===(m=g.substance)||void 0===m?void 0:m.coding[1])||void 0===p?void 0:p.display,reactionManifestations:h,reactionSeverity:(0,i.Z)(null===(f=null==e?void 0:e.reaction[0])||void 0===f?void 0:f.severity),lastUpdated:null==e||null===(v=e.meta)||void 0===v?void 0:v.lastUpdated}}}}]);