"use strict";(self.webpackChunk_openmrs_esm_patient_allergies_app=self.webpackChunk_openmrs_esm_patient_allergies_app||[]).push([[455],{5771:(e,t,r)=>{r.d(t,{Z:()=>o});var a=r(9601),i=r.n(a),n=r(2609),l=r.n(n)()(i());l.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-patient-allergies__allergies-detailed-summary__skeleton___lUfaM{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}.-esm-patient-allergies__allergies-detailed-summary__widgetCard___XfaVU{border:1px solid #e0e0e0}.-esm-patient-allergies__allergies-detailed-summary__allergySeverity___ykprM{margin:.5rem 0rem;letter-spacing:.063rem}.-esm-patient-allergies__allergies-detailed-summary__allergyCriticality___oht9y{display:flex;align-items:center;text-transform:uppercase}.-esm-patient-allergies__allergies-detailed-summary__bodyShort02___unP8V{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0}.-esm-patient-allergies__allergies-detailed-summary__productiveHeading02___ZxD0J{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.-esm-patient-allergies__allergies-detailed-summary__note___icCBt{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0;margin:.5rem 0rem;color:#a8a8a8;max-width:36rem}",""]),l.locals={widgetCard:"-esm-patient-allergies__allergies-detailed-summary__widgetCard___XfaVU",allergySeverity:"-esm-patient-allergies__allergies-detailed-summary__allergySeverity___ykprM",allergyCriticality:"-esm-patient-allergies__allergies-detailed-summary__allergyCriticality___oht9y",bodyShort02:"-esm-patient-allergies__allergies-detailed-summary__bodyShort02___unP8V",productiveHeading02:"-esm-patient-allergies__allergies-detailed-summary__productiveHeading02___ZxD0J",note:"-esm-patient-allergies__allergies-detailed-summary__note___icCBt",skeleton:"-esm-patient-allergies__allergies-detailed-summary__skeleton___lUfaM"};const o=l},8455:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var a=r(9902),i=r.n(a),n=r(9575),l=r(4924),o=r(3771),s=r(8011),d=r(8580),c=r(1145),u=r(7030),m=r(160),g=r(3806),p=r(364),f=r(7500),y=r(8804),h=r(1358),v=r(2427),_=r(3783),b=r(321),w=r.n(b),E=r(1195),k=r.n(E),S=r(3275),P=r.n(S),O=r(7162),Z=r.n(O),x=r(2094),j=r.n(x),D=r(757),C=r.n(D),U=r(5771),z={};z.styleTagTransform=C(),z.setAttributes=Z(),z.insert=P().bind(null,"head"),z.domAPI=k(),z.insertStyleElement=j(),w()(U.Z,z);const A=U.Z&&U.Z.locals?U.Z.locals:void 0;var B=r(6705),M=r(8179),X=r(3066);function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(){return T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},T.apply(this,arguments)}const q=function(e){var t,r,a=e.patient,n=e.showAddAllergyButton,b=(0,l.useTranslation)().t,w=b("allergyIntolerances","allergy intolerances"),E=b("allergies","Allergies"),k=(0,B.PI)(a.id),S=k.allergies,P=k.isError,O=k.isLoading,Z=k.isValidating,x=i().useCallback((function(){return(0,o.launchPatientWorkspace)(M.Hz)}),[]),j=[{key:"display",header:b("allergen","Allergen")},{key:"criticality",header:b("severityandReaction","Severity and Reaction")},{key:"recordedDate",header:b("since","Since")},{key:"lastUpdated",header:b("lastUpdated","Last updated")}],D=i().useMemo((function(){var e;return null==S?void 0:S.map((function(t){var r,a,n;return a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),a.forEach((function(t){H(e,t,r[t])}))}return e}({},t),n=null!=(n={criticality:{content:i().createElement("div",{className:A.allergyDetails},i().createElement("p",{className:A.allergyCriticality},"high"===t.criticality&&i().createElement("svg",{className:"omrs-icon omrs-margin-right-4",fill:"rgba(181, 7, 6, 1)",style:{height:"1.25rem"}},i().createElement("use",{xlinkHref:"#omrs-icon-important-notification"})),i().createElement("span",{className:"".concat(A.allergySeverity," ").concat("high"===t.criticality?A.productiveHeading02:A.bodyShort02)},t.criticality)),i().createElement("p",null,null===(r=t.reactionManifestations)||void 0===r?void 0:r.join(", ")),i().createElement("p",{className:A.note},null==t?void 0:t.note))},recordedDate:null!==(e=(0,X.formatDate)((0,X.parseDate)(t.recordedDate),{day:!1,time:!1}))&&void 0!==e?e:"--",lastUpdated:t.lastUpdated?(0,X.formatDate)((0,X.parseDate)(t.lastUpdated),{time:!1}):"--"})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r.push.apply(r,a)}return r}(Object(n)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(n,e))})),a}))}),[S]);return O?i().createElement(d.Z,{role:"progressbar"}):P?i().createElement(o.ErrorState,{error:P,headerTitle:E}):(null==S?void 0:S.length)?i().createElement("div",{className:A.widgetCard},i().createElement(o.CardHeader,{title:E},i().createElement("span",null,Z?i().createElement(c.Z,null):null),n&&i().createElement(u.Z,{kind:"ghost",renderIcon:s.Z,iconDescription:"Add allergies",onClick:x},b("add","Add"))),i().createElement(m.Z,null,i().createElement(g.ZP,{rows:D,headers:j,isSortable:!0},(function(e){var a=e.rows,n=e.headers,l=e.getHeaderProps,o=e.getTableProps;return i().createElement(p.Z,T({},o(),{useZebraStyles:!0}),i().createElement(f.Z,null,i().createElement(y.Z,null,n.map((function(e){var r;return i().createElement(h.Z,T({className:"".concat(A.productiveHeading01," ").concat(A.text02)},l({header:e,isSortable:e.isSortable})),null!==(t=null===(r=e.header)||void 0===r?void 0:r.content)&&void 0!==t?t:e.header)})))),i().createElement(v.Z,null,a.map((function(e){return i().createElement(y.Z,{key:e.id},e.cells.map((function(e){var t;return i().createElement(_.Z,{key:e.id},null!==(r=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==r?r:e.value)})))}))))})))):i().createElement(o.EmptyState,{displayText:w,headerTitle:E,launchForm:x})};var V=(0,a.createContext)({patientUuid:void 0,patient:void 0});function I(e){var t=e.basePath,r=e.patient,a=e.patientUuid,l=e.showAddAllergyButton;return i().createElement(V.Provider,{value:{patientUuid:a,patient:r}},i().createElement(n.BrowserRouter,{basename:"".concat(window.spaBase).concat(t,"/allergies")},i().createElement(n.Switch,null,i().createElement(n.Route,{exact:!0,path:"/",render:function(){return i().createElement(q,{patient:r,showAddAllergyButton:l})}}))))}},6705:(e,t,r)=>{r.d(t,{PI:()=>l});var a=r(9857),i=r(5573),n=r(3066);function l(e){var t,r,i=(0,a.ZP)("".concat(n.fhirBaseUrl,"/AllergyIntolerance?patient=").concat(e),n.openmrsFetch),l=i.data,s=i.error,d=i.isValidating,c=(null==l||null===(t=l.data)||void 0===t?void 0:t.total)>0?null==l?void 0:l.data.entry.map((function(e){return null!==(r=e.resource)&&void 0!==r?r:[]})).map(o).sort((function(e,t){return t.lastUpdated>e.lastUpdated?1:-1})):null;return{allergies:l?c:null,isError:s,isLoading:!l&&!s,isValidating:d}}function o(e){var t,r,a,n,l,o,s,d,c,u,m,g,p,f,y,h=null===(t=null==e?void 0:e.reaction[0])||void 0===t||null===(r=t.manifestation)||void 0===r?void 0:r.map((function(e){var t;return null===(t=e.coding[0])||void 0===t?void 0:t.display}));return{id:null==e?void 0:e.id,clinicalStatus:null===(n=null==e||null===(a=e.clinicalStatus)||void 0===a?void 0:a.coding[0])||void 0===n?void 0:n.display,criticality:null==e?void 0:e.criticality,display:null===(o=null==e||null===(l=e.code)||void 0===l?void 0:l.coding[0])||void 0===o?void 0:o.display,recordedDate:null==e?void 0:e.recordedDate,recordedBy:null==e||null===(s=e.recorder)||void 0===s?void 0:s.display,recorderType:null==e||null===(d=e.recorder)||void 0===d?void 0:d.type,note:null==e||null===(c=e.note)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.text,reactionToSubstance:null===(p=null===(m=null==e?void 0:e.reaction[0])||void 0===m||null===(g=m.substance)||void 0===g?void 0:g.coding[1])||void 0===p?void 0:p.display,reactionManifestations:h,reactionSeverity:(0,i.Z)(null===(f=null==e?void 0:e.reaction[0])||void 0===f?void 0:f.severity),lastUpdated:null==e||null===(y=e.meta)||void 0===y?void 0:y.lastUpdated}}}}]);