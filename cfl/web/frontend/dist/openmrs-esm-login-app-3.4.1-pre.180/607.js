"use strict";(self.webpackChunk_openmrs_esm_login_app=self.webpackChunk_openmrs_esm_login_app||[]).push([[607],{5152:(e,o,t)=>{t.d(o,{Z:()=>r});var n=t(361),i=t.n(n)()((function(e){return e[1]}));i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-login__location-picker__productiveHeading01___5QiCf{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}.-esm-login__location-picker__productiveHeading02___WaQHp{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.-esm-login__location-picker__productiveHeading03___6nV-j,.-esm-login__location-picker__welcomeTitle___iI\\+4Z{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.-esm-login__location-picker__productiveHeading04___Oqqcq{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}.-esm-login__location-picker__productiveHeading05___DiOHe{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}.-esm-login__location-picker__productiveHeading06___yuK1n{font-size:2rem;font-weight:300;line-height:1.199;letter-spacing:0}.-esm-login__location-picker__bodyShort01___Yu8ZO,.-esm-login__location-picker__locationNotFound___-t5pO,.-esm-login__location-picker__locationRadioButton___Gdh0u,.-esm-login__location-picker__resultsCount___KQ5mh{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.-esm-login__location-picker__bodyShort02___Qiqsi,.-esm-login__location-picker__searchResults___CAZcg{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0}.-esm-login__location-picker__bodyLong01___jzOK6,.-esm-login__location-picker__welcomeMessage___Wfdzz{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.-esm-login__location-picker__bodyLong02___OT5\\+p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}.-esm-login__location-picker__label01___itiyC{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.-esm-login__location-picker__caption01___VD9WY{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.-esm-login__location-picker__helperText01___f9hQ3{font-size:.75rem;line-height:1.34;letter-spacing:.32px}.-esm-login__location-picker__text01___EkkDZ{color:#161616}.-esm-login__location-picker__text02___39Oi1{color:#525252}.-esm-login__location-picker__locationPickerContainer___t4nEl{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;width:100vw}.-esm-login__location-picker__locationCard___p8DlF{display:flex;flex-direction:column;width:23rem;background-color:#fff;margin:0;padding:1.5rem;border:1px solid #e0e0e0}.-esm-login__location-picker__welcomeTitle___iI\\+4Z{text-transform:capitalize}.-esm-login__location-picker__searchBox___5ywPq{margin-top:1rem}.-esm-login__location-picker__welcomeMessage___Wfdzz{margin-top:.5rem;color:#525252}.-esm-login__location-picker__searchResults___CAZcg{margin:1rem 0rem;max-height:100%;overflow-y:auto}.-esm-login__location-picker__resultsCount___KQ5mh{color:#525252}.-esm-login__location-picker__locationResultsContainer___IvnTr{display:flex;overflow-y:auto;margin-top:.5rem}.-esm-login__location-picker__locationRadioButton___Gdh0u{display:flex;justify-content:flex-start;align-items:flex-start;padding:.5rem 0rem;text-align:left;width:18rem}.-esm-login__location-picker__locationNotFound___-t5pO{padding:1rem 0rem;color:#525252}.-esm-login__location-picker__confirmButton___mHNSY button{width:20rem}.-esm-login__location-picker__radioButtonSkeleton___mCTbu{margin-right:0 !important;margin-bottom:1rem}.-esm-login__location-picker__radioButtonSkeleton___mCTbu span{width:100% !important}.-esm-login__location-picker__pagination___N8tXt{background-color:#f4f4f4;display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;border:2px solid #e0e0e0}.-esm-login__location-picker__pagination___N8tXt>button:first-child,pagination>button:first-child:hover{border-right:2px solid #e0e0e0}.-esm-login__location-picker__pagination___N8tXt>button,.-esm-login__location-picker__pagination___N8tXt>button:hover{border-left:2px solid #e0e0e0}.-esm-login__location-picker__loadingIcon___Tgfyj{display:flex;justify-content:center;align-items:center;margin-top:1rem}",""]),i.locals={productiveHeading01:"-esm-login__location-picker__productiveHeading01___5QiCf",productiveHeading02:"-esm-login__location-picker__productiveHeading02___WaQHp",productiveHeading03:"-esm-login__location-picker__productiveHeading03___6nV-j",welcomeTitle:"-esm-login__location-picker__welcomeTitle___iI+4Z",productiveHeading04:"-esm-login__location-picker__productiveHeading04___Oqqcq",productiveHeading05:"-esm-login__location-picker__productiveHeading05___DiOHe",productiveHeading06:"-esm-login__location-picker__productiveHeading06___yuK1n",bodyShort01:"-esm-login__location-picker__bodyShort01___Yu8ZO",locationNotFound:"-esm-login__location-picker__locationNotFound___-t5pO",locationRadioButton:"-esm-login__location-picker__locationRadioButton___Gdh0u",resultsCount:"-esm-login__location-picker__resultsCount___KQ5mh",bodyShort02:"-esm-login__location-picker__bodyShort02___Qiqsi",searchResults:"-esm-login__location-picker__searchResults___CAZcg",bodyLong01:"-esm-login__location-picker__bodyLong01___jzOK6",welcomeMessage:"-esm-login__location-picker__welcomeMessage___Wfdzz",bodyLong02:"-esm-login__location-picker__bodyLong02___OT5+p",label01:"-esm-login__location-picker__label01___itiyC",caption01:"-esm-login__location-picker__caption01___VD9WY",helperText01:"-esm-login__location-picker__helperText01___f9hQ3",text01:"-esm-login__location-picker__text01___EkkDZ",text02:"-esm-login__location-picker__text02___39Oi1",locationPickerContainer:"-esm-login__location-picker__locationPickerContainer___t4nEl",locationCard:"-esm-login__location-picker__locationCard___p8DlF",searchBox:"-esm-login__location-picker__searchBox___5ywPq",locationResultsContainer:"-esm-login__location-picker__locationResultsContainer___IvnTr",confirmButton:"-esm-login__location-picker__confirmButton___mHNSY",radioButtonSkeleton:"-esm-login__location-picker__radioButtonSkeleton___mCTbu",pagination:"-esm-login__location-picker__pagination___N8tXt",loadingIcon:"-esm-login__location-picker__loadingIcon___Tgfyj"};const r=i},4865:(e,o,t)=>{t.d(o,{h:()=>c});var n=t(6983),i=t(7644),r=t(3415);function l(e,o){(null==o||o>e.length)&&(o=e.length);for(var t=0,n=new Array(o);t<o;t++)n[t]=e[t];return n}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,o){if(e){if("string"==typeof e)return l(e,o);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,o):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _="".concat(i.fhirBaseUrl,"/Location?_summary=data");function c(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=function(n,i){var r,l;if(i&&!(null==i||null===(r=i.data)||void 0===r||null===(l=r.link)||void 0===l?void 0:l.some((function(e){return"next"===e.relation}))))return null;var a=_;return o&&(a+="&_count=".concat(o)),n&&(a+="&_getpagesoffset=".concat(n*o)),e&&(a+="&_tag=login location"),"string"==typeof t&&""!=t&&(a+="&name:contains=".concat(t)),a},c=(0,r.ZP)(l,i.openmrsFetch),s=c.data,u=c.isValidating,m=c.setSize,g=c.error;g&&(console.error(g),(0,i.reportError)(g));var d=(0,n.useMemo)((function(){var e,o,t,n,i,r,l;return{locationData:s?(e=[]).concat.apply(e,a(null==s?void 0:s.map((function(e){var o;return null!==(r=null==e||null===(o=e.data)||void 0===o?void 0:o.entry)&&void 0!==r?r:[]})))):null,isLoading:!s&&!g,totalResults:null!==(l=null==s||null===(o=s[0])||void 0===o||null===(t=o.data)||void 0===t?void 0:t.total)&&void 0!==l?l:null,hasMore:!!(null==s?void 0:s.length)&&(null==s||null===(n=s[s.length-1])||void 0===n||null===(i=n.data)||void 0===i?void 0:i.link.some((function(e){return"next"===e.relation}))),loadingNewData:u,setPage:m}}),[s,g,u,m,t]);return d}},9607:(e,o,t)=>{t.r(o),t.d(o,{default:()=>T});var n=t(6983),i=t.n(n),r=t(9717),l=t(2680),a=t(9784),_=t(7644),c=t(487),s=t.n(c),u=t(631),m=t.n(u),g=t(2052),d=t.n(g),p=t(4010),f=t.n(p),h=t(1469),k=t.n(h),v=t(9329),y=t.n(v),b=t(5152),w={};w.styleTagTransform=y(),w.setAttributes=f(),w.insert=d().bind(null,"head"),w.domAPI=m(),w.insertStyleElement=k(),s()(b.Z,w);const S=b.Z&&b.Z.locals?b.Z.locals:void 0;var x=t(4865);function C(e,o){(null==o||o>e.length)&&(o=e.length);for(var t=0,n=new Array(o);t<o;t++)n[t]=e[t];return n}function E(e,o){return function(e){if(Array.isArray(e))return e}(e)||function(e,o){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,r=[],l=!0,a=!1;try{for(t=t.call(e);!(l=(n=t.next()).done)&&(r.push(n.value),!o||r.length!==o);l=!0);}catch(e){a=!0,i=e}finally{try{l||null==t.return||t.return()}finally{if(a)throw i}}return r}}(e,o)||function(e,o){if(e){if("string"==typeof e)return C(e,o);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?C(e,o):void 0}}(e,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const T=function(e){var o,t,c=e.currentUser,s=e.loginLocations,u=e.onChangeLocation,m=e.hideWelcomeMessage,g=e.currentLocationUuid,d=e.isLoginEnabled,p=(0,_.useConfig)().chooseLocation,f=(0,l.useTranslation)().t,h=E((0,n.useState)(p.numberToShow),2),k=h[0],v=h[1],y="userDefaultLoginLocationKey",b=E((0,n.useState)(null!==(t=window.localStorage.getItem("".concat(y).concat(c)),o=(null==s?void 0:s.some((function(e){return e.resource.id===t})))?t:"")&&void 0!==o?o:""),2),w=b[0],C=b[1],T=E((0,n.useState)(""),2),N=T[0],H=T[1],L=(0,x.h)(p.useLoginLocationTag,p.locationsPerRequest,N),z=L.locationData,B=L.isLoading,R=L.hasMore,O=L.totalResults,I=L.loadingNewData,A=L.setPage,Z=E((0,n.useState)(!1),2),j=Z[0],D=Z[1],F=(0,n.useRef)();(0,n.useEffect)((function(){j&&(u(w),D(!1))}),[j,w,u]),(0,n.useEffect)((function(){w&&window.localStorage.setItem("".concat(y).concat(c),w)}),[w,c]),(0,n.useEffect)((function(){g&&m&&C(g)}),[g,m]),(0,n.useEffect)((function(){j&&F.current&&(F.current.value="",H(null))}),[j]),(0,n.useEffect)((function(){!B&&O&&p.numberToShow&&v(Math.min(p.numberToShow,O))}),[B,O,p.numberToShow]);var M=(0,r.Z)((function(e){C(""),H(e)}),300),q=(0,n.useRef)(null),P=(0,n.useCallback)((function(e){I||(q.current&&q.current.disconnect(),q.current=new IntersectionObserver((function(e){e[0].isIntersecting&&R&&A((function(e){return e+1}))}),{threshold:1}),e&&q.current.observe(e))}),[I,R,A]);return i().createElement("div",{className:S.locationPickerContainer},i().createElement("form",{onSubmit:function(e){e.preventDefault(),D(!0)}},i().createElement("div",{className:S.locationCard},i().createElement("div",null,i().createElement("p",{className:S.welcomeTitle},f("welcome","Welcome")," ",c),i().createElement("p",{className:S.welcomeMessage},f("selectYourLocation","Select your location from the list below. Use the search bar to search for your location."))),i().createElement(a.Search,{autoFocus:!0,className:S.searchBox,labelText:f("searchForLocation","Search for a location"),id:"search-1",placeholder:f("searchForLocation","Search for a location"),onChange:function(e){return M(e.target.value)},name:"searchForLocation"}),i().createElement("div",{className:S.searchResults,style:{height:"".concat(2.875*p.numberToShow,"rem")}},B?i().createElement("div",null,i().createElement(a.RadioButtonSkeleton,{className:S.radioButtonSkeleton})):i().createElement(i().Fragment,null,i().createElement("p",{className:S.resultsCount},N?"".concat(null!=O?O:0," ").concat(1===O?f("match","match"):f("matches","matches")," ").concat(f("found","found")):"".concat(f("showing","Showing")," ").concat(k," ").concat(f("of","of")," ").concat(O," ").concat(f("locations","locations"))),i().createElement("div",{className:S.locationResultsContainer},(null==z?void 0:z.length)>0&&i().createElement(a.RadioButtonGroup,{valueSelected:w,orientation:"vertical",name:w,onChange:function(e){C(e.toString())}},z.map((function(e){return i().createElement(a.RadioButton,{className:S.locationRadioButton,key:e.resource.id,id:e.resource.name,labelText:e.resource.name,value:e.resource.id})}))),0===(null==z?void 0:z.length)&&i().createElement("p",{className:S.locationNotFound},f("locationNotFound","Sorry, no matching location was found"))),R&&i().createElement("div",{className:S.loadingIcon,ref:P},i().createElement(a.Loading,{small:!0,withOverlay:!1,description:f("loading","Loading")})))),i().createElement("div",{className:S.confirmButton},i().createElement(a.Button,{kind:"primary",type:"submit",disabled:!w||!d},f("confirm","Confirm"))))))}}}]);