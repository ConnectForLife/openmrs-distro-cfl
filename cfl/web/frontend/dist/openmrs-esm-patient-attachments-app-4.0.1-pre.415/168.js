"use strict";(self.webpackChunk_openmrs_esm_patient_attachments_app=self.webpackChunk_openmrs_esm_patient_attachments_app||[]).push([[168],{7649:(t,e,a)=>{a.d(e,{Z:()=>o});var n=a(9601),i=a.n(n),r=a(2609),c=a.n(r)()(i());c.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-attachments__attachment-thumbnail__productiveHeading03___e1V4w{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-attachments__attachment-thumbnail__productiveHeading02___T7hTE{font-size:var(--cds-productive-heading-02-font-size, 1rem);font-weight:var(--cds-productive-heading-02-font-weight, 600);line-height:var(--cds-productive-heading-02-line-height, 1.375);letter-spacing:var(--cds-productive-heading-02-letter-spacing, 0)}.-esm-patient-attachments__attachment-thumbnail__productiveHeading03___e1V4w{font-size:var(--cds-productive-heading-03-font-size, 1.25rem);font-weight:var(--cds-productive-heading-03-font-weight, 400);line-height:var(--cds-productive-heading-03-line-height, 1.4);letter-spacing:var(--cds-productive-heading-03-letter-spacing, 0)}.-esm-patient-attachments__attachment-thumbnail__bodyLong01___S3U0m{font-size:var(--cds-body-long-01-font-size, 0.875rem);font-weight:var(--cds-body-long-01-font-weight, 400);line-height:var(--cds-body-long-01-line-height, 1.42857);letter-spacing:var(--cds-body-long-01-letter-spacing, 0.16px)}.-esm-patient-attachments__attachment-thumbnail__muted___KnHL0{color:#525252}.-esm-patient-attachments__attachment-thumbnail__bodyShort01___x7FjQ{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-attachments__attachment-thumbnail__text02___awTVD{color:#525252}.-esm-patient-attachments__attachment-thumbnail__caption___DRMMC{position:absolute;top:141px;right:73px;text-align:center;backdrop-filter:blur(20px)}.-esm-patient-attachments__attachment-thumbnail__thumbnail____z54Z{height:10rem}.-esm-patient-attachments__attachment-thumbnail__imageThumbnail___YShyN{width:100%;cursor:pointer}.-esm-patient-attachments__attachment-thumbnail__imageThumbnail___YShyN img{width:100% !important;margin:auto !important;height:10rem}.-esm-patient-attachments__attachment-thumbnail__pdfThumbnail___NWFAE{cursor:pointer;background-color:#c6c6c6;display:flex;justify-content:center;align-items:center;width:100%;height:100%}.-esm-patient-attachments__attachment-thumbnail__captionText____sCwZ{color:#2e2eef;cursor:pointer;text-decoration:underline}.-esm-patient-attachments__attachment-thumbnail__actionButtons___o4tYz{width:20%;position:absolute;right:0}.-esm-patient-attachments__attachment-thumbnail__actionButtons___o4tYz span{margin:5px}.-esm-patient-attachments__attachment-thumbnail__infoIcon___wiZka{visibility:hidden;position:absolute;right:4px;top:4px;cursor:pointer}.-esm-patient-attachments__attachment-thumbnail__thumbnail____z54Z:hover .-esm-patient-attachments__attachment-thumbnail__infoIcon___wiZka{visibility:visible}.-esm-patient-attachments__attachment-thumbnail__infoIcon___wiZka .-esm-patient-attachments__attachment-thumbnail__infoText___xdYiD{visibility:hidden;width:170px;background-color:#000;color:#fff;text-align:center;border-radius:6px;padding:5px 0;position:absolute;z-index:1;top:-46px;right:-166px}.-esm-patient-attachments__attachment-thumbnail__infoIcon___wiZka:hover .-esm-patient-attachments__attachment-thumbnail__infoText___xdYiD{visibility:visible}.-esm-patient-attachments__attachment-thumbnail__otherThumbnail____TjyR{object-fit:none !important;cursor:pointer}",""]),c.locals={productiveHeading03:"-esm-patient-attachments__attachment-thumbnail__productiveHeading03___e1V4w",productiveHeading02:"-esm-patient-attachments__attachment-thumbnail__productiveHeading02___T7hTE",bodyLong01:"-esm-patient-attachments__attachment-thumbnail__bodyLong01___S3U0m",muted:"-esm-patient-attachments__attachment-thumbnail__muted___KnHL0",bodyShort01:"-esm-patient-attachments__attachment-thumbnail__bodyShort01___x7FjQ",text02:"-esm-patient-attachments__attachment-thumbnail__text02___awTVD",caption:"-esm-patient-attachments__attachment-thumbnail__caption___DRMMC",thumbnail:"-esm-patient-attachments__attachment-thumbnail__thumbnail____z54Z",imageThumbnail:"-esm-patient-attachments__attachment-thumbnail__imageThumbnail___YShyN",pdfThumbnail:"-esm-patient-attachments__attachment-thumbnail__pdfThumbnail___NWFAE",captionText:"-esm-patient-attachments__attachment-thumbnail__captionText____sCwZ",actionButtons:"-esm-patient-attachments__attachment-thumbnail__actionButtons___o4tYz",infoIcon:"-esm-patient-attachments__attachment-thumbnail__infoIcon___wiZka",infoText:"-esm-patient-attachments__attachment-thumbnail__infoText___xdYiD",otherThumbnail:"-esm-patient-attachments__attachment-thumbnail__otherThumbnail____TjyR"};const o=c},3675:(t,e,a)=>{a.d(e,{Z:()=>o});var n=a(9601),i=a.n(n),r=a(2609),c=a.n(r)()(i());c.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-attachments__attachments-grid-overview__productiveHeading03___Y3PqK{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-attachments__attachments-grid-overview__productiveHeading02___Ck684{font-size:var(--cds-productive-heading-02-font-size, 1rem);font-weight:var(--cds-productive-heading-02-font-weight, 600);line-height:var(--cds-productive-heading-02-line-height, 1.375);letter-spacing:var(--cds-productive-heading-02-letter-spacing, 0)}.-esm-patient-attachments__attachments-grid-overview__productiveHeading03___Y3PqK{font-size:var(--cds-productive-heading-03-font-size, 1.25rem);font-weight:var(--cds-productive-heading-03-font-weight, 400);line-height:var(--cds-productive-heading-03-line-height, 1.4);letter-spacing:var(--cds-productive-heading-03-letter-spacing, 0)}.-esm-patient-attachments__attachments-grid-overview__bodyLong01___E2xW3{font-size:var(--cds-body-long-01-font-size, 0.875rem);font-weight:var(--cds-body-long-01-font-weight, 400);line-height:var(--cds-body-long-01-line-height, 1.42857);letter-spacing:var(--cds-body-long-01-letter-spacing, 0.16px)}.-esm-patient-attachments__attachments-grid-overview__muted___hMnKl{color:#525252}.-esm-patient-attachments__attachments-grid-overview__bodyShort01___TCuYl{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-attachments__attachments-grid-overview__text02___OpcM2{color:#525252}.-esm-patient-attachments__attachments-grid-overview__galleryContainer___BrcM7{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;align-items:center;grid-gap:1rem;padding:0 1rem 1rem 1rem}.-esm-patient-attachments__attachments-grid-overview__attachmentThumbnailSkeleton___Nc7kH{width:100%}.-esm-patient-attachments__attachments-grid-overview__galleryContainer___BrcM7 img{object-fit:cover}",""]),c.locals={productiveHeading03:"-esm-patient-attachments__attachments-grid-overview__productiveHeading03___Y3PqK",productiveHeading02:"-esm-patient-attachments__attachments-grid-overview__productiveHeading02___Ck684",bodyLong01:"-esm-patient-attachments__attachments-grid-overview__bodyLong01___E2xW3",muted:"-esm-patient-attachments__attachments-grid-overview__muted___hMnKl",bodyShort01:"-esm-patient-attachments__attachments-grid-overview__bodyShort01___TCuYl",text02:"-esm-patient-attachments__attachments-grid-overview__text02___OpcM2",galleryContainer:"-esm-patient-attachments__attachments-grid-overview__galleryContainer___BrcM7",attachmentThumbnailSkeleton:"-esm-patient-attachments__attachments-grid-overview__attachmentThumbnailSkeleton___Nc7kH"};const o=c},7717:(t,e,a)=>{a.d(e,{Z:()=>o});var n=a(9601),i=a.n(n),r=a(2609),c=a.n(r)()(i());c.push([t.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-attachments__attachments-overview__productiveHeading03___JetrD{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-attachments__attachments-overview__productiveHeading02___eVy3G{font-size:var(--cds-productive-heading-02-font-size, 1rem);font-weight:var(--cds-productive-heading-02-font-weight, 600);line-height:var(--cds-productive-heading-02-line-height, 1.375);letter-spacing:var(--cds-productive-heading-02-letter-spacing, 0)}.-esm-patient-attachments__attachments-overview__productiveHeading03___JetrD{font-size:var(--cds-productive-heading-03-font-size, 1.25rem);font-weight:var(--cds-productive-heading-03-font-weight, 400);line-height:var(--cds-productive-heading-03-line-height, 1.4);letter-spacing:var(--cds-productive-heading-03-letter-spacing, 0)}.-esm-patient-attachments__attachments-overview__bodyLong01___lNgDM{font-size:var(--cds-body-long-01-font-size, 0.875rem);font-weight:var(--cds-body-long-01-font-weight, 400);line-height:var(--cds-body-long-01-line-height, 1.42857);letter-spacing:var(--cds-body-long-01-letter-spacing, 0.16px)}.-esm-patient-attachments__attachments-overview__muted___p4k1O{color:#525252}.-esm-patient-attachments__attachments-overview__bodyShort01___q93st{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-attachments__attachments-overview__text02___tqLlC{color:#525252}.-esm-patient-attachments__attachments-overview__overview___jmOHr{background-color:#fff}.-esm-patient-attachments__attachments-overview__attachmentsHeader___cw3YM{display:grid;grid-template-columns:2fr 1fr auto auto;grid-gap:1rem;align-items:center;padding:.75rem 0 .75rem 1rem;background-color:#fff}.-esm-patient-attachments__attachments-overview__attachmentsHeader___cw3YM>h4:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-patient-attachments__attachments-overview__btnOverrides___TrnMQ{bottom:.7rem}',""]),c.locals={productiveHeading03:"-esm-patient-attachments__attachments-overview__productiveHeading03___JetrD",productiveHeading02:"-esm-patient-attachments__attachments-overview__productiveHeading02___eVy3G",bodyLong01:"-esm-patient-attachments__attachments-overview__bodyLong01___lNgDM",muted:"-esm-patient-attachments__attachments-overview__muted___p4k1O",bodyShort01:"-esm-patient-attachments__attachments-overview__bodyShort01___q93st",text02:"-esm-patient-attachments__attachments-overview__text02___tqLlC",overview:"-esm-patient-attachments__attachments-overview__overview___jmOHr",attachmentsHeader:"-esm-patient-attachments__attachments-overview__attachmentsHeader___cw3YM",btnOverrides:"-esm-patient-attachments__attachments-overview__btnOverrides___TrnMQ"};const o=c},5065:(t,e,a)=>{a.d(e,{Z:()=>o});var n=a(9601),i=a.n(n),r=a(2609),c=a.n(r)()(i());c.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-attachments__attachments-table-overview__productiveHeading03___Mcxa8{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-attachments__attachments-table-overview__productiveHeading02___muT8W{font-size:var(--cds-productive-heading-02-font-size, 1rem);font-weight:var(--cds-productive-heading-02-font-weight, 600);line-height:var(--cds-productive-heading-02-line-height, 1.375);letter-spacing:var(--cds-productive-heading-02-letter-spacing, 0)}.-esm-patient-attachments__attachments-table-overview__productiveHeading03___Mcxa8{font-size:var(--cds-productive-heading-03-font-size, 1.25rem);font-weight:var(--cds-productive-heading-03-font-weight, 400);line-height:var(--cds-productive-heading-03-line-height, 1.4);letter-spacing:var(--cds-productive-heading-03-letter-spacing, 0)}.-esm-patient-attachments__attachments-table-overview__bodyLong01___UWa5K{font-size:var(--cds-body-long-01-font-size, 0.875rem);font-weight:var(--cds-body-long-01-font-weight, 400);line-height:var(--cds-body-long-01-line-height, 1.42857);letter-spacing:var(--cds-body-long-01-letter-spacing, 0.16px)}.-esm-patient-attachments__attachments-table-overview__muted___iDhzS{color:#525252}.-esm-patient-attachments__attachments-table-overview__bodyShort01___t9WvI{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-attachments__attachments-table-overview__text02___XjlXQ{color:#525252}.-esm-patient-attachments__attachments-table-overview__attachmentTable___qpnU2>.-esm-patient-attachments__attachments-table-overview__cds--data-table-header___PSErM{display:none}.-esm-patient-attachments__attachments-table-overview__link___nnpiD{text-decoration:none;cursor:pointer}",""]),c.locals={productiveHeading03:"-esm-patient-attachments__attachments-table-overview__productiveHeading03___Mcxa8",productiveHeading02:"-esm-patient-attachments__attachments-table-overview__productiveHeading02___muT8W",bodyLong01:"-esm-patient-attachments__attachments-table-overview__bodyLong01___UWa5K",muted:"-esm-patient-attachments__attachments-table-overview__muted___iDhzS",bodyShort01:"-esm-patient-attachments__attachments-table-overview__bodyShort01___t9WvI",text02:"-esm-patient-attachments__attachments-table-overview__text02___XjlXQ",attachmentTable:"-esm-patient-attachments__attachments-table-overview__attachmentTable___qpnU2","cds--data-table-header":"-esm-patient-attachments__attachments-table-overview__cds--data-table-header___PSErM",link:"-esm-patient-attachments__attachments-table-overview__link___nnpiD"};const o=c},2415:(t,e,a)=>{a.d(e,{Z:()=>o});var n=a(9601),i=a.n(n),r=a(2609),c=a.n(r)()(i());c.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-attachments__image-preview__productiveHeading03___L2gGr{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-attachments__image-preview__productiveHeading02___wyg0O{font-size:var(--cds-productive-heading-02-font-size, 1rem);font-weight:var(--cds-productive-heading-02-font-weight, 600);line-height:var(--cds-productive-heading-02-line-height, 1.375);letter-spacing:var(--cds-productive-heading-02-letter-spacing, 0)}.-esm-patient-attachments__image-preview__productiveHeading03___L2gGr{font-size:var(--cds-productive-heading-03-font-size, 1.25rem);font-weight:var(--cds-productive-heading-03-font-weight, 400);line-height:var(--cds-productive-heading-03-line-height, 1.4);letter-spacing:var(--cds-productive-heading-03-letter-spacing, 0)}.-esm-patient-attachments__image-preview__bodyLong01___g5vwz{font-size:var(--cds-body-long-01-font-size, 0.875rem);font-weight:var(--cds-body-long-01-font-weight, 400);line-height:var(--cds-body-long-01-line-height, 1.42857);letter-spacing:var(--cds-body-long-01-letter-spacing, 0.16px)}.-esm-patient-attachments__image-preview__muted___GnR9A{color:#525252}.-esm-patient-attachments__image-preview__bodyShort01___l1vEV{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-attachments__image-preview__text02___ZMuFL{color:#525252}.-esm-patient-attachments__image-preview__attachmentPreview___FY2tk{display:grid;grid-template-columns:1fr 16rem;position:fixed;width:100vw;top:3rem;bottom:0;left:0;z-index:5001;background-color:#262626}.-esm-patient-attachments__image-preview__leftPanel___M_daK{display:grid;grid-template-columns:auto 1fr auto;align-items:start}.-esm-patient-attachments__image-preview__rightPanel___Dti_u{background-color:#393939;padding:1rem;color:#f4f4f4}.-esm-patient-attachments__image-preview__closePreviewButton___EhZe8>svg>path{fill:#f4f4f4 !important}.-esm-patient-attachments__image-preview__closePreviewButton___EhZe8:hover>svg>path{fill:#161616 !important}.-esm-patient-attachments__image-preview__attachmentImage___vliCd{display:flex;justify-content:center;align-items:center;height:100%}.-esm-patient-attachments__image-preview__attachmentImage___vliCd img{max-width:80%;max-height:80%}.-esm-patient-attachments__image-preview__attachmentImage___vliCd .-esm-patient-attachments__image-preview__pdfViewer___LY4QL{width:90%;height:90%}.-esm-patient-attachments__image-preview__overflowMenu___X3TX8 button svg circle{fill:#f4f4f4}.-esm-patient-attachments__image-preview__overflowMenu___X3TX8:hover button svg circle,.-esm-patient-attachments__image-preview__overflowMenu___X3TX8:focus button svg circle{fill:#161616}.-esm-patient-attachments__image-preview__imageDescription___yUfFT{margin-top:.5rem}",""]),c.locals={productiveHeading03:"-esm-patient-attachments__image-preview__productiveHeading03___L2gGr",productiveHeading02:"-esm-patient-attachments__image-preview__productiveHeading02___wyg0O",bodyLong01:"-esm-patient-attachments__image-preview__bodyLong01___g5vwz",muted:"-esm-patient-attachments__image-preview__muted___GnR9A",bodyShort01:"-esm-patient-attachments__image-preview__bodyShort01___l1vEV",text02:"-esm-patient-attachments__image-preview__text02___ZMuFL",attachmentPreview:"-esm-patient-attachments__image-preview__attachmentPreview___FY2tk",leftPanel:"-esm-patient-attachments__image-preview__leftPanel___M_daK",rightPanel:"-esm-patient-attachments__image-preview__rightPanel___Dti_u",closePreviewButton:"-esm-patient-attachments__image-preview__closePreviewButton___EhZe8",attachmentImage:"-esm-patient-attachments__image-preview__attachmentImage___vliCd",pdfViewer:"-esm-patient-attachments__image-preview__pdfViewer___LY4QL",overflowMenu:"-esm-patient-attachments__image-preview__overflowMenu___X3TX8",imageDescription:"-esm-patient-attachments__image-preview__imageDescription___yUfFT"};const o=c},2067:(t,e,a)=>{a.d(e,{OE:()=>d,Rs:()=>l,eK:()=>m,ky:()=>p});var n=a(5047),i=a.n(n),r=a(7900),c=a(9857),o=a(906);function s(t,e,a,n,i,r,c){try{var o=t[r](c),s=o.value}catch(t){return void a(t)}o.done?e(s):Promise.resolve(s).then(n,i)}function _(t){return function(){var e=this,a=arguments;return new Promise((function(n,i){var r=t.apply(e,a);function c(t){s(r,n,i,c,o,"next",t)}function o(t){s(r,n,i,c,o,"throw",t)}c(void 0)}))}}var m="/ws/rest/v1/attachment";function l(t,e){var a,n=(0,c.ZP)("".concat(m,"?patient=").concat(t,"&includeEncounterless=").concat(e),o.openmrsFetch),i=n.data,s=n.error,_=n.mutate,l=n.isValidating;return(0,r.useMemo)((function(){return{isLoading:!i&&!s,data:null!==(a=null==i?void 0:i.data.results)&&void 0!==a?a:[],error:s,mutate:_,isValidating:l}}),[l,i,s,_])}function d(t,e){return h.apply(this,arguments)}function h(){return(h=_(i().mark((function t(e,a){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("fileCaption",a.fileName),n.append("patient",e),a.file?n.append("file",a.file):(n.append("file",new File([""],a.fileName),a.fileName),n.append("base64Content",a.base64Content)),t.abrupt("return",(0,o.openmrsFetch)("".concat(m),{method:"POST",body:n}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t,e){return(0,o.openmrsFetch)("".concat(m,"/").concat(t),{method:"DELETE",signal:e.signal})}},3168:(t,e,a)=>{a.r(e),a.d(e,{default:()=>et});var n=a(7900),i=a.n(n),r=a(4924),c=a(841),o=a(906),s=a(6217),_=a(2067),m=a(7326),l=a(6062),d=a.n(l),h=a(4036),p=a.n(h),v=a(6793),g=a.n(v),u=a(7892),f=a.n(u),b=a(1173),w=a.n(b),y=a(2464),E=a.n(y),T=a(7649),x={};x.styleTagTransform=E(),x.setAttributes=f(),x.insert=g().bind(null,"head"),x.domAPI=p(),x.insertStyleElement=w(),d()(T.Z,x);const k=T.Z&&T.Z.locals?T.Z.locals:void 0;var z=a(2525);function C(){return C=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},C.apply(this,arguments)}function S(t){return i().createElement("div",{className:k.thumbnail},i().createElement(D,C({},t)))}function H(t){return i().createElement("div",{className:k.imageThumbnail,role:"button",tabIndex:0,onClick:null==t?void 0:t.onClick},i().createElement("img",{src:t.src,alt:t.title,style:t.style}))}function P(t){return i().createElement("div",{className:k.pdfThumbnail,onClick:t.onClick,role:"button",tabIndex:0},i().createElement(z.Lk,{size:24}))}function M(t){return i().createElement("div",{className:k.pdfThumbnail,onClick:t.onClick,role:"button",tabIndex:0},i().createElement(z.Qf,{size:24}))}function D(t){var e,a=t.item.bytesContentFamily,n={src:t.imageProps.src,title:t.imageProps.title,style:t.imageProps.style,onClick:null===(e=t.imageProps)||void 0===e?void 0:e.onClick};return"IMAGE"===a?i().createElement(H,C({},n)):"PDF"===a?i().createElement(P,C({},n)):i().createElement(M,C({},n))}var L=a(3675),A={};A.styleTagTransform=E(),A.setAttributes=f(),A.insert=g().bind(null,"head"),A.domAPI=p(),A.insertStyleElement=w(),d()(L.Z,A);const N=L.Z&&L.Z.locals?L.Z.locals:void 0,Z=function(t){var e=t.attachments,a=t.isLoading,n=t.openAttachment;return a?i().createElement("div",{className:N.galleryContainer},i().createElement(c.uKo,{className:N.attachmentThumbnailSkeleton}),i().createElement(c.uKo,{className:N.attachmentThumbnailSkeleton}),i().createElement(c.uKo,{className:N.attachmentThumbnailSkeleton}),i().createElement(c.uKo,{className:N.attachmentThumbnailSkeleton})):i().createElement("div",{className:N.galleryContainer},e.map((function(t,e){var a={src:t.src,title:t.title,style:{},onClick:function(){n(t)}},r={id:t.id,dateTime:t.dateTime,bytesMimeType:t.bytesMimeType,bytesContentFamily:t.bytesContentFamily};return i().createElement("div",{key:e},i().createElement(S,{imageProps:a,item:r}),i().createElement("p",{className:N.bodyLong01},t.title),i().createElement("p",{className:"".concat(N.bodyLong01," ").concat(N.muted)},t.dateTime))})))};var F=a(5065),I={};I.styleTagTransform=E(),I.setAttributes=f(),I.insert=g().bind(null,"head"),I.domAPI=p(),I.insertStyleElement=w(),d()(F.Z,I);const O=F.Z&&F.Z.locals?F.Z.locals:void 0;function j(){return j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},j.apply(this,arguments)}const Y=function(t){var e,a,o=t.attachments,s=t.isLoading,_=t.deleteAttachment,m=t.openAttachment,l=(0,r.useTranslation)().t,d=(0,n.useMemo)((function(){return o.map((function(t){return{id:t.id,fileName:i().createElement("span",{role:"button",tabIndex:0,className:O.link,onClick:function(){return m(t)}},t.title),type:t.bytesContentFamily,dateUploaded:t.dateTime}}))}),[o,m]),h=(0,n.useMemo)((function(){return[{key:"fileName",header:l("fileName","File name"),colSpan:1},{key:"type",header:l("type","Type"),colSpan:1},{key:"dateUploaded",header:l("dateUploaded","Date uploaded"),colSpan:2}]}),[l]);return s?i().createElement("div",{className:O.attachmentTable},i().createElement(c.gqd,{className:O.dataTableSkeleton})):i().createElement(c.xJi,null,i().createElement(c.wQF,{rows:d,headers:h,size:"sm"},(function(t){var n=t.rows,r=t.headers,s=t.getHeaderProps,m=t.getTableProps;return i().createElement(c.iA_,j({},m(),{useZebraStyles:!0}),i().createElement(c.ssF,null,i().createElement(c.SCH,null,r.map((function(t){var a;return i().createElement(c.xDH,j({},s({header:t,isSortable:t.isSortable,colSpan:t.colSpan})),null!==(e=null===(a=t.header)||void 0===a?void 0:a.content)&&void 0!==e?e:t.header)})))),i().createElement(c.RMI,null,n.map((function(t,e){return i().createElement(c.SCH,{key:t.id},t.cells.map((function(t){var e;return i().createElement(c.pj1,{key:t.id},null!==(a=null===(e=t.value)||void 0===e?void 0:e.content)&&void 0!==a?a:t.value)})),i().createElement(c.pj1,null,i().createElement(c.PQB,{size:"sm",flipped:!0},i().createElement(c.laM,{itemText:l("delete","Delete"),isDelete:!0,onClick:function(){return _(o[e])}}))))}))))})))};var V=a(2074),K=a(2415),U={};U.styleTagTransform=E(),U.setAttributes=f(),U.insert=g().bind(null,"head"),U.domAPI=p(),U.insertStyleElement=w(),d()(K.Z,U);const B=K.Z&&K.Z.locals?K.Z.locals:void 0,G=function(t){var e=t.closePreview,a=t.attachmentToPreview,o=t.deleteAttachment,s=(0,r.useTranslation)().t;return(0,n.useEffect)((function(){var t=function(t){"Escape"==t.key&&e()};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[e]),i().createElement("div",{className:B.attachmentPreview},i().createElement("div",{className:B.leftPanel},i().createElement(c.zxk,{iconDescription:s("closePreview","Close preview"),label:s("closePreview","Close preview"),kind:"ghost",className:B.closePreviewButton,hasIconOnly:!0,renderIcon:V.x8,onClick:e}),i().createElement("div",{className:B.attachmentImage},"IMAGE"===a.bytesContentFamily?i().createElement("img",{src:a.src,alt:a.title}):"PDF"===a.bytesContentFamily?i().createElement("iframe",{title:"PDFViewer",className:B.pdfViewer,src:a.src}):null),i().createElement("div",{className:B.overflowMenu},i().createElement(c.PQB,{className:B.overflowMenu},i().createElement(c.laM,{hasDivider:!0,isDelete:!0,itemText:s("deleteImage","Delete image"),onClick:function(){return o(a)}})))),i().createElement("div",{className:B.rightPanel},i().createElement("h4",{className:B.productiveHeading02},a.title),(null==a?void 0:a.description)?i().createElement("p",{className:"".concat(B.bodyLong01," ").concat(B.imageDescription)},a.description):null))};var Q=a(7717),R={};R.styleTagTransform=E(),R.setAttributes=f(),R.insert=g().bind(null,"head"),R.domAPI=p(),R.insertStyleElement=w(),d()(Q.Z,R);const X=Q.Z&&Q.Z.locals?Q.Z.locals:void 0;var q=a(6039),W=a(8557),J=a(6759);function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],c=!0,o=!1;try{for(a=a.call(t);!(c=(n=a.next()).done)&&(r.push(n.value),!e||r.length!==e);c=!0);}catch(t){o=!0,i=t}finally{try{c||null==a.return||a.return()}finally{if(o)throw i}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return $(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?$(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const et=function(t){var e=t.patientUuid,a=(0,r.useTranslation)().t,l=(0,_.Rs)(e,!0),d=l.data,h=l.mutate,p=l.isValidating,v=l.isLoading,g=tt((0,n.useState)(null),2),u=g[0],f=g[1],b=(0,n.useMemo)((function(){return d.map((function(t){return(0,m.H)(t)}))}),[d]),w=tt((0,n.useState)(!1),2),y=w[0],E=w[1],T=tt((0,n.useState)("grid"),2),x=T[0],k=T[1],z=(0,n.useCallback)((function(){return f(null)}),[f]);(0,n.useEffect)((function(){!0===y&&((0,o.showToast)({critical:!0,kind:"error",description:a("fileUnsupported","File uploaded is not supported"),title:a("errorUploading","Error uploading a file")}),E(!1))}),[y,a]);var C=(0,n.useCallback)((function(){var t=(0,o.showModal)("capture-photo-modal",{saveFile:function(t){return(0,_.OE)(e,t)},closeModal:function(){t()},onCompletion:function(){return h()},multipleFiles:!0,collectDescription:!0})}),[e,h]),S=(0,n.useCallback)((function(t){(0,_.ky)(t.id,new AbortController).then((function(){(0,o.showToast)({title:a("fileDeleted","File deleted"),description:"".concat(t.title," ").concat(a("successfullyDeleted","successfully deleted")),kind:"success"}),f(null),h()})).catch((function(e){(0,o.showToast)({title:a("error","Error"),description:"".concat(t.title," ").concat(a("failedDeleting","couldn't be deleted")),kind:"error"})}))}),[h,a,f]),H=(0,n.useCallback)((function(t){var e=(0,o.showModal)("delete-attachment-modal",{attachment:t,close:function(){return e()},onConfirmation:function(t){S(t),e()}})}),[S]),P=(0,n.useCallback)((function(t){if("IMAGE"===t.bytesContentFamily||"PDF"===t.bytesContentFamily)f(t);else{var e=document.createElement("a");e.setAttribute("href",t.src),e.setAttribute("download",t.title),e.click()}}),[f]);return b.length?i().createElement(o.UserHasAccess,{privilege:"View Attachments"},i().createElement("div",{onDragOverCapture:C,className:X.overview},i().createElement("div",{id:"container"},i().createElement("div",{className:X.attachmentsHeader},i().createElement("h4",{className:X.productiveheading02},a("attachments","Attachments")),i().createElement("div",null,p&&i().createElement(c.gbz,{withOverlay:!1,small:!0})),i().createElement(c.GHR,{onChange:function(t){return k("".concat(t.name))}},i().createElement(c.rsf,{name:"grid"},i().createElement(q.lG,{size:16})),i().createElement(c.rsf,{name:"tabular"},i().createElement(W.aV,{size:16}))),i().createElement(c.zxk,{kind:"ghost",renderIcon:J.mm,iconDescription:"Add attachment",onClick:C},a("add","Add"))),"grid"===x?i().createElement(Z,{openAttachment:P,deleteAttachment:H,isLoading:v,attachments:b}):i().createElement(Y,{openAttachment:P,deleteAttachment:H,isLoading:v,attachments:b}))),u&&i().createElement(G,{closePreview:z,attachmentToPreview:u,deleteAttachment:H})):i().createElement(s.EmptyState,{displayText:"attachments",headerTitle:"Attachments",launchForm:C})}},7326:(t,e,a)=>{a.d(e,{H:()=>c,Z:()=>r});var n=a(2067),i=a(906);function r(t){return new Promise((function(e){if(t){var a=new FileReader;a.addEventListener("load",(function(){"string"==typeof a.result?e(a.result):e("")})),a.addEventListener("error",(function(){e("")})),a.readAsDataURL(t)}else e("")}))}function c(t){return{id:t.uuid,src:"".concat(window.openmrsBase).concat(n.eK,"/").concat(t.uuid,"/bytes"),title:t.comment,description:"",dateTime:(0,i.formatDate)(new Date(t.dateTime),{mode:"wide"}),bytesMimeType:t.bytesMimeType,bytesContentFamily:t.bytesContentFamily}}}}]);