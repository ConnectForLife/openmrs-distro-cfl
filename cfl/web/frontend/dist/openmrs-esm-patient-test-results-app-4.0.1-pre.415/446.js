"use strict";(self.webpackChunk_openmrs_esm_patient_test_results_app=self.webpackChunk_openmrs_esm_patient_test_results_app||[]).push([[446],{2644:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(9601),a=r.n(n),o=r(2609),i=r.n(o)()(a());i.push([e.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-test-results__common-overview__card___vvLzq{border:1px solid #e0e0e0}.-esm-patient-test-results__common-overview__activeCard___bmXF0{border:2px solid var(--brand-03)}.-esm-patient-test-results__common-overview__cardHeader___kfzgN:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-patient-test-results__common-overview__columns___RFN_4 col{width:33.3%}.-esm-patient-test-results__common-overview__separator___Nd5xV{height:1.5rem;border-bottom:1px solid #e0e0e0;width:calc(100% - 1.5rem);margin-left:.75rem}.-esm-patient-test-results__common-overview__meta___hyiLL{display:flex}.-esm-patient-test-results__common-overview__tooltip___ZjRQG{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#f4f4f4}.-esm-patient-test-results__common-overview__tooltip___ZjRQG p{margin:.5rem 0;display:flex;align-items:baseline;justify-content:space-between}.-esm-patient-test-results__common-overview__label___MTYkH{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px);color:#c6c6c6;margin-right:.25rem}',""]),i.locals={card:"-esm-patient-test-results__common-overview__card___vvLzq",activeCard:"-esm-patient-test-results__common-overview__activeCard___bmXF0",cardHeader:"-esm-patient-test-results__common-overview__cardHeader___kfzgN",columns:"-esm-patient-test-results__common-overview__columns___RFN_4",separator:"-esm-patient-test-results__common-overview__separator___Nd5xV",meta:"-esm-patient-test-results__common-overview__meta___hyiLL",tooltip:"-esm-patient-test-results__common-overview__tooltip___ZjRQG",label:"-esm-patient-test-results__common-overview__label___MTYkH"};const l=i},9894:(e,t,r)=>{r.d(t,{Z:()=>g});var n=r(268),a=r.n(n),o=r(5047),i=r.n(o),l=r(1827),s=r(0);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r,n,a,o,i){try{var l=e[o](i),s=l.value}catch(e){return void r(e)}l.done?t(s):Promise.resolve(s).then(n,a)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){u(o,n,a,i,l,"next",e)}function l(e){u(o,n,a,i,l,"throw",e)}i(void 0)}))}}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){f(e,t,r[t])}))}return e}function p(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t,r){return function(n){n.conceptClass=(0,l.Kk)(n),n.hasMember?(n.members=new Array(n.hasMember.length),n.hasMember.forEach((function(e,r){t[e.reference.split("/")[1]]=[n.members,r]}))):n.meta=r[n.conceptClass],n.valueQuantity&&(n.value=n.valueQuantity.value,delete n.valueQuantity),n.valueCodeableConcept&&(n.value=null==n?void 0:n.valueCodeableConcept.coding[0].display,delete n.valueCodeableConcept),n.name=e[n.conceptClass]}}function _(){return(_=m(i().mark((function e(t){var r,n,a,o,c,u,m,f,_,b,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.HZ)(t);case 2:return r=e.sent,e.next=5,(0,l.E6)(r);case 5:return n=e.sent,a=n.filter((function(e){return"Test"===e.conceptClass.name||"LabSet"===e.conceptClass.name})),o=a.map((function(e){return e.uuid})),c=Object.fromEntries(a.map((function(e){return[e.uuid,e.display]}))),u=Object.fromEntries(o.map((function(e){return[e,[]]}))),m=(0,l.OA)(a),f=[],b=y(c,_={},m),r.forEach((function(e){o.includes((0,l.Kk)(e))&&(b(e),e.members?u[e.conceptClass].push(e):f.push(e))})),f.forEach((function(e){var t=e.id,r=_[t];r&&(r[0][r[1]]=e),u[e.conceptClass]&&u[e.conceptClass].push(e)})),Object.values(u).filter((function(e){return e.some((function(e){return e.members}))})).forEach((function(e){var t=e.flatMap((function(e){return e.members})),r=(0,s.Z)(t.map((function(e){return e.conceptClass}))),n=!0,a=!1,o=void 0;try{for(var i,l=function(){var r=i.value,n=f.filter((function(e){return e.conceptClass===r&&!t.some((function(t){return t.id===e.id}))})),a=!0,o=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=s.value;e.push(p(d({},u),{members:[u]}))}}catch(e){o=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw l}}},c=r[Symbol.iterator]();!(n=(i=c.next()).done);n=!0)l()}catch(e){a=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}})),h=Object.fromEntries(Object.entries(u).filter((function(e){return e[1].length})).map((function(e){var t=v(e,2),r=t[0],n=t[1],o=a.find((function(e){return e.uuid===r})),i=o.display,l=o.conceptClass.display;return[i,{entries:n.sort((function(e,t){return Date.parse(t.effectiveDateTime)-Date.parse(e.effectiveDateTime)})),type:l,uuid:r}]}))),r.length>0&&(0,l.s4)(t,h,r[0].id),e.abrupt("return",h);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const g=function(e){var t=h(a().useState({sortedObs:{},loaded:!1,error:void 0}),2),r=t[0],n=t[1];return a().useEffect((function(){var t=!1;if(e){var r=h(function(e){var t=v((0,l.cF)(e),2),r=t[0],n=t[1];return[r,n.then((function(t){return t?function(e){return _.apply(this,arguments)}(e):r}))]}(e),2),a=r[0],o=r[1];a&&n({sortedObs:a,loaded:!0,error:void 0}),o.then((function(e){e===a||t||n({sortedObs:e,loaded:!0,error:void 0})}))}return function(){t=!0}}),[e]),r}},2779:(e,t,r)=>{r.d(t,{Z:()=>Z});var n=r(268),a=r.n(n),o=r(5241),i=r(2074),l=r(37),s=r(8557),c=r(6217),u=r(4924),m=r(906),f=r(5317),d=r(6062),p=r.n(d),v=r(4036),y=r.n(v),_=r(6793),b=r.n(_),h=r(7892),g=r.n(h),w=r(1173),O=r.n(w),E=r(2464),j=r.n(E),S=r(2644),C={};C.styleTagTransform=j(),C.setAttributes=g(),C.insert=b().bind(null,"head"),C.domAPI=y(),C.insertStyleElement=O(),p()(S.Z,C);const T=S.Z&&S.Z.locals?S.Z.locals:void 0;function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(){return A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A.apply(this,arguments)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var D=function(e){var t=A({},e);return a().createElement("div",A({},t,{className:T.separator}))},P=function(e){var t=e.effectiveDateTime,r=e.issuedDateTime,n=(0,u.useTranslation)().t;return a().createElement(o.PTL,{align:"bottom"},a().createElement(o.WBZ,{label:"Additional information"},a().createElement(s.d,null)),a().createElement(o.Uwv,null,a().createElement("div",{className:T.tooltip},a().createElement("p",null,n("dateCollected","Displaying date collected")),a().createElement("p",null,a().createElement("span",{className:T.label},n("resulted","Resulted"),": ")," ",(0,m.formatDatetime)(r,{mode:"wide"})),a().createElement("p",null,a().createElement("span",{className:T.label},n("ordered","Ordered"),": ")," ",(0,m.formatDatetime)(t,{mode:"wide"})))))};const Z=function(e){var t,r=e.overviewData,s=void 0===r?[]:r,d=e.openTimeline,p=e.openTrendline,v=e.insertSeparator,y=void 0!==v&&v,_=e.hideToolbar,b=void 0!==_&&_,h=e.patientUuid,g=(0,u.useTranslation)().t,w=x(a().useState(""),2),O=w[0],E=w[1],j=[{key:"name",header:"Test Name"},{key:"value",header:"Value"},{key:"range",header:"Reference Range"}],S=(0,n.useCallback)((function(e){return O===e||!O&&e===s[0][s[0].length-1]}),[O,s]),C=(0,n.useCallback)((function(){(0,m.navigate)({to:"${openmrsSpaBase}/patient/".concat(h,"/chart/test-results")})}),[h]);return s.length?a().createElement(a().Fragment,null,(t=s.map((function(e){var t=x(e,6),r=t[0],n=t[1],s=t[2],c=t[3],u=t[4],v=t[5];return a().createElement("article",{key:v,className:y?"":"".concat(T.card," ").concat(S(v)?T.activeCard:"")},a().createElement(f.Z,A({},{title:r,data:s,description:a().createElement("div",{className:y?"":T.cardHeader},a().createElement("div",{className:T.meta},(0,m.formatDatetime)(c,{mode:"wide"}),a().createElement(P,{effectiveDateTime:c,issuedDateTime:u}))),tableHeaders:j,toolbar:b||a().createElement(o.fjU,null,a().createElement(o.Vj0,null,"Test"===n&&a().createElement(o.zxk,{kind:"ghost",renderIcon:function(e){return a().createElement(i.mm,A({size:16},e))},onClick:function(){E(v),p(v,v)}},g("trend","Trend")),a().createElement(o.zxk,{kind:"ghost",renderIcon:function(e){return a().createElement(l.iA,A({size:16},e))},onClick:function(){E(v),d(v)}},g("timeline","Timeline"))))})),s.length>5&&y&&a().createElement(o.zxk,{onClick:C,kind:"ghost"},g("moreResultsAvailable","More results available")))})),y?t.reduce((function(e,t,r,n){var o=n.length;return e.push(t),r<o-1&&e.push(a().createElement(D,{key:r})),e}),[]):t)):a().createElement(c.EmptyState,{headerTitle:g("testResults","Test Results"),displayText:g("testResults","test results")})}},2579:(e,t,r)=>{r.d(t,{Z:()=>s,q:()=>l});var n=r(268),a=r(9894);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t,r){var n;return"Test"===t?[{id:e.id,name:r,range:(null===(n=e.meta)||void 0===n?void 0:n.range)||"--",interpretation:e.meta.assessValue?e.meta.assessValue(e.value):"--",value:e.value}]:e.members.map((function(e){var t;return{id:e.id,key:e.id,name:e.name,range:(null===(t=e.meta)||void 0===t?void 0:t.range)||"--",interpretation:e.meta.assessValue(e.value),value:e.value}}))}const s=function(e){var t=(0,a.Z)(e),r=t.sortedObs,o=t.loaded,s=t.error,c=i((0,n.useState)([]),2),u=c[0],m=c[1];return(0,n.useEffect)((function(){m(Object.entries(r).map((function(e){var t=i(e,2),r=t[0],n=t[1],a=n.entries,o=n.type,s=n.uuid,c=a[0];return[r,o,l(c,o,r),new Date(c.effectiveDateTime),new Date(c.issued),s]})).sort((function(e,t){var r=i(e,4)[3];return i(t,4)[3].getTime()-r.getTime()})))}),[r]),{overviewData:u,loaded:o,error:s}}}}]);