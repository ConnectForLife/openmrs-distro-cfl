"use strict";(self.webpackChunk_openmrs_esm_patient_banner_app=self.webpackChunk_openmrs_esm_patient_banner_app||[]).push([[750],{9926:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(9601),r=n.n(a),i=n(2609),o=n.n(i)()(r());o.push([e.id,".-esm-patient-banner__patient-banner__container___zZt9_{border-top:.063rem solid #e0e0e0;border-bottom:.063rem solid #e0e0e0;background-color:#f4f4f4}.-esm-patient-banner__patient-banner__patientBanner___IDwxO{display:flex}.-esm-patient-banner__patient-banner__patientName___P3BMI{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0;margin-right:.25rem}.-esm-patient-banner__patient-banner__patientAvatar___hniLH{width:5rem;height:5rem;margin:1rem;border-radius:1px}.-esm-patient-banner__patient-banner__patientAvatarButton___b_2TM{cursor:pointer;border:none;padding:0px;background:none}.-esm-patient-banner__patient-banner__patientInfo___UzTFD{width:100%}.-esm-patient-banner__patient-banner__demographics___eVcsb{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0;color:#525252;margin-top:.375rem}.-esm-patient-banner__patient-banner__row___hXYG5{display:flex;flex-direction:row;justify-content:space-between;align-items:baseline}.-esm-patient-banner__patient-banner__patientNameRow___w7562{margin-top:.875rem}.-esm-patient-banner__patient-banner__flexRow___nebHD{display:flex;flex-flow:row wrap;align-items:center}.-esm-patient-banner__patient-banner__identifiers___RmAPe{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0;color:#8d8d8d}.-esm-patient-banner__patient-banner__tooltipPadding___TRa3p{padding:.25rem}.-esm-patient-banner__patient-banner__tooltipSmallText___OUMvJ{font-size:80%}.-esm-patient-banner__patient-banner__actionsButtonText___n8Zan{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px;color:#0f62fe}.bx--tooltip--definition .bx--tooltip__trigger{border-bottom:none}",""]),o.locals={container:"-esm-patient-banner__patient-banner__container___zZt9_",patientBanner:"-esm-patient-banner__patient-banner__patientBanner___IDwxO",patientName:"-esm-patient-banner__patient-banner__patientName___P3BMI",patientAvatar:"-esm-patient-banner__patient-banner__patientAvatar___hniLH",patientAvatarButton:"-esm-patient-banner__patient-banner__patientAvatarButton___b_2TM",patientInfo:"-esm-patient-banner__patient-banner__patientInfo___UzTFD",demographics:"-esm-patient-banner__patient-banner__demographics___eVcsb",row:"-esm-patient-banner__patient-banner__row___hXYG5",patientNameRow:"-esm-patient-banner__patient-banner__patientNameRow___w7562",flexRow:"-esm-patient-banner__patient-banner__flexRow___nebHD",identifiers:"-esm-patient-banner__patient-banner__identifiers___RmAPe",tooltipPadding:"-esm-patient-banner__patient-banner__tooltipPadding___TRa3p",tooltipSmallText:"-esm-patient-banner__patient-banner__tooltipSmallText___OUMvJ",actionsButtonText:"-esm-patient-banner__patient-banner__actionsButtonText___n8Zan"};const l=o},7018:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(9601),r=n.n(a),i=n(2609),o=n.n(i)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-patient-banner__contact-details__skeleton___YX5p8{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}.-esm-patient-banner__contact-details__contactDetails___DhvqY{color:#525252;width:100%;border-top:1px solid #e0e0e0}.-esm-patient-banner__contact-details__heading___kI1H1{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px;color:#525252}.-esm-patient-banner__contact-details__row___He4h7{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px;display:flex}.-esm-patient-banner__contact-details__row___He4h7:first-child{border-bottom:1px solid #e0e0e0}.-esm-patient-banner__contact-details__row___He4h7>.-esm-patient-banner__contact-details__col___EWBGr{flex:1;padding:1rem 1rem}.-esm-patient-banner__contact-details__row___He4h7>.-esm-patient-banner__contact-details__col___EWBGr:nth-of-type(2n + 1){border-right:1px solid #e0e0e0}.-esm-patient-banner__contact-details__row___He4h7 li{margin:.5rem 0}.-esm-patient-banner__contact-details__relationship___WTjpq{display:flex;flex-flow:row nowrap}.-esm-patient-banner__contact-details__relationship___WTjpq div{flex:1 1}",""]),o.locals={contactDetails:"-esm-patient-banner__contact-details__contactDetails___DhvqY",heading:"-esm-patient-banner__contact-details__heading___kI1H1",row:"-esm-patient-banner__contact-details__row___He4h7",col:"-esm-patient-banner__contact-details__col___EWBGr",relationship:"-esm-patient-banner__contact-details__relationship___WTjpq",skeleton:"-esm-patient-banner__contact-details__skeleton___YX5p8"};const l=o},6750:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(9902),r=n.n(a),i=n(5573),o=n(6335),l=n(6072),s=n(4724),c=n(4924),d=n(182),m=n(3066),u=n(9857);var p=n(321),_=n.n(p),f=n(1195),b=n.n(f),g=n(3275),h=n.n(g),v=n(7162),y=n.n(v),w=n(2094),E=n.n(w),x=n(757),T=n.n(x),A=n(7018),N={};N.styleTagTransform=T(),N.setAttributes=y(),N.insert=h().bind(null,"head"),N.domAPI=b(),N.insertStyleElement=E(),_()(A.Z,N);const k=A.Z&&A.Z.locals?A.Z.locals:void 0;var I=n(2303),S=function(e){var t=e.address,n=(0,c.useTranslation)().t;return r().createElement(r().Fragment,null,r().createElement("p",{className:k.heading},n("address","Address")),r().createElement("ul",null,t?r().createElement(r().Fragment,null,r().createElement("li",null,t.postalCode),r().createElement("li",null,t.city),r().createElement("li",null,t.state),r().createElement("li",null,t.country)):"--"))},B=function(e){var t=e.telecom,n=e.patientUuid,a=(0,c.useTranslation)().t,i=(null==t?void 0:t.length)?t[0].value:"--",o=function(e){var t=(0,m.useConfig)().contactAttributeType,n=function(e){var t,n=(0,I.Z)("/ws/rest/v1/patient/".concat(e,"?v=").concat("custom:(uuid,display,identifiers:(identifier,uuid,preferred,location:(uuid,name),identifierType:(uuid,name,format,formatDescription,validator)),person:(uuid,display,gender,birthdate,dead,age,deathDate,birthdateEstimated,causeOfDeath,preferredName:(uuid,preferred,givenName,middleName,familyName),attributes,preferredAddress:(uuid,preferred,address1,address2,cityVillage,longitude,stateProvince,latitude,country,postalCode,countyDistrict,address3,address4,address5,address6,address7)))"),m.openmrsFetch),a=n.data,r=n.error;return{isLoading:!a&&!r,attributes:null!==(t=null==a?void 0:a.data.person.attributes)&&void 0!==t?t:[],error:r}}(e),a=n.attributes,r=n.isLoading,i=a.filter((function(e){var n=e.attributeType;return null==t?void 0:t.some((function(e){return n.uuid===e}))}));return{contactAttributes:null!=i?i:[],isLoading:r}}(n),l=o.isLoading,s=o.contactAttributes;return r().createElement(r().Fragment,null,r().createElement("p",{className:k.heading},a("contactDetails","Contact Details")),r().createElement("ul",null,r().createElement("li",null,i),l?r().createElement(d.Z,{description:a("loading","Loading...")}):null==s?void 0:s.map((function(e){var t=e.attributeType,n=e.value,a=e.uuid;return r().createElement("li",{key:a},t.display," : ",n)}))))},D=function(e){var t=e.patientId,n=(0,c.useTranslation)().t,a=function(e){var t,n,a=(0,u.ZP)("/ws/rest/v1/relationship?v=".concat("custom:(display,uuid,personA:(uuid,display,person:(age,display)),personB:(uuid,display,person:(age,display)),relationshipType:(uuid,display,description,aIsToB,bIsToA))","&person=").concat(e),m.openmrsFetch),r=a.data,i=a.error,o=a.isValidating,l=(null==r||null===(t=r.data)||void 0===t||null===(n=t.results)||void 0===n?void 0:n.length)?function(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var s=o.value;e===s.personA.uuid?n.push({uuid:s.uuid,display:s.personB.person.display,relativeAge:s.personB.person.age,relativeUuid:s.personB.uuid,relationshipType:s.relationshipType.bIsToA}):n.push({uuid:s.uuid,display:s.personA.person.display,relativeAge:s.personA.person.age,relativeUuid:s.personA.uuid,relationshipType:s.relationshipType.aIsToB})}}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,r.data.results):null;return{data:r?l:null,isError:i,isLoading:!r&&!i,isValidating:o}}(t),i=a.data,o=a.isLoading;return r().createElement(r().Fragment,null,r().createElement("p",{className:k.heading},n("relationships","Relationships")),r().createElement(r().Fragment,null,o?r().createElement(d.Z,{description:"Loading...",role:"progressbar"}):(null==i?void 0:i.length)?r().createElement("ul",null,i.map((function(e){return r().createElement("li",{key:e.uuid,className:k.relationship},r().createElement("div",null,e.display),r().createElement("div",null,e.relationshipType),r().createElement("div",null,"".concat(e.relativeAge," ").concat(1===e.relativeAge?"yr":"yrs")))}))):r().createElement("p",null,"--")))};const z=function(e){var t=e.address,n=e.telecom,a=e.patientId,i=t?t.find((function(e){return"home"===e.use})):void 0;return r().createElement("div",{className:k.contactDetails},r().createElement("div",{className:k.row},r().createElement("div",{className:k.col},r().createElement(S,{address:i})),r().createElement("div",{className:k.col},r().createElement(B,{telecom:n,patientUuid:a}))),r().createElement("div",{className:k.row},r().createElement("div",{className:k.col},r().createElement(D,{patientId:a})),r().createElement("div",{className:k.col})))};function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const C=function(e){var t,n,i=e.dropDownMenu,o=e.menuTitle,l=e.children,s=(t=(0,a.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw r}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],d=s[1],m=(0,a.useRef)(null);(0,a.useEffect)((function(){i||d((function(e){return e})),d((function(){return!1}))}),[i]);var u=(0,a.useCallback)((function(){return d((function(e){return!e}))}),[]);return(0,a.useEffect)((function(){var e=function(e){m.current&&!m.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[m]),r().createElement("div",{"data-overflow-menu":!0,className:"bx--overflow-menu",style:{width:"auto",height:"auto",marginBottom:"-1.5rem",marginTop:"-1.25rem"},ref:m},r().createElement("button",{className:"bx--overflow-menu__trigger ".concat(c&&"bx--overflow-menu--open"),"aria-haspopup":"true","aria-expanded":c,id:"custom-actions-overflow-menu-trigger","aria-controls":"custom-actions-overflow-menu",onClick:u,style:{width:"auto",height:"auto",padding:"1rem",color:"#0f62fe",outline:"2rem solid transparent",boxShadow:c?"0 2px 6px 0 rgb(0 0 0 / 30%)":"none"}},o),r().createElement("div",{className:"bx--overflow-menu-options bx--overflow-menu--flip",tabIndex:0,"data-floating-menu-direction":"bottom",role:"menu","aria-labelledby":"custom-actions-overflow-menu-trigger",id:"custom-actions-overflow-menu",style:{display:c?"block":"none",top:"3.125rem",minWidth:"initial",left:"auto",right:"0",backgroundColor:"#f4f4f4",marginRight:"0.2rem",boxShadow:"0 6px 6px rgb(0 0 0 / 30%)"}},r().createElement("ul",{className:"bx--overflow-menu-options__content"},l),r().createElement("span",null)))};var M=n(9926),R={};R.styleTagTransform=T(),R.setAttributes=y(),R.insert=h().bind(null,"head"),R.domAPI=b(),R.insertStyleElement=E(),_()(M.Z,R);const L=M.Z&&M.Z.locals?M.Z.locals:void 0;var P=n(6208);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const U=function(e){var t,n,a,d,u,p,_=e.patient,f=e.patientUuid,b=e.onClick,g=e.onTransition,h=e.hideActionsOverflow,v=(0,c.useTranslation)().t,y=r().useRef(null),w=r().useMemo((function(){return{patientUuid:f,onClick:b,onTransition:g}}),[f,b,g]),E="".concat(null===(n=null===(t=_.name)||void 0===t?void 0:t[0].given)||void 0===n?void 0:n.join(" ")," ").concat(null==_||null===(a=_.name)||void 0===a?void 0:a[0].family),x=r().useMemo((function(){return{patientUuid:f,patientName:E}}),[f,E]),T=q(r().useState(!1),2),A=T[0],N=T[1],k=r().useCallback((function(e){e.stopPropagation(),N((function(e){return!e}))}),[]),I=r().createElement("div",{className:L.patientAvatar,role:"img"},r().createElement(m.ExtensionSlot,{extensionSlotName:"patient-photo-slot",state:x})),S=q(r().useState(!1),2),B=S[0],D=S[1],Z=r().useCallback((function(e){e.stopPropagation(),D((function(e){return!e}))}),[]);return r().createElement("div",{className:L.container,role:"banner"},r().createElement("div",{onClick:function(e){b&&(!(null==y?void 0:y.current)||!(null==y?void 0:y.current.contains(e.target)))&&b(f)},tabIndex:0,role:"button",className:"".concat(L.patientBanner," ").concat(b&&L.patientAvatarButton)},I,r().createElement("div",{className:L.patientInfo},r().createElement("div",{className:"".concat(L.row," ").concat(L.patientNameRow)},r().createElement("div",{className:L.flexRow},r().createElement("span",{className:L.patientName},E),r().createElement(m.ExtensionSlot,{extensionSlotName:"patient-banner-tags-slot",state:{patientUuid:f,patient:_},className:L.flexRow})),!h&&r().createElement("div",{ref:y},r().createElement(C,{menuTitle:r().createElement(r().Fragment,null,r().createElement("span",{className:L.actionsButtonText},v("actions","Actions"))," ",r().createElement(s.Z,{style:{marginLeft:"0.5rem"}})),dropDownMenu:B},r().createElement(m.ExtensionSlot,{onClick:Z,extensionSlotName:"patient-actions-slot",key:"patient-actions-slot",className:L.overflowMenuItemList,state:w})))),r().createElement("div",{className:L.demographics},r().createElement("span",null,(0,i.Z)(_.gender))," · ",r().createElement("span",null,(0,m.age)(_.birthDate))," ·"," ",r().createElement("span",null,(0,m.formatDate)((0,m.parseDate)(_.birthDate),{mode:"wide",time:!1}))),r().createElement("div",{className:L.row},r().createElement("span",{className:L.identifiers},(null===(d=_.identifier)||void 0===d?void 0:d.length)?_.identifier.map((function(e){return e.value})).join(", "):"--"),r().createElement(P.Z,{kind:"ghost",renderIcon:A?l.Z:o.Z,iconDescription:"Toggle contact details",onClick:k,style:{marginTop:"-0.25rem"}},A?v("showLess","Show less"):v("showAllDetails","Show all details"))))),A&&r().createElement(z,{address:null!==(u=_.address)&&void 0!==u?u:[],telecom:null!==(p=_.telecom)&&void 0!==p?p:[],patientId:_.id}))}}}]);