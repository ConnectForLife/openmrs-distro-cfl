"use strict";(self.webpackChunk_openmrs_esm_cohort_builder_app=self.webpackChunk_openmrs_esm_cohort_builder_app||[]).push([[180],{7503:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,".-esm-cohort-builder__composition-style__text____ADAb {\n  font-size: 0.85rem;\n}\n",""]),i.locals={text:"-esm-cohort-builder__composition-style__text____ADAb"};const l=i},6794:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,".-esm-cohort-builder__search-button-set__container___F_25r {\n  padding-bottom: 0.5rem;\n  padding-top: 1rem;\n}\n\n.-esm-cohort-builder__search-button-set__buttonSet___c6nzV {\n justify-content: end;\n}\n\n",""]),i.locals={container:"-esm-cohort-builder__search-button-set__container___F_25r",buttonSet:"-esm-cohort-builder__search-button-set__buttonSet___c6nzV"};const l=i},1229:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,".-esm-cohort-builder__search-concept-style__search___sLfGj {\n  max-height: 400px;\n  overflow: scroll;\n  position: absolute;\n  z-index: 2;\n  width: 33%;\n  background: #f0eeee;\n}\n\n.-esm-cohort-builder__search-concept-style__concept___eXXiX {\n  font-weight: bold;\n}\n\n.-esm-cohort-builder__search-concept-style__text___oXP1o {\n padding-top: 1.5rem;\n}\n\n.-esm-cohort-builder__search-concept-style__notification___ObL9P {\n  position: fixed;\n  left: 50%;\n  bottom: 20px;\n  transform: translate(-50%, -50%);\n  margin: 0 auto;\n  z-index: 1;\n}\n",""]),i.locals={search:"-esm-cohort-builder__search-concept-style__search___sLfGj",concept:"-esm-cohort-builder__search-concept-style__concept___eXXiX",text:"-esm-cohort-builder__search-concept-style__text___oXP1o",notification:"-esm-cohort-builder__search-concept-style__notification___ObL9P"};const l=i},735:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-cohort-builder__cohort-builder__heading___otYR5{font-size:var(--cds-productive-heading-02-font-size, 1rem);font-weight:var(--cds-productive-heading-02-font-weight, 600);line-height:var(--cds-productive-heading-02-line-height, 1.375);letter-spacing:var(--cds-productive-heading-02-letter-spacing, 0);color:#525252;margin-bottom:1rem}.-esm-cohort-builder__cohort-builder__heading___otYR5:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-cohort-builder__cohort-builder__mainContainer___xMxRR{padding-bottom:1.5rem;background:#f4f4f4;display:flex;justify-content:center}.-esm-cohort-builder__cohort-builder__title___Yjwtl{padding:1rem;font-size:1.2rem}.-esm-cohort-builder__cohort-builder__desktopContainer___OyeBq{width:50%}.-esm-cohort-builder__cohort-builder__tabletContainer___JTNVc{width:90%}.-esm-cohort-builder__cohort-builder__cohortBuilder___Rr96n .cds--date-picker.cds--date-picker--single .cds--date-picker__input{width:auto}.-esm-cohort-builder__cohort-builder__cohortBuilder___Rr96n .cds--tab-content{width:80%;padding:0}.-esm-cohort-builder__cohort-builder__cohortBuilder___Rr96n .cds--inline-loading__text{color:#fff}.-esm-cohort-builder__cohort-builder__cohortBuilder___Rr96n .cds--tab--list{flex-direction:column;margin:1rem}.-esm-cohort-builder__cohort-builder__cohortBuilder___Rr96n .cds--tabs{width:auto;max-height:100%}.-esm-cohort-builder__cohort-builder__cohortBuilder___Rr96n .cds--tabs .cds--tabs__nav-link{border-bottom:0;border-left:3px solid #e0e0e0}.-esm-cohort-builder__cohort-builder__cohortBuilder___Rr96n .cds--tabs .cds--tabs__nav-item--selected{border-left:3px solid var(--brand-03);border-bottom:0;font-weight:600}.-esm-cohort-builder__cohort-builder__cohortBuilder___Rr96n .cds--number{width:68%}.-esm-cohort-builder__cohort-builder__cohortBuilder___Rr96n .cds--tabs__nav-link:active,.-esm-cohort-builder__cohort-builder__cohortBuilder___Rr96n .cds--tabs__nav-link:focus{outline:0 !important;outline-offset:0 !important}.-esm-cohort-builder__cohort-builder__cohortBuilder___Rr96n .cds--multi-select__wrapper .cds--list-box__wrapper{width:90% !important}.-esm-cohort-builder__cohort-builder__cohortBuilder___Rr96n .cds--col{padding-left:0;width:100%}.-esm-cohort-builder__cohort-builder__tabletTab___fZbR8{width:25%}.-esm-cohort-builder__cohort-builder__desktopTab___Sv4Cx{width:20%}.-esm-cohort-builder__cohort-builder__tab___nvwB9{display:flex}.-esm-cohort-builder__cohort-builder__tabContainer___C02tj{background:#fff;padding-left:1.5rem;padding-right:1rem;padding-top:1rem;margin-bottom:1rem}.-esm-cohort-builder__cohort-builder__optionCell___RXDE6{padding:0 !important}.-esm-cohort-builder__cohort-builder__optionHeader___mtjt_{width:1.5rem !important}.-esm-cohort-builder__cohort-builder__text___uI8jH{font-size:.9rem;padding:.5rem}',""]),i.locals={heading:"-esm-cohort-builder__cohort-builder__heading___otYR5",mainContainer:"-esm-cohort-builder__cohort-builder__mainContainer___xMxRR",title:"-esm-cohort-builder__cohort-builder__title___Yjwtl",desktopContainer:"-esm-cohort-builder__cohort-builder__desktopContainer___OyeBq",tabletContainer:"-esm-cohort-builder__cohort-builder__tabletContainer___JTNVc",cohortBuilder:"-esm-cohort-builder__cohort-builder__cohortBuilder___Rr96n",tabletTab:"-esm-cohort-builder__cohort-builder__tabletTab___fZbR8",desktopTab:"-esm-cohort-builder__cohort-builder__desktopTab___Sv4Cx",tab:"-esm-cohort-builder__cohort-builder__tab___nvwB9",tabContainer:"-esm-cohort-builder__cohort-builder__tabContainer___C02tj",optionCell:"-esm-cohort-builder__cohort-builder__optionCell___RXDE6",optionHeader:"-esm-cohort-builder__cohort-builder__optionHeader___mtjt_",text:"-esm-cohort-builder__cohort-builder__text___uI8jH"};const l=i},7567:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-cohort-builder__empty-data-style__action___DgAh1{margin-bottom:.5rem}.-esm-cohort-builder__empty-data-style__content___TqPkA{font-size:var(--cds-productive-heading-01-font-size, 0.875rem);font-weight:var(--cds-productive-heading-01-font-weight, 600);line-height:var(--cds-productive-heading-01-line-height, 1.28572);letter-spacing:var(--cds-productive-heading-01-letter-spacing, 0.16px);color:#525252;margin-top:1rem;margin-bottom:.5rem}.-esm-cohort-builder__empty-data-style__tile___ZNJVK{text-align:center;border:1px solid #e0e0e0}",""]),i.locals={action:"-esm-cohort-builder__empty-data-style__action___DgAh1",content:"-esm-cohort-builder__empty-data-style__content___TqPkA",tile:"-esm-cohort-builder__empty-data-style__tile___ZNJVK"};const l=i},8051:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,".-esm-cohort-builder__saved-cohorts__container___VnBfi{background:#fff;padding:1rem}.-esm-cohort-builder__saved-cohorts__searchContainer___J85ly{display:flex;margin-bottom:2rem}.-esm-cohort-builder__saved-cohorts__searchBtn___tBqPw .cds--btn{min-height:1rem}",""]),i.locals={container:"-esm-cohort-builder__saved-cohorts__container___VnBfi",searchContainer:"-esm-cohort-builder__saved-cohorts__searchContainer___J85ly",searchBtn:"-esm-cohort-builder__saved-cohorts__searchBtn___tBqPw"};const l=i},1221:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,".-esm-cohort-builder__saved-queries__container___xXNUy{background:#fff;padding:1rem}.-esm-cohort-builder__saved-queries__searchContainer____r94H{display:flex;margin-bottom:2rem}.-esm-cohort-builder__saved-queries__searchBtn___fSjSZ .cds--btn{min-height:1rem}.-esm-cohort-builder__saved-queries__optionCell___Yd5V1{padding:0 !important}.-esm-cohort-builder__saved-queries__optionHeader___iiD9c{width:1.5rem !important}",""]),i.locals={container:"-esm-cohort-builder__saved-queries__container___xXNUy",searchContainer:"-esm-cohort-builder__saved-queries__searchContainer____r94H",searchBtn:"-esm-cohort-builder__saved-queries__searchBtn___fSjSZ",optionCell:"-esm-cohort-builder__saved-queries__optionCell___Yd5V1",optionHeader:"-esm-cohort-builder__saved-queries__optionHeader___iiD9c"};const l=i},3218:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.28572;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.28572;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-cohort-builder__search-by-concepts-style__skeleton___bw7HP{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}.-esm-cohort-builder__search-by-concepts-style__contentSwitcher___L8_pG{height:2.5rem}.-esm-cohort-builder__search-by-concepts-style__column___g5X8T{padding-top:1.5rem}.-esm-cohort-builder__search-by-concepts-style__dateRange___Sw46O{padding-top:1.5rem;display:flex}.-esm-cohort-builder__search-by-concepts-style__text___uq45L{padding-top:1.5rem}.-esm-cohort-builder__search-by-concepts-style__multipleInputs___HqfvW{display:flex;align-items:center}.-esm-cohort-builder__search-by-concepts-style__timeModifier___fvlst{width:300px}.-esm-cohort-builder__search-by-concepts-style__lastTime___wwDLD{padding-left:1rem;padding-right:1rem}.-esm-cohort-builder__search-by-concepts-style__operators___XXEjN{width:60%;padding-right:1rem}.-esm-cohort-builder__search-by-concepts-style__value___MukvW{padding-right:2rem}.-esm-cohort-builder__search-by-concepts-style__whatValuesInputs___puC4Q{display:flex;align-items:end}",""]),i.locals={contentSwitcher:"-esm-cohort-builder__search-by-concepts-style__contentSwitcher___L8_pG",column:"-esm-cohort-builder__search-by-concepts-style__column___g5X8T",dateRange:"-esm-cohort-builder__search-by-concepts-style__dateRange___Sw46O",text:"-esm-cohort-builder__search-by-concepts-style__text___uq45L",multipleInputs:"-esm-cohort-builder__search-by-concepts-style__multipleInputs___HqfvW",timeModifier:"-esm-cohort-builder__search-by-concepts-style__timeModifier___fvlst",lastTime:"-esm-cohort-builder__search-by-concepts-style__lastTime___wwDLD",operators:"-esm-cohort-builder__search-by-concepts-style__operators___XXEjN",value:"-esm-cohort-builder__search-by-concepts-style__value___MukvW",whatValuesInputs:"-esm-cohort-builder__search-by-concepts-style__whatValuesInputs___puC4Q",skeleton:"-esm-cohort-builder__search-by-concepts-style__skeleton___bw7HP"};const l=i},7346:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-cohort-builder__search-by-demographics-style__contentSwitcher___wCxtI{height:2.5rem}.-esm-cohort-builder__search-by-demographics-style__column___L5yG5{padding-top:1.5rem;display:flex}.-esm-cohort-builder__search-by-demographics-style__text___h50g8{padding-right:1rem;font-size:.75rem;color:#525252}.-esm-cohort-builder__search-by-demographics-style__switch___CC_jK{width:60%;padding-right:1rem}.-esm-cohort-builder__search-by-demographics-style__genderContainer___zy67v{display:flex;align-items:end}.-esm-cohort-builder__search-by-demographics-style__ageContainer___WkThl{display:flex;justify-content:space-between;width:34%}.-esm-cohort-builder__search-by-demographics-style__age___RRZrJ{display:flex}.-esm-cohort-builder__search-by-demographics-style__genderTitle___q_qFQ{padding-bottom:.5rem}",""]),i.locals={contentSwitcher:"-esm-cohort-builder__search-by-demographics-style__contentSwitcher___wCxtI",column:"-esm-cohort-builder__search-by-demographics-style__column___L5yG5",text:"-esm-cohort-builder__search-by-demographics-style__text___h50g8",switch:"-esm-cohort-builder__search-by-demographics-style__switch___CC_jK",genderContainer:"-esm-cohort-builder__search-by-demographics-style__genderContainer___zy67v",ageContainer:"-esm-cohort-builder__search-by-demographics-style__ageContainer___WkThl",age:"-esm-cohort-builder__search-by-demographics-style__age___RRZrJ",genderTitle:"-esm-cohort-builder__search-by-demographics-style__genderTitle___q_qFQ"};const l=i},1315:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,".-esm-cohort-builder__search-by-drug-orders-style__column___RQ5K3{padding-top:1.5rem;display:flex}",""]),i.locals={column:"-esm-cohort-builder__search-by-drug-orders-style__column___RQ5K3"};const l=i},8707:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,".-esm-cohort-builder__search-by-encounters-style__column___lzqvv{padding-top:1.5rem;display:flex}.-esm-cohort-builder__search-by-encounters-style__multipleInputs___ItdZt{margin-right:.2rem}.-esm-cohort-builder__search-by-encounters-style__encounterRange___WdM2R{display:flex}",""]),i.locals={column:"-esm-cohort-builder__search-by-encounters-style__column___lzqvv",multipleInputs:"-esm-cohort-builder__search-by-encounters-style__multipleInputs___ItdZt",encounterRange:"-esm-cohort-builder__search-by-encounters-style__encounterRange___WdM2R"};const l=i},1571:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,".-esm-cohort-builder__search-by-enrollments-style__column___bq2Kv{padding-top:1.5rem;display:flex}",""]),i.locals={column:"-esm-cohort-builder__search-by-enrollments-style__column___bq2Kv"};const l=i},7355:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,".-esm-cohort-builder__search-by-location-style__column___ZmakV{padding-top:1.5rem;display:flex}",""]),i.locals={column:"-esm-cohort-builder__search-by-location-style__column___ZmakV"};const l=i},9683:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,".-esm-cohort-builder__search-by-person-attributes-style__column___iJiIw{padding-top:1.5rem;display:flex}",""]),i.locals={column:"-esm-cohort-builder__search-by-person-attributes-style__column___iJiIw"};const l=i},7204:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,".-esm-cohort-builder__search-history-style__header___X0Ke4{display:flex;align-items:center;justify-content:space-between;padding:.5rem}.-esm-cohort-builder__search-history-style__container___IxW73{margin-top:1rem;background:#fff;padding:1rem}",""]),i.locals={header:"-esm-cohort-builder__search-history-style__header___X0Ke4",container:"-esm-cohort-builder__search-history-style__container___IxW73"};const l=i},2533:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(8081),a=r.n(n),o=r(3645),i=r.n(o)()(a());i.push([e.id,".-esm-cohort-builder__search-results-table__container___zndqL{background:#fff;padding:1rem}",""]),i.locals={container:"-esm-cohort-builder__search-results-table__container___zndqL"};const l=i},7148:(e,t,r)=>{r.r(t),r.d(t,{default:()=>$r});var n=r(5666),a=r.n(n),o=r(1672),i=r.n(o),l=r(7990),c=r(1132),s=r(3397),u=r(8842);function d(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){d(o,n,a,i,l,"next",e)}function l(e){d(o,n,a,i,l,"throw",e)}i(void 0)}))}}var p,h=(p=m(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.openmrsFetch)("/ws/rest/v1/reportingrest/adhocquery?v=full",{method:"POST",headers:{"Content-Type":"application/json"},body:t.query});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e){return p.apply(this,arguments)}),f=function(){var e=(0,u.Z)("/ws/rest/v1/location",c.openmrsFetch),t=e.data,r=e.error,n=[];return null==t||t.data.results.map((function(e,t){n.push({id:t,label:e.display,value:e.uuid})})),{isLoading:!t&&!r,locations:n,locationsError:r}},v=function(){var e=m(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.openmrsFetch)("/ws/rest/v1/reportingrest/dataSet/".concat(t),{method:"GET"});case 2:return r=e.sent,n=r.data.rows.map((function(e){return e.id=e.patientId.toString(),e.name="".concat(e.firstname," ").concat(e.lastname),e})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=m(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.openmrsFetch)("/ws/rest/v1/cohort/".concat(t,"/member?v=full"),{method:"GET"});case 2:return r=e.sent,n=r.data.rows.map((function(e){return e.id=e.patientId.toString(),e.name="".concat(e.firstname," ").concat(e.lastname),e})),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=r(7410),y=r.n(b),g=r(4766),E=r.n(g),w=r(1991),S=r.n(w),x=r(3702),A=r.n(x),T=r(2434),C=r.n(T),O=r(1422),k=r.n(O),I=r(735),D={};D.styleTagTransform=k(),D.setAttributes=A(),D.insert=S().bind(null,"head"),D.domAPI=E(),D.insertStyleElement=C(),y()(I.Z,D);const P=I.Z&&I.Z.locals?I.Z.locals:void 0;function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=function(e){var t={type:"org.openmrs.module.reporting.dataset.definition.PatientDataSetDefinition",columns:[],rowFilters:[],customRowFilterCombination:""};t.columns=L();var r=0;for(var n in t.rowFilters=[],e)Y(e[n])?delete e[n]:("all"!=e[n]&&""!=e&&(t.rowFilters[r]={},t.rowFilters[r].key=j(n,e[n])),Array.isArray(e[n])&&(t.rowFilters[r].parameterValues=R(e[n])),e[n].length>=1&&"alive"===e[n][0].livingStatus&&(t.rowFilters[r].livingStatus="alive"),t.rowFilters[r].type="org.openmrs.module.reporting.dataset.definition.PatientDataSetDefinition",r+=1);return t.customRowFilterCombination=Z(t.rowFilters),{query:t}},Y=function(e){return Array.isArray(e)&&e.length>=1?!e[0].value:"all"===e||!e},j=function(e,t){var r="reporting.library.cohortDefinition.builtIn";return r+=".".concat("gender"===e?t:e)},R=function(e){var t={};return e.forEach((function(e){t[e.name]=e.value})),t},Z=function(e){for(var t="",r=e.length,n=1;n<=r;n++)"alive"===e[n-1].livingStatus?(t+="NOT ".concat(n),delete e[n-1].livingStatus):t+="".concat(n),t+=n<r?" AND ":"";return t},L=function(){return[{name:"firstname",key:"preferredName.givenName"},{name:"lastname",key:"preferredName.familyName"},{name:"gender",key:"gender"},{name:"age",key:"ageOnDate.fullYears"},{name:"patientId",key:"patientId"}].map((function(e){return e.type="org.openmrs.module.reporting.data.patient.definition.PatientDataDefinition",e.key="reporting.library.patientDataDefinition.builtIn.".concat(e.key),e}))},z=function(e,t,r){var n,a,o=JSON.parse(window.sessionStorage.getItem("openmrsHistory"));n=o?(a=o,function(e){if(Array.isArray(e))return N(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([{description:e,patients:t,parameters:r}]):[{description:e,patients:t,parameters:r}],window.sessionStorage.setItem("openmrsHistory",JSON.stringify(n))},q=function(e){var t=new Date(e),r=t.getDate(),n=t.getMonth()+1,a=t.getFullYear();return"".concat(r,"/").concat(n,"/").concat(a)},H=function(e,t){var r=e.timeModifier,n=e.onOrAfter,a=e.onOrBefore,o=n?"since ".concat(q(n)):"",i=a?"until ".concat(q(a)):"";return"Patients with ".concat(r," ").concat(t," ").concat(o," ").concat(i).trim()},B=function(e,t){var r,n=new Blob([(r=e,"patient_id, full_name, age, gender\n"+r.map((function(e){var t={patientId:e.patientId,name:e.name,age:e.age,gender:e.gender};return Object.keys(t).map((function(t){return'"'.concat(e[t],'"')})).join(",")})).join("\n"))],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(n),o=document.createElement("a");o.href=a,o.setAttribute("download",t),o.click()},F=r(6794),G={};G.styleTagTransform=k(),G.setAttributes=A(),G.insert=S().bind(null,"head"),G.domAPI=E(),G.insertStyleElement=C(),y()(F.Z,G);const V=F.Z&&F.Z.locals?F.Z.locals:void 0,U=function(e){var t=e.isLoading,r=e.onHandleSubmit,n=e.onHandleReset,a=(0,s.useTranslation)().t;return i().createElement(l.sgG,{sm:2,md:{offset:4},className:V.container},i().createElement(l.uVA,{className:V.buttonSet},i().createElement(l.zxk,{kind:"secondary",onClick:n,"data-testid":"reset-btn"},a("reset","Reset")),i().createElement(l.zxk,{kind:"primary",onClick:r,"data-testid":"search-btn"},t?i().createElement(l.lSo,{description:a("loading","Loading")}):a("search","Search"))))};var Q=r(7503),W={};W.styleTagTransform=k(),W.setAttributes=A(),W.insert=S().bind(null,"head"),W.domAPI=E(),W.insertStyleElement=C(),y()(Q.Z,W);const X=Q.Z&&Q.Z.locals?Q.Z.locals:void 0;var $=function(e){return e.match(/and|or|not|\d+|\)|\(|union|intersection|\!|\+/gi).length===e.split(/\s+/g).length},J=function(e){var t=e.replace(/(\(|\))+/g,(function(e){return"("===e?"( ":" )"})),r={type:"org.openmrs.module.reporting.dataset.definition.PatientDataSetDefinition",columns:L(),rowFilters:[],customRowFilterCombination:""};return t.split(/\s+/).forEach((function(e){if(e.match(/\d/)){var t=JSON.parse(window.sessionStorage.getItem("openmrsHistory"))[parseInt(e)-1].parameters;t.customRowFilterCombination=(n=t.customRowFilterCombination,a=r.rowFilters.length,n.replace(/\d/,(function(e){return(parseInt(e)+a).toString()}))),r.customRowFilterCombination+="(".concat(t.customRowFilterCombination,")"),r.rowFilters=r.rowFilters.concat(t.rowFilters)}else r.customRowFilterCombination+=" ".concat(e," ");var n,a})),{query:r}};function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ee(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?K(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const re=function(e){var t=e.onSubmit,r=te((0,o.useState)(!1),2),n=r[0],u=r[1],d=te((0,o.useState)(""),2),m=d[0],p=d[1],h=te((0,o.useState)(""),2),f=h[0],v=h[1],_=(0,s.useTranslation)().t,b=function(){var e,r=(e=a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(!0),e.prev=1,!$(m)){e.next=8;break}return r=J(m),e.next=6,t(r,f);case 6:e.next=9;break;case 8:(0,c.showNotification)({title:_("error","Error!"),kind:"error",critical:!0,description:_("invalidComposition","Composition is not valid")});case 9:u(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),u(!1),(0,c.showNotification)({title:_("error","Error!"),kind:"error",critical:!0,description:_("invalidComposition","Composition is not valid")});case 16:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){ee(o,n,a,i,l,"next",e)}function l(e){ee(o,n,a,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement(l.oil,{"data-modal-primary-focus":!0,required:!0,labelText:_("composition","Composition"),"data-testid":"composition-query",id:"composition-query",onChange:function(e){return t=e.target.value,p(t),void v("Composition of "+t);var t},value:m}),i().createElement("br",null),i().createElement(l.oil,{"data-modal-primary-focus":!0,required:!0,labelText:_("description","Description"),"data-testid":"composition-description",id:"composition-description",onChange:function(e){return v(e.target.value)},value:f}),i().createElement("br",null),i().createElement("p",{className:X.text},_("compositionExplanationOne","A composition query combines together the results of multiple cohorts using the logical operators: AND, OR and NOT.")),i().createElement("br",null),i().createElement("p",{className:X.text},_("compositionExplanationTwo","To use this query you need to already have query results in your search history. Those existing query results can then be combined to yield the results of the composition query.")),i().createElement("br",null),i().createElement("p",{className:X.text},_("compositionExplanationThree","Example: if the search history #1 is a cohort of patients who are males, and if the search history #2 is a cohort of patients with ages between 23 and 35 years; then '1 AND 2' will result in a cohort of patients who are males with ages between 23 and 35 years.")),i().createElement("br",null),i().createElement(U,{onHandleReset:function(){v(""),p("")},onHandleSubmit:b,isLoading:n}))};var ne=r(5154),ae=r(7567),oe={};oe.styleTagTransform=k(),oe.setAttributes=A(),oe.insert=S().bind(null,"head"),oe.domAPI=E(),oe.insertStyleElement=C(),y()(ae.Z,oe);const ie=ae.Z&&ae.Z.locals?ae.Z.locals:void 0,le=function(e){return i().createElement(l.mh4,null,i().createElement(l.n9L,{className:ie.tile},i().createElement(ne.N,null),i().createElement("p",{className:ie.content},"There are no ",e.displayText.toLowerCase()," to display")))};function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function se(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function ue(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){se(o,n,a,i,l,"next",e)}function l(e){se(o,n,a,i,l,"throw",e)}i(void 0)}))}}var de;!function(e){e[e.VIEW=0]="VIEW",e[e.DELETE=1]="DELETE"}(de||(de={}));const me=function(e){var t,r,n=e.cohort,u=e.onViewCohort,d=e.onDeleteCohort,m=(0,s.useTranslation)().t,p=(t=(0,o.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=p[0],f=p[1],v=function(){var e=ue(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(n.id);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(0,c.showToast)({title:m("cohortViewError","Error viewing the cohort"),kind:"error",critical:!0,description:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=ue(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===de.VIEW?3:e.t0===de.DELETE?5:7;break;case 3:return v(),e.abrupt("break",7);case 5:return f(!0),e.abrupt("break",7);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=ue(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(n.id);case 2:f(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement(l.PQB,{ariaLabel:"overflow-menu",size:"md",flipped:!0,direction:"bottom","data-testid":"options"},i().createElement(l.laM,{"data-testid":"view",itemText:m("view","View"),onClick:function(){return _(de.VIEW)}}),i().createElement(l.laM,{"data-testid":"delete",itemText:m("delete","Delete"),onClick:function(){return _(de.DELETE)}})),i().createElement(l.lpG,{size:"sm",open:h,onClose:function(){return f(!1)}},i().createElement(l.xBx,null,i().createElement("p",null,m("deleteItem","Are you sure you want to delete ".concat(null==n?void 0:n.name,"?"),{itemName:null==n?void 0:n.name}))),i().createElement(l.mzw,{danger:!0,onRequestSubmit:b,primaryButtonText:m("delete","Delete"),secondaryButtonText:m("cancel","Cancel")})))};function pe(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function he(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){pe(o,n,a,i,l,"next",e)}function l(e){pe(o,n,a,i,l,"throw",e)}i(void 0)}))}}function fe(){return ve.apply(this,arguments)}function ve(){return(ve=he(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.openmrsFetch)("/ws/rest/v1/cohort?v=full",{method:"GET"});case 2:return t=e.sent,r=[],t.data.results.length>0&&t.data.results.map((function(e){var t={id:e.uuid,name:e.name,description:e.description};r.push(t)})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _e=function(){var e=he(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.openmrsFetch)("/ws/rest/v1/cohort/".concat(t),{method:"DELETE"});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=r(8051),ye={};ye.styleTagTransform=k(),ye.setAttributes=A(),ye.insert=S().bind(null,"head"),ye.domAPI=E(),ye.insertStyleElement=C(),y()(be.Z,ye);const ge=be.Z&&be.Z.locals?be.Z.locals:void 0;function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function we(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function Se(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){we(o,n,a,i,l,"next",e)}function l(e){we(o,n,a,i,l,"throw",e)}i(void 0)}))}}function xe(){return xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xe.apply(this,arguments)}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Te=function(e){var t=e.onViewCohort,r=Ae((0,o.useState)(1),2),n=r[0],u=r[1],d=Ae((0,o.useState)(10),2),m=d[0],p=d[1],h=Ae((0,o.useState)([]),2),f=h[0],v=h[1],_=(0,s.useTranslation)().t,b=function(){var e=Se(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:t=e.sent,v(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=[{key:"name",header:_("name","Name")},{key:"description",header:_("description","Description")}],g=function(){var e=Se(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e(t);case 3:(0,c.showToast)({title:_("success","Success"),kind:"success",critical:!0,description:_("cohortIsDeleted","the cohort is deleted")}),b(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,c.showToast)({title:_("cohortDeleteError","Error deleting the cohort"),kind:"error",critical:!0,description:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){b()}),[]),i().createElement("div",{className:ge.container},i().createElement("p",{className:P.text},_("savedCohortDescription","You can only search for Cohort Definitions that you have saved using a Name.")),i().createElement(l.wQF,{rows:f,headers:y,useZebraStyles:!0},(function(e){var r=e.rows,a=e.headers,o=e.getTableProps,c=e.getHeaderProps,s=e.getRowProps;return i().createElement(l.iA_,xe({},o()),i().createElement(l.ssF,null,i().createElement(l.SCH,null,a.map((function(e){return i().createElement(l.xDH,xe({},c({header:e})),e.header)})),i().createElement(l.xDH,{className:P.optionHeader}))),i().createElement(l.RMI,null,r.slice((n-1)*m).slice(0,m).map((function(e,r){return i().createElement(l.SCH,xe({},s({row:e}),{key:r}),e.cells.map((function(e,t){return i().createElement(l.pj1,{key:t},e.value)})),i().createElement(l.pj1,{className:P.optionCell},i().createElement(me,{cohort:f[r],onViewCohort:t,onDeleteCohort:g})))}))))})),f.length>10&&i().createElement(l.tlE,{backwardText:_("previousPage","Previous page"),forwardText:_("nextPage","Next page"),itemsPerPageText:_("itemsPerPage:","Items per page:"),onChange:function(e){var t=e.page,r=e.pageSize;u(t),p(r)},page:1,pageSize:10,pageSizes:[10,20,30,40,50],size:"md",totalItems:f.length}),!f.length&&i().createElement(le,{displayText:_("cohorts","cohorts")}))};function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Oe(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function ke(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Oe(o,n,a,i,l,"next",e)}function l(e){Oe(o,n,a,i,l,"throw",e)}i(void 0)}))}}var Ie;!function(e){e[e.VIEW=0]="VIEW",e[e.DELETE=1]="DELETE"}(Ie||(Ie={}));const De=function(e){var t,r,n=e.query,u=e.onViewQuery,d=e.deleteQuery,m=(0,s.useTranslation)().t,p=(t=(0,o.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ce(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=p[0],f=p[1],v=function(){var e=ke(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next=e.t0===Ie.VIEW?3:e.t0===Ie.DELETE?5:7;break;case 3:return _(),e.abrupt("break",7);case 5:return f(!0),e.abrupt("break",7);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=ke(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(n.id);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),(0,c.showToast)({title:m("QueryDeleteError","Something went wrong"),kind:"error",critical:!0,description:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=ke(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(n.id);case 2:f(!1);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement(l.PQB,{ariaLabel:"overflow-menu",size:"md",flipped:!0,direction:"bottom","data-testid":"options"},i().createElement(l.laM,{"data-testid":"view",itemText:m("view","View"),onClick:function(){return v(Ie.VIEW)}}),i().createElement(l.laM,{"data-testid":"delete",itemText:m("delete","Delete"),onClick:function(){return v(Ie.DELETE)}})),i().createElement(l.lpG,{size:"sm",open:h,onClose:function(){return f(!1)}},i().createElement(l.xBx,null,i().createElement("p",null,m("deleteItem","Are you sure you want to delete ".concat(null==n?void 0:n.name,"?"),{item:null==n?void 0:n.name}))),i().createElement(l.mzw,{danger:!0,onRequestSubmit:b,primaryButtonText:m("delete","Delete"),secondaryButtonText:m("cancel","Cancel")})))};function Pe(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function Ne(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Pe(o,n,a,i,l,"next",e)}function l(e){Pe(o,n,a,i,l,"throw",e)}i(void 0)}))}}function Me(){return Ye.apply(this,arguments)}function Ye(){return(Ye=Ne(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.openmrsFetch)("/ws/rest/v1/reportingrest/dataSetDefinition?v=full",{method:"GET"});case 2:return t=e.sent,r=[],t.data.results.length>0&&t.data.results.map((function(e){var t={id:e.uuid,name:e.name.replace("[AdHocDataExport]",""),description:e.description};r.push(t)})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var je=function(){var e=Ne(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.openmrsFetch)("/ws/rest/v1/reportingrest/adhocdataset/".concat(t,"?purge=true"),{method:"DELETE"});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=r(1221),Ze={};Ze.styleTagTransform=k(),Ze.setAttributes=A(),Ze.insert=S().bind(null,"head"),Ze.domAPI=E(),Ze.insertStyleElement=C(),y()(Re.Z,Ze);const Le=Re.Z&&Re.Z.locals?Re.Z.locals:void 0;function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qe(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function He(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){qe(o,n,a,i,l,"next",e)}function l(e){qe(o,n,a,i,l,"throw",e)}i(void 0)}))}}function Be(){return Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Be.apply(this,arguments)}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Ge=function(e){var t=e.onViewQuery,r=Fe((0,o.useState)(1),2),n=r[0],u=r[1],d=Fe((0,o.useState)(10),2),m=d[0],p=d[1],h=(0,s.useTranslation)().t,f=Fe((0,o.useState)([]),2),v=f[0],_=f[1],b=function(){var e=He(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me();case 2:t=e.sent,_(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=He(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,je(t);case 3:(0,c.showToast)({title:h("success","Success"),kind:"success",critical:!0,description:h("queryIsDeleted","the query is deleted")}),b(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),(0,c.showToast)({title:h("queryDeleteError","Error saving the query"),kind:"error",critical:!0,description:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){b()}),[]);var g=[{key:"name",header:h("name","Name")},{key:"description",header:h("description","Description")}];return i().createElement("div",{className:Le.container},i().createElement("p",{className:P.text},h("savedQueryDescription","You can only search for Query Definitions that you have saved using a Name.")),i().createElement(l.wQF,{rows:v,headers:g,useZebraStyles:!0},(function(e){var r=e.rows,a=e.headers,o=e.getTableProps,c=e.getHeaderProps,s=e.getRowProps;return i().createElement(l.iA_,Be({},o()),i().createElement(l.ssF,null,i().createElement(l.SCH,null,a.map((function(e){return i().createElement(l.xDH,Be({},c({header:e})),e.header)})),i().createElement(l.xDH,{className:P.optionHeader}))),i().createElement(l.RMI,null,r.slice((n-1)*m).slice(0,m).map((function(e,r){return i().createElement(l.SCH,Be({},s({row:e}),{key:r}),e.cells.map((function(e,t){return i().createElement(l.pj1,{key:t},e.value)})),i().createElement(l.pj1,{className:P.optionCell},i().createElement(De,{query:v[r],onViewQuery:t,deleteQuery:y})))}))))})),v.length>10&&i().createElement(l.tlE,{backwardText:h("previousPage","Previous page"),forwardText:h("nextPage","Next page"),itemsPerPageText:h("itemsPerPage:","Items per page:"),onChange:function(e){var t=e.page,r=e.pageSize;u(t),p(r)},page:1,pageSize:10,pageSizes:[10,20,30,40,50],size:"md",totalItems:v.length}),!v.length&&i().createElement(le,{displayText:h("queries","queries")}))};var Ve=r(7484),Ue=r.n(Ve),Qe=r(3218),We={};We.styleTagTransform=k(),We.setAttributes=A(),We.insert=S().bind(null,"head"),We.domAPI=E(),We.insertStyleElement=C(),y()(Qe.Z,We);const Xe=Qe.Z&&Qe.Z.locals?Qe.Z.locals:void 0;var $e=r(3279),Je=r.n($e);function Ke(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function et(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Ke(o,n,a,i,l,"next",e)}function l(e){Ke(o,n,a,i,l,"throw",e)}i(void 0)}))}}function tt(e){return rt.apply(this,arguments)}function rt(){return(rt=et(a().mark((function e(t){var r,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.openmrsFetch)("/ws/rest/v1/concept?v=full&q=".concat(t),{method:"GET"});case 2:return r=e.sent,n=[],r.data.results.length>0&&(n=r.data.results.map((function(e){var t=e.descriptions.filter((function(e){return"en"==e.locale?e.description:""}));return{uuid:e.uuid,units:e.units||"",answers:e.answers,hl7Abbrev:e.datatype.hl7Abbreviation,name:e.name.name,description:t.length>0?t[0].description:"no description available",datatype:e.datatype}}))),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nt=r(1229),at={};at.styleTagTransform=k(),at.setAttributes=A(),at.insert=S().bind(null,"head"),at.domAPI=E(),at.insertStyleElement=C(),y()(nt.Z,at);const ot=nt.Z&&nt.Z.locals?nt.Z.locals:void 0;function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lt(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function ct(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){lt(o,n,a,i,l,"next",e)}function l(e){lt(o,n,a,i,l,"throw",e)}i(void 0)}))}}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return it(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?it(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ut=function(e){var t=e.concept,r=e.searchText,n=e.setConcept,c=e.setSearchText,u=(0,s.useTranslation)().t,d=st((0,o.useState)([]),2),m=d[0],p=d[1],h=st((0,o.useState)(""),2),f=h[0],v=h[1],_=st((0,o.useState)(!1),2),b=_[0],y=_[1],g=st((0,o.useState)(!1),2),E=g[0],w=g[1],S=function(){var e=ct(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p([]),n(null),y(!0),w(!1),e.prev=4,e.next=7,tt(t);case 7:(r=e.sent).length?p(r):w(!0),y(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),v(e.t0.toString()),y(!1);case 16:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),x=(0,o.useRef)(Je()(function(){var e=ct(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,S(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),500)).current;return(0,o.useEffect)((function(){return function(){x.cancel()}}),[x]),i().createElement("div",null,i().createElement(l.sgG,{className:ot.column},i().createElement(l.olm,{closeButtonLabelText:u("clearSearch","Clear search"),id:"concept-search",labelText:u("searchConcepts","Search Concepts"),placeholder:u("searchConcepts","Search Concepts"),onChange:function(e){c(e.target.value),x(e.target.value)},onClear:function(){w(!1),p([])},size:"lg",value:r}),i().createElement("div",{className:ot.search},b?i().createElement(l.y5n,{type:"multi"}):m.map((function(e){return i().createElement("div",{key:e.uuid},i().createElement(l.zxk,{kind:"ghost",onClick:function(){return function(e){n(e),p([]),w(!1)}(e)}},e.name),i().createElement("br",null))}))),t&&i().createElement("p",{className:ot.text},u("whoseAnswer","Patients with observations whose answer is "),i().createElement("span",{className:ot.concept},t.name)),E&&i().createElement("p",{className:ot.text},u("noSearchItems","There are no search items")),f&&i().createElement("span",null,f)))};function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mt(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ht=[{id:0,label:"<",value:"LESS_THAN"},{id:1,label:"<=",value:"LESS_EQUAL"},{id:2,label:"=",value:"EQUAL"},{id:3,label:">=",value:"GREATER_EQUAL"},{id:4,label:">",value:"GREATER_THAN"}],ft={CWE:"codedObsSearchAdvanced",NM:"numericObsSearchAdvanced",DT:"dateObsSearchAdvanced",ST:"dateObsSearchAdvanced",TS:"textObsSearchAdvanced",ZZ:"codedObsSearchAdvanced",BIT:"codedObsSearchAdvanced"};const vt=function(e){var t=e.onSubmit,r=(0,s.useTranslation)().t,n=pt((0,o.useState)(null),2),c=n[0],u=n[1],d=pt((0,o.useState)(0),2),m=d[0],p=d[1],h=pt((0,o.useState)(0),2),f=h[0],v=h[1],_=pt((0,o.useState)(0),2),b=_[0],y=_[1],g=pt((0,o.useState)("LESS_THAN"),2),E=g[0],w=g[1],S=pt((0,o.useState)("ANY"),2),x=S[0],A=S[1],T=pt((0,o.useState)(""),2),C=T[0],O=T[1],k=pt((0,o.useState)(""),2),I=k[0],D=k[1],P=pt((0,o.useState)(""),2),N=P[0],Y=P[1],j=pt((0,o.useState)(!1),2),R=j[0],Z=j[1],L=[{id:"option-0",label:r("haveObservations","Patients who have these observations"),value:"ANY"},{id:"option-1",label:r("haveNoObservations","Patients who do not have these observations"),value:"NO"}],z=[{id:"option-0",label:r("any","Any"),value:"ANY"},{id:"option-1",label:r("none","None"),value:"NO"},{id:"option-2",label:r("earliest","Earliest"),value:"FIRST"},{id:"option-3",label:r("recent","Most Recent"),value:"LAST"},{id:"option-4",label:r("lowest","Lowest"),value:"MIN"},{id:"option-5",label:r("highest","Highest"),value:"MAX"},{id:"option-6",label:r("average","Average"),value:"AVG"}],q=function(){if(m>0||f>0)return Ue()().subtract(m,"days").subtract(f,"months").format()},B=function(){var e,r=(e=a().mark((function e(){var r,n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!0),r={modifier:"",operator1:E,value1:b>0?b.toString():"",question:c.uuid,onOrBefore:q()||I,onOrAfter:C,timeModifier:x},l=[],(i=n=ft[c.hl7Abbrev])in(a={})?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,o=a,Object.keys(r).forEach((function(e){""!==r[e]&&o[n].push({name:"modifier"===e?["CWE","TS"].includes(c.hl7Abbrev)?"values":"value1":e,value:"modifier"===e&&["CWE","TS"].includes(c.hl7Abbrev)?[r[e]]:r[e]})})),e.next=7,t(M(o),H(r,c.name));case 7:Z(!1);case 8:case"end":return e.stop()}var a,i,l}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){mt(o,n,a,i,l,"next",e)}function l(e){mt(o,n,a,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement("div",null,i().createElement(ut,{setConcept:u,concept:c,searchText:N,setSearchText:Y}),"NM"===(null==c?void 0:c.hl7Abbrev)?i().createElement(i().Fragment,null,i().createElement(l.sgG,{className:Xe.column},i().createElement("div",{style:{display:"flex"}},i().createElement("div",{className:Xe.multipleInputs},i().createElement("p",{style:{paddingRight:20}},r("whatObservations","What observations")),i().createElement(l.Ltx,{id:"timeModifier",onChange:function(e){return A(e.selectedItem.value)},initialSelectedItem:z[0],items:z,className:Xe.timeModifier,label:""})))),i().createElement(l.sgG,{className:Xe.column},i().createElement("p",{className:Xe.value},r("whatValues","What values")),i().createElement("div",{className:Xe.whatValuesInputs},i().createElement("div",{className:Xe.operators},i().createElement(l.GHR,{selectedIndex:ht[0].id,className:Xe.contentSwitcher,size:"lg",onChange:function(e){var t=e.index;return w(ht[t].value)}},ht.map((function(e){return i().createElement(l.rsf,{key:e.id,name:e.value,text:e.label})})))),i().createElement("div",{className:Xe.multipleInputs},i().createElement(l.Y2U,{hideSteppers:!0,id:"operator-value",invalidText:r("numberIsNotValid","Number is not valid"),label:r("valueIn","Enter a value in ")+c.units,min:0,size:"sm",value:b,onChange:function(e,t){var r=t.value;return y(r)}}))))):i().createElement(l.sgG,{className:Xe.column},i().createElement(l.Ltx,{id:"timeModifier","data-testid":"timeModifier",onChange:function(e){return A(e.selectedItem.value)},initialSelectedItem:L[0],items:L,label:""})),i().createElement(l.sgG,{className:Xe.dateRange},i().createElement(l.sgG,null,i().createElement(l.Y2U,{hideSteppers:!0,id:"last-months","data-testid":"last-months",label:r("withinTheLast","Within the last months"),invalidText:r("numberIsNotValid","Number is not valid"),min:0,size:"sm",value:f,onChange:function(e,t){var r=t.value;return v(r)}})),i().createElement(l.sgG,null,i().createElement(l.Y2U,{hideSteppers:!0,label:r("lastDays","and / or days"),id:"last-days","data-testid":"last-days",invalidText:r("numberIsNotValid","Number is not valid"),min:0,size:"sm",value:m,onChange:function(e,t){var r=t.value;return p(r)}}))),i().createElement("div",{className:Xe.dateRange},i().createElement(l.sgG,null,i().createElement(l.Mtg,{datePickerType:"single",allowInput:!1,onChange:function(e){return O(Ue()(e[0]).format())}},i().createElement(l.aj6,{id:"startDate",value:C&&Ue()(C).format("DD-MM-YYYY"),labelText:r("dateRange","Date range start date"),placeholder:"DD-MM-YYYY",size:"md"}))),i().createElement(l.sgG,null,i().createElement(l.Mtg,{datePickerType:"single",allowInput:!1,onChange:function(e){return D(Ue()(e[0]).format())}},i().createElement(l.aj6,{id:"endDate",value:I&&Ue()(I).format("DD-MM-YYYY"),labelText:r("endDate","End date"),placeholder:"DD-MM-YYYY",size:"md"}))))),i().createElement(U,{isLoading:R,onHandleSubmit:B,onHandleReset:function(){u(null),p(0),Y(""),O(""),D(""),v(0),y(0),w("LESS_THAN"),A("ANY")}}))};var _t=r(7346),bt={};bt.styleTagTransform=k(),bt.setAttributes=A(),bt.insert=S().bind(null,"head"),bt.domAPI=E(),bt.insertStyleElement=C(),y()(_t.Z,bt);const yt=_t.Z&&_t.Z.locals?_t.Z.locals:void 0;function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Et(e){return function(e){if(Array.isArray(e))return gt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wt=function(e){var t=e.gender,r=e.minAge,n=e.maxAge,a=e.birthDayStartDate,o=e.birthDayEndDate,i=e.livingStatus,l="all"!=t?"".concat("males"===t?"Male":"Female"," Patients"):"All Patients";return(r||n)&&(l+=r&&n?" with ages between ".concat(r," and ").concat(n):r?" with minimum age of ".concat(r):" with maximum age of ".concat(n),l+=" years"),""==a&&""==o||(l+=a&&o?" and birthdate between ".concat(a," and ").concat(o):" and born before ".concat(r?a:o)),i&&(l+=" that are ".concat(i)),l},St=function(e){var t=e.gender,r=e.minAge,n=e.maxAge,a=e.birthDayStartDate,o=e.birthDayEndDate,i=e.livingStatus,l={gender:t};r&&n?l.ageRangeOnDate=[{name:"minAge",value:r},{name:"maxAge",value:n}]:r?l.atLeastAgeOnDate=[{name:"minAge",value:r}]:l.upToAgeOnDate=[{name:"maxAge",value:n}],a&&o&&(l.bornDuringPeriod=[{name:"startDate",dataType:"date",value:a},{name:"endDate",dataType:"date",value:o}]);var c=Ue()().format();l.diedDuringPeriod=[{name:"endDate",dataType:"date",value:c,livingStatus:i}];var s=M(l);if("all"===l.gender){var u=["males","females","unknownGender"].map((function(e){return{type:"org.openmrs.module.reporting.dataset.definition.PatientDataSetDefinition",key:"reporting.library.cohortDefinition.builtIn.".concat(e)}})),d=s.query,m=d.rowFilters,p=d.customRowFilterCombination,h=m=m.length>0?Et(m).concat(Et(u)):u,f=p;p=f?"(".concat(h.length-2," OR ").concat(h.length-1," OR ").concat(h.length,") AND ").concat(f):"(1 OR 2 OR 3)"}return s};function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function At(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function Tt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Ct=function(e){var t=e.onSubmit,r=(0,s.useTranslation)().t,n=Tt((0,o.useState)("alive"),2),c=n[0],u=n[1],d=Tt((0,o.useState)("all"),2),m=d[0],p=d[1],h=Tt((0,o.useState)(""),2),f=h[0],v=h[1],_=Tt((0,o.useState)(""),2),b=_[0],y=_[1],g=Tt((0,o.useState)(0),2),E=g[0],w=g[1],S=Tt((0,o.useState)(0),2),x=S[0],A=S[1],T=Tt((0,o.useState)(!1),2),C=T[0],O=T[1],k=[{id:0,label:r("all","All"),value:"all"},{id:1,label:r("males","Male"),value:"males"},{id:3,label:r("females","Female"),value:"females"}],I=[{id:0,label:r("alive","Alive"),value:"alive"},{id:1,label:r("dead","Dead"),value:"dead"}],D=function(){var e,r=(e=a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),r={gender:m,minAge:E,maxAge:x,birthDayStartDate:f,birthDayEndDate:b,livingStatus:c},e.next=4,t(St(r),wt(r));case 4:O(!1);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){At(o,n,a,i,l,"next",e)}function l(e){At(o,n,a,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement(l.sgG,null,i().createElement("p",{className:"".concat(yt.text," ").concat(yt.genderTitle)},r("gender","Gender")),i().createElement("div",{className:yt.genderContainer},i().createElement("div",{className:yt.switch},i().createElement(l.GHR,{selectedIndex:k[0].id,className:yt.contentSwitcher,size:"lg",onChange:function(e){var t=e.index;return p(k[t].value)}},k.map((function(e){return i().createElement(l.rsf,{"data-testid":e.label,key:e.id,name:e.value,text:e.label})})))),i().createElement("div",{className:yt.switch},i().createElement(l.GHR,{selectedIndex:I[0].id,className:yt.contentSwitcher,size:"lg",onChange:function(e){var t=e.index;return u(I[t].value)}},I.map((function(e){return i().createElement(l.rsf,{key:e.id,name:e.value,text:e.label})})))))),i().createElement("div",{className:yt.column},i().createElement(l.sgG,{className:yt.age},i().createElement(l.sgG,null,i().createElement(l.Y2U,{hideSteppers:!0,id:"minAge","data-testid":"minAge",label:r("ageBetween","Age between"),invalidText:r("minAgeIsNotValid","The age must be greater than 0"),min:0,value:E,onChange:function(e,t){var r=t.value;return w(r)}})),i().createElement(l.sgG,null,i().createElement(l.Y2U,{id:"maxAge",hideSteppers:!0,"data-testid":"maxAge",label:r("and","and"),invalidText:r("maxAgeIsNotValid","The age must be less than 200"),min:0,max:200,value:x,onChange:function(e,t){var r=t.value;return A(r)}})))),i().createElement("div",{className:yt.column},i().createElement(l.sgG,null,i().createElement(l.Mtg,{datePickerType:"single",allowInput:!1,onChange:function(e){return v(Ue()(e[0]).format())}},i().createElement(l.aj6,{id:"startDate",labelText:r("birthDate","Birth date between"),value:f&&Ue()(f).format("DD-MM-YYYY"),placeholder:"DD-MM-YYYY",size:"md"}))),i().createElement(l.sgG,null,i().createElement(l.Mtg,{datePickerType:"single",allowInput:!1,onChange:function(e){return y(Ue()(e[0]).format())}},i().createElement(l.aj6,{id:"endDate",labelText:r("and","and"),value:b&&Ue()(b).format("DD-MM-YYYY"),placeholder:"DD-MM-YYYY",size:"md"})))),i().createElement(U,{isLoading:C,onHandleSubmit:D,onHandleReset:function(){A(0),w(0),y(""),v("")}}))};var Ot=r(1315),kt={};kt.styleTagTransform=k(),kt.setAttributes=A(),kt.insert=S().bind(null,"head"),kt.domAPI=E(),kt.insertStyleElement=C(),y()(Ot.Z,kt);const It=Ot.Z&&Ot.Z.locals?Ot.Z.locals:void 0;var Dt=function(e){var t=e.selectedDrugs,r=e.selectedCareSetting,n=e.activeOnOrBefore,a=e.activeOnOrAfter,o=e.activatedOnOrBefore,i=e.activatedOnOrAfter,l="Patients who taking "+t.map((function(e){return e.label})).join(", ").replace(/,(?=[^,]*$)/," and");if(r&&(l+=" from ".concat(r.label)),a){var s=(0,c.formatDate)(new Date(a),{mode:"standard"});l+=n?" from ".concat(s):" on or after ".concat(s)}if(n){var u=(0,c.formatDate)(new Date(n),{mode:"standard"});l+=a?" to ".concat(u):" on or before ".concat(u)}if(i){var d=(0,c.formatDate)(new Date(i),{mode:"standard"});l+=o?" from ".concat(d):" on or after ".concat(d)}if(o){var m=(0,c.formatDate)(new Date(o),{mode:"standard"});l+=i?" to ".concat(m):" on or before ".concat(m)}return l},Pt=function(e){var t=e.selectedDrugs,r=e.selectedCareSetting,n=e.activeOnOrBefore,a=e.activeOnOrAfter,o=e.activatedOnOrBefore,i=e.activatedOnOrAfter,l={drugOrderSearch:[]};return a&&l.drugOrderSearch.push({name:"activeOnOrAfter",value:a}),i&&l.drugOrderSearch.push({name:"activatedOnOrAfter",value:i}),o&&l.drugOrderSearch.push({name:"activatedOnOrBefore",value:o}),r&&l.drugOrderSearch.push({name:"careSetting",value:r.value}),t.length&&l.drugOrderSearch.push({name:"drugs",value:t.map((function(e){return e.value}))}),n&&l.drugOrderSearch.push({name:"activeOnOrBefore",value:n}),M(l)};function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Mt(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function Yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const jt=function(e){var t=e.onSubmit,r=(0,s.useTranslation)().t,n=function(){var e=(0,u.Z)("/ws/rest/v1/drug",c.openmrsFetch),t=e.data,r=e.error;return(0,o.useMemo)((function(){var e=[];return null==t||t.data.results.map((function(t,r){e.push({id:r,label:t.display,value:t.uuid})})),{isLoading:!t&&!r,drugs:e,drugsError:r}}),[t,r])}(),d=n.drugs,m=n.drugsError,p=function(){var e=(0,u.Z)("/ws/rest/v1/caresetting",c.openmrsFetch),t=e.data,r=e.error;return(0,o.useMemo)((function(){var e=[];return null==t||t.data.results.map((function(t,r){e.push({id:r,label:t.display,value:t.uuid})})),{isLoading:!t&&!r,careSettings:e,careSettingsError:r}}),[t,r])}(),h=p.careSettings,f=p.careSettingsError,v=Yt((0,o.useState)(""),2),_=v[0],b=v[1],y=Yt((0,o.useState)(""),2),g=y[0],E=y[1],w=Yt((0,o.useState)(""),2),S=w[0],x=w[1],A=Yt((0,o.useState)(""),2),T=A[0],C=A[1],O=Yt((0,o.useState)(null),2),k=O[0],I=O[1],D=Yt((0,o.useState)(null),2),P=D[0],N=D[1],M=Yt((0,o.useState)(!1),2),Y=M[0],j=M[1];m&&(0,c.showToast)({title:r("error","Error"),kind:"error",critical:!0,description:null==m?void 0:m.message}),f&&(0,c.showToast)({title:r("error","Error"),kind:"error",critical:!0,description:null==f?void 0:f.message});var R=function(){var e,r=(e=a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),r={selectedDrugs:k,selectedCareSetting:P,activeOnOrAfter:_,activeOnOrBefore:g,activatedOnOrAfter:S,activatedOnOrBefore:T},e.next=4,t(Pt(r),Dt(r));case 4:j(!1);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Mt(o,n,a,i,l,"next",e)}function l(e){Mt(o,n,a,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement(l.sgG,null,i().createElement("div",null,i().createElement(l.NUq,{id:"drugs","data-testid":"drugs",onChange:function(e){return I(e.selectedItems)},items:d,label:r("selectDrugs","Select drugs")}))),i().createElement("div",{className:It.column},i().createElement(l.sgG,null,i().createElement(l.Ltx,{id:"careSettings","data-testid":"careSettings",onChange:function(e){return N(e.selectedItem)},initialSelectedItem:h[0],items:h,label:r("selectCareSettings","Select a care setting")}))),i().createElement("div",{className:It.column},i().createElement(l.sgG,null,i().createElement(l.Mtg,{datePickerType:"single",allowInput:!1,onChange:function(e){return b(Ue()(e[0]).format())}},i().createElement(l.aj6,{id:"activeOnOrAfter",labelText:r("using","Using between"),value:_&&Ue()(_).format("DD-MM-YYYY"),placeholder:"DD-MM-YYYY",size:"md"}))),i().createElement(l.sgG,null,i().createElement(l.Mtg,{datePickerType:"single",allowInput:!1,onChange:function(e){return E(Ue()(e[0]).format())}},i().createElement(l.aj6,{id:"activeOnOrBefore",value:g&&Ue()(g).format("DD-MM-YYYY"),labelText:r("to","to"),placeholder:"DD-MM-YYYY",size:"md"})))),i().createElement("div",{className:It.column},i().createElement(l.sgG,null,i().createElement(l.Mtg,{datePickerType:"single",allowInput:!1,onChange:function(e){return x(Ue()(e[0]).format())}},i().createElement(l.aj6,{id:"activatedOnOrAfter",labelText:r("used","Used between"),value:S&&Ue()(S).format("DD-MM-YYYY"),placeholder:"DD-MM-YYYY",size:"md"}))),i().createElement(l.sgG,null,i().createElement(l.Mtg,{datePickerType:"single",allowInput:!1,onChange:function(e){return C(Ue()(e[0]).format())}},i().createElement(l.aj6,{id:"activatedOnOrBefore",value:T&&Ue()(T).format("DD-MM-YYYY"),labelText:r("and","and"),placeholder:"DD-MM-YYYY",size:"md"})))),i().createElement(U,{onHandleReset:function(){I(null),N(null),b(""),E(""),x(""),C("")},onHandleSubmit:R,isLoading:Y}))};var Rt=r(8707),Zt={};Zt.styleTagTransform=k(),Zt.setAttributes=A(),Zt.insert=S().bind(null,"head"),Zt.domAPI=E(),Zt.insertStyleElement=C(),y()(Rt.Z,Zt);const Lt=Rt.Z&&Rt.Z.locals?Rt.Z.locals:void 0;var zt=function(e){var t=e.selectedEncounterTypes,r=e.encounterLocations,n=e.encounterForms,a=e.atLeastCount,o=e.atMostCount,i=e.onOrAfter,l=e.onOrBefore,c="Patients with Encounter of",s=t.map((function(e){return e.label})).join(", ").replace(/,(?=[^,]*$)/," and ");return c+=s?" Type".concat(s.length>1?"s":""," ").concat(s):" any Type",r.length&&(c+=" at ".concat(r.map((function(e){return e.label})).join(", "))),n.length&&(c+=" from ".concat(n.map((function(e){return e.label})).join(", "))),a&&(c+=" at least ".concat(a," ").concat(a>1?"times":"time")),o&&(c+=" ".concat(a?" and":""," at most ").concat(o," ").concat(o>1?"times":"time")),i&&(c+=l?" from ".concat(i):" on or after ".concat(i)),l&&(c+=i?" to ".concat(l):" on or before ".concat(l)),c},qt=function(e){var t=e.onOrAfter,r=e.atLeastCount,n=e.atMostCount,a=e.encounterForms,o=e.encounterLocations,i=e.onOrBefore,l=e.selectedEncounterTypes,c={encounterSearchAdvanced:[]};return t&&c.encounterSearchAdvanced.push({name:"onOrAfter",value:t}),r&&c.encounterSearchAdvanced.push({name:"atLeastCount",value:r}),n&&c.encounterSearchAdvanced.push({name:"atMostCount",value:n}),a.length&&c.encounterSearchAdvanced.push({name:"formList",value:a.map((function(e){return e.value}))}),o.length&&c.encounterSearchAdvanced.push({name:"locationList",value:o.map((function(e){return e.value}))}),i&&c.encounterSearchAdvanced.push({name:"onOrBefore",value:i}),l.length>0&&c.encounterSearchAdvanced.push({name:"encounterTypeList",value:l.map((function(e){return e.value}))}),M(c)};function Ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bt(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ht(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ht(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Gt=function(e){var t=e.onSubmit,r=(0,s.useTranslation)().t,n=Ft((0,o.useState)(0),2),d=n[0],m=n[1],p=Ft((0,o.useState)(0),2),h=p[0],v=p[1],_=function(){var e=(0,u.Z)("/ws/rest/v1/encountertype",c.openmrsFetch),t=e.data,r=e.error,n=[];return null==t||t.data.results.map((function(e,t){n.push({id:t,label:e.display,value:e.uuid})})),{isLoading:!t&&!r,encounterTypes:n,encounterTypesError:r}}(),b=_.encounterTypes,y=_.encounterTypesError,g=Ft((0,o.useState)([]),2),E=g[0],w=g[1],S=Ft((0,o.useState)([]),2),x=S[0],A=S[1],T=Ft((0,o.useState)([]),2),C=T[0],O=T[1],k=f(),I=k.locations,D=k.locationsError,P=function(){var e=(0,u.Z)("/ws/rest/v1/form",c.openmrsFetch),t=e.data,r=e.error,n=[];return null==t||t.data.results.map((function(e,t){n.push({id:t,label:e.display,value:e.uuid})})),{isLoading:!t&&!r,forms:n,formsError:r}}(),N=P.forms,M=P.formsError,Y=Ft((0,o.useState)(""),2),j=Y[0],R=Y[1],Z=Ft((0,o.useState)(""),2),L=Z[0],z=Z[1],q=Ft((0,o.useState)(!1),2),H=q[0],B=q[1];D&&(0,c.showToast)({title:r("error","Error"),kind:"error",critical:!0,description:null==D?void 0:D.message}),M&&(0,c.showToast)({title:r("error","Error"),kind:"error",critical:!0,description:null==M?void 0:M.message}),y&&(0,c.showToast)({title:r("error","Error"),kind:"error",critical:!0,description:null==y?void 0:y.message});var F=function(){var e,r=(e=a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return B(!0),r={onOrAfter:L,atLeastCount:d,atMostCount:h,encounterForms:C,encounterLocations:x,onOrBefore:j,selectedEncounterTypes:E},e.next=4,t(qt(r),zt(r));case 4:B(!1);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Bt(o,n,a,i,l,"next",e)}function l(e){Bt(o,n,a,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement(l.sgG,null,i().createElement("div",null,i().createElement(l.NUq,{id:"encounters","data-testid":"encounters",onChange:function(e){return w(e.selectedItems)},items:b,label:r("selectEncounterTypes","Select encounter types")}))),i().createElement(l.NUq,{id:"forms","data-testid":"forms",onChange:function(e){return O(e.selectedItems)},items:N,label:r("selectForms","Select forms")}),i().createElement(l.NUq,{id:"locations","data-testid":"locations",onChange:function(e){return A(e.selectedItems)},items:I,label:r("selectLocations","Select locations")}),i().createElement("div",{className:Lt.column},i().createElement(l.sgG,{className:Lt.encounterRange},i().createElement("div",{className:Lt.multipleInputs},i().createElement(l.Y2U,{hideSteppers:!0,id:"atLeastCount","data-testid":"atLeastCount",label:r("atLeast","at least"),min:0,size:"sm",value:d,onChange:function(e,t){var r=t.value;return m(r)}})),i().createElement("div",{className:Lt.multipleInputs},i().createElement(l.Y2U,{hideSteppers:!0,id:"atMostCount","data-testid":"atMostCount",label:r("upto","upto this many"),min:0,size:"sm",value:h,onChange:function(e,t){var r=t.value;return v(r)}})))),i().createElement("div",{className:Lt.column},i().createElement(l.sgG,null,i().createElement(l.Mtg,{datePickerType:"single",allowInput:!1,onChange:function(e){return z(Ue()(e[0]).format())}},i().createElement(l.aj6,{id:"onOrAfter",labelText:r("from","From"),value:L&&Ue()(L).format("DD-MM-YYYY"),placeholder:"DD-MM-YYYY",size:"md"}))),i().createElement(l.sgG,null,i().createElement(l.Mtg,{datePickerType:"single",allowInput:!1,onChange:function(e){return R(Ue()(e[0]).format())}},i().createElement(l.aj6,{id:"onOrBefore",value:j&&Ue()(j).format("DD-MM-YYYY"),labelText:r("to","to"),placeholder:"DD-MM-YYYY",size:"md"})))),i().createElement(U,{isLoading:H,onHandleSubmit:F,onHandleReset:function(){m(0),v(0),R(""),z("")}}))};var Vt=r(1571),Ut={};Ut.styleTagTransform=k(),Ut.setAttributes=A(),Ut.insert=S().bind(null,"head"),Ut.domAPI=E(),Ut.insertStyleElement=C(),y()(Vt.Z,Ut);const Qt=Vt.Z&&Vt.Z.locals?Vt.Z.locals:void 0;var Wt=function(e){var t=e.enrolledOnOrAfter,r=e.enrolledOnOrBefore,n=e.completedOnOrAfter,a=e.completedOnOrBefore,o=e.selectedPrograms,i=e.selectedLocations,l={patientsWithEnrollment:[{name:"programs",value:null==o?void 0:o.map((function(e){return e.value}))},t&&{name:"enrolledOnOrAfter",value:t},r&&{name:"enrolledOnOrBefore",value:r},n&&{name:"completedOnOrAfter",value:n},a&&{name:"completedOnOrBefore",value:a},{name:"locationList",value:null==i?void 0:i.map((function(e){return e.value}))}]};return M(l)},Xt=function(e){var t=e.selectedPrograms,r=e.selectedLocations,n="Patients enrolled in ".concat(null==t?void 0:t.map((function(e){return e.label})).join(", "));return(null==r?void 0:r.length)&&(n+=" at ".concat(null==r?void 0:r.map((function(e){return e.label})).join(", "))),n};function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jt(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $t(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$t(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const er=function(e){var t=e.onSubmit,r=(0,s.useTranslation)().t,n=function(){var e=(0,u.Z)("/ws/rest/v1/program",c.openmrsFetch),t=e.data,r=e.error,n=[];return null==t||t.data.results.map((function(e,t){n.push({id:t,label:e.name,value:e.uuid})})),{isLoading:!t&&!r,programs:n,programsError:r}}(),d=n.programs,m=n.programsError,p=f(),h=p.locations,v=p.locationsError,_=Kt((0,o.useState)(""),2),b=_[0],y=_[1],g=Kt((0,o.useState)(""),2),E=g[0],w=g[1],S=Kt((0,o.useState)(""),2),x=S[0],A=S[1],T=Kt((0,o.useState)(""),2),C=T[0],O=T[1],k=Kt((0,o.useState)(null),2),I=k[0],D=k[1],P=Kt((0,o.useState)(null),2),N=P[0],M=P[1],Y=Kt((0,o.useState)(!1),2),j=Y[0],R=Y[1];m&&(0,c.showToast)({title:r("error","Error"),kind:"error",critical:!0,description:null==m?void 0:m.message}),v&&(0,c.showToast)({title:r("error","Error"),kind:"error",critical:!0,description:null==v?void 0:v.message});var Z=function(){var e,r=(e=a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),r={enrolledOnOrAfter:b,enrolledOnOrBefore:E,completedOnOrAfter:x,completedOnOrBefore:C,selectedPrograms:N,selectedLocations:I},e.next=4,t(Wt(r),Xt(r));case 4:R(!1);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Jt(o,n,a,i,l,"next",e)}function l(e){Jt(o,n,a,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement(l.sgG,null,i().createElement("div",null,i().createElement(l.NUq,{id:"programs","data-testid":"programs",onChange:function(e){return M(e.selectedItems)},items:d,label:r("selectPrograms","Select programs")}))),i().createElement(l.sgG,null,i().createElement("div",null,i().createElement(l.NUq,{id:"locations","data-testid":"locations",onChange:function(e){return D(e.selectedItems)},items:h,label:r("selectLocations","Select locations")}))),i().createElement("div",{className:Qt.column},i().createElement(l.sgG,null,i().createElement(l.Mtg,{datePickerType:"single",allowInput:!1,onChange:function(e){return y(Ue()(e[0]).format())}},i().createElement(l.aj6,{id:"enrolledOnOrAfter",labelText:r("enrolledBetween","Enrolled between"),value:b&&Ue()(b).format("DD-MM-YYYY"),placeholder:"DD-MM-YYYY",size:"md"}))),i().createElement(l.sgG,null,i().createElement(l.Mtg,{datePickerType:"single",allowInput:!1,onChange:function(e){return w(Ue()(e[0]).format())}},i().createElement(l.aj6,{id:"enrolledOnOrBefore",labelText:r("and","and"),value:E&&Ue()(E).format("DD-MM-YYYY"),placeholder:"DD-MM-YYYY",size:"md"})))),i().createElement("div",{className:Qt.column},i().createElement(l.sgG,null,i().createElement(l.Mtg,{datePickerType:"single",allowInput:!1,onChange:function(e){return A(Ue()(e[0]).format())}},i().createElement(l.aj6,{id:"completedOnOrAfter",labelText:r("completedBetween","Completed between"),value:x&&Ue()(x).format("DD-MM-YYYY"),placeholder:"DD-MM-YYYY",size:"md"}))),i().createElement(l.sgG,null,i().createElement(l.Mtg,{datePickerType:"single",allowInput:!1,onChange:function(e){return O(Ue()(e[0]).format())}},i().createElement(l.aj6,{id:"completedOnOrBefore",labelText:r("and","and"),value:C&&Ue()(C).format("DD-MM-YYYY"),placeholder:"DD-MM-YYYY",size:"md"})))),i().createElement(U,{onHandleReset:function(){M(null),y(""),w(""),A(""),O("")},onHandleSubmit:Z,isLoading:j}))};var tr=r(7355),rr={};rr.styleTagTransform=k(),rr.setAttributes=A(),rr.insert=S().bind(null,"head"),rr.domAPI=E(),rr.insertStyleElement=C(),y()(tr.Z,rr);const nr=tr.Z&&tr.Z.locals?tr.Z.locals:void 0;var ar=function(e,t){var r=[];return null==t||t.map((function(e){return r.push(e.value)})),M({encounterSearchAdvanced:[{name:"locationList",value:r},{name:"timeQualifier",value:e}]})},or=function(e,t){var r="Patients in ".concat(null==t?void 0:t.map((function(e){return e.label})).join(", "));switch(e){case"FIRST":r+=" (by method EARLIEST_ENCOUNTER).";break;case"LAST":r+=" (by method LATEST_ENCOUNTER).";break;default:r+=" (by method ANY_ENCOUNTER)."}return r};function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lr(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ir(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ir(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const sr=function(e){var t=e.onSubmit,r=(0,s.useTranslation)().t,n=[{id:0,label:r("anyEncounter","Any Encounter"),value:"ANY"},{id:1,label:r("mostRecentEncounter","Most Recent Encounter"),value:"LAST"},{id:2,label:r("earliestEncounter","Earliest Encounter"),value:"FIRST"}],u=f(),d=u.locations,m=u.locationsError,p=cr((0,o.useState)(null),2),h=p[0],v=p[1],_=cr((0,o.useState)(n[0]),2),b=_[0],y=_[1],g=cr((0,o.useState)(!1),2),E=g[0],w=g[1];m&&(0,c.showToast)({title:r("error","Error"),kind:"error",critical:!0,description:null==m?void 0:m.message});var S=function(){var e,r=(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,t(ar(b.value,h),or(b.label,h));case 3:w(!1);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){lr(o,n,a,i,l,"next",e)}function l(e){lr(o,n,a,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement(l.sgG,null,i().createElement("div",null,i().createElement(l.NUq,{id:"locations","data-testid":"locations",onChange:function(e){return v(e.selectedItems)},items:d,label:r("selectLocations","Select locations")}))),i().createElement("div",{className:nr.column},i().createElement(l.sgG,null,i().createElement(l.Ltx,{id:"methods","data-testid":"methods",onChange:function(e){return y(e.selectedItem)},initialSelectedItem:n[0],items:n,label:r("selectMethod","Select a method")}))),i().createElement(U,{onHandleReset:function(){v(null),y(null)},onHandleSubmit:S,isLoading:E}))};var ur=r(9683),dr={};dr.styleTagTransform=k(),dr.setAttributes=A(),dr.insert=S().bind(null,"head"),dr.domAPI=E(),dr.insertStyleElement=C(),y()(ur.Z,dr);const mr=ur.Z&&ur.Z.locals?ur.Z.locals:void 0;var pr=function(e,t){var r="Patients",n=t.length>0?t.join(", ").replace(/,(?=[^,]*$)/," or"):"";return(r+=e?" with".concat(n?"":" any"," ").concat(e):e)+(n?" equal to ".concat(n.length>1&&"either"," ").concat(n):"")};function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fr(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return hr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const _r=function(e){var t=e.onSubmit,r=(0,s.useTranslation)().t,n=function(){var e=(0,u.Z)("/ws/rest/v1/personattributetype",c.openmrsFetch),t=e.data,r=e.error,n=[];return null==t||t.data.results.map((function(e,t){n.push({id:t,label:e.display,value:e.uuid})})),{isLoading:!t&&!r,personAttributes:n,personAttributesError:r}}(),d=n.personAttributes,m=n.personAttributesError,p=vr((0,o.useState)([]),2),h=p[0],f=p[1],v=vr((0,o.useState)(null),2),_=v[0],b=v[1],y=vr((0,o.useState)(!1),2),g=y[0],E=y[1];m&&(0,c.showToast)({title:r("error","Error"),kind:"error",critical:!0,description:null==m?void 0:m.message});var w=function(){var e,r=(e=a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),r=null==d?void 0:d.find((function(e){return e.value==_})),e.next=4,t(M({personWithAttribute:[{name:"attributeType",value:_},{name:"values",value:h}]}),pr(null==r?void 0:r.label,h));case 4:E(!1);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){fr(o,n,a,i,l,"next",e)}function l(e){fr(o,n,a,i,l,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement(l.sgG,null,i().createElement("div",null,i().createElement(l.Ltx,{id:"personAttributes","data-testid":"personAttributes",onChange:function(e){return b(e.selectedItem.value)},items:d,label:r("selectAttribute","Select a person attribute")}))),i().createElement("div",{className:mr.column},i().createElement(l.sgG,null,i().createElement(l.oil,{id:"selectedAttributeValues","data-testid":"selectedAttributeValues",disabled:!_,labelText:r("selectedAttributeValues","Enter Comma Delimited Values"),onChange:function(e){return f(e.target.value.trim().split(","))}}))),i().createElement(U,{onHandleReset:function(){b(null),f([])},onHandleSubmit:w,isLoading:g}))};function br(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function yr(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){br(o,n,a,i,l,"next",e)}function l(e){br(o,n,a,i,l,"throw",e)}i(void 0)}))}}function gr(e){return Er.apply(this,arguments)}function Er(){return(Er=yr(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.openmrsFetch)("/ws/rest/v1/cohort",{method:"POST",headers:{"Content-Type":"application/json"},body:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wr(e){return Sr.apply(this,arguments)}function Sr(){return(Sr=yr(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.openmrsFetch)("/ws/rest/v1/reportingrest/adhocdataset",{method:"POST",headers:{"Content-Type":"application/json"},body:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ar(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function Tr(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Ar(o,n,a,i,l,"next",e)}function l(e){Ar(o,n,a,i,l,"throw",e)}i(void 0)}))}}function Cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xr(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Or;!function(e){e[e.SAVE_COHORT=0]="SAVE_COHORT",e[e.SAVE_QUERY=1]="SAVE_QUERY",e[e.DOWNLOAD=2]="DOWNLOAD",e[e.DELETE=3]="DELETE"}(Or||(Or={}));const kr=function(e){var t=e.searchItem,r=e.updateSearchHistory,n=(0,s.useTranslation)().t,u=Cr((0,o.useState)(""),2),d=u[0],m=u[1],p=Cr((0,o.useState)(""),2),h=p[0],f=p[1],v=Cr((0,o.useState)(""),2),_=v[0],b=v[1],y=Cr((0,o.useState)(""),2),g=y[0],E=y[1],w=Cr((0,o.useState)(!1),2),S=w[0],x=w[1],A=Cr((0,o.useState)(!1),2),T=A[0],C=A[1],O=Cr((0,o.useState)(!1),2),k=O[0],I=O[1],D=function(){var e=Tr(a().mark((function e(r){var n,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.patients,o=t.description,e.t0=r,e.next=e.t0===Or.SAVE_COHORT?4:e.t0===Or.SAVE_QUERY?7:e.t0===Or.DOWNLOAD?10:e.t0===Or.DELETE?12:14;break;case 4:return f(o),C(!0),e.abrupt("break",14);case 7:return E(o),I(!0),e.abrupt("break",14);case 10:return B(n,o),e.abrupt("break",14);case 12:return x(!0),e.abrupt("break",14);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Tr(a().mark((function e(){var r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],t.patients.forEach((function(e){return r.push(parseInt(e.id))})),o={display:d,memberIds:r,description:h,name:d},e.prev=4,e.next=7,gr(o);case 7:m(""),f(""),C(!1),(0,c.showToast)({title:n("success","Success"),kind:"success",critical:!0,description:"the cohort is saved"}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),(0,c.showToast)({title:n("cohortCreateError","Error creating the cohort"),kind:"error",critical:!0,description:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Tr(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r(t),x(!1),(0,c.showToast)({title:n("success","Success"),kind:"success",critical:!0,description:"the search item is deleted"})}catch(e){(0,c.showToast)({title:n("searchItemDeleteError","Error deleting the cohort"),kind:"error",critical:!0,description:null==e?void 0:e.message})}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Tr(a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=t.parameters).name=_,r.description=g,e.next=6,wr(r);case 6:b(""),E(""),I(!1),(0,c.showToast)({title:n("success","Success"),kind:"success",critical:!0,description:"the query is saved"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,c.showToast)({title:n("queryDeleteError","Error saving the query"),kind:"error",critical:!0,description:null===e.t0||void 0===e.t0?void 0:e.t0.message});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return i().createElement(i().Fragment,null,i().createElement(l.PQB,{ariaLabel:"overflow-menu",size:"md",flipped:!0,direction:"top","data-testid":"options"},i().createElement(l.laM,{"data-testid":"save-cohort",itemText:n("saveCohort","Save Cohort"),onClick:function(){return D(Or.SAVE_COHORT)}}),i().createElement(l.laM,{"data-testid":"save-query",itemText:n("saveQuery","Save Query"),onClick:function(){return D(Or.SAVE_QUERY)}}),i().createElement(l.laM,{itemText:n("downloadResults","Download Results"),onClick:function(){return D(Or.DOWNLOAD)}}),i().createElement(l.laM,{"data-testid":"deleteFromHistory",itemText:n("deleteFromHistory","Delete from history"),onClick:function(){return D(Or.DELETE)}})),i().createElement(l.lpG,{size:"sm",open:T,onClose:function(){return C(!1)}},i().createElement(l.xBx,null,i().createElement("p",null,"Save Cohort")),i().createElement(l.fef,{hasForm:!0},i().createElement(l.oil,{"data-modal-primary-focus":!0,required:!0,labelText:n("saveName","Enter a name"),"data-testid":"cohort-name",id:"cohort-name",onChange:function(e){return m(e.target.value)},value:d}),i().createElement("br",null),i().createElement(l.oil,{"data-modal-primary-focus":!0,required:!0,labelText:n("saveDescription","Enter a description"),"data-testid":"cohort-description",id:"cohort-description",onChange:function(e){return f(e.target.value)},value:h})),i().createElement(l.mzw,null,i().createElement(l.zxk,{kind:"secondary",onClick:function(){return C(!1)}},n("cancel","Cancel")),i().createElement(l.zxk,{"data-testid":"cohort-save-button",kind:"primary",onClick:P},n("save","Save")))),i().createElement(l.lpG,{size:"sm",open:k,onClose:function(){return I(!1)}},i().createElement(l.xBx,null,i().createElement("p",null,"Save Query")),i().createElement(l.fef,{hasForm:!0},i().createElement(l.oil,{required:!0,labelText:n("saveName","Enter a name"),id:"query-name","data-testid":"query-name",onChange:function(e){return b(e.target.value)},value:_}),i().createElement("br",null),i().createElement(l.oil,{required:!0,labelText:n("saveDescription","Enter a description"),id:"query-description",onChange:function(e){return E(e.target.value)},value:g})),i().createElement(l.mzw,null,i().createElement(l.zxk,{kind:"secondary",onClick:function(){return I(!1)}},n("cancel","Cancel")),i().createElement(l.zxk,{"data-testid":"query-save-button",kind:"primary",onClick:M},n("save","Save")))),i().createElement(l.lpG,{size:"sm",open:S,onClose:function(){return x(!1)}},i().createElement(l.xBx,null,i().createElement("p",null,n("deleteHistoryItem","Are you sure you want to delete ".concat(null==t?void 0:t.description," from the search history?"),{searchItemName:null==t?void 0:t.description}))),i().createElement(l.mzw,{danger:!0,onRequestSubmit:N,primaryButtonText:n("delete","Delete"),secondaryButtonText:n("cancel","Cancel")})))};var Ir=r(7204),Dr={};Dr.styleTagTransform=k(),Dr.setAttributes=A(),Dr.insert=S().bind(null,"head"),Dr.domAPI=E(),Dr.insertStyleElement=C(),y()(Ir.Z,Dr);const Pr=Ir.Z&&Ir.Z.locals?Ir.Z.locals:void 0;function Nr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Mr=function(){var e=JSON.parse(window.sessionStorage.getItem("openmrsHistory")),t=[];return null==e||e.map((function(e,r){return t.push((n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Nr(e,t,r[t])}))}return e}({},e),a=null!=(a={id:(r+1).toString(),results:e.patients.length})?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(a)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})),n));var n,a})),t};function Yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jr(){return jr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jr.apply(this,arguments)}function Rr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||Zr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(e,t){if(e){if("string"==typeof e)return Yr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yr(e,t):void 0}}const Lr=function(e){var t=e.isHistoryUpdated,r=e.setIsHistoryUpdated,n=(0,s.useTranslation)().t,a=Rr((0,o.useState)([]),2),c=a[0],u=a[1],d=Rr((0,o.useState)(1),2),m=d[0],p=d[1],h=Rr((0,o.useState)(10),2),f=h[0],v=h[1],_=Rr((0,o.useState)(!1),2),b=_[0],y=_[1];(0,o.useEffect)((function(){t&&(u(Mr()),r(!1))}),[t,r]);var g=[{key:"id",header:"#"},{key:"description",header:n("query","Query")},{key:"results",header:n("results","Results")}],E=function(e){var t,r=(t=c,function(e){if(Array.isArray(e))return Yr(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||Zr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(t,r){return r!=c.indexOf(e)}));u(r),window.sessionStorage.setItem("openmrsHistory",JSON.stringify(r))};return i().createElement("div",{className:Pr.container},i().createElement("div",{className:Pr.header},i().createElement("p",{className:P.heading},n("searchHistory","Search History")),c.length>0&&i().createElement(l.zxk,{kind:"danger--tertiary",onClick:function(){return y(!0)}},n("clearHistory","Clear Search History"))),i().createElement(l.wQF,{rows:c,headers:g,useZebraStyles:!0},(function(e){var t=e.rows,r=e.headers,n=e.getTableProps,a=e.getHeaderProps,o=e.getRowProps;return i().createElement(l.iA_,jr({},n()),i().createElement(l.ssF,null,i().createElement(l.SCH,null,r.map((function(e){return i().createElement(l.xDH,jr({},a({header:e})),e.header)})),i().createElement(l.xDH,{className:P.optionHeader}))),i().createElement(l.RMI,null,t.slice((m-1)*f).slice(0,f).map((function(e,t){return i().createElement(l.SCH,jr({},o({row:e})),e.cells.map((function(e){return i().createElement(l.pj1,{key:e.id},e.value)})),i().createElement(l.pj1,{className:P.optionCell},i().createElement(kr,{searchItem:c[t],updateSearchHistory:E})))}))))})),c.length>10&&i().createElement(l.tlE,{backwardText:n("previousPage","Previous page"),forwardText:n("nextPage","Next page"),itemsPerPageText:n("itemsPerPage:","Items per page:"),onChange:function(e){var t=e.page,r=e.pageSize;p(t),v(r)},page:1,pageSize:10,pageSizes:[10,20,30,40,50],size:"md",totalItems:c.length}),!c.length&&i().createElement(le,{displayText:n("data","data")}),i().createElement(l.lpG,{size:"sm",open:b,onClose:function(){return y(!1)}},i().createElement(l.xBx,null,i().createElement("p",null,n("clearHistoryMsg","Are you sure you want to clear the search history?"))),i().createElement(l.mzw,{danger:!0,onRequestSubmit:function(){window.sessionStorage.removeItem("openmrsHistory"),u([]),y(!1)},primaryButtonText:n("clear","Clear"),secondaryButtonText:n("cancel","Cancel")})))};var zr=r(2533),qr={};qr.styleTagTransform=k(),qr.setAttributes=A(),qr.insert=S().bind(null,"head"),qr.domAPI=E(),qr.insertStyleElement=C(),y()(zr.Z,qr);const Hr=zr.Z&&zr.Z.locals?zr.Z.locals:void 0;function Br(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Fr(){return Fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fr.apply(this,arguments)}function Gr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Br(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Br(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Vr=function(e){var t=e.patients,r=Gr((0,o.useState)(1),2),n=r[0],a=r[1],c=Gr((0,o.useState)(10),2),u=c[0],d=c[1],m=(0,s.useTranslation)().t,p=[{key:"id",header:m("openmrsId","OpenMRS ID")},{key:"name",header:m("name","Name")},{key:"age",header:m("age","Age")},{key:"gender",header:m("gender","Gender")}];return i().createElement("div",{className:Hr.container},i().createElement("p",{className:P.heading},m("searchResults","Search Results")),i().createElement(l.wQF,{rows:t,headers:p,useZebraStyles:!0},(function(e){var t=e.rows,r=e.headers,a=e.getTableProps,o=e.getHeaderProps,c=e.getRowProps;return i().createElement(l.iA_,Fr({},a()),i().createElement(l.ssF,null,i().createElement(l.SCH,null,r.map((function(e){return i().createElement(l.xDH,Fr({},o({header:e})),e.header)})))),i().createElement(l.RMI,null,t.slice((n-1)*u).slice(0,u).map((function(e,t){return i().createElement(l.SCH,Fr({},c({row:e}),{key:t}),e.cells.map((function(e,t){return i().createElement(l.pj1,{key:t},e.value)})))}))))})),t.length>10&&i().createElement(l.tlE,{backwardText:m("previousPage","Previous page"),forwardText:m("nextPage","Next page"),itemsPerPageText:m("itemsPerPage:","Items per page:"),onChange:function(e){var t=e.page,r=e.pageSize;a(t),d(r)},page:1,pageSize:10,pageSizes:[10,20,30,40,50],size:"md",totalItems:t.length}),!t.length&&i().createElement(le,{displayText:m("data","data")}))};function Ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Qr(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function Wr(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Qr(o,n,a,i,l,"next",e)}function l(e){Qr(o,n,a,i,l,"throw",e)}i(void 0)}))}}function Xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ur(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const $r=function(){var e=(0,s.useTranslation)().t,t=Xr((0,o.useState)([]),2),r=t[0],n=t[1],u=Xr((0,o.useState)(!0),2),d=u[0],m=u[1],p="tablet"===(0,c.useLayoutType)(),f=function(t,r){return new Promise(function(){var o=Wr(a().mark((function o(i){var l,s;return a().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n([]),a.prev=1,a.next=4,h(t);case 4:l=a.sent,(s=l.data.rows).map((function(e){e.id=e.patientId.toString(),e.name="".concat(e.firstname," ").concat(e.lastname)})),n(s),z(r,s,t.query),(0,c.showToast)({title:e("success","Success!"),kind:"success",critical:!0,description:e("searchIsCompleted","Search is completed with ".concat(s.length," result(s)"),{numOfResults:s.length})}),m(!0),i(!0),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(1),(0,c.showToast)({title:e("error","Error"),kind:"error",critical:!0,description:null===a.t0||void 0===a.t0?void 0:a.t0.message}),i(!0);case 18:case"end":return a.stop()}}),o,null,[[1,14]])})));return function(e){return o.apply(this,arguments)}}())},b=function(){var t=Wr(a().mark((function t(r){var o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v(r);case 3:o=t.sent,n(o),(0,c.showToast)({title:e("success","Success!"),kind:"success",critical:!0,description:e("searchIsCompleted","Search is completed with ".concat(o.length," result(s)"),{numOfResults:o.length})}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),(0,c.showToast)({title:e("error","Error"),kind:"error",critical:!0,description:null===t.t0||void 0===t.t0?void 0:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Wr(a().mark((function t(r){var o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_(r);case 3:o=t.sent,n(o),(0,c.showToast)({title:e("success","Success!"),kind:"success",critical:!0,description:e("searchIsCompleted","Search is completed with ".concat(o.length," result(s)"),{numOfResults:o.length})}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),(0,c.showToast)({title:e("error","Error"),kind:"error",critical:!0,description:null===t.t0||void 0===t.t0?void 0:t.t0.message});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),g=[{name:e("concepts","Concepts"),component:i().createElement(vt,{onSubmit:f})},{name:e("demographics","Demographics"),component:i().createElement(Ct,{onSubmit:f})},{name:e("personAttributes","Person Attributes"),component:i().createElement(_r,{onSubmit:f})},{name:e("encounters","Encounters"),component:i().createElement(Gt,{onSubmit:f})},{name:e("location","Location"),component:i().createElement(sr,{onSubmit:f})},{name:e("enrollments","Enrollments"),component:i().createElement(er,{onSubmit:f})},{name:e("drugOrder","Drug Order"),component:i().createElement(jt,{onSubmit:f})},{name:e("composition","Composition"),component:i().createElement(re,{onSubmit:f})},{name:e("savedDefinitions","Saved Cohorts"),component:i().createElement(Te,{onViewCohort:y})},{name:e("savedDefinitions","Saved Queries"),component:i().createElement(Ge,{onViewQuery:b})}];return i().createElement("div",{className:"omrs-main-content ".concat(P.mainContainer," ").concat(P.cohortBuilder)},i().createElement("div",{className:p?P.tabletContainer:P.desktopContainer},i().createElement("p",{className:P.title},e("cohortBuilder","Cohort Builder")),i().createElement("div",{className:P.tabContainer},i().createElement("p",{className:P.heading},e("searchCriteria","Search Criteria")),i().createElement("div",{className:P.tab},i().createElement(l.mQc,{className:"".concat(P.verticalTabs," ").concat(p?P.tabletTab:P.desktopTab)},i().createElement(l.tdY,{"aria-label":"navigation"},g.map((function(e,t){return i().createElement(l.OK9,{key:t},e.name)}))),i().createElement(l.nPR,null,g.map((function(e,t){return i().createElement(l.x45,{key:t},e.component)})))))),i().createElement(Vr,{patients:r}),i().createElement(Lr,{isHistoryUpdated:d,setIsHistoryUpdated:m})))}}}]);