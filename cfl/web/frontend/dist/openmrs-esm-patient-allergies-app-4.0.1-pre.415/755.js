"use strict";(self.webpackChunk_openmrs_esm_patient_allergies_app=self.webpackChunk_openmrs_esm_patient_allergies_app||[]).push([[755],{5771:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(9601),a=r.n(n),l=r(2609),i=r.n(l)()(a());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-allergies__allergies-detailed-summary__widgetCard___XfaVU{border:1px solid #e0e0e0}.-esm-patient-allergies__allergies-detailed-summary__allergySeverity___ykprM{margin:.5rem 0rem;letter-spacing:.063rem}.-esm-patient-allergies__allergies-detailed-summary__allergyCriticality___oht9y{display:flex;align-items:center;text-transform:uppercase}.-esm-patient-allergies__allergies-detailed-summary__bodyShort02___unP8V{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0)}.-esm-patient-allergies__allergies-detailed-summary__productiveHeading02___ZxD0J{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-patient-allergies__allergies-detailed-summary__note___icCBt{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);margin:.5rem 0rem;color:#a8a8a8;max-width:36rem}",""]),i.locals={widgetCard:"-esm-patient-allergies__allergies-detailed-summary__widgetCard___XfaVU",allergySeverity:"-esm-patient-allergies__allergies-detailed-summary__allergySeverity___ykprM",allergyCriticality:"-esm-patient-allergies__allergies-detailed-summary__allergyCriticality___oht9y",bodyShort02:"-esm-patient-allergies__allergies-detailed-summary__bodyShort02___unP8V",productiveHeading02:"-esm-patient-allergies__allergies-detailed-summary__productiveHeading02___ZxD0J",note:"-esm-patient-allergies__allergies-detailed-summary__note___icCBt"};const o=i},5755:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var n=r(7900),a=r.n(n),l=r(4924),i=r(1373),o=r(6759),c=r(906),d=r(6217),s=r(6705),u=r(8179),p=r(6062),m=r.n(p),f=r(4036),g=r.n(f),v=r(6793),y=r.n(v),_=r(7892),b=r.n(_),h=r(1173),S=r.n(h),j=r(2464),E=r.n(j),O=r(5771),Z={};Z.styleTagTransform=E(),Z.setAttributes=b(),Z.insert=y().bind(null,"head"),Z.domAPI=g(),Z.insertStyleElement=S(),m()(O.Z,Z);const w=O.Z&&O.Z.locals?O.Z.locals:void 0;function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(){return k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},k.apply(this,arguments)}const C=function(e){var t,r,n=e.patient,p=e.showAddAllergyButton,m=(0,l.useTranslation)().t,f=m("allergyIntolerances","allergy intolerances"),g=m("allergies","Allergies"),v=(0,s.PI)(n.id),y=v.allergies,_=v.isError,b=v.isLoading,h=v.isValidating,S=a().useCallback((function(){return(0,d.launchPatientWorkspace)(u.Hz)}),[]),j=[{key:"display",header:m("allergen","Allergen")},{key:"criticality",header:m("severityandReaction","Severity and Reaction")},{key:"recordedDate",header:m("since","Since")},{key:"lastUpdated",header:m("lastUpdated","Last updated")}],E=a().useMemo((function(){var e;return null==y?void 0:y.map((function(t){var r,n,l;return n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){P(e,t,r[t])}))}return e}({},t),l=null!=(l={criticality:{content:a().createElement("div",{className:w.allergyDetails},a().createElement("p",{className:w.allergyCriticality},"high"===t.criticality&&a().createElement("svg",{className:"omrs-icon omrs-margin-right-4",fill:"rgba(181, 7, 6, 1)",style:{height:"1.25rem"}},a().createElement("use",{xlinkHref:"#omrs-icon-important-notification"})),a().createElement("span",{className:"".concat(w.allergySeverity," ").concat("high"===t.criticality?w.productiveHeading02:w.bodyShort02)},t.criticality)),a().createElement("p",null,null===(r=t.reactionManifestations)||void 0===r?void 0:r.join(", ")),a().createElement("p",{className:w.note},null==t?void 0:t.note))},recordedDate:null!==(e=(0,c.formatDate)((0,c.parseDate)(t.recordedDate),{day:!1,time:!1}))&&void 0!==e?e:"--",lastUpdated:t.lastUpdated?(0,c.formatDate)((0,c.parseDate)(t.lastUpdated),{time:!1}):"--"})?l:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(l)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(l)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(l,e))})),n}))}),[y]);return b?a().createElement(i.gqd,{role:"progressbar"}):_?a().createElement(d.ErrorState,{error:_,headerTitle:g}):(null==y?void 0:y.length)?a().createElement("div",{className:w.widgetCard},a().createElement(d.CardHeader,{title:g},a().createElement("span",null,h?a().createElement(i.lSo,null):null),p&&a().createElement(i.zxk,{kind:"ghost",renderIcon:function(e){return a().createElement(o.mm,k({size:16},e))},iconDescription:"Add allergies",onClick:S},m("add","Add"))),a().createElement(i.wQF,{rows:E,headers:j,isSortable:!0,useZebraStyles:!0},(function(e){var n=e.rows,l=e.headers,o=e.getHeaderProps,c=e.getTableProps;return a().createElement(i.xJi,null,a().createElement(i.iA_,k({},c()),a().createElement(i.ssF,null,a().createElement(i.SCH,null,l.map((function(e){var r;return a().createElement(i.xDH,k({className:"".concat(w.productiveHeading01," ").concat(w.text02)},o({header:e,isSortable:e.isSortable})),null!==(t=null===(r=e.header)||void 0===r?void 0:r.content)&&void 0!==t?t:e.header)})))),a().createElement(i.RMI,null,n.map((function(e){return a().createElement(i.SCH,{key:e.id},e.cells.map((function(e){var t;return a().createElement(i.pj1,{key:e.id},null!==(r=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==r?r:e.value)})))})))))}))):a().createElement(d.EmptyState,{displayText:f,headerTitle:g,launchForm:S})}},6705:(e,t,r)=>{r.d(t,{PI:()=>i});var n=r(9857),a=r(5573),l=r(906);function i(e){var t,r,a=(0,n.ZP)("".concat(l.fhirBaseUrl,"/AllergyIntolerance?patient=").concat(e),l.openmrsFetch),i=a.data,c=a.error,d=a.isValidating,s=(null==i||null===(t=i.data)||void 0===t?void 0:t.total)>0?null==i?void 0:i.data.entry.map((function(e){return null!==(r=e.resource)&&void 0!==r?r:[]})).map(o).sort((function(e,t){return t.lastUpdated>e.lastUpdated?1:-1})):null;return{allergies:i?s:null,isError:c,isLoading:!i&&!c,isValidating:d}}function o(e){var t,r,n,l,i,o,c,d,s,u,p,m,f,g,v,y=null===(t=null==e?void 0:e.reaction[0])||void 0===t||null===(r=t.manifestation)||void 0===r?void 0:r.map((function(e){var t;return null===(t=e.coding[0])||void 0===t?void 0:t.display}));return{id:null==e?void 0:e.id,clinicalStatus:null===(l=null==e||null===(n=e.clinicalStatus)||void 0===n?void 0:n.coding[0])||void 0===l?void 0:l.display,criticality:null==e?void 0:e.criticality,display:null===(o=null==e||null===(i=e.code)||void 0===i?void 0:i.coding[0])||void 0===o?void 0:o.display,recordedDate:null==e?void 0:e.recordedDate,recordedBy:null==e||null===(c=e.recorder)||void 0===c?void 0:c.display,recorderType:null==e||null===(d=e.recorder)||void 0===d?void 0:d.type,note:null==e||null===(s=e.note)||void 0===s||null===(u=s[0])||void 0===u?void 0:u.text,reactionToSubstance:null===(f=null===(p=null==e?void 0:e.reaction[0])||void 0===p||null===(m=p.substance)||void 0===m?void 0:m.coding[1])||void 0===f?void 0:f.display,reactionManifestations:y,reactionSeverity:(0,a.Z)(null===(g=null==e?void 0:e.reaction[0])||void 0===g?void 0:g.severity),lastUpdated:null==e||null===(v=e.meta)||void 0===v?void 0:v.lastUpdated}}},8179:(e,t,r)=>{r.d(t,{Hz:()=>n,mI:()=>a});var n="patient-allergy-form-workspace",a=5},187:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r(3221).Z.Symbol},9001:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(187),a=Object.prototype,l=a.hasOwnProperty,i=a.toString,o=n.Z?n.Z.toStringTag:void 0;var c=Object.prototype.toString;var d=n.Z?n.Z.toStringTag:void 0;const s=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":d&&d in Object(e)?function(e){var t=l.call(e,o),r=e[o];try{e[o]=void 0;var n=!0}catch(e){}var a=i.call(e);return n&&(t?e[o]=r:delete e[o]),a}(e):function(e){return c.call(e)}(e)}},2168:(e,t,r)=>{r.d(t,{Z:()=>n});const n="object"==typeof global&&global&&global.Object===Object&&global},3221:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(2168),a="object"==typeof self&&self&&self.Object===Object&&self;const l=n.Z||a||Function("return this")()},5573:(e,t,r)=>{r.d(t,{Z:()=>b});var n=r(2237);const a=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var l=Array(a);++n<a;)l[n]=e[n+t];return l}(e,t,r)};var l=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const i=function(e){return l.test(e)};var o="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",c="\\ud83c[\\udffb-\\udfff]",d="[^\\ud800-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",p="(?:"+o+"|"+c+")?",m="[\\ufe0e\\ufe0f]?",f=m+p+"(?:\\u200d(?:"+[d,s,u].join("|")+")"+m+p+")*",g="(?:"+[d+o+"?",o,s,u,"[\\ud800-\\udfff]"].join("|")+")",v=RegExp(c+"(?="+c+")|"+g+f,"g");const y=function(e){return i(e)?function(e){return e.match(v)||[]}(e):function(e){return e.split("")}(e)},_=function(e){e=(0,n.Z)(e);var t=i(e)?y(e):void 0,r=t?t[0]:e.charAt(0),l=t?a(t,1).join(""):e.slice(1);return r.toUpperCase()+l},b=function(e){return _((0,n.Z)(e).toLowerCase())}},7885:(e,t,r)=>{r.d(t,{Z:()=>n});const n=Array.isArray},3391:(e,t,r)=>{r.d(t,{Z:()=>n});const n=function(e){return null!=e&&"object"==typeof e}},2758:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(9001),a=r(3391);const l=function(e){return"symbol"==typeof e||(0,a.Z)(e)&&"[object Symbol]"==(0,n.Z)(e)}},2237:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(187);var a=r(7885),l=r(2758),i=n.Z?n.Z.prototype:void 0,o=i?i.toString:void 0;const c=function e(t){if("string"==typeof t)return t;if((0,a.Z)(t))return function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}(t,e)+"";if((0,l.Z)(t))return o?o.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},d=function(e){return null==e?"":c(e)}}}]);