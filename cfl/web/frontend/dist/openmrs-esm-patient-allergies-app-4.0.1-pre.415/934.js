"use strict";(self.webpackChunk_openmrs_esm_patient_allergies_app=self.webpackChunk_openmrs_esm_patient_allergies_app||[]).push([[934],{1223:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(9601),l=n.n(r),o=n(2609),a=n.n(o)()(l());a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-allergies__allergies-overview__widgetCard___inKPd{border:1px solid #e0e0e0}",""]),a.locals={widgetCard:"-esm-patient-allergies__allergies-overview__widgetCard___inKPd"};const i=a},8934:(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var r=n(7900),l=n.n(r),o=n(1373),a=n(6759),i=n(4924),u=n(906),c=n(6217),d=n(8179),s=n(6705),f=n(6062),v=n.n(f),p=n(4036),g=n.n(p),b=n(6793),y=n.n(b),m=n(7892),h=n.n(m),j=n(1173),O=n.n(j),Z=n(2464),S=n.n(Z),E=n(1223),P={};P.styleTagTransform=S(),P.setAttributes=h(),P.insert=y().bind(null,"head"),P.domAPI=g(),P.insertStyleElement=O(),v()(E.Z,P);const w=E.Z&&E.Z.locals?E.Z.locals:void 0;function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(){return k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(this,arguments)}const A=function(e){var t,n,r=e.patient,f=e.showAddAllergyButton,v=(e.basePath,(0,i.useTranslation)().t),p=v("allergyIntolerances","allergy intolerances"),g=v("allergies","Allergies"),b=v("seeAll","See all"),y="${openmrsSpaBase}/patient/".concat(r.id,"/chart/Allergies"),m=(0,s.PI)(r.id),h=m.allergies,j=m.isError,O=m.isLoading,Z=m.isValidating,S=(0,u.usePagination)(null!=h?h:[],d.mI),E=S.results,P=S.goTo,A=S.currentPage,C=[{key:"display",header:v("name","Name")},{key:"reactions",header:v("reactions","Reactions")}],I=l().useMemo((function(){return null==E?void 0:E.map((function(e){var t,n,r;return n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}({},e),r=null!=(r={reactions:"".concat((null===(t=e.reactionManifestations)||void 0===t?void 0:t.join(", "))||""," ").concat(e.reactionSeverity?"(".concat(e.reactionSeverity,")"):"")})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})),n}))}),[E]),T=l().useCallback((function(){return(0,c.launchPatientWorkspace)(d.Hz)}),[]);return O?l().createElement(o.gqd,{role:"progressbar"}):j?l().createElement(c.ErrorState,{error:j,headerTitle:g}):(null==h?void 0:h.length)?l().createElement("div",{className:w.widgetCard},l().createElement(c.CardHeader,{title:g},l().createElement("span",null,Z?l().createElement(o.lSo,null):null),f&&l().createElement(o.zxk,{kind:"ghost",renderIcon:function(e){return l().createElement(a.mm,k({size:16},e))},iconDescription:"Add allergies",onClick:T},v("add","Add"))),l().createElement(o.wQF,{rows:I,headers:C,isSortable:!0,size:"sm",useZebraStyles:!0},(function(e){var r=e.rows,a=e.headers,i=e.getHeaderProps,u=e.getTableProps;return l().createElement(o.xJi,null,l().createElement(o.iA_,k({},u()),l().createElement(o.ssF,null,l().createElement(o.SCH,null,a.map((function(e){var n;return l().createElement(o.xDH,k({className:"".concat(w.productiveHeading01," ").concat(w.text02)},i({header:e,isSortable:e.isSortable})),null!==(t=null===(n=e.header)||void 0===n?void 0:n.content)&&void 0!==t?t:e.header)})))),l().createElement(o.RMI,null,r.map((function(e){return l().createElement(o.SCH,{key:e.id},e.cells.map((function(e){var t;return l().createElement(o.pj1,{key:e.id},null!==(n=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==n?n:e.value)})))})))))})),l().createElement(c.PatientChartPagination,{currentItems:E.length,onPageNumberChange:function(e){var t=e.page;return P(t)},pageNumber:A,pageSize:d.mI,dashboardLinkUrl:y,dashboardLinkLabel:b,totalItems:h.length})):l().createElement(c.EmptyState,{displayText:p,headerTitle:g,launchForm:T})}},6705:(e,t,n)=>{n.d(t,{PI:()=>a});var r=n(9857),l=n(5573),o=n(906);function a(e){var t,n,l=(0,r.ZP)("".concat(o.fhirBaseUrl,"/AllergyIntolerance?patient=").concat(e),o.openmrsFetch),a=l.data,u=l.error,c=l.isValidating,d=(null==a||null===(t=a.data)||void 0===t?void 0:t.total)>0?null==a?void 0:a.data.entry.map((function(e){return null!==(n=e.resource)&&void 0!==n?n:[]})).map(i).sort((function(e,t){return t.lastUpdated>e.lastUpdated?1:-1})):null;return{allergies:a?d:null,isError:u,isLoading:!a&&!u,isValidating:c}}function i(e){var t,n,r,o,a,i,u,c,d,s,f,v,p,g,b,y=null===(t=null==e?void 0:e.reaction[0])||void 0===t||null===(n=t.manifestation)||void 0===n?void 0:n.map((function(e){var t;return null===(t=e.coding[0])||void 0===t?void 0:t.display}));return{id:null==e?void 0:e.id,clinicalStatus:null===(o=null==e||null===(r=e.clinicalStatus)||void 0===r?void 0:r.coding[0])||void 0===o?void 0:o.display,criticality:null==e?void 0:e.criticality,display:null===(i=null==e||null===(a=e.code)||void 0===a?void 0:a.coding[0])||void 0===i?void 0:i.display,recordedDate:null==e?void 0:e.recordedDate,recordedBy:null==e||null===(u=e.recorder)||void 0===u?void 0:u.display,recorderType:null==e||null===(c=e.recorder)||void 0===c?void 0:c.type,note:null==e||null===(d=e.note)||void 0===d||null===(s=d[0])||void 0===s?void 0:s.text,reactionToSubstance:null===(p=null===(f=null==e?void 0:e.reaction[0])||void 0===f||null===(v=f.substance)||void 0===v?void 0:v.coding[1])||void 0===p?void 0:p.display,reactionManifestations:y,reactionSeverity:(0,l.Z)(null===(g=null==e?void 0:e.reaction[0])||void 0===g?void 0:g.severity),lastUpdated:null==e||null===(b=e.meta)||void 0===b?void 0:b.lastUpdated}}},8179:(e,t,n)=>{n.d(t,{Hz:()=>r,mI:()=>l});var r="patient-allergy-form-workspace",l=5},187:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n(3221).Z.Symbol},9001:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(187),l=Object.prototype,o=l.hasOwnProperty,a=l.toString,i=r.Z?r.Z.toStringTag:void 0;var u=Object.prototype.toString;var c=r.Z?r.Z.toStringTag:void 0;const d=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":c&&c in Object(e)?function(e){var t=o.call(e,i),n=e[i];try{e[i]=void 0;var r=!0}catch(e){}var l=a.call(e);return r&&(t?e[i]=n:delete e[i]),l}(e):function(e){return u.call(e)}(e)}},2168:(e,t,n)=>{n.d(t,{Z:()=>r});const r="object"==typeof global&&global&&global.Object===Object&&global},3221:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(2168),l="object"==typeof self&&self&&self.Object===Object&&self;const o=r.Z||l||Function("return this")()},5573:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(2237);const l=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,l=e.length;t<0&&(t=-t>l?0:l+t),(n=n>l?l:n)<0&&(n+=l),l=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(l);++r<l;)o[r]=e[r+t];return o}(e,t,n)};var o=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const a=function(e){return o.test(e)};var i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",u="\\ud83c[\\udffb-\\udfff]",c="[^\\ud800-\\udfff]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",f="(?:"+i+"|"+u+")?",v="[\\ufe0e\\ufe0f]?",p=v+f+"(?:\\u200d(?:"+[c,d,s].join("|")+")"+v+f+")*",g="(?:"+[c+i+"?",i,d,s,"[\\ud800-\\udfff]"].join("|")+")",b=RegExp(u+"(?="+u+")|"+g+p,"g");const y=function(e){return a(e)?function(e){return e.match(b)||[]}(e):function(e){return e.split("")}(e)},m=function(e){e=(0,r.Z)(e);var t=a(e)?y(e):void 0,n=t?t[0]:e.charAt(0),o=t?l(t,1).join(""):e.slice(1);return n.toUpperCase()+o},h=function(e){return m((0,r.Z)(e).toLowerCase())}},7885:(e,t,n)=>{n.d(t,{Z:()=>r});const r=Array.isArray},3391:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(e){return null!=e&&"object"==typeof e}},2758:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(9001),l=n(3391);const o=function(e){return"symbol"==typeof e||(0,l.Z)(e)&&"[object Symbol]"==(0,r.Z)(e)}},2237:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(187);var l=n(7885),o=n(2758),a=r.Z?r.Z.prototype:void 0,i=a?a.toString:void 0;const u=function e(t){if("string"==typeof t)return t;if((0,l.Z)(t))return function(e,t){for(var n=-1,r=null==e?0:e.length,l=Array(r);++n<r;)l[n]=t(e[n],n,e);return l}(t,e)+"";if((0,o.Z)(t))return i?i.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},c=function(e){return null==e?"":u(e)}}}]);