"use strict";(globalThis.webpackChunk_openmrs_esm_patient_test_results_app=globalThis.webpackChunk_openmrs_esm_patient_test_results_app||[]).push([[362],{2082:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(272),r=n.n(a),l=n(2609),i=n.n(l)()(r());i.push([e.id,"@media screen{.-esm-patient-test-results__print-modal__printPage___hE3hX{background-color:#fff;display:none}}.-esm-patient-test-results__print-modal__header___gFrYG{display:flex;align-items:center;justify-content:space-between;background-color:#fff}.-esm-patient-test-results__print-modal__patientDetails___OVhTb{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);margin:0 .5rem}.-esm-patient-test-results__print-modal__patientInfo___Dzo8T{color:#393939;font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0)}.-esm-patient-test-results__print-modal__name___N9DWk{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);margin-right:.5rem}.-esm-patient-test-results__print-modal__date___MEAP4{margin-left:1.5rem}.-esm-patient-test-results__print-modal__gender___GExh3{text-transform:capitalize}.-esm-patient-test-results__print-modal__printedBy___LcPuv{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);margin:0 .25rem;font-size:smaller}.-esm-patient-test-results__print-modal__subheader___ENd1Z{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);color:#525252;padding:.5rem;text-align:center}@media print{@page{size:auto;margin:2.5rem}}.-esm-patient-test-results__print-modal__datePickers___JRdRK{display:flex;margin-bottom:.5rem;justify-content:flex-start}.-esm-patient-test-results__print-modal__modalBody___NVujz{max-height:31.25rem;overflow-y:auto;background-color:#fff}.-esm-patient-test-results__print-modal__emptyState___iRyyU{text-align:center;margin-top:2.5rem;margin-bottom:2.5rem}","",{version:3,sources:["webpack://./src/print-modal/print-modal.scss","webpack://./../../node_modules/@carbon/colors/index.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAIA,cACE,2DACE,qBCGI,CDFJ,YAAA,CAAA,CAIJ,wDACE,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,qBCNM,CDSR,gEEwzBI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CFtzBF,cAAA,CAGF,6DACE,aCyBQ,CCyxBN,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CF9yBJ,sDE8yBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CF5yBF,kBGTW,CHYb,sDACE,kBGEW,CHCb,wDACE,yBAAA,CAGF,2DEiyBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CF/xBF,eAAA,CACA,iBAAA,CAGF,2DE2xBI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CFzxBF,aCDQ,CDER,aG7BW,CH8BX,iBAAA,CAGF,aACE,MACE,SAAA,CACA,aGXS,CAAA,CHeb,6DACE,YAAA,CACA,mBG1CW,CH2CX,0BAAA,CAGF,2DACE,mBAAA,CACA,eAAA,CACA,qBC7DM,CDgER,4DACE,iBAAA,CACA,iBG7BW,CH8BX,oBG9BW",sourceRoot:""}]),i.locals={printPage:"-esm-patient-test-results__print-modal__printPage___hE3hX",header:"-esm-patient-test-results__print-modal__header___gFrYG",patientDetails:"-esm-patient-test-results__print-modal__patientDetails___OVhTb",patientInfo:"-esm-patient-test-results__print-modal__patientInfo___Dzo8T",name:"-esm-patient-test-results__print-modal__name___N9DWk",date:"-esm-patient-test-results__print-modal__date___MEAP4",gender:"-esm-patient-test-results__print-modal__gender___GExh3",printedBy:"-esm-patient-test-results__print-modal__printedBy___LcPuv",subheader:"-esm-patient-test-results__print-modal__subheader___ENd1Z",datePickers:"-esm-patient-test-results__print-modal__datePickers___JRdRK",modalBody:"-esm-patient-test-results__print-modal__modalBody___NVujz",emptyState:"-esm-patient-test-results__print-modal__emptyState___iRyyU"};const s=i},9362:(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var a=n(4924),r=n(268),l=n.n(r),i=n(689),s=n(2870),o=n(868),c=n(234),d=n(1354),u=n.n(d),m=n(1583),A=n.n(m),_=n(7378),p=n.n(_),h=n(5993),g=n.n(h),v=n(4154),f=n.n(v),y=n(8141),C=n.n(y),E=n(2082),b={};b.styleTagTransform=C(),b.setAttributes=g(),b.insert=p().bind(null,"head"),b.domAPI=A(),b.insertStyleElement=f(),u()(E.Z,b);const D=E.Z&&E.Z.locals?E.Z.locals:void 0;function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function B(){return B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},B.apply(this,arguments)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);i=!0);}catch(e){s=!0,r=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const T=function(e){var t,n,d=e.patientUuid,u=e.closeDialog,m=(0,a.useTranslation)().t,A="tablet"===(0,s.useLayoutType)(),_=(0,s.useSession)(),p=(0,o.Z)().panels,h=(0,r.useRef)(null),g=k((0,r.useState)(null),2),v=g[0],f=g[1],y=k((0,r.useState)(null),2),C=y[0],E=y[1],b=(0,s.useConfig)().excludePatientIdentifierCodeTypes,w=m("testResults_title","Test Results"),T="m/d/y",z=(0,c.useReactToPrint)({content:function(){return h.current}}),M=(0,s.usePatient)(d),Z=(0,r.useMemo)((function(){var e,t,n,a,r,l,i,o,c,d,u,A,_,p=null!==(_=null==M||null===(e=M.patient)||void 0===e||null===(t=e.identifier)||void 0===t?void 0:t.filter((function(e){return!(null==b?void 0:b.uuids.includes(e.type.coding[0].code))})))&&void 0!==_?_:[];return{name:"".concat(null==M||null===(n=M.patient)||void 0===n||null===(a=n.name)||void 0===a||null===(r=a[0])||void 0===r||null===(l=r.given)||void 0===l?void 0:l.join(" ")," ").concat(null==M||null===(i=M.patient)||void 0===i||null===(o=i.name)||void 0===o?void 0:o[0].family),age:(0,s.age)(null==M||null===(c=M.patient)||void 0===c?void 0:c.birthDate),gender:function(e){switch(e){case"male":return m("male","Male");case"female":return m("female","Female");case"other":return m("other","Other");case"unknown":return m("unknown","Unknown");default:return e}}(null==M||null===(d=M.patient)||void 0===d?void 0:d.gender),location:null==M||null===(u=M.patient)||void 0===u||null===(A=u.address)||void 0===A?void 0:A[0].city,identifiers:(null==p?void 0:p.length)?p.map((function(e){var t=e.value;return e.type,t})):[]}}),[M,m,null==b?void 0:b.uuids]),P=(0,r.useMemo)((function(){return v&&C?p.filter((function(e){var t=new Date(e.effectiveDateTime);return t>=new Date(v)&&t<=new Date(C)})).map((function(e){return x(e)})):p.map((function(e){return x(e)}))}),[p,v,C]);return l().createElement("div",null,l().createElement(i.xBx,{closeModal:u,title:m("printTestResults","Print test results")}),l().createElement(i.fef,{className:D.modalBody},l().createElement(i.Mtg,{className:D.datePickers,datePickerType:"range",light:A,dateFormat:T,value:[v,C],onChange:function(e){var t=k(e,2),n=t[0],a=t[1];f(n),E(a)}},l().createElement(i.aj6,{labelText:m("startDate","Start date"),placeholder:T}),l().createElement(i.aj6,{labelText:m("endDate","End date"),placeholder:T})),l().createElement("div",{ref:h},l().createElement("div",{className:D.printPage},l().createElement("header",{className:D.header},l().createElement("svg",{role:"img",width:110,height:40,viewBox:"0 0 380 119",xmlns:"http://www.w3.org/2000/svg"},l().createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M40.29 40.328a27.755 27.755 0 0 1 19.688-8.154c7.669 0 14.613 3.102 19.647 8.116l.02-18.54A42.835 42.835 0 0 0 59.978 17c-7.089 0-13.813 1.93-19.709 4.968l.021 18.36ZM79.645 79.671a27.744 27.744 0 0 1-19.684 8.154c-7.67 0-14.614-3.101-19.651-8.116l-.02 18.54A42.857 42.857 0 0 0 59.96 103a42.833 42.833 0 0 0 19.672-4.751l.013-18.578ZM40.328 79.696c-5.038-5.037-8.154-11.995-8.154-19.685 0-7.669 3.102-14.612 8.116-19.65l-18.54-.02A42.85 42.85 0 0 0 17 60.012a42.819 42.819 0 0 0 4.752 19.672l18.576.013ZM79.634 40.289a27.753 27.753 0 0 1 8.154 19.688 27.744 27.744 0 0 1-8.117 19.646l18.542.02a42.842 42.842 0 0 0 4.749-19.666c0-7.09-1.714-13.779-4.751-19.675l-18.577-.013ZM156.184 60.002c0-8.748-6.118-15.776-15.025-15.776-8.909 0-15.025 7.028-15.025 15.776 0 8.749 6.116 15.78 15.025 15.78 8.907 0 15.025-7.031 15.025-15.78Zm-34.881 0c0-11.482 8.318-19.958 19.856-19.958 11.536 0 19.855 8.477 19.855 19.959 0 11.484-8.319 19.964-19.855 19.964-11.538 0-19.856-8.48-19.856-19.965ZM179.514 75.54c5.507 0 9.05-4.14 9.05-9.482 0-5.341-3.543-9.483-9.05-9.483-5.505 0-9.046 4.142-9.046 9.483 0 5.342 3.541 9.482 9.046 9.482ZM166.22 53.306h4.248v3.704h.11c2.344-2.725 5.449-4.36 9.154-4.36 8.014 0 13.408 5.67 13.408 13.408 0 7.63-5.613 13.406-12.752 13.406-4.58 0-8.231-2.29-9.81-5.178h-.11V90.87h-4.248V53.306ZM217.773 63.768c-.163-4.305-3-7.193-7.686-7.193-4.685 0-7.79 2.888-8.335 7.193h16.021Zm3.653 10.412c-3.001 3.868-6.596 5.284-11.339 5.284-8.01 0-12.914-5.993-12.914-13.406 0-7.901 5.559-13.407 13.08-13.407 7.196 0 12.096 4.906 12.096 13.354v1.362h-20.597c.325 4.413 3.704 8.173 8.335 8.173 3.65 0 6.105-1.307 8.12-3.868l3.219 2.508ZM227.854 59.356c0-2.346-.216-4.36-.216-6.05h4.031c0 1.363.11 2.777.11 4.195h.11c1.144-2.505 4.306-4.85 8.5-4.85 6.705 0 9.699 4.252 9.699 10.41v15.748h-4.248v-15.31c0-4.253-1.856-6.924-5.833-6.924-5.503 0-7.903 3.979-7.903 9.811V78.81h-4.25V59.356ZM259.211 41.008h6.708L278.8 70.791h.107l12.982-29.782h6.549v37.99h-4.506V47.124h-.106L280.192 79h-2.738l-13.629-31.875h-.107V79h-4.507V41.01ZM312.392 57.752h4.023c4.992 0 11.487 0 11.487-6.282 0-5.47-4.776-6.276-9.177-6.276h-6.333v12.558Zm-4.506-16.744h9.711c7.352 0 15.132 1.072 15.132 10.462 0 5.527-3.594 9.125-9.495 10.037L334.018 79h-5.525l-10.304-17.063h-5.797V79h-4.506V41.01ZM358.123 47.712c-1.506-2.413-4.187-3.486-6.926-3.486-3.973 0-8.1 1.88-8.1 6.385 0 3.49 1.931 5.047 7.994 6.98 5.903 1.878 11.377 3.809 11.377 11.267 0 7.567-6.495 11.11-13.36 11.11-4.402 0-9.125-1.45-11.7-5.262l3.862-3.165c1.61 2.794 4.83 4.24 8.105 4.24 3.862 0 8.263-2.253 8.263-6.601 0-4.669-3.165-5.474-9.928-7.728-5.366-1.771-9.442-4.134-9.442-10.463 0-7.298 6.277-10.945 12.929-10.945 4.241 0 7.836 1.178 10.625 4.45l-3.699 3.218Z"})),l().createElement("div",{className:D.patientDetails},l().createElement("span",{className:D.name},null==Z?void 0:Z.name),l().createElement("span",{className:D.patientInfo},null==Z?void 0:Z.gender,", ",null==Z?void 0:Z.age,", ",null==Z?void 0:Z.identifiers," ")),l().createElement("div",{className:D.printedBy},m("printedBy","Printed by"),l().createElement("span",{className:D.printedBy},_.user.display," ",m("onDate","on")," ",(0,s.formatDate)(new Date,{noToday:!0})))),l().createElement("div",{className:D.subheader},l().createElement("h4",null,w))),(null==P?void 0:P.length)?l().createElement(i.wQF,{rows:P,headers:[{key:"testType",header:"Test Type"},{key:"date",header:"Date"},{key:"result",header:"Result"},{key:"normalRange",header:"Normal Range"}],isSortable:!0,size:A?"lg":"sm",useZebraStyles:!0},(function(e){var a=e.rows,r=e.headers,s=e.getHeaderProps,o=e.getTableProps;return l().createElement(i.xJi,null,l().createElement(i.iA_,B({},o()),l().createElement(i.ssF,null,l().createElement(i.SCH,null,r.map((function(e){var n;return l().createElement(i.xDH,B({className:"".concat(D.productiveHeading01," ").concat(D.text02)},s({header:e,isSortable:e.isSortable})),null!==(t=null===(n=e.header)||void 0===n?void 0:n.content)&&void 0!==t?t:e.header)})))),l().createElement(i.RMI,null,a.map((function(e){return l().createElement(i.SCH,{key:e.id},e.cells.map((function(e){var t;return l().createElement(i.pj1,{key:e.id},null!==(n=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==n?n:e.value)})))})))))})):l().createElement("p",{className:D.emptyState},m("thereAreNoTestResultsFound","There are no test results found within the specified date range")))),(null==P?void 0:P.length)?l().createElement(i.mzw,null,l().createElement(i.zxk,{kind:"secondary",onClick:u},m("cancel","Cancel")),l().createElement(i.zxk,{kind:"primary",onClick:z},m("print","Print"))):null)};var x=function(e){var t,n;return{id:e.id,testType:e.name,date:(0,s.formatDate)(new Date(e.effectiveDateTime)),result:e.value,normalRange:null!==(n=null==e||null===(t=e.meta)||void 0===t?void 0:t.range)&&void 0!==n?n:"--"}}}}]);