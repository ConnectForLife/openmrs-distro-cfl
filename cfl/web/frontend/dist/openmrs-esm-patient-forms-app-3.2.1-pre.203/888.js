"use strict";(self.webpackChunk_openmrs_esm_patient_forms_app=self.webpackChunk_openmrs_esm_patient_forms_app||[]).push([[888],{2269:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(9601),o=n.n(r),i=n(2609),a=n.n(i)()(o());a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-forms__empty-form-component__productiveHeading01___DUd8s,.-esm-patient-forms__empty-form-component__content___FIkRF{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px;margin-bottom:.5rem}.-esm-patient-forms__empty-form-component__productiveHeading03___sUQRX{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0;margin-bottom:.5rem}.-esm-patient-forms__empty-form-component__productiveHeading04___MGTj9{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}.-esm-patient-forms__empty-form-component__bodyLong01___XR1rU,.-esm-patient-forms__empty-form-component__action___WkXnI{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.-esm-patient-forms__empty-form-component__bodyShort01___EY0Kg{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.-esm-patient-forms__empty-form-component__label01___a2oA0{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}:root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-patient-forms__empty-form-component__skeleton___PBYxl{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}.-esm-patient-forms__empty-form-component__tile___iRfYQ{display:flex;flex-direction:column;text-align:center;min-height:15.25rem;justify-content:flex-end;align-items:center}.-esm-patient-forms__empty-form-component__content___FIkRF{color:#525252;width:13.438rem;margin:1rem .938rem .313rem .875rem}.-esm-patient-forms__empty-form-component__action___WkXnI{color:#525252;width:15.25rem;margin:.313rem 0 0}",""]),a.locals={productiveHeading01:"-esm-patient-forms__empty-form-component__productiveHeading01___DUd8s",content:"-esm-patient-forms__empty-form-component__content___FIkRF",productiveHeading03:"-esm-patient-forms__empty-form-component__productiveHeading03___sUQRX",productiveHeading04:"-esm-patient-forms__empty-form-component__productiveHeading04___MGTj9",bodyLong01:"-esm-patient-forms__empty-form-component__bodyLong01___XR1rU",action:"-esm-patient-forms__empty-form-component__action___WkXnI",bodyShort01:"-esm-patient-forms__empty-form-component__bodyShort01___EY0Kg",label01:"-esm-patient-forms__empty-form-component__label01___a2oA0",tile:"-esm-patient-forms__empty-form-component__tile___iRfYQ",skeleton:"-esm-patient-forms__empty-form-component__skeleton___PBYxl"};const l=a},5025:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(9601),o=n.n(r),i=n(2609),a=n.n(i)()(o());a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-patient-forms__form-view-component__skeleton___UYUCq{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}.-esm-patient-forms__form-view-component__productiveHeading01___S3yQ8{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}.-esm-patient-forms__form-view-component__bodyShort01___tAbtx{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.-esm-patient-forms__form-view-component__bodyLong01___D5Fq6{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.-esm-patient-forms__form-view-component__formContainer___sF9tt{display:flex;flex-direction:column;height:auto;width:100%}.-esm-patient-forms__form-view-component__formContainer___sF9tt input[type=text]{background-color:#fff}.-esm-patient-forms__form-view-component__formContainer___sF9tt div:nth-of-type(2){padding-top:0}.-esm-patient-forms__form-view-component__formResultsLabel___FNcJg{margin:1rem}.omrs-breakpoint-gt-tablet .-esm-patient-forms__form-view-component__tableCell___JCpPN{display:flex;justify-content:space-between;cursor:pointer;align-items:center}.omrs-breakpoint-gt-tablet .-esm-patient-forms__form-view-component__tableCell___JCpPN>svg{visibility:hidden}.omrs-breakpoint-gt-tablet .-esm-patient-forms__form-view-component__tableCell___JCpPN>label{cursor:pointer}.omrs-breakpoint-gt-tablet .-esm-patient-forms__form-view-component__tableCell___JCpPN:hover>svg{visibility:visible}.-esm-patient-forms__form-view-component__formName___mShCV{color:#0f62fe}.omrs-breakpoint-lt-desktop .-esm-patient-forms__form-view-component__tableCell___JCpPN{display:flex;justify-content:space-between;cursor:pointer;height:3rem;align-items:center}.omrs-breakpoint-lt-desktop .-esm-patient-forms__form-view-component__tableCell___JCpPN>label{cursor:pointer}.omrs-breakpoint-lt-desktop .-esm-patient-forms__form-view-component__tableCell___JCpPN.bx--data-table tr{height:3rem}",""]),a.locals={productiveHeading01:"-esm-patient-forms__form-view-component__productiveHeading01___S3yQ8",bodyShort01:"-esm-patient-forms__form-view-component__bodyShort01___tAbtx",bodyLong01:"-esm-patient-forms__form-view-component__bodyLong01___D5Fq6",formContainer:"-esm-patient-forms__form-view-component__formContainer___sF9tt",formResultsLabel:"-esm-patient-forms__form-view-component__formResultsLabel___FNcJg",tableCell:"-esm-patient-forms__form-view-component__tableCell___JCpPN",formName:"-esm-patient-forms__form-view-component__formName___mShCV",skeleton:"-esm-patient-forms__form-view-component__skeleton___UYUCq"};const l=a},6424:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(9601),o=n.n(r),i=n(2609),a=n.n(i)()(o());a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-patient-forms__forms-component__skeleton___KJT2I{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}.-esm-patient-forms__forms-component__bodyShort01___Tpnab,.-esm-patient-forms__forms-component__helperContainer___uABy3{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.-esm-patient-forms__forms-component__widgetCard___WExox{background-color:#fff;border:1px solid #e0e0e0;position:relative}.-esm-patient-forms__forms-component__contextSwitcherContainer___vV2ZC{width:60%;margin-right:1rem}.-esm-patient-forms__forms-component__desktopContentSwitcher___OtuD4{width:100%;height:2rem}.-esm-patient-forms__forms-component__tabletContentSwitcher___afhqd{width:100%;height:2.5rem}.-esm-patient-forms__forms-component__helperContainer___uABy3{color:#525252;text-align:left;padding-left:1.3rem}.-esm-patient-forms__forms-component__labelRed___FS3TU{color:#da1e28}",""]),a.locals={bodyShort01:"-esm-patient-forms__forms-component__bodyShort01___Tpnab",helperContainer:"-esm-patient-forms__forms-component__helperContainer___uABy3",widgetCard:"-esm-patient-forms__forms-component__widgetCard___WExox",contextSwitcherContainer:"-esm-patient-forms__forms-component__contextSwitcherContainer___vV2ZC",desktopContentSwitcher:"-esm-patient-forms__forms-component__desktopContentSwitcher___OtuD4",tabletContentSwitcher:"-esm-patient-forms__forms-component__tabletContentSwitcher___afhqd",labelRed:"-esm-patient-forms__forms-component__labelRed___FS3TU",skeleton:"-esm-patient-forms__forms-component__skeleton___KJT2I"};const l=a},3888:(e,t,n)=>{n.d(t,{Z:()=>ce});var r=n(9902),o=n.n(r),i=n(321),a=n.n(i),l=n(1195),s=n.n(l),m=n(3275),c=n.n(m),f=n(7162),u=n.n(f),p=n(2094),d=n.n(p),_=n(757),g=n.n(_),h=n(5025),b={};b.styleTagTransform=g(),b.setAttributes=u(),b.insert=c().bind(null,"head"),b.domAPI=s(),b.insertStyleElement=d(),a()(h.Z,b);const v=h.Z&&h.Z.locals?h.Z.locals:void 0;var y=n(2269),w={};w.styleTagTransform=g(),w.setAttributes=u(),w.insert=c().bind(null,"head"),w.domAPI=s(),w.insertStyleElement=d(),a()(y.Z,w);const C=y.Z&&y.Z.locals?y.Z.locals:void 0;var S=n(4924),x=n(5343),k=n(3771);const E=function(e){var t=e.action,n=(0,S.useTranslation)().t;return o().createElement(x.n9,{light:!0,className:C.tile},o().createElement(k.EmptyDataIllustration,null),o().createElement("p",{className:C.content},n("noFormsFound","Sorry, no forms have been found")),o().createElement("p",{className:C.action},t))};var z=n(7279),T=n(12),Z=n(3914),F=n(3066),A=n(4750),N=n(9930),U=n(160),P=n(364),I=n(7500),q=n(8804),X=n(1358),M=n(2427),L=n(3783),O=n(9206),D=n(3319);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(){return H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const R=function(e){var t,n,i=e.forms,a=e.patientUuid,l=e.patient,s=e.pageSize,m=e.pageUrl,c=e.urlLabel,f=(0,S.useTranslation)().t,u=(0,F.useConfig)().htmlFormEntryForms,p="desktop"===(0,F.useLayoutType)(),d=(0,k.useVisitOrOfflineVisit)(a).currentVisit,_=V((0,r.useState)(null),2),g=_[0],h=_[1],b=V((0,r.useState)(i),2),y=b[0],w=b[1],C=(0,F.usePagination)(y.sort((function(e,r){var o,i;return(null!==(t=null===(o=r.lastCompleted)||void 0===o?void 0:o.getTime())&&void 0!==t?t:0)-(null!==(n=null===(i=e.lastCompleted)||void 0===i?void 0:i.getTime())&&void 0!==n?n:0)})),s),x=C.results,j=C.goTo,R=C.currentPage,B=(0,r.useMemo)((function(){return(0,Z.Z)((function(e){return h(e)}),300)}),[]);(0,r.useEffect)((function(){var e=(0,z.Z)(g)?i:i.filter((function(e){return-1!==e.form.name.toLowerCase().search(null==g?void 0:g.toLowerCase())}));w(e)}),[g,i]);var J,Y=(0,r.useMemo)((function(){return[{key:"lastCompleted",header:f("lastCompleted","Last Completed")},{key:"formName",header:f("formName","Form Name (A-Z)")}]}),[f]),Q=(0,r.useMemo)((function(){return null==x?void 0:x.map((function(e){var t,n;return{id:e.form.uuid,lastCompleted:e.lastCompleted?(0,F.formatDatetime)(e.lastCompleted):void 0,formName:null!==(n=e.form.display)&&void 0!==n?n:e.form.name,formUuid:e.form.uuid,encounterUuid:null===(t=null==e?void 0:e.associatedEncounters[0])||void 0===t?void 0:t.uuid}}))}),[x]);return o().createElement("div",{className:v.formContainer},o().createElement(A.Z,{id:"searchInput",labelText:"",className:v.formSearchInput,placeholder:f("searchForForm","Search for a form"),onChange:function(e){return B(e.target.value)}}),o().createElement(o().Fragment,null,(null==g?void 0:g.length)>0&&(null==y?void 0:y.length)>0&&o().createElement("p",{className:v.formResultsLabel},y.length," ",f("matchesFound","match(es) found")),(null==y?void 0:y.length)>0&&o().createElement(o().Fragment,null,o().createElement(N.ZP,{size:p?"sm":"lg",rows:Q,headers:Y,isSortable:!0},(function(e){var t=e.rows,n=e.headers,r=e.getHeaderProps,i=e.getTableProps;return o().createElement(U.Z,{className:v.tableContainer},o().createElement(P.Z,H({},i(),{useZebraStyles:!0}),o().createElement(I.Z,null,o().createElement(q.Z,null,n.map((function(e){var t;return o().createElement(X.Z,H({className:"".concat(v.productiveHeading01," ").concat(v.text02)},r({header:e,isSortable:e.isSortable})),null!==(J=null===(t=e.header)||void 0===t?void 0:t.content)&&void 0!==J?J:e.header)})))),o().createElement(M.Z,null,t.map((function(e,t){var n,r,i;return o().createElement(q.Z,{key:e.id},o().createElement(L.Z,null,null!==(n=e.cells[0].value)&&void 0!==n?n:f("never","Never")),o().createElement(L.Z,{className:v.tableCell},o().createElement("label",{onClick:function(){return(0,D.U)(d,e.id,l,u,"",null!==(r=x[t].form.display)&&void 0!==r?r:x[t].form.name)},role:"presentation",className:v.formName},e.cells[1].value),e.cells[0].value&&o().createElement(O.Z,{description:"Edit form",onClick:function(){var n;return(0,D.U)(d,e.id,l,u,null===(n=(0,T.Z)(x[t].associatedEncounters))||void 0===n?void 0:n.uuid,null!==(i=x[t].form.display)&&void 0!==i?i:x[t].form.name)}})))})))))})),o().createElement(k.PatientChartPagination,{pageNumber:R,totalItems:y.length,currentItems:x.length,pageSize:s,onPageNumberChange:function(e){var t=e.page;return j(t)},dashboardLinkUrl:m,dashboardLinkLabel:c})),(0,z.Z)(y)&&o().createElement(E,{action:f("formSearchHint","Try searching for the form using an alternative name or keyword")})))};var B=n(6424),J={};J.styleTagTransform=g(),J.setAttributes=u(),J.insert=c().bind(null,"head"),J.domAPI=s(),J.insertStyleElement=d(),a()(B.Z,J);const Y=B.Z&&B.Z.locals?B.Z.locals:void 0;var Q=n(8580),W=n(182),K=n(6265),$=n(8953),G=n(4450),ee=n(5186),te=n(9857),ne=n(3565),re=n.n(ne),oe=(n(6824),n(5573));function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const le=function(e){var t,n,i,a,l=e.formsToDisplay,s=e.headerTitle,m=e.isValidating,c=e.patientUuid,f=e.patient,u=e.pageSize,p=e.pageUrl,d=e.urlLabel,_=e.error,g=(i=(0,r.useState)(0),a=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(i,a)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}(i,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=g[0],b=g[1],v="tablet"===(0,F.useLayoutType)(),y=(0,S.useTranslation)().t,w=null!==(t=null==l?void 0:l.flatMap((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ae(e,t,n[t])}))}return e}({formCategory:e.form.formCategory},e)})))&&void 0!==t?t:[],C=Array.from(new Set(null==w?void 0:w.flatMap((function(e){return e.form.formCategory})))),x=("formCategory",null==(n=w)?void 0:n.reduce((function(e,t){var n=t.formCategory;return e[n]||(e[n]=[]),e[n].push(t),e}),{}))[C[h]];return l||_?_?o().createElement(k.ErrorState,{headerTitle:y("forms","Forms"),error:_}):0===l.length?o().createElement(E,{action:y("noFormsAvailable","There are no Forms to display for this patient")}):o().createElement("div",{className:Y.widgetCard},o().createElement(k.CardHeader,{title:s},m?o().createElement("span",null,o().createElement(W.Z,null)):null,o().createElement("div",{className:Y.contextSwitcherContainer},o().createElement(K.Z,{className:v?Y.tabletContentSwitcher:Y.desktopContentSwitcher,onChange:function(e){var t=e.name;return b(Number(t))},selectedIndex:0},null==C?void 0:C.map((function(e,t){return o().createElement($.Z,{name:t,text:(0,oe.Z)(e)})}))))),o().createElement("div",{style:{width:"100%"}},x&&o().createElement(R,{forms:x,patientUuid:c,patient:f,pageSize:u,pageUrl:p,urlLabel:d}))):o().createElement(Q.Z,{role:"progressbar",rowCount:5})};function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var me;!function(e){e[e.Recommended=0]="Recommended",e[e.Completed=1]="Completed",e[e.All=2]="All"}(me||(me={}));const ce=function(e){var t,n,i=e.patientUuid,a=e.patient,l=e.pageSize,s=e.pageUrl,m=e.urlLabel,c=e.isOffline,f=(0,S.useTranslation)().t,u=(0,F.useConfig)(),p=u.htmlFormEntryForms,d=u.showRecommendedFormsTab,_=u.showConfigurableForms,g=f("forms","Forms"),h="tablet"===(0,F.useLayoutType)(),b=(t=(0,r.useState)(d?0:2),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?se(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=b[0],y=b[1],w=(0,G.MS)(i,void 0,void 0,c),C=w.isValidating,x=w.data,z=w.error,T=(0,F.useSession)(),Z=c?null==x?void 0:x.filter((function(e){return(0,ee.LD)(e.form,p)})):x;Z=null==Z?void 0:Z.filter((function(e){var t,n,r;return(0,F.userHasAccess)(null==e||null===(t=e.form)||void 0===t||null===(n=t.encounterType)||void 0===n||null===(r=n.editPrivilege)||void 0===r?void 0:r.display,null==T?void 0:T.user)}));var A=(0,k.useVisitOrOfflineVisit)(i).currentVisit,N=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=(0,te.ZP)(n&&"/etl-latest/etl/patient-program-config?patientUuid=".concat(e),F.openmrsFetch),i=o.data,a=o.error;return{programConfigs:(0,r.useMemo)((function(){return null!==(t=null==i?void 0:i.data)&&void 0!==t?t:[]}),[i]),error:a}}(i,d).programConfigs,U=(0,r.useMemo)((function(){return null==Z?void 0:Z.filter((function(e){var t,n,r=e.form;return null===(n=null===(t=Object.values(N).flatMap((function(e){return e.visitTypes})))||void 0===t?void 0:t.find((function(e){return e.uuid===(null==A?void 0:A.visitType.uuid)})))||void 0===n?void 0:n.encounterTypes.some((function(e){return e.uuid===r.encounterType.uuid}))})).filter((function(e){var t=e.lastCompleted;return void 0===t||!re()(t).isToday()}))}),[null==A?void 0:A.visitType.uuid,Z,N]);return _?o().createElement(le,{formsToDisplay:Z,headerTitle:g,isValidating:C,patientUuid:i,patient:a,pageSize:l,pageUrl:s,urlLabel:m,error:z}):Z||z?z?o().createElement(k.ErrorState,{headerTitle:f("forms","Forms"),error:z}):0===Z.length?o().createElement(E,{action:f("noFormsAvailable","There are no Forms to display for this patient")}):o().createElement("div",{className:Y.widgetCard},o().createElement(k.CardHeader,{title:g},C?o().createElement("span",null,o().createElement(W.Z,null)):null,o().createElement("div",{className:Y.contextSwitcherContainer},o().createElement(K.Z,{className:h?Y.tabletContentSwitcher:Y.desktopContentSwitcher,onChange:function(e){return y(e.name)},selectedIndex:v},o().createElement($.Z,{name:0,text:"Recommended"}),o().createElement($.Z,{name:1,text:"Completed"}),o().createElement($.Z,{name:2,text:"All"})))),o().createElement("div",{style:{width:"100%"}},1===v&&o().createElement(R,{forms:Z.filter((function(e){var t=e.associatedEncounters,n=e.lastCompleted;return t.length>0&&re()(n).isToday()})),patientUuid:i,patient:a,pageSize:l,pageUrl:s,urlLabel:m}),2===v&&o().createElement(R,{forms:Z,patientUuid:i,patient:a,pageSize:l,pageUrl:s,urlLabel:m}),0===v&&o().createElement(R,{forms:U,patientUuid:i,patient:a,pageSize:l,pageUrl:s,urlLabel:m}))):o().createElement(Q.Z,{role:"progressbar",rowCount:5})}},4450:(e,t,n)=>{n.d(t,{MS:()=>d,cq:()=>u});var r=n(5047),o=n.n(r),i=n(3565),a=n.n(i),l=n(9857),s=n(3066),m=n(8179);function c(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){c(i,r,o,a,l,"next",e)}function l(e){c(i,r,o,a,l,"throw",e)}a(void 0)}))}}function u(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(0,s.useConfig)(),r=n.showConfigurableForms,i=n.customFormsUrl,a=n.showHtmlFormEntryForms,c=r?i.concat("?patientUuid=".concat(t)):a?m.lA:m.HW;return(0,l.ZP)([c,e],f(o().mark((function t(){var n,i,a,l,m,f;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,(0,s.openmrsFetch)(c);case 3:if(a=t.sent,m=r?null==a?void 0:a.data.results:null!==(l=null===(n=a.data)||void 0===n||null===(i=n.results)||void 0===i?void 0:i.filter((function(e){return e.published&&!/component/i.test(e.name)})))&&void 0!==l?l:[],e){t.next=8;break}return t.abrupt("return",m);case 8:return t.next=10,(0,s.getDynamicOfflineDataEntries)("form");case 10:return f=t.sent,t.abrupt("return",m.filter((function(e){return f.some((function(t){return t.identifier===e.uuid}))})));case 12:case"end":return t.stop()}}),t)}))))}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a()(new Date).startOf("day").subtract(500,"day").toDate(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a()(new Date).endOf("day").toDate(),r="/ws/rest/v1/encounter?v=".concat(m._V,"&patient=").concat(e,"&fromdate=").concat(t.toISOString(),"&todate=").concat(n.toISOString());return(0,l.ZP)(r,(function(e){return(0,s.openmrsFetch)(e)}))}function d(e,t,n){var r,o,i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=u(a,e),s=p(e,t,n),m=null!==(i=null===(r=s.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.results)&&void 0!==i?i:[],c=l.data?_(l.data,m):void 0;return{data:c,error:l.error,isValidating:l.isValidating||s.isValidating,allForms:l.data}}function _(e,t){return e.map((function(e){var n=t.filter((function(t){var n;return(null===(n=t.form)||void 0===n?void 0:n.uuid)===(null==e?void 0:e.uuid)})).sort((function(e,t){return new Date(t.encounterDatetime).getTime()-new Date(e.encounterDatetime).getTime()})),r=n.length>0?new Date(null==n?void 0:n[0].encounterDatetime):void 0;return{form:e,associatedEncounters:n,lastCompleted:r}}))}},5186:(e,t,n)=>{n.d(t,{LD:()=>i,nY:()=>l});var r=n(9857),o=n(3066);function i(e,t){var n=t.some((function(t){return t.formUuid===e.uuid})),r=e.resources.some(a);return!n&&r}function a(e){return"AmpathJsonSchema"===e.dataType||"JSON schema"===e.name}function l(){return(0,r.ZP)("dynamicFormEntries",(function(){return(0,o.getDynamicOfflineDataEntries)("form")}))}}}]);