"use strict";(self.webpackChunk_openmrs_esm_patient_chart_app=self.webpackChunk_openmrs_esm_patient_chart_app||[]).push([[78],{5188:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(9601),r=a.n(n),i=a(2609),o=a.n(i)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-chart__past-visit-overview__button___tKz1d{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-chart__past-visit-overview__container___K53eg{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 6rem)}",""]),o.locals={button:"-esm-patient-chart__past-visit-overview__button___tKz1d",container:"-esm-patient-chart__past-visit-overview__container___K53eg"};const s=o},78:(e,t,a)=>{a.r(t),a.d(t,{default:()=>k});var n=a(268),r=a.n(n),i=a(4350),o=a(4924),s=a(6217),l=a(906),u=a(5968),c=a(6062),d=a.n(c),p=a(4036),m=a.n(p),v=a(6793),y=a.n(v),f=a(7892),b=a.n(f),h=a(1173),g=a.n(h),_=a(2464),w=a.n(_),T=a(5188),E={};E.styleTagTransform=w(),E.setAttributes=b(),E.insert=y().bind(null,"head"),E.domAPI=m(),E.insertStyleElement=g(),d()(T.Z,E);const D=T.Z&&T.Z.locals?T.Z.locals:void 0;function S(){return S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},S.apply(this,arguments)}const k=function(e){var t,a=e.patientUuid,c=e.closeWorkspace,d=(0,o.useTranslation)(),p=d.t,m=d.i18n.language.toLowerCase().replace("_","-"),v=(0,u.N2)(a),y=v.data,f=v.isError,b=v.isLoading,h=(0,n.useMemo)((function(){return[{key:"startDate",header:p("startDate","Start Date")},{key:"visitType",header:p("type","Type")},{key:"location",header:p("location","Location")},{key:"endDate",header:p("endDate","End Date"),colSpan:2}]}),[p]),g=(0,n.useMemo)((function(){return null==y?void 0:y.map((function(e,t){var a;return{id:"".concat(t),startDate:new Date(e.startDatetime).toLocaleDateString(m,{dateStyle:"medium"}),visitType:e.visitType.display,location:null===(a=e.location)||void 0===a?void 0:a.display,endDate:e.stopDatetime?new Date(e.startDatetime).toLocaleDateString(m,{dateStyle:"medium"}):"",visit:e}}))}),[m,y]),_=(0,n.useCallback)((function(){(0,s.launchPatientWorkspace)("start-visit-workspace-form"),c()}),[c]);return b?r().createElement(i.DataTableSkeleton,{role:"progressbar"}):f?r().createElement(s.ErrorState,{error:f,headerTitle:p("pastVisitErrorText","Past Visit Error")}):(null==y?void 0:y.length)?r().createElement("div",{className:D.container},r().createElement(i.DataTable,{headers:h,rows:g,useZebraStyles:!0},(function(e){var a=e.rows,n=e.headers,o=e.getTableProps,s=e.getHeaderProps,u=e.getRowProps;return r().createElement(i.TableContainer,{title:p("pastVisits","Past Visits")},r().createElement(i.Table,S({},o()),r().createElement(i.TableHead,null,r().createElement(i.TableRow,null,n.map((function(e){return r().createElement(i.TableHeader,S({},s({header:e,isSortable:e.isSortable})),e.header)})),r().createElement(i.TableHeader,null))),r().createElement(i.TableBody,null,a.map((function(e,a){return r().createElement(i.TableRow,S({},u({row:e})),e.cells.map((function(e){var a;return r().createElement(i.TableCell,{key:e.id},null!==(t=null===(a=e.value)||void 0===a?void 0:a.content)&&void 0!==t?t:e.value)})),r().createElement(i.TableCell,{className:"cds--table-column-menu"},r().createElement(i.OverflowMenu,{ariaLabel:"Actions menu",flipped:!0,selectorPrimaryFocus:"option-two"},r().createElement(i.OverflowMenuItem,{onClick:_,itemText:p("edit","Edit")}),r().createElement(i.OverflowMenuItem,{onClick:function(){l.getStartedVisit.next({mode:l.VisitMode.LOADING,visitData:g[a].visit,status:l.VisitStatus.ONGOING})},itemText:p("loadVisitInfo","Load Visit Info")}))))})))))})),r().createElement(i.Button,{className:D.button,onClick:c,kind:"secondary"},p("cancel","Cancel"))):void 0}},5968:(e,t,a)=>{a.d(t,{Ed:()=>s,L4:()=>u,N2:()=>l,Tn:()=>o});var n=a(9857),r=a(906);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function o(e){var t,a=(0,n.ZP)("/ws/rest/v1/visit?patient=".concat(e,"&v=").concat("custom:(uuid,encounters:(uuid,form:(uuid,display),encounterDatetime,orders:full,obs:(uuid,concept:(uuid,display,conceptClass:(uuid,display)),display,groupMembers:(uuid,concept:(uuid,display),value:(uuid,display)),value),encounterType:(uuid,display),encounterProviders:(uuid,display,encounterRole:(uuid,display),provider:(uuid,person:(uuid,display)))),visitType:(uuid,name,display),startDatetime,stopDatetime,patient"),r.openmrsFetch),i=a.data,o=a.error,s=a.isValidating;return{visits:i?null==i||null===(t=i.data)||void 0===t?void 0:t.results:null,isError:o,isLoading:!i&&!o,isValidating:s}}function s(e){var t,a={patient:e,v:"default",limit:"100",order:"desc",startIndex:"0"},o="/ws/rest/v1/encounter?"+Object.entries(a).map((function(e){var t,a,n=(a=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,i=[],o=!0,s=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(s)throw r}}return i}}(t,a)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(e,t):void 0}}(t,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=n[0],o=n[1];return"".concat(r,"=").concat(o)})).join("&"),s=(0,n.ZP)(o,r.openmrsFetch),l=s.data,u=s.error,c=s.isValidating;return{encounters:l?null==l||null===(t=l.data)||void 0===t?void 0:t.results:null,error:u,isLoading:!l&&!u,isValidating:c}}function l(e){var t=(0,n.ZP)("/ws/rest/v1/visit?patient=".concat(e,"&v=").concat("custom:(uuid,encounters:(uuid,encounterDatetime,form:(uuid,name),location:ref,encounterType:ref,encounterProviders:(uuid,display,provider:(uuid,display))),patient:(uuid,uuid),visitType:(uuid,name,display),attributes:(uuid,display,value),location:(uuid,name,display),startDatetime,stopDatetime)"),r.openmrsFetch),a=t.data,i=t.error,o=t.isValidating;return{data:a?a.data.results:null,isError:i,isLoading:!a&&!i,isValidating:o}}function u(e,t){if(!e||!t)return"";var a=e.search(/\D/),n=parseInt(e.substring(0,a)),r=e.search(/\//),i=e.substring(a);if(r>=0){i=e.substring(a,r);var o=e.substring(r+1).search(/\D/),s=parseInt(e.substr(r+1,o)),l=e.substring(r+1+o);return"".concat(t," ").concat(i," (").concat(t/n*s," ").concat(l,")")}return"".concat(n*t," ").concat(i)}}}]);