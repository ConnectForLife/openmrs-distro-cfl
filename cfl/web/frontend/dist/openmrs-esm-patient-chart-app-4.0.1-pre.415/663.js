"use strict";(self.webpackChunk_openmrs_esm_patient_chart_app=self.webpackChunk_openmrs_esm_patient_chart_app||[]).push([[663],{3670:(t,e,n)=>{n.d(e,{Z:()=>s});var r=n(9601),i=n.n(r),o=n(2609),a=n.n(o)()(i());a.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-chart__end-visit-dialog__bodyShort02___Jt89k{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#161616}",""]),a.locals={bodyShort02:"-esm-patient-chart__end-visit-dialog__bodyShort02___Jt89k"};const s=a},2609:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var u=0;u<t.length;u++){var l=[].concat(t[u]);r&&a[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},9601:t=>{t.exports=function(t){return t[1]}},3484:(t,e,n)=>{n.d(e,{P:()=>_});var r=n(4397),i=n(5038),o=n(2995),a=n(1881),s=n(9120),c=n(4773);function u(t){return function(e){return 0===t?(0,c.c)():e.lift(new l(t))}}var l=function(){function t(t){if(this.total=t,this.total<0)throw new s.W}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.total))},t}(),d=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return o.ZT(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(a.L);function p(t){return void 0===t&&(t=null),function(e){return e.lift(new f(t))}}var f=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.defaultValue))},t}(),h=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return o.ZT(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(a.L);function v(t){return void 0===t&&(t=b),function(e){return e.lift(new m(t))}}var m=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,e){return e.subscribe(new y(t,this.errorFactory))},t}(),y=function(t){function e(e,n){var r=t.call(this,e)||this;return r.errorFactory=n,r.hasValue=!1,r}return o.ZT(e,t),e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},e}(a.L);function b(){return new r.K}var g=n(6930);function _(t,e){var n=arguments.length>=2;return function(o){return o.pipe(t?(0,i.h)((function(e,n){return t(e,n,o)})):g.y,u(1),n?p(e):v((function(){return new r.K})))}}},6062:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},a=[],s=0;s<t.length;s++){var c=t[s],u=r.base?c[0]+r.base:c[0],l=o[u]||0,d="".concat(u," ").concat(l);o[u]=l+1;var p=n(d),f={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(f);else{var h=i(f,r);r.byIndex=s,e.splice(s,0,{identifier:d,updater:h,references:1})}a.push(d)}return a}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var c=r(t,i),u=0;u<o.length;u++){var l=n(o[u]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=c}}},6793:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},1173:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},7892:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},4036:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},2464:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},9663:(t,e,n)=>{n.r(e),n.d(e,{default:()=>T});var r=n(268),i=n.n(r),o=n(4924),a=n(4350),s=n(906),c=n(3484),u=n(6062),l=n.n(u),d=n(4036),p=n.n(d),f=n(6793),h=n.n(f),v=n(7892),m=n.n(v),y=n(1173),b=n.n(y),g=n(2464),_=n.n(g),w=n(3670),E={};E.styleTagTransform=_(),E.setAttributes=m(),E.insert=h().bind(null,"head"),E.domAPI=p(),E.insertStyleElement=b(),l()(w.Z,E);const x=w.Z&&w.Z.locals?w.Z.locals:void 0,T=function(t){var e=t.patientUuid,n=t.closeModal,r=(0,o.useTranslation)().t,u=(0,s.useVisit)(e),l=u.currentVisit,d=u.mutate;return i().createElement("div",null,i().createElement(a.ModalHeader,{closeModal:n,label:r("visit","Visit"),title:r("endActiveVisit","End active visit")}),i().createElement(a.ModalBody,null,i().createElement("p",{className:x.bodyShort02},r("endVisitWarningMessage","Ending this visit will not allow you to fill another encounter form for this patient"),".")),i().createElement(a.ModalFooter,null,i().createElement(a.Button,{kind:"secondary",onClick:n},r("cancel","Cancel")),i().createElement(a.Button,{kind:"danger",onClick:function(){var t={location:l.location.uuid,startDatetime:(0,s.parseDate)(l.startDatetime),visitType:l.visitType.uuid,stopDatetime:new Date},e=new AbortController;(0,s.updateVisit)(l.uuid,t,e).pipe((0,c.P)()).subscribe((function(t){var e,i;200===t.status&&(d(),n(),(0,s.showToast)({critical:!0,kind:"success",description:r("visitEndSuccessfully","".concat(null==t||null===(e=t.data)||void 0===e||null===(i=e.visitType)||void 0===i?void 0:i.display," ended successfully")),title:r("visitEnded","Visit ended")}))}),(function(t){(0,s.showNotification)({title:r("endVisitError","Error ending active visit"),kind:"error",critical:!0,description:null==t?void 0:t.message})}))}},r("endVisit","End Visit"))))}}}]);