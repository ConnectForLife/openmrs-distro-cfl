(self.webpackChunk_openmrs_esm_patient_appointments_app=self.webpackChunk_openmrs_esm_patient_appointments_app||[]).push([[840],{7976:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(9601),a=n.n(r),i=n(2609),o=n.n(i)()(a());o.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-appointments__appointments-base__widgetCard___bZMBH{border:1px solid #e0e0e0}.-esm-patient-appointments__appointments-base__productiveHeading01___Fxjv_{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___Zm2w_{display:flex;width:fit-content;justify-content:flex-end;align-items:center;width:60%}.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___Zm2w_>div>button{background-color:#fff}.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___Zm2w_>div button:first-child{border-top:1px solid #a6c8ff;border-bottom:1px solid #a6c8ff;border-left:1px solid #a6c8ff;border-right:none;border-radius:.25rem 0 0px .25rem}.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___Zm2w_>div button:last-child{border-top:1px solid #a6c8ff;border-bottom:1px solid #a6c8ff;border-right:1px solid #a6c8ff;border-left:none;border-radius:0px .25rem .25rem 0px}.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___Zm2w_>div>button[aria-selected=true],.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___Zm2w_>div>button[aria-selected=true]:first-child{background-color:#edf5ff;color:#0f62fe;border-color:#0f62fe;border-right:1px solid #0f62fe}.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___Zm2w_>div>button[aria-selected=true],.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___Zm2w_>div>button[aria-selected=true]:last-child{background-color:#edf5ff;color:#0f62fe;border-color:#0f62fe;border-left:1px solid #0f62fe}.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___Zm2w_>div>button[aria-selected=true]:focus{box-shadow:none}.-esm-patient-appointments__appointments-base__divider___asKB3{border-left:1px solid #e0e0e0;height:1rem;margin:0 1rem 0 1.5rem}.-esm-patient-appointments__appointments-base__content___ylv26{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);color:#525252;margin-top:1rem;margin-bottom:.5rem}.-esm-patient-appointments__appointments-base__tile___OZakM{text-align:center}",""]),o.locals={widgetCard:"-esm-patient-appointments__appointments-base__widgetCard___bZMBH",productiveHeading01:"-esm-patient-appointments__appointments-base__productiveHeading01___Fxjv_",contentSwitcherWrapper:"-esm-patient-appointments__appointments-base__contentSwitcherWrapper___Zm2w_",divider:"-esm-patient-appointments__appointments-base__divider___asKB3",content:"-esm-patient-appointments__appointments-base__content___ylv26",tile:"-esm-patient-appointments__appointments-base__tile___OZakM"};const s=o},255:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(9601),a=n.n(r),i=n(2609),o=n.n(i)()(a());o.push([t.id,"",""]),o.locals={};const s=o},264:function(t){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(r,a,i){var o=a.prototype;i.utc=function(t){return new a({date:t,utc:!0,args:arguments})},o.utc=function(e){var n=i(this.toDate(),{locale:this.$L,utc:!0});return e?n.add(this.utcOffset(),t):n},o.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),s.call(this,t)};var l=o.init;o.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else l.call(this)};var c=o.utcOffset;o.utcOffset=function(r,a){var i=this.$utils().u;if(i(r))return this.$u?0:i(this.$offset)?c.call(this):this.$offset;if("string"==typeof r&&(r=function(t){void 0===t&&(t="");var r=t.match(e);if(!r)return null;var a=(""+r[0]).match(n)||["-",0,0],i=a[0],o=60*+a[1]+ +a[2];return 0===o?0:"+"===i?o:-o}(r),null===r))return this;var o=Math.abs(r)<=16?60*r:r,s=this;if(a)return s.$offset=o,s.$u=0===r,s;if(0!==r){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(o+l,t)).$offset=o,s.$x.$localOffset=l}else s=this.utc();return s};var p=o.format;o.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return p.call(this,e)},o.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var u=o.toDate;o.toDate=function(t){return"s"===t&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var m=o.diff;o.diff=function(t,e,n){if(t&&this.$u===t.$u)return m.call(this,t,e,n);var r=this.local(),a=i(t).local();return m.call(r,a,e,n)}}}()},1840:(t,e,n)=>{"use strict";n.d(e,{Z:()=>U});var r=n(7900),a=n.n(r),i=n(4924),o=n(3565),s=n.n(o),l=n(6517),c=n(6759),p=n(6217),u=n(9318),m=n(906),d=n(6062),f=n.n(d),_=n(4036),h=n.n(_),v=n(6793),g=n.n(v),b=n(7892),w=n.n(b),y=n(1173),S=n.n(y),E=n(2464),$=n.n(E),T=n(255),x={};x.styleTagTransform=$(),x.setAttributes=w(),x.insert=g().bind(null,"head"),x.domAPI=h(),x.insertStyleElement=S(),f()(T.Z,x);const A=T.Z&&T.Z.locals?T.Z.locals:void 0;function C(){return C=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C.apply(this,arguments)}var O=n(264);s().extend(O);const D=function(t){var e,n,o=t.patientAppointments,s=(0,i.useTranslation)().t,c=(0,m.usePagination)(o,5),u=c.results,d=c.currentPage,f=c.goTo,_=(0,r.useMemo)((function(){return[{key:"date",header:s("date","Date")},{key:"location",header:s("location","Location")},{key:"service",header:s("service","Service")}]}),[s]),h=(0,r.useMemo)((function(){return null==u?void 0:u.map((function(t){var e,n;return{id:t.uuid,date:(0,m.formatDatetime)((0,m.parseDate)(t.startDateTime),{mode:"wide"}),location:null!==(n=null==t||null===(e=t.location)||void 0===e?void 0:e.name)&&void 0!==n?n:"--",service:t.service.name}}))}),[u]);return a().createElement("div",null,a().createElement(l.wQF,{rows:h,headers:_,isSortable:!0,size:"sm"},(function(t){var r=t.rows,i=t.headers,o=t.getHeaderProps,s=t.getTableProps;return a().createElement(l.xJi,null,a().createElement(l.iA_,C({},s(),{useZebraStyles:!0}),a().createElement(l.ssF,null,a().createElement(l.SCH,null,i.map((function(t){var n;return a().createElement(l.xDH,C({className:"".concat(A.productiveHeading01," ").concat(A.text02)},o({header:t,isSortable:t.isSortable})),null!==(e=null===(n=t.header)||void 0===n?void 0:n.content)&&void 0!==e?e:t.header)})))),a().createElement(l.RMI,null,r.map((function(t){return a().createElement(l.SCH,{key:t.id},t.cells.map((function(t){var e;return a().createElement(l.pj1,{key:t.id},null!==(n=null===(e=t.value)||void 0===e?void 0:e.content)&&void 0!==n?n:t.value)})))})))))})),a().createElement(p.PatientChartPagination,{currentItems:u.length,totalItems:o.length,onPageNumberChange:function(t){var e=t.page;return f(e)},pageNumber:d,pageSize:5}))};var Z=n(7976),P={};P.styleTagTransform=$(),P.setAttributes=w(),P.insert=g().bind(null,"head"),P.domAPI=h(),P.insertStyleElement=S(),f()(Z.Z,P);const k=Z.Z&&Z.Z.locals?Z.Z.locals:void 0;function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function H(){return H=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},H.apply(this,arguments)}var I;!function(t){t[t.UPCOMING=0]="UPCOMING",t[t.PAST=1]="PAST"}(I||(I={}));const U=function(t){var e,n,o,m=t.patientUuid,d=(0,i.useTranslation)().t,f=d("appointments","Appointments"),_=(n=(0,r.useState)(0),o=2,function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);o=!0);}catch(t){s=!0,a=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(n,o)||function(t,e){if(t){if("string"==typeof t)return M(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(t,e):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=_[0],v=_[1],g=s()((new Date).toISOString()).subtract(6,"month").toISOString(),b=(0,u.zt)(m,g,new AbortController),w=b.data,y=b.isError,S=b.isLoading,E=b.isValidating;return S?a().createElement(l.gqd,{role:"progressbar"}):y?a().createElement(p.ErrorState,{headerTitle:f,error:y}):(null===(e=Object.keys(w))||void 0===e?void 0:e.length)?a().createElement("div",{className:k.widgetCard},a().createElement(p.CardHeader,{title:f},E?a().createElement("span",null,a().createElement(l.lSo,null)):null,a().createElement("div",{className:k.contentSwitcherWrapper},a().createElement(l.GHR,{size:"md",onChange:function(t){var e=t.index;return v(e)}},a().createElement(l.rsf,{name:"upcoming",text:d("upcoming","Upcoming")}),a().createElement(l.rsf,{name:"past",text:d("past","Past")})),a().createElement("div",{className:k.divider}),a().createElement(l.zxk,{kind:"ghost",renderIcon:function(t){return a().createElement(c.mm,H({size:16},t))},iconDescription:"Add Appointments",onClick:function(){return(0,p.launchPatientWorkspace)("appointments-form-workspace")}},d("add","Add")))),function(){var t,e;return h===I.UPCOMING?(null===(t=w.upcomingAppointments)||void 0===t?void 0:t.length)?a().createElement(D,{patientAppointments:null==w?void 0:w.upcomingAppointments}):a().createElement(l.mh4,null,a().createElement(l.n9L,{className:k.tile},a().createElement(p.EmptyDataIllustration,null),a().createElement("p",{className:k.content},d("noUpcomingAppointments","There are no upcoming appointments to display for this patient")))):h===I.PAST?(null===(e=w.pastAppointments)||void 0===e?void 0:e.length)?a().createElement(D,{patientAppointments:null==w?void 0:w.pastAppointments}):a().createElement(l.mh4,null,a().createElement(l.n9L,{className:k.tile},a().createElement(p.EmptyDataIllustration,null),a().createElement("p",{className:k.content},d("noPastAppointments","There are no past appointments to display for this patient")))):void 0}()):void 0}},9318:(t,e,n)=>{"use strict";n.d(e,{Pc:()=>p,ep:()=>s,l9:()=>c,zt:()=>l});var r=n(3565),a=n.n(r),i=n(9857),o=n(906),s="/ws/rest/v1/appointments/search";function l(t,e,n){var r,l=(0,i.ZP)(s,(function(){return(0,o.openmrsFetch)(s,{method:"POST",signal:n.signal,headers:{"Content-Type":"application/json"},body:{patientUuid:t,startDate:e}})})),c=l.data,p=l.error,u=l.isValidating,m=(null==c||null===(r=c.data)||void 0===r?void 0:r.length)?c.data.sort((function(t,e){return e.startDateTime>t.startDateTime?1:-1})):null,d=null==m?void 0:m.filter((function(t){return a()(t.startDateTime/1e3*1e3).isBefore(a()())})),f=null==m?void 0:m.filter((function(t){return a()(t.startDateTime/1e3*1e3).isAfter(a()())}));return{data:c?{pastAppointments:d,upcomingAppointments:f}:null,isError:p,isLoading:!c&&!p,isValidating:u}}function c(){var t=(0,i.ZP)("/ws/rest/v1/appointmentService/all/full",o.openmrsFetch),e=t.data,n=t.error;return{data:e?e.data:null,isError:n,isLoading:!e&&!n}}function p(t,e){return(0,o.openmrsFetch)("/ws/rest/v1/appointment",{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json"},body:t})}}}]);