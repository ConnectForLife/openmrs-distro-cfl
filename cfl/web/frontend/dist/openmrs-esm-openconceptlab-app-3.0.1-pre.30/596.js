"use strict";(globalThis.webpackChunk_openmrs_esm_openconceptlab_app=globalThis.webpackChunk_openmrs_esm_openconceptlab_app||[]).push([[596],{5733:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(272),o=n.n(r),a=n(2609),i=n.n(a)()(o());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-openconceptlab__import-component__grid___gM_U9{margin-left:0;margin-right:0;padding-left:0;padding-right:0}.-esm-openconceptlab__import-component__productiveHeading03___Har2_{font-size:var(--cds-productive-heading-03-font-size, 1.25rem);font-weight:var(--cds-productive-heading-03-font-weight, 400);line-height:var(--cds-productive-heading-03-line-height, 1.4);letter-spacing:var(--cds-productive-heading-03-letter-spacing, 0);margin-bottom:.5rem}.-esm-openconceptlab__import-component__form___l_GzO{margin-top:2rem}.-esm-openconceptlab__import-component__formText___zeh2G{padding-bottom:1rem}.-esm-openconceptlab__import-component__fileUploaderDropContainer___Kt9cW{margin-bottom:1.5rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/import/import.component.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,qDACE,aAAA,CACA,cAAA,CACA,cAAA,CACA,eAAA,CAGF,oEC+zBI,6DAAA,CAAA,6DAAA,CAAA,6DAAA,CAAA,iEAAA,CD7zBF,mBEQW,CFLb,qDACE,eEwBW,CFrBb,yDACE,mBEUW,CFPb,0EACE,oBEWW",sourceRoot:""}]),i.locals={grid:"-esm-openconceptlab__import-component__grid___gM_U9",productiveHeading03:"-esm-openconceptlab__import-component__productiveHeading03___Har2_",form:"-esm-openconceptlab__import-component__form___l_GzO",formText:"-esm-openconceptlab__import-component__formText___zeh2G",fileUploaderDropContainer:"-esm-openconceptlab__import-component__fileUploaderDropContainer___Kt9cW"};const s=i},4458:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(272),o=n.n(r),a=n(2609),i=n.n(a)()(o());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-openconceptlab__import-items-component__pagination___jKi_p{font-size:var(--cds-body-short-01-font-size, 0.875rem);font-weight:var(--cds-body-short-01-font-weight, 400);line-height:var(--cds-body-short-01-line-height, 1.28572);letter-spacing:var(--cds-body-short-01-letter-spacing, 0.16px);background-color:#fff;color:#525252;border:1px solid #e0e0e0;display:flex}.-esm-openconceptlab__import-items-component__tableBordered___xHYaY{border:1px solid #e0e0e0}.-esm-openconceptlab__import-items-component__tableDataRow___gylgZ>td{padding-left:1rem !important;background-color:#fff !important}.-esm-openconceptlab__import-items-component__tableHeaderRow___jjBk0>th{background-color:#e0e0e0 !important}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/previous-imports/import-overview/import-items.component.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,iECs0BI,sDAAA,CAAA,qDAAA,CAAA,yDAAA,CAAA,8DAAA,CDp0BF,qBDLM,CCMN,aDFQ,CCGR,wBAAA,CACA,YAAA,CAGF,oEACE,wBAAA,CAGF,sEACE,4BAAA,CACA,gCAAA,CAGF,wEACE,mCAAA",sourceRoot:""}]),i.locals={pagination:"-esm-openconceptlab__import-items-component__pagination___jKi_p",tableBordered:"-esm-openconceptlab__import-items-component__tableBordered___xHYaY",tableDataRow:"-esm-openconceptlab__import-items-component__tableDataRow___gylgZ",tableHeaderRow:"-esm-openconceptlab__import-items-component__tableHeaderRow___jjBk0"};const s=i},4021:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(272),o=n.n(r),a=n(2609),i=n.n(a)()(o());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-openconceptlab__import-overview-component__heading01___KdIsm{font-size:var(--cds-heading-01-font-size, 0.875rem);font-weight:var(--cds-heading-01-font-weight, 600);line-height:var(--cds-heading-01-line-height, 1.42857);letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px)}.-esm-openconceptlab__import-overview-component__indentedContent___sRVXc{margin-left:2rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/previous-imports/import-overview/import-overview.component.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,mECs0BI,mDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,2DAAA,CDl0BJ,yEACE,gBEgCW",sourceRoot:""}]),i.locals={heading01:"-esm-openconceptlab__import-overview-component__heading01___KdIsm",indentedContent:"-esm-openconceptlab__import-overview-component__indentedContent___sRVXc"};const s=i},2434:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(272),o=n.n(r),a=n(2609),i=n.n(a)()(o());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-openconceptlab__previous-imports-component__grid___Kl2r_{margin-left:0;margin-right:0;padding-left:0;padding-right:0}.-esm-openconceptlab__previous-imports-component__productiveHeading03___Vr5aK{font-size:var(--cds-productive-heading-03-font-size, 1.25rem);font-weight:var(--cds-productive-heading-03-font-weight, 400);line-height:var(--cds-productive-heading-03-line-height, 1.4);letter-spacing:var(--cds-productive-heading-03-letter-spacing, 0);margin-bottom:.5rem}.-esm-openconceptlab__previous-imports-component__pagination___FvI9S{font-size:var(--cds-body-short-01-font-size, 0.875rem);font-weight:var(--cds-body-short-01-font-weight, 400);line-height:var(--cds-body-short-01-line-height, 1.28572);letter-spacing:var(--cds-body-short-01-letter-spacing, 0.16px);background-color:#fff;color:#525252;border:1px solid #e0e0e0;display:flex}.-esm-openconceptlab__previous-imports-component__tableBordered___MCsGD{border:1px solid #e0e0e0}.-esm-openconceptlab__previous-imports-component__tableRow___A7h75>td{background-color:#fff;border-bottom:1px solid #e0e0e0 !important}.-esm-openconceptlab__previous-imports-component__tableExpandedRow___mX0AL>td{padding-left:3rem !important;padding-right:3rem;padding-top:1rem;padding-bottom:1rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/previous-imports/previous-imports.component.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,+DACE,aAAA,CACA,cAAA,CACA,cAAA,CACA,eAAA,CAGF,8EC+zBI,6DAAA,CAAA,6DAAA,CAAA,6DAAA,CAAA,iEAAA,CD7zBF,mBEQW,CFLb,qEC0zBI,sDAAA,CAAA,qDAAA,CAAA,yDAAA,CAAA,8DAAA,CDxzBF,qBDjBM,CCkBN,aDdQ,CCeR,wBAAA,CACA,YAAA,CAGF,wEACE,wBAAA,CAGF,sEACE,qBD5BM,CC6BN,0CAAA,CAGF,8EACE,4BAAA,CACA,kBEgBW,CFfX,gBELW,CFMX,mBENW",sourceRoot:""}]),i.locals={grid:"-esm-openconceptlab__previous-imports-component__grid___Kl2r_",productiveHeading03:"-esm-openconceptlab__previous-imports-component__productiveHeading03___Vr5aK",pagination:"-esm-openconceptlab__previous-imports-component__pagination___FvI9S",tableBordered:"-esm-openconceptlab__previous-imports-component__tableBordered___MCsGD",tableRow:"-esm-openconceptlab__previous-imports-component__tableRow___A7h75",tableExpandedRow:"-esm-openconceptlab__previous-imports-component__tableExpandedRow___mX0AL"};const s=i},7019:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(272),o=n.n(r),a=n(2609),i=n.n(a)()(o());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-openconceptlab__root-component__main___O_F0i{background-color:#fff}.-esm-openconceptlab__root-component__moduleHeader___vIF2c{font-size:var(--cds-productive-heading-03-font-size, 1.25rem);font-weight:var(--cds-productive-heading-03-font-weight, 400);line-height:var(--cds-productive-heading-03-line-height, 1.4);letter-spacing:var(--cds-productive-heading-03-letter-spacing, 0);padding-left:1rem;padding-top:1rem;padding-bottom:1rem}.-esm-openconceptlab__root-component__tabList___RE7Q1{padding:0 1rem}.-esm-openconceptlab__root-component__tabPanel___A4e_Y{height:100%;background-color:#f4f4f4}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/root.component.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,mDACE,qBDJM,CCOR,2DCk0BI,6DAAA,CAAA,6DAAA,CAAA,6DAAA,CAAA,iEAAA,CDh0BF,iBEqBW,CFpBX,gBEoBW,CFnBX,mBEmBW,CFhBb,sDACE,cAAA,CAGF,uDACE,WAAA,CACA,wBDrBM",sourceRoot:""}]),i.locals={main:"-esm-openconceptlab__root-component__main___O_F0i",moduleHeader:"-esm-openconceptlab__root-component__moduleHeader___vIF2c",tabList:"-esm-openconceptlab__root-component__tabList___RE7Q1",tabPanel:"-esm-openconceptlab__root-component__tabPanel___A4e_Y"};const s=i},6652:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(272),o=n.n(r),a=n(2609),i=n.n(a)()(o());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-openconceptlab__subscription-component__grid___JRqcC{margin-left:0;margin-right:0;padding-left:0;padding-right:0}.-esm-openconceptlab__subscription-component__productiveHeading03___hF5q_{font-size:var(--cds-productive-heading-03-font-size, 1.25rem);font-weight:var(--cds-productive-heading-03-font-weight, 400);line-height:var(--cds-productive-heading-03-line-height, 1.4);letter-spacing:var(--cds-productive-heading-03-letter-spacing, 0);margin-bottom:.5rem}.-esm-openconceptlab__subscription-component__formGroup___tYkvG{margin-bottom:1rem}.-esm-openconceptlab__subscription-component__unsubscribeText___vHjFP{padding-bottom:1rem}.-esm-openconceptlab__subscription-component__unsubscribeForm____TvFM{margin-top:1rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/subscription/subscription.component.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,2DACE,aAAA,CACA,cAAA,CACA,cAAA,CACA,eAAA,CAGF,0EC+zBI,6DAAA,CAAA,6DAAA,CAAA,6DAAA,CAAA,iEAAA,CD7zBF,mBEQW,CFLb,gEACE,kBEcW,CFXb,sEACE,mBEUW,CFPb,sEACE,eEMW",sourceRoot:""}]),i.locals={grid:"-esm-openconceptlab__subscription-component__grid___JRqcC",productiveHeading03:"-esm-openconceptlab__subscription-component__productiveHeading03___hF5q_",formGroup:"-esm-openconceptlab__subscription-component__formGroup___tYkvG",unsubscribeText:"-esm-openconceptlab__subscription-component__unsubscribeText___vHjFP",unsubscribeForm:"-esm-openconceptlab__subscription-component__unsubscribeForm____TvFM"};const s=i},9861:(e,t,n)=>{n.r(t),n.d(t,{default:()=>De});var r=n(4668),o=n(268),a=n.n(o),i=n(4924),s=n(9381),c=n(5047),l=n.n(c),u=n(906),p=n(9140);function m(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){m(a,r,o,i,s,"next",e)}function s(e){m(a,r,o,i,s,"throw",e)}i(void 0)}))}}function b(e,t){return A.apply(this,arguments)}function A(){return(A=d(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,p.Z)(t.uuid)?"/ws/rest/v1/openconceptlab/subscription":"/ws/rest/v1/openconceptlab/subscription/".concat(t.uuid),e.abrupt("return",(0,u.openmrsFetch)(r,{method:"POST",body:t,headers:{"Content-Type":"application/json"},signal:null==n?void 0:n.signal}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return f.apply(this,arguments)}function f(){return(f=d(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/ws/rest/v1/openconceptlab/subscription/".concat(t.uuid),e.abrupt("return",(0,u.openmrsFetch)(r,{method:"DELETE",signal:null==n?void 0:n.signal}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var g=n(1354),v=n.n(g),h=n(1583),E=n.n(h),y=n(7378),C=n.n(y),w=n(5993),k=n.n(w),D=n(4154),S=n.n(D),B=n(8141),F=n.n(B),N=n(6652),T={};T.styleTagTransform=F(),T.setAttributes=k(),T.insert=C().bind(null,"head"),T.domAPI=E(),T.insertStyleElement=S(),v()(N.Z,T);const x=N.Z&&N.Z.locals?N.Z.locals:void 0;var O=function(e){var t,n,r;e.endsWith("/")&&(e=e.substring(0,e.lastIndexOf("/")));try{n=new URL(e)}catch(e){return!1}return 5==(null!==(r=null===(t=n.pathname.match(/\//g))||void 0===t?void 0:t.length)&&void 0!==r?r:0)};function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function P(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){P(a,r,o,i,s,"next",e)}function s(e){P(a,r,o,i,s,"throw",e)}i(void 0)}))}}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){z(e,t,n[t])}))}return e}function Z(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const L=function(){var e=(0,i.useTranslation)().t,t=(0,s.kY)().mutate,n=R((0,o.useState)(""),2),c=n[0],p=n[1],m=R((0,o.useState)(""),2),d=m[0],A=m[1],f=R((0,o.useState)(!1),2),g=f[0],v=f[1],h=R((0,o.useState)("FULL"),2),E=h[0],y=h[1],C=R((0,o.useState)(!1),2),w=C[0],k=C[1],D=function(){var e,t=(0,s.ZP)("/ws/rest/v1/openconceptlab/subscription?v=full",u.openmrsFetch),n=t.data,r=t.error,o=t.isValidating;return{data:null==n||null===(e=n.data)||void 0===e?void 0:e.results[0],isLoading:!n&&!r,isError:r,isValidating:o}}(),S=D.data,B=D.isLoading,F=D.isError;(0,o.useEffect)((function(){B||F||(p((null==S?void 0:S.url)||""),A((null==S?void 0:S.token)||""),v((null==S?void 0:S.subscribedToSnapshot)||!1),y((null==S?void 0:S.validationType)||"FULL"),k(!!S&&O(S.url)))}),[B,F,S]);var N,T=(0,o.useCallback)((function(e){p(e.target.value),O(e.target.value)?(k(!0),v(!1)):k(!1)}),[]),I=(0,o.useCallback)((function(e){A(e.target.value)}),[]),P=(0,o.useCallback)((function(e,t){var n=t.checked;t.id,y(n?"NONE":"FULL")}),[]),z=(0,o.useCallback)((function(e,t){var n=t.checked;t.id,v(n)}),[]),L=(0,o.useCallback)((N=j(l().mark((function n(r){var o,a,i;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),r.stopPropagation(),!w||!g){n.next=5;break}return(0,u.showNotification)({kind:"error",description:e("snapshotDisabledError","You cannot subscribe to a SNAPSHOT if you've provided the collection version")}),n.abrupt("return");case 5:return o=new AbortController,a=Z(H({},S),{url:c,token:d,validationType:E,subscribedToSnapshot:g}),t("/ws/rest/v1/openconceptlab/subscription?v=full",a,!1),n.next=10,b(a,o);case 10:return i=n.sent,t("/ws/rest/v1/openconceptlab/subscription?v=full"),i.ok?(0,u.showNotification)({kind:"success",description:e(201===i.status?"subscriptionCreated":"subscriptionUpdated",201===i.status?"Subscription created successfully":"Subscription updated successfully")}):(0,u.showNotification)({title:e("errorSavingSubscription","Error occured while saving the subscription"),kind:"error",critical:!0,description:JSON.stringify(i.data)}),n.abrupt("return",(function(){return o.abort()}));case 14:case"end":return n.stop()}}),n)}))),function(e){return N.apply(this,arguments)}),[c,d,E,g,w,S,e,t]),M=(0,o.useCallback)((function(){p((null==S?void 0:S.url)||""),A((null==S?void 0:S.token)||""),v((null==S?void 0:S.subscribedToSnapshot)||!1),y((null==S?void 0:S.validationType)||"FULL"),k(!!S&&O(S.url)),(0,u.showNotification)({kind:"info",description:e("cancelledChanges","Cancelled changes successfully")})}),[S,e]),G=(0,o.useCallback)(function(){var n=j(l().mark((function n(r){var o,a;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),r.stopPropagation(),o=new AbortController,n.next=5,_(S,o);case 5:return a=n.sent,t("/ws/rest/v1/openconceptlab/subscription?v=full"),204===a.status?(p(""),A(""),v(!1),y("FULL"),k(!1),(0,u.showNotification)({kind:"success",description:e("subscriptionDeleted","Successfully unsubscribed")})):(0,u.showNotification)({title:e("errorDeletingSubscription","Error occured while deleting the subscription"),kind:"error",critical:!0,description:JSON.stringify(a.data)}),n.abrupt("return",(function(){return o.abort()}));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[S,e,t]);return B?a().createElement(r.rjZ,{className:x.grid},a().createElement(r.sgG,{sm:4,md:8,lg:10},a().createElement(r.l09,null,a().createElement(r.N2B,{className:x.productiveHeading03}),a().createElement(r.Kqy,{gap:5},a().createElement(r.znL,null),a().createElement(r.znL,null),a().createElement(r.cwH,{legendText:a().createElement(r.N2B,{width:"75px"}),className:x.formGroup},a().createElement(r.jJq,null),a().createElement(r.jJq,null))),a().createElement(r.Db,null),a().createElement(r.Db,null)),a().createElement(r.l09,{className:x.unsubscribeForm},a().createElement(r.N2B,{className:x.productiveHeading03}),a().createElement(r.N2B,{className:x.unsubscribeText}),a().createElement(r.Db,null)))):(F&&(0,u.showNotification)({kind:"error",description:e("subscriptionError","Error occured while fetching the subscription")}),a().createElement(r.rjZ,{className:x.grid},a().createElement(r.sgG,{sm:4,md:8,lg:10},a().createElement(r.l09,{onSubmit:L},a().createElement("h3",{className:x.productiveHeading03},e("setupSubscription","Setup Subscription")),a().createElement(r.Kqy,{gap:5},a().createElement(r.oil,{id:"subscriptionUrl",type:"url",labelText:e("subscriptionUrl","Subscription URL"),placeholder:"https://api.openconceptlab.org/orgs/organization-name/collections/dictionary-name",value:c,onChange:T,light:!0,required:!0}),a().createElement(r.oil,{id:"apiToken",type:"password",placeholder:"••••••••••••••••••••••••••••••••••••••••••••••••",labelText:e("apiToken","Token"),value:d,onChange:I,light:!0,required:!0}),a().createElement(r.cwH,{legendText:e("advancedOptions","Advanced Options"),className:x.formGroup},a().createElement(r.XZJ,{checked:g,onChange:z,labelText:e("subscribeToSnapshotText","Subscribe to SNAPSHOT versions (not recommended)"),id:"isSubscribedToSnapshot",disabled:w}),a().createElement(r.XZJ,{checked:"NONE"===E,onChange:P,labelText:e("disableValidationText","Disable validation (should be used with care for well curated collections or sources)"),id:"isValidationDisabled"}))),a().createElement(r.zxk,{kind:"secondary",onClick:M},e("cancelButton","Cancel changes")),a().createElement(r.zxk,{kind:"primary",type:"submit"},e("subscribeButton","Save changes"))),a().createElement(r.l09,{onSubmit:G,className:x.unsubscribeForm},a().createElement("h3",{className:x.productiveHeading03},e("unsubscribe","Unsubscribe")),a().createElement("p",{className:x.unsubscribeText},e("unsubscribeInfo","If you unsubscribe, no concepts will be deleted nor changed. All information about subscription will be deleted from your system.")),a().createElement(r.zxk,{kind:"danger",type:"submit",disabled:!S},e("unsubscribeButton","Unsubscribe"))))))};var M=n(7019),G={};G.styleTagTransform=F(),G.setAttributes=k(),G.insert=C().bind(null,"head"),G.domAPI=E(),G.insertStyleElement=S(),v()(M.Z,G);const U=M.Z&&M.Z.locals?M.Z.locals:void 0;var q=n(5733),W={};W.styleTagTransform=F(),W.setAttributes=k(),W.insert=C().bind(null,"head"),W.domAPI=E(),W.insertStyleElement=S(),v()(q.Z,W);const K=q.Z&&q.Z.locals?q.Z.locals:void 0;function Y(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function J(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Y(a,r,o,i,s,"next",e)}function s(e){Y(a,r,o,i,s,"throw",e)}i(void 0)}))}}function V(e){return X.apply(this,arguments)}function X(){return(X=J(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.openmrsFetch)("/ws/rest/v1/openconceptlab/import",{method:"POST",body:{},headers:{"Content-Type":"application/json"},signal:null==t?void 0:t.signal}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t){return $.apply(this,arguments)}function $(){return($=J(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("file",t),e.abrupt("return",(0,u.openmrsFetch)("/ws/rest/v1/openconceptlab/import",{method:"POST",body:r,signal:null==n?void 0:n.signal}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function te(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){te(a,r,o,i,s,"next",e)}function s(e){te(a,r,o,i,s,"throw",e)}i(void 0)}))}}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const oe=function(){var e=(0,i.useTranslation)().t,t=re((0,o.useState)(!1),2),n=t[0],c=t[1],p=re((0,o.useState)(),2),m=p[0],d=p[1],b=re((0,o.useState)(!1),2),A=b[0],_=b[1],f=function(){var e,t=(0,s.ZP)("/ws/rest/v1/openconceptlab/subscription?v=full",u.openmrsFetch),n=t.data,r=t.error,o=t.isValidating;return{data:null==n||null===(e=n.data)||void 0===e?void 0:e.results[0],isLoading:!n&&!r,isError:r,isValidating:o}}(),g=f.data,v=f.isLoading,h=f.isError;(0,o.useEffect)((function(){v||h||c(!!g)}),[v,h,g]);var E,y=(0,o.useCallback)((function(t,n){var r=n.addedFiles[0];"application/zip"!==r.type?(0,u.showNotification)({kind:"error",description:e("fileFormatError","Only .zip files are allowed")}):d(r)}),[e]),C=(0,o.useCallback)((function(){d(null)}),[]),w=(0,o.useCallback)((E=ne(l().mark((function t(r){var o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),r.stopPropagation(),n){t.next=5;break}return(0,u.showNotification)({kind:"error",description:e("noSubscriptionError","No saved subscription")}),t.abrupt("return");case 5:return o=new AbortController,t.next=8,V(o);case 8:201===t.sent.status?(0,u.showNotification)({kind:"success",description:e("importSuccess","Import started successfully")}):(0,u.showNotification)({kind:"error",description:e("importFailed","Import failed")});case 10:case"end":return t.stop()}}),t)}))),function(e){return E.apply(this,arguments)}),[n,e]),k=(0,o.useCallback)(function(){var t=ne(l().mark((function t(n){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(_(!0),n.preventDefault(),n.stopPropagation(),m){t.next=7;break}return _(!1),(0,u.showNotification)({kind:"error",description:e("noFileSelected","No file selected")}),t.abrupt("return");case 7:return r=new AbortController,t.next=10,Q(m,r);case 10:201===t.sent.status?(d(null),_(!1),(0,u.showNotification)({kind:"success",description:e("importSuccess","Import started successfully")})):(_(!1),(0,u.showNotification)({kind:"error",description:e("importFailed","Import failed")}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[m,e]);return v?a().createElement(r.rjZ,{className:K.grid},a().createElement(r.sgG,{sm:4,md:8,lg:10},a().createElement(r.l09,null,a().createElement(r.N2B,{className:K.productiveHeading03,heading:!0}),a().createElement(r.N2B,{className:K.formText,paragraph:!0,lineCount:2}),a().createElement(r.Db,null)),a().createElement(r.l09,{className:K.form},a().createElement(r.N2B,{className:K.productiveHeading03,heading:!0}),a().createElement(r.N2B,{className:K.formText}),a().createElement(r.rhD,{style:{marginBottom:"1.5rem"}}),a().createElement(r.Db,null)))):(h&&(0,u.showNotification)({kind:"error",description:e("subscriptionError","Error occured while fetching the subscription")}),a().createElement(r.rjZ,{className:K.grid},a().createElement(r.sgG,{sm:4,md:8,lg:10},a().createElement(r.l09,{onSubmit:w},a().createElement("h3",{className:K.productiveHeading03},e("importConcepts","Import Concepts")),a().createElement("p",{className:K.formText},e("importInstructions","Avoid importing during data entry hours, because the operation may significantly slow down the system. You can either use the subscription or a zip file to import concepts.")),a().createElement(r.zxk,{kind:"primary",type:"submit",disabled:!n},e("importFromSubscription","Import from Subscription"))),a().createElement(r.l09,{className:K.form,onSubmit:k},a().createElement("h3",{className:K.productiveHeading03},e("importFromFileHeading","Import from file (Offline)")),a().createElement("p",{className:K.formText},e("importFromFileInfo","You can import data without setting up a subscription by using this option.")),m?a().createElement(r.Py3,{key:m.name,name:m.name,size:"default",status:"edit",iconDescription:e("fileAdded","File Added"),onDelete:C,style:{backgroundColor:"#e0e0e0"}}):a().createElement(r.awp,{accept:["application/zip"],multiple:!0,labelText:e("importFromFileDragInfo","Drag and drop file here or click to upload"),onAddFiles:y,style:{marginBottom:"1.5rem"}}),a().createElement(r.Kqy,{gap:6,orientation:"horizontal"},a().createElement(r.zxk,{kind:"primary",type:"submit"},e("importFromFile","Import from file")),A&&a().createElement(r.lSo,{description:e("uploading","Uploading...")}))))))};var ae=n(2434),ie={};ie.styleTagTransform=F(),ie.setAttributes=k(),ie.insert=C().bind(null,"head"),ie.domAPI=E(),ie.insertStyleElement=S(),v()(ae.Z,ie);const se=ae.Z&&ae.Z.locals?ae.Z.locals:void 0;var ce=n(4021),le={};le.styleTagTransform=F(),le.setAttributes=k(),le.insert=C().bind(null,"head"),le.domAPI=E(),le.insertStyleElement=S(),v()(ce.Z,le);const ue=ce.Z&&ce.Z.locals?ce.Z.locals:void 0;function pe(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function me(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){pe(a,r,o,i,s,"next",e)}function s(e){pe(a,r,o,i,s,"throw",e)}i(void 0)}))}}function de(e,t){return be.apply(this,arguments)}function be(){return(be=me(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/ws/rest/v1/openconceptlab/import/".concat(t,"/item?state=ERROR&v=full"),e.abrupt("return",(0,u.openmrsFetch)(r,{method:"GET",signal:null==n?void 0:n.signal}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ae=n(4458),_e={};_e.styleTagTransform=F(),_e.setAttributes=k(),_e.insert=C().bind(null,"head"),_e.domAPI=E(),_e.insertStyleElement=S(),v()(Ae.Z,_e);const fe=Ae.Z&&Ae.Z.locals?Ae.Z.locals:void 0;function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ve(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Ee=function(e){var t,n,s=e.importUuid,c=(0,i.useTranslation)().t,p=he((0,o.useState)(),2),m=p[0],d=p[1],b=he((0,o.useState)(5),2),A=b[0],_=b[1],f=he((0,o.useState)([]),2),g=f[0],v=f[1],h=(0,u.usePagination)(g,A),E=h.results,y=h.currentPage,C=h.goTo,w=(0,o.useCallback)((t=l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),n=new AbortController,e.next=4,de(t,n);case 4:return(r=e.sent).ok?v(r.data.results):(0,u.showNotification)({title:c("importItemsFetchError","Error occured while fetching the import items"),kind:"error",critical:!0,description:JSON.stringify(r.data)}),d(!1),e.abrupt("return",(function(){return n.abort()}));case 8:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){ve(a,r,o,i,s,"next",e)}function s(e){ve(a,r,o,i,s,"throw",e)}i(void 0)}))},function(e){return n.apply(this,arguments)}),[c]);if((0,o.useEffect)((function(){w(s)}),[w,s]),m)return a().createElement("div",null,a().createElement(r.gqd,{showHeader:!1,showToolbar:!1,columnCount:2}),a().createElement(r.F3O,null));var k=[{header:c("conceptOrMapping","Concept/Mapping"),key:"uuid"},{header:c("message","Message"),key:"errorMessage"}];return!m&&a().createElement("div",null,a().createElement(r.iA_,{size:"sm",className:fe.tableBordered},a().createElement(r.ssF,null,a().createElement(r.SCH,{className:fe.tableHeaderRow},k.map((function(e,t){return a().createElement(r.xDH,{key:t,isSortable:!0},e.header)})))),a().createElement(r.RMI,null,null==E?void 0:E.map((function(e){return a().createElement(o.Fragment,{key:e.uuid},a().createElement(r.SCH,{className:fe.tableDataRow},a().createElement(r.pj1,null,a().createElement(r.rUS,{href:e.versionUrl},e.type," ",e.uuid)),a().createElement(r.pj1,null,e.errorMessage)))})))),a().createElement(r.tlE,{className:fe.pagination,size:"sm",page:y,pageSize:A,pageSizes:[5,10,20,50,100],totalItems:null==g?void 0:g.length,onChange:function(e){var t=e.page,n=e.pageSize;C(t),_(n)}}))},ye=function(e){var t=e.selectedImportObject,n=(0,i.useTranslation)().t;return a().createElement("div",null,a().createElement("span",{className:ue.heading01},n("startedOn","Started on")," "),a().createElement("span",{className:"body"},(0,u.formatDatetime)(new Date(t.localDateStarted))),a().createElement("br",null),a().createElement("span",{className:ue.heading01},n("completedOn","Completed on")," "),a().createElement("span",{className:"body"},(0,u.formatDatetime)(new Date(t.localDateStopped))),a().createElement("br",null),a().createElement("span",{className:ue.heading01},n("duration","Duration")," "),a().createElement("span",{className:"body"},t.importTime),a().createElement("br",null),a().createElement("br",null),a().createElement("span",{className:ue.heading01},n("result","Result:")," "),a().createElement("br",null),a().createElement("div",{className:"body ".concat(ue.indentedContent)},a().createElement("span",null,t.upToDateItemsCount," ",n("conceptsUpToDate","concepts up to date")),a().createElement("br",null),a().createElement("span",null,t.addedItemsCount," ",n("conceptsAdded","concepts added")),a().createElement("br",null),a().createElement("span",null,t.updatedItemsCount," ",n("conceptsUpdated","concepts updated")),a().createElement("br",null),a().createElement("span",null,t.retiredItemsCount," ",n("conceptsRetired","concepts retired")),a().createElement("br",null),a().createElement("span",null,t.errorItemsCount," ",n("errorsFound","errors found")),a().createElement("br",null),a().createElement("span",null,t.ignoredErrorsCount," ",n("errorsIgnored","errors ignored")),a().createElement("br",null)),a().createElement("br",null),0!=t.errorItemsCount&&a().createElement(Ee,{importUuid:t.uuid}))};function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function we(){return we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}const ke=function(){var e,t,n=(0,i.useTranslation)().t,c=(e=(0,o.useState)(10),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=c[0],p=c[1],m=function(){var e,t=(0,s.ZP)("/ws/rest/v1/openconceptlab/import?v=full",u.openmrsFetch),n=t.data,r=t.error,o=t.isValidating;return{data:null==n||null===(e=n.data)||void 0===e?void 0:e.results,isLoading:!n&&!r,isError:r,isValidating:o}}(),d=m.data,b=m.isLoading,A=m.isError,_=(0,u.usePagination)(d,l),f=_.results,g=_.currentPage,v=_.goTo;if(b)return a().createElement(r.rjZ,{className:se.grid},a().createElement(r.sgG,{sm:4,md:8,lg:10},a().createElement(r.N2B,{className:se.productiveHeading03}),a().createElement(r.gqd,{showHeader:!1,showToolbar:!1,rowCount:10,columnCount:3}),a().createElement(r.F3O,null)));A&&(0,u.showNotification)({kind:"error",description:n("previousImportsFetchError","Error occured while fetching the imports")});var h=[{header:n("dateAndTime","Date and Time"),key:"localDateStarted"},{header:n("duration","Duration"),key:"importTime"},{header:n("status","Status"),key:"status"}],E=null==f?void 0:f.map((function(e){return{id:e.uuid,localDateStarted:(0,u.formatDatetime)(new Date(e.localDateStarted)),importTime:e.importTime,status:e.status}}));return!b&&!A&&a().createElement(r.rjZ,{className:se.grid},a().createElement(r.sgG,{sm:4,md:8,lg:10},a().createElement("h3",{className:se.productiveHeading03},n("previousImports","Previous Imports")),a().createElement(r.wQF,{rows:E,headers:h,size:"sm"},(function(e){var t=e.rows,n=e.headers,i=e.getHeaderProps,s=e.getRowProps,c=e.getTableProps;return a().createElement(r.iA_,we({},c(),{className:se.tableBordered}),a().createElement(r.ssF,null,a().createElement(r.SCH,null,a().createElement(r.MOD,null),n.map((function(e,t){return a().createElement(r.xDH,we({key:t},i({header:e})),e.header)})))),a().createElement(r.RMI,null,t.map((function(e){return a().createElement(o.Fragment,{key:e.id},a().createElement(r.RcE,we({},s({row:e}),{className:se.tableRow}),e.cells.map((function(e){return a().createElement(r.pj1,{key:e.id},e.value)}))),e.isExpanded&&a().createElement(r.WdL,{colSpan:n.length+1,className:se.tableExpandedRow},a().createElement(ye,{selectedImportObject:d.find((function(t){return t.uuid===e.id}))})))}))))})),a().createElement(r.tlE,{className:se.pagination,size:"sm",page:g,pageSize:l,pageSizes:[10,20,50,100],totalItems:d.length,onChange:function(e){var t=e.page,n=e.pageSize;v(t),p(n)}})))},De=function(){var e=(0,i.useTranslation)().t;return a().createElement(s.J$,null,a().createElement("main",{className:"omrs-main-content ".concat(U.main)},a().createElement("h3",{className:U.moduleHeader},e("moduleTitle","OCL Subscription Module")),a().createElement(r.mQc,null,a().createElement(r.tdY,{className:U.tabList,contained:!0},a().createElement(r.OK9,null,e("subscription","Subscription")," "),a().createElement(r.OK9,null,e("import","Import")," "),a().createElement(r.OK9,null,e("previousImports","Previous Imports")," ")),a().createElement(r.nPR,null,a().createElement(r.x45,{className:U.tabPanel},a().createElement(L,null)),a().createElement(r.x45,{className:U.tabPanel},a().createElement(oe,null)),a().createElement(r.x45,{className:U.tabPanel},a().createElement(ke,null))))))}}}]);