"use strict";(self.webpackChunk_openmrs_esm_patient_attachments_app=self.webpackChunk_openmrs_esm_patient_attachments_app||[]).push([[633],{7649:(t,e,a)=>{a.d(e,{Z:()=>o});var n=a(9601),i=a.n(n),r=a(2609),_=a.n(r)()(i());_.push([t.id,".-esm-patient-attachments__attachment-thumbnail__caption___DRMMC{position:absolute;top:141px;right:73px;text-align:center;backdrop-filter:blur(20px)}.-esm-patient-attachments__attachment-thumbnail__thumbnail____z54Z{height:10rem}.-esm-patient-attachments__attachment-thumbnail__imageThumbnail___YShyN{width:100%;cursor:pointer}.-esm-patient-attachments__attachment-thumbnail__imageThumbnail___YShyN img{width:100% !important;margin:auto !important;height:10rem}.-esm-patient-attachments__attachment-thumbnail__pdfThumbnail___NWFAE{cursor:pointer}.-esm-patient-attachments__attachment-thumbnail__pdfThumbnail___NWFAE embed{height:10rem}.-esm-patient-attachments__attachment-thumbnail__captionText____sCwZ{color:#2e2eef;cursor:pointer;text-decoration:underline}.-esm-patient-attachments__attachment-thumbnail__actionButtons___o4tYz{width:20%;position:absolute;right:0}.-esm-patient-attachments__attachment-thumbnail__actionButtons___o4tYz span{margin:5px}.-esm-patient-attachments__attachment-thumbnail__infoIcon___wiZka{visibility:hidden;position:absolute;right:4px;top:4px;cursor:pointer}.-esm-patient-attachments__attachment-thumbnail__thumbnail____z54Z:hover .-esm-patient-attachments__attachment-thumbnail__infoIcon___wiZka{visibility:visible}.-esm-patient-attachments__attachment-thumbnail__infoIcon___wiZka .-esm-patient-attachments__attachment-thumbnail__infoText___xdYiD{visibility:hidden;width:170px;background-color:#000;color:#fff;text-align:center;border-radius:6px;padding:5px 0;position:absolute;z-index:1;top:-46px;right:-166px}.-esm-patient-attachments__attachment-thumbnail__infoIcon___wiZka:hover .-esm-patient-attachments__attachment-thumbnail__infoText___xdYiD{visibility:visible}.-esm-patient-attachments__attachment-thumbnail__otherThumbnail____TjyR{object-fit:none !important}",""]),_.locals={caption:"-esm-patient-attachments__attachment-thumbnail__caption___DRMMC",thumbnail:"-esm-patient-attachments__attachment-thumbnail__thumbnail____z54Z",imageThumbnail:"-esm-patient-attachments__attachment-thumbnail__imageThumbnail___YShyN",pdfThumbnail:"-esm-patient-attachments__attachment-thumbnail__pdfThumbnail___NWFAE",captionText:"-esm-patient-attachments__attachment-thumbnail__captionText____sCwZ",actionButtons:"-esm-patient-attachments__attachment-thumbnail__actionButtons___o4tYz",infoIcon:"-esm-patient-attachments__attachment-thumbnail__infoIcon___wiZka",infoText:"-esm-patient-attachments__attachment-thumbnail__infoText___xdYiD",otherThumbnail:"-esm-patient-attachments__attachment-thumbnail__otherThumbnail____TjyR"};const o=_},3675:(t,e,a)=>{a.d(e,{Z:()=>o});var n=a(9601),i=a.n(n),r=a(2609),_=a.n(r)()(i());_.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-attachments__attachments-grid-overview__productiveHeading03___Y3PqK{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.-esm-patient-attachments__attachments-grid-overview__productiveHeading02___Ck684{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.-esm-patient-attachments__attachments-grid-overview__bodyLong01___E2xW3{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.-esm-patient-attachments__attachments-grid-overview__muted___hMnKl{color:#525252}.-esm-patient-attachments__attachments-grid-overview__paddedProductiveHeading03___pgmsx{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0;padding:1rem}.-esm-patient-attachments__attachments-grid-overview__bodyShort01___TCuYl{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.-esm-patient-attachments__attachments-grid-overview__text02___OpcM2{color:#525252}.-esm-patient-attachments__attachments-grid-overview__galleryContainer___BrcM7{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;align-items:center;grid-gap:1rem;padding:0 1rem 1rem 1rem}.-esm-patient-attachments__attachments-grid-overview__attachmentThumbnailSkeleton___Nc7kH{width:100%}.-esm-patient-attachments__attachments-grid-overview__galleryContainer___BrcM7 img{object-fit:cover}.-esm-patient-attachments__attachments-grid-overview__imagePreview___asOzh{display:grid;grid-template-columns:1fr 16rem;position:fixed;width:100vw;height:100vh;top:0;left:0;z-index:8001;background-color:#262626}.-esm-patient-attachments__attachments-grid-overview__leftPanel___ef34x{display:grid;grid-template-columns:auto 1fr auto;align-items:start}.-esm-patient-attachments__attachments-grid-overview__rightPanel____z6yf{background-color:#393939;padding:1rem;color:#f4f4f4}.-esm-patient-attachments__attachments-grid-overview__closePreviewButton___u3tE0>svg>path{fill:#f4f4f4 !important}.-esm-patient-attachments__attachments-grid-overview__closePreviewButton___u3tE0:hover>svg>path{fill:#161616 !important}.-esm-patient-attachments__attachments-grid-overview__attachmentImage___k5SEh{display:flex;justify-content:center;align-items:center;height:100%}.-esm-patient-attachments__attachments-grid-overview__attachmentImage___k5SEh img{max-width:80%;max-height:80%}.-esm-patient-attachments__attachments-grid-overview__overflowMenu___N7mgr button svg circle{fill:#f4f4f4}.-esm-patient-attachments__attachments-grid-overview__overflowMenu___N7mgr:hover button svg circle,.-esm-patient-attachments__attachments-grid-overview__overflowMenu___N7mgr:focus button svg circle{fill:#161616}.-esm-patient-attachments__attachments-grid-overview__imageDescription___b4ERp{margin-top:.5rem}",""]),_.locals={productiveHeading03:"-esm-patient-attachments__attachments-grid-overview__productiveHeading03___Y3PqK",productiveHeading02:"-esm-patient-attachments__attachments-grid-overview__productiveHeading02___Ck684",bodyLong01:"-esm-patient-attachments__attachments-grid-overview__bodyLong01___E2xW3",muted:"-esm-patient-attachments__attachments-grid-overview__muted___hMnKl",paddedProductiveHeading03:"-esm-patient-attachments__attachments-grid-overview__paddedProductiveHeading03___pgmsx",bodyShort01:"-esm-patient-attachments__attachments-grid-overview__bodyShort01___TCuYl",text02:"-esm-patient-attachments__attachments-grid-overview__text02___OpcM2",galleryContainer:"-esm-patient-attachments__attachments-grid-overview__galleryContainer___BrcM7",attachmentThumbnailSkeleton:"-esm-patient-attachments__attachments-grid-overview__attachmentThumbnailSkeleton___Nc7kH",imagePreview:"-esm-patient-attachments__attachments-grid-overview__imagePreview___asOzh",leftPanel:"-esm-patient-attachments__attachments-grid-overview__leftPanel___ef34x",rightPanel:"-esm-patient-attachments__attachments-grid-overview__rightPanel____z6yf",closePreviewButton:"-esm-patient-attachments__attachments-grid-overview__closePreviewButton___u3tE0",attachmentImage:"-esm-patient-attachments__attachments-grid-overview__attachmentImage___k5SEh",overflowMenu:"-esm-patient-attachments__attachments-grid-overview__overflowMenu___N7mgr",imageDescription:"-esm-patient-attachments__attachments-grid-overview__imageDescription___b4ERp"};const o=_},7717:(t,e,a)=>{a.d(e,{Z:()=>o});var n=a(9601),i=a.n(n),r=a(2609),_=a.n(r)()(i());_.push([t.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-attachments__attachments-overview__productiveHeading03___JetrD{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.-esm-patient-attachments__attachments-overview__productiveHeading02___eVy3G{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.-esm-patient-attachments__attachments-overview__bodyLong01___lNgDM{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.-esm-patient-attachments__attachments-overview__muted___p4k1O{color:#525252}.-esm-patient-attachments__attachments-overview__paddedProductiveHeading03___rlR6w{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0;padding:1rem}.-esm-patient-attachments__attachments-overview__bodyShort01___q93st{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.-esm-patient-attachments__attachments-overview__text02___tqLlC{color:#525252}.-esm-patient-attachments__attachments-overview__overview___jmOHr{background-color:#fff}.-esm-patient-attachments__attachments-overview__attachmentsHeader___cw3YM{display:grid;grid-template-columns:2fr 1fr 1fr auto;grid-gap:1rem;align-items:center;padding:.5rem 0 .5rem 1rem}.-esm-patient-attachments__attachments-overview__attachmentsHeader___cw3YM>h4:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-patient-attachments__attachments-overview__btnOverrides___TrnMQ{bottom:.7rem}',""]),_.locals={productiveHeading03:"-esm-patient-attachments__attachments-overview__productiveHeading03___JetrD",productiveHeading02:"-esm-patient-attachments__attachments-overview__productiveHeading02___eVy3G",bodyLong01:"-esm-patient-attachments__attachments-overview__bodyLong01___lNgDM",muted:"-esm-patient-attachments__attachments-overview__muted___p4k1O",paddedProductiveHeading03:"-esm-patient-attachments__attachments-overview__paddedProductiveHeading03___rlR6w",bodyShort01:"-esm-patient-attachments__attachments-overview__bodyShort01___q93st",text02:"-esm-patient-attachments__attachments-overview__text02___tqLlC",overview:"-esm-patient-attachments__attachments-overview__overview___jmOHr",attachmentsHeader:"-esm-patient-attachments__attachments-overview__attachmentsHeader___cw3YM",btnOverrides:"-esm-patient-attachments__attachments-overview__btnOverrides___TrnMQ"};const o=_},5065:(t,e,a)=>{a.d(e,{Z:()=>o});var n=a(9601),i=a.n(n),r=a(2609),_=a.n(r)()(i());_.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-attachments__attachments-table-overview__productiveHeading03___Mcxa8{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.-esm-patient-attachments__attachments-table-overview__productiveHeading02___muT8W{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.-esm-patient-attachments__attachments-table-overview__bodyLong01___UWa5K{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.-esm-patient-attachments__attachments-table-overview__muted___iDhzS{color:#525252}.-esm-patient-attachments__attachments-table-overview__paddedProductiveHeading03___hoAUX{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0;padding:1rem}.-esm-patient-attachments__attachments-table-overview__bodyShort01___t9WvI{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.-esm-patient-attachments__attachments-table-overview__text02___XjlXQ{color:#525252}.-esm-patient-attachments__attachments-table-overview__attachmentTable___qpnU2>.-esm-patient-attachments__attachments-table-overview__bx--data-table-header___mwpVp{display:none}.-esm-patient-attachments__attachments-table-overview__link___nnpiD{text-decoration:none;cursor:pointer}",""]),_.locals={productiveHeading03:"-esm-patient-attachments__attachments-table-overview__productiveHeading03___Mcxa8",productiveHeading02:"-esm-patient-attachments__attachments-table-overview__productiveHeading02___muT8W",bodyLong01:"-esm-patient-attachments__attachments-table-overview__bodyLong01___UWa5K",muted:"-esm-patient-attachments__attachments-table-overview__muted___iDhzS",paddedProductiveHeading03:"-esm-patient-attachments__attachments-table-overview__paddedProductiveHeading03___hoAUX",bodyShort01:"-esm-patient-attachments__attachments-table-overview__bodyShort01___t9WvI",text02:"-esm-patient-attachments__attachments-table-overview__text02___XjlXQ",attachmentTable:"-esm-patient-attachments__attachments-table-overview__attachmentTable___qpnU2","bx--data-table-header":"-esm-patient-attachments__attachments-table-overview__bx--data-table-header___mwpVp",link:"-esm-patient-attachments__attachments-table-overview__link___nnpiD"};const o=_},9633:(t,e,a)=>{a.r(e),a.d(e,{default:()=>dt});var n=a(9902),i=a.n(n),r=a(321),_=a.n(r),o=a(1195),c=a.n(o),s=a(3275),m=a.n(s),l=a(7162),h=a.n(l),d=a(2094),p=a.n(d),u=a(757),v=a.n(u),g=a(7717),b={};b.styleTagTransform=v(),b.setAttributes=h(),b.insert=m().bind(null,"head"),b.domAPI=c(),b.insertStyleElement=p(),_()(g.Z,b);const f=g.Z&&g.Z.locals?g.Z.locals:void 0;var w=a(8011),y=a(4924),E=a(9623),T=a(6265),k=a(8953),x=a(7030),P=a(3066),Z=a(3771),S=a(5959),C=a(3660),N=a(3675),O={};O.styleTagTransform=v(),O.setAttributes=h(),O.insert=m().bind(null,"head"),O.domAPI=c(),O.insertStyleElement=p(),_()(N.Z,O);const H=N.Z&&N.Z.locals?N.Z.locals:void 0;var A=a(7649),M={};M.styleTagTransform=v(),M.setAttributes=h(),M.insert=m().bind(null,"head"),M.domAPI=c(),M.insertStyleElement=p(),_()(A.Z,M);const D=A.Z&&A.Z.locals?A.Z.locals:void 0;var z=a(7128);function I(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function j(){return j=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},j.apply(this,arguments)}function L(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),n.forEach((function(e){I(t,e,a[e])}))}return t}function F(t){return i().createElement("div",{className:D.thumbnail},i().createElement(R,j({},t)))}function Y(t){return i().createElement("div",{className:D.imageThumbnail,role:"button",tabIndex:0,onClick:null==t?void 0:t.onClick},i().createElement("img",{src:t.src,alt:t.title,style:t.style}))}function U(t){return i().createElement("div",{className:D.pdfThumbnail,onClick:function(e){e.preventDefault(),e.stopPropagation(),window.open(t.src,"_blank")},role:"button",tabIndex:0},i().createElement("embed",{src:t.src,style:(e=L({},t.style),a={pointerEvents:"none",width:"100%"},a=null!=a?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):function(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);a.push.apply(a,n)}return a}(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})),e)}));var e,a}function B(t){return i().createElement("div",{className:D.otherThumbnail,onClick:function(e){e.preventDefault(),e.stopPropagation();var a=document.createElement("a");a.setAttribute("href",t.src),a.setAttribute("download","download"),a.click()},role:"button",tabIndex:0},i().createElement("img",{src:z,alt:t.title,style:t.style,className:D.otherThumbnail}))}function R(t){var e,a=t.item.bytesContentFamily,n={src:t.imageProps.src,title:t.imageProps.title,style:t.imageProps.style,onClick:null===(e=t.imageProps)||void 0===e?void 0:e.onClick};return"IMAGE"===a?i().createElement(Y,j({},n)):"PDF"===a?i().createElement(U,j({},n)):i().createElement(B,j({},n))}var W=a(8670);const q=function(t){var e=t.attachments,a=t.isLoading,n=t.onAttachmentSelect;return a?i().createElement("div",{className:H.galleryContainer},i().createElement(W.Z,{className:H.attachmentThumbnailSkeleton}),i().createElement(W.Z,{className:H.attachmentThumbnailSkeleton}),i().createElement(W.Z,{className:H.attachmentThumbnailSkeleton}),i().createElement(W.Z,{className:H.attachmentThumbnailSkeleton})):i().createElement("div",{className:H.galleryContainer},e.map((function(t,e){var a={src:t.src,title:t.title,style:{},onClick:function(){n(t)}},r={id:t.id,dateTime:t.dateTime,bytesMimeType:t.bytesMimeType,bytesContentFamily:t.bytesContentFamily};return i().createElement("div",{key:e},i().createElement(F,{imageProps:a,item:r}),i().createElement("p",{className:H.bodyLong01},t.title),i().createElement("p",{className:"".concat(H.bodyLong01," ").concat(H.muted)},t.dateTime))})))};var K=a(8580),V=a(160),X=a(1519),G=a(364),Q=a(7500),J=a(8804),$=a(1358),tt=a(2427),et=a(3783),at=a(7855),nt=a(8967),it=a(5065),rt={};rt.styleTagTransform=v(),rt.setAttributes=h(),rt.insert=m().bind(null,"head"),rt.domAPI=c(),rt.insertStyleElement=p(),_()(it.Z,rt);const _t=it.Z&&it.Z.locals?it.Z.locals:void 0;function ot(){return ot=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t},ot.apply(this,arguments)}const ct=function(t){var e,a,r=t.attachments,_=t.isLoading,o=t.deleteAttachment,c=t.onAttachmentSelect,s=(0,y.useTranslation)().t,m=(0,n.useMemo)((function(){return r.map((function(t){return{id:t.id,fileName:i().createElement("span",{role:"button",tabIndex:0,className:_t.link,onClick:function(){"IMAGE"===t.bytesContentFamily?c(t):window.open(t.src,"_blank")}},t.title),type:t.bytesContentFamily,dateUploaded:t.dateTime}}))}),[r,c]),l=(0,n.useMemo)((function(){return[{key:"fileName",header:s("fileName","File name"),colSpan:1},{key:"type",header:s("type","Type"),colSpan:1},{key:"dateUploaded",header:s("dateUploaded","Date uploaded"),colSpan:2}]}),[s]);return _?i().createElement("div",{className:_t.attachmentTable},i().createElement(K.Z,{className:_t.dataTableSkeleton})):i().createElement(V.Z,null,i().createElement(X.ZP,{rows:m,headers:l,size:"sm"},(function(t){var n=t.rows,_=t.headers,c=t.getHeaderProps,m=t.getTableProps;return i().createElement(G.Z,ot({},m(),{useZebraStyles:!0}),i().createElement(Q.Z,null,i().createElement(J.Z,null,_.map((function(t){var a;return i().createElement($.Z,ot({},c({header:t,isSortable:t.isSortable,colSpan:t.colSpan})),null!==(e=null===(a=t.header)||void 0===a?void 0:a.content)&&void 0!==e?e:t.header)})))),i().createElement(tt.Z,null,n.map((function(t,e){return i().createElement(J.Z,{key:t.id},t.cells.map((function(t){var e;return i().createElement(et.Z,{key:t.id},null!==(a=null===(e=t.value)||void 0===e?void 0:e.content)&&void 0!==a?a:t.value)})),i().createElement(et.Z,{className:"cds--table-column-menu"},i().createElement(at.Z,{size:"sm",flipped:!0},i().createElement(nt.Z,{itemText:s("delete","Delete"),isDelete:!0,onClick:function(){return o(r[e])}}))))}))))})))};var st=a(9657);const mt=function(t){var e=t.closePreview,a=t.imageSelected,n=t.deleteAttachment,r=(0,y.useTranslation)().t;return i().createElement("div",{className:H.imagePreview},i().createElement("div",{className:H.leftPanel},i().createElement(x.Z,{kind:"ghost",className:H.closePreviewButton,hasIconOnly:!0,renderIcon:st.Z,onClick:e}),i().createElement("div",{className:H.attachmentImage},i().createElement("img",{src:a.src,alt:a.title})),i().createElement("div",{className:H.overflowMenu},i().createElement(x.Z,{kind:"danger",onClick:function(){return n(a)}},r("deleteImage","Delete image")))),i().createElement("div",{className:H.rightPanel},i().createElement("h4",{className:H.productiveHeading02},a.title),i().createElement("p",{className:"".concat(H.bodyLong01," ").concat(H.imageDescription)},"Description")))};function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function ht(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,r=[],_=!0,o=!1;try{for(a=a.call(t);!(_=(n=a.next()).done)&&(r.push(n.value),!e||r.length!==e);_=!0);}catch(t){o=!0,i=t}finally{try{_||null==a.return||a.return()}finally{if(o)throw i}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return lt(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?lt(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const dt=function(t){var e=t.patientUuid,a=(0,y.useTranslation)().t,r=(0,S.Rs)(e,!0),_=r.data,o=r.mutate,c=r.isValidating,s=r.isLoading,m=ht((0,n.useState)(null),2),l=m[0],h=m[1],d=function(t){switch(t){case"tablet":return 9;case"phone":return 3;case"desktop":return 25;default:return 8}}((0,P.useLayoutType)()),p=(0,n.useMemo)((function(){return _.map((function(t){return(0,C.H)(t)}))}),[_]),u=(0,P.usePagination)(p,d),v=ht((0,n.useState)(!1),2),g=v[0],b=v[1],N=ht((0,n.useState)("grid"),2),O=N[0],H=N[1];(0,n.useEffect)((function(){!0===g&&((0,P.showToast)({critical:!0,kind:"error",description:a("fileUnsupported","File uploaded is not supported"),title:a("errorUploading","Error uploading a file")}),b(!1))}),[g,a]);var A=(0,n.useCallback)((function(){var t=(0,P.showModal)("capture-photo-modal",{saveFile:function(t){return(0,S.OE)(e,t)},closeModal:function(){t()},onCompletion:function(){return o()}})}),[e,o]),M=(0,n.useCallback)((function(t){(0,S.ky)(t.id,new AbortController).then((function(){(0,P.showToast)({title:a("fileDeleted","File deleted"),description:"".concat(t.title," ").concat(a("successfullyDeleted","successfully deleted")),kind:"success"}),h(null),o()})).catch((function(e){(0,P.showToast)({title:a("error","Error"),description:"".concat(t.title," ").concat(a("failedDeleting","couldn't be deleted")),kind:"error"})}))}),[o,a,h]),D=(0,n.useCallback)((function(t){var e=(0,P.showModal)("delete-attachment-modal",{attachment:t,close:function(){return e()},onConfirmation:function(t){M(t),e()}})}),[M]);return p.length?i().createElement(P.UserHasAccess,{privilege:"View Attachments"},i().createElement("div",{onDragOverCapture:A,className:f.overview},i().createElement("div",{id:"container"},i().createElement("div",{className:f.attachmentsHeader},i().createElement("h4",{className:f.productiveheading02},a("attachments","Attachments")),i().createElement("div",null,c&&i().createElement(E.Z,{withOverlay:!1,small:!0})),i().createElement(T.Z,{onChange:function(t){return H("".concat(t.name))}},i().createElement(k.Z,{name:"grid",text:"Grid",selected:"grid"===O}),i().createElement(k.Z,{name:"tabular",text:"Table",selected:"tabular"===O})),i().createElement(x.Z,{kind:"ghost",renderIcon:w.Z,iconDescription:"Add attachment",onClick:A},a("add","Add"))),"grid"===O?i().createElement(q,{onAttachmentSelect:h,deleteAttachment:D,isLoading:s,attachments:p}):i().createElement(ct,{onAttachmentSelect:h,deleteAttachment:D,isLoading:s,attachments:p}),i().createElement(Z.PatientChartPagination,{currentItems:u.results.length,totalItems:p.length,onPageNumberChange:function(t){return u.goTo(t.page)},pageNumber:u.currentPage,pageSize:d}))),l&&i().createElement(mt,{closePreview:function(){return h(null)},imageSelected:l,deleteAttachment:D})):i().createElement(Z.EmptyState,{displayText:"attachments",headerTitle:"Attachments",launchForm:A})}},5959:(t,e,a)=>{a.d(e,{OE:()=>c,Rs:()=>o,eK:()=>_,ky:()=>s});var n=a(3066),i=a(9902),r=a(9857),_="/ws/rest/v1/attachment";function o(t,e){var a,o=(0,r.ZP)("".concat(_,"?patient=").concat(t,"&includeEncounterless=").concat(e),n.openmrsFetch),c=o.data,s=o.error,m=o.mutate,l=o.isValidating;return(0,i.useMemo)((function(){return{isLoading:!c&&!s,data:null!==(a=null==c?void 0:c.data.results)&&void 0!==a?a:[],error:s,mutate:m,isValidating:l}}),[l,c,s,m])}function c(t,e){var a=new FormData,i=new File([""],e.fileName);return a.append("fileCaption",e.fileName),a.append("patient",t),a.append("file",i),a.append("base64Content",e.fileContent),(0,n.openmrsFetch)("".concat(_),{method:"POST",body:a})}function s(t,e){return(0,n.openmrsFetch)("".concat(_,"/").concat(t),{method:"DELETE",signal:e.signal})}},3660:(t,e,a)=>{a.d(e,{H:()=>_,Z:()=>r});var n=a(5959),i=a(3066);function r(t){return new Promise((function(e){if(t){var a=new FileReader;a.addEventListener("load",(function(){"string"==typeof a.result?e(a.result):e("")})),a.addEventListener("error",(function(){e("")})),a.readAsDataURL(t)}else e("")}))}function _(t){return{id:t.uuid,src:"".concat(window.openmrsBase).concat(n.eK,"/").concat(t.uuid,"/bytes"),title:t.comment,dateTime:(0,i.formatDate)(new Date(t.dateTime),{mode:"wide"}),bytesMimeType:t.bytesMimeType,bytesContentFamily:t.bytesContentFamily}}},7128:(t,e,a)=>{t.exports=a.p+"1caaa464bd9603a4341c.svg"}}]);