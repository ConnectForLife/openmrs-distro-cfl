"use strict";(self.webpackChunk_openmrs_esm_patient_attachments_app=self.webpackChunk_openmrs_esm_patient_attachments_app||[]).push([[727],{5495:(e,t,n)=>{function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}n.d(t,{I:()=>w,_:()=>b,a:()=>g});var c=["width","height","viewBox"],s=["tabindex"],l={focusable:"false",preserveAspectRatio:"xMidYMid meet"};var u=n(3980),p=n.n(u),m=n(9902),f=n.n(m);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g.apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var h=["className","children","tabIndex"],y=["tabindex"],w=f().forwardRef((function(e,t){var n=e.className,r=e.children,i=e.tabIndex,u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height,r=e.viewBox,i=void 0===r?"0 0 ".concat(t," ").concat(n):r,u=o(e,c),p=u.tabindex,m=o(u,s),f=a(a(a({},l),m),{},{width:t,height:n,viewBox:i});return f["aria-label"]||f["aria-labelledby"]||f.title?(f.role="img",null!=p&&(f.focusable="true",f.tabindex=p)):f["aria-hidden"]=!0,f}(_(_({},b(e,h)),{},{tabindex:i})),p=u.tabindex,m=b(u,y);return n&&(m.className=n),null!=p&&(m.tabIndex=p),t&&(m.ref=t),f().createElement("svg",m,r)}));w.displayName="Icon",w.propTypes={"aria-hidden":p().string,"aria-label":p().string,"aria-labelledby":p().string,children:p().node,className:p().string,height:p().oneOfType([p().number,p().string]),preserveAspectRatio:p().string,tabIndex:p().string,viewBox:p().string,width:p().oneOfType([p().number,p().string]),xmlns:p().string},w.defaultProps={xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet"}},321:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},o=[],c=0;c<e.length;c++){var s=e[c],l=r.base?s[0]+r.base:s[0],u=i[l]||0,p="".concat(l," ").concat(u);i[l]=u+1;var m=n(p),f={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==m)t[m].references++,t[m].updater(f);else{var d=a(f,r);r.byIndex=c,t.splice(c,0,{identifier:p,updater:d,references:1})}o.push(p)}return o}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var c=n(i[o]);t[c].references--}for(var s=r(e,a),l=0;l<i.length;l++){var u=n(i[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}i=s}}},3275:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},2094:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},7162:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},1195:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},757:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},2415:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(9601),a=n.n(r),i=n(2609),o=n.n(i)()(a());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-attachments__image-preview__productiveHeading03___L2gGr{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}.-esm-patient-attachments__image-preview__productiveHeading02___wyg0O{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}.-esm-patient-attachments__image-preview__bodyLong01___g5vwz{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.-esm-patient-attachments__image-preview__muted___GnR9A{color:#525252}.-esm-patient-attachments__image-preview__paddedProductiveHeading03___fDA6h{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0;padding:1rem}.-esm-patient-attachments__image-preview__bodyShort01___l1vEV{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.-esm-patient-attachments__image-preview__text02___ZMuFL{color:#525252}.-esm-patient-attachments__image-preview__filePreviewContainer___XnW9P{background-color:#fff}.-esm-patient-attachments__image-preview__overview___tjFAA{padding:1rem;display:grid;grid-template-columns:1fr 1fr}.-esm-patient-attachments__image-preview__overview___tjFAA img{width:100%;max-height:200px;display:block}.-esm-patient-attachments__image-preview__overview___tjFAA .-esm-patient-attachments__image-preview__imageDetails___YcQDC{margin-left:1rem}.-esm-patient-attachments__image-preview__buttonSetOverrides___bFFTf{margin:1rem auto 0;display:grid;grid-template-columns:1fr 1fr}.-esm-patient-attachments__image-preview__buttonSetOverrides___bFFTf>button{max-width:unset}.-esm-patient-attachments__image-preview__captionFrame___zn9Zu{margin-bottom:.3rem}",""]),o.locals={productiveHeading03:"-esm-patient-attachments__image-preview__productiveHeading03___L2gGr",productiveHeading02:"-esm-patient-attachments__image-preview__productiveHeading02___wyg0O",bodyLong01:"-esm-patient-attachments__image-preview__bodyLong01___g5vwz",muted:"-esm-patient-attachments__image-preview__muted___GnR9A",paddedProductiveHeading03:"-esm-patient-attachments__image-preview__paddedProductiveHeading03___fDA6h",bodyShort01:"-esm-patient-attachments__image-preview__bodyShort01___l1vEV",text02:"-esm-patient-attachments__image-preview__text02___ZMuFL",filePreviewContainer:"-esm-patient-attachments__image-preview__filePreviewContainer___XnW9P",overview:"-esm-patient-attachments__image-preview__overview___tjFAA",imageDetails:"-esm-patient-attachments__image-preview__imageDetails___YcQDC",buttonSetOverrides:"-esm-patient-attachments__image-preview__buttonSetOverrides___bFFTf",captionFrame:"-esm-patient-attachments__image-preview__captionFrame___zn9Zu"};const c=o},2609:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(o[s]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&o[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),a&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=a):u[4]="".concat(a)),t.push(u))}},t}},9601:e=>{e.exports=function(e){return e[1]}},1876:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var r=n(9902),a=n.n(r),i=n(4924),o=n(3066),c=n(1918),s=n(3172),l=n(6549),u=n(7030),p=n(321),m=n.n(p),f=n(1195),d=n.n(f),_=n(3275),v=n.n(_),g=n(7162),b=n.n(g),h=n(2094),y=n.n(h),w=n(757),O=n.n(w),j=n(2415),P={};P.styleTagTransform=O(),P.setAttributes=b(),P.insert=v().bind(null,"head"),P.domAPI=d(),P.insertStyleElement=y(),m()(j.Z,P);const x=j.Z&&j.Z.locals?j.Z.locals:void 0;var S=n(7128);function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){c=!0,a=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw a}}return i}}(e,t)||F(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||F(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}var T=function(e){var t=e.uploadedFile,n=e.collectDescription,p=e.onSaveFile,m=e.onCancelCapture,f=E((0,r.useState)(""),2),d=f[0],_=f[1],v=E((0,r.useState)(""),2),g=v[0],b=v[1],h=(0,i.useTranslation)().t,y=E((0,r.useState)(!1),2),w=y[0],O=y[1];(0,r.useEffect)((function(){_(t.fileName),b(t.fileDescription)}),[t]);var j=(0,r.useCallback)((function(e){var n,r;e.preventDefault(),null==p||p((n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){A(e,t,n[t])}))}return e}({},t),r=null!=(r={fileName:d,fileDescription:g})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(r)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))})),n))}),[p,d,g,t]),P=(0,r.useCallback)((function(e){e.preventDefault(),null==m||m()}),[m]),C=(0,r.useCallback)((function(e){e.preventDefault(),""===e.target.value?O(!0):w&&O(!1),_(e.target.value)}),[O,_,w]),D=(0,r.useCallback)((function(e){e.preventDefault(),b(e.target.value)}),[b]);return a().createElement("form",{onSubmit:j},a().createElement("div",{className:x.overview},a().createElement("img",{src:"image"===t.fileType?t.fileContent:S,alt:"placeholder"}),a().createElement("div",{className:x.imageDetails},a().createElement("div",{className:x.captionFrame},a().createElement(c.Z,{id:"caption",autoFocus:!0,labelText:h("imageName","Image name"),autoComplete:"off",placeholder:h("attachmentCaptionInstruction","Enter caption"),onChange:C,required:!0,value:d,invalid:w,invalidText:w&&h("fieldRequired","This field is required")})),n&&a().createElement(s.Z,{id:"description",labelText:h("imageDescription","Image description"),autoComplete:"off",placeholder:h("attachmentCaptionInstruction","Enter caption"),value:g,onChange:D}))),a().createElement(o.UserHasAccess,{privilege:"Create Attachment"},a().createElement(l.Z,{className:x.buttonSetOverrides},a().createElement(u.Z,{kind:"secondary",size:"lg",onClick:P},h("cancel","Cancel")),a().createElement(u.Z,{type:"submit",size:"lg",onClick:j,disabled:w},h("addAttachment","Add attachment")))))};const I=function(e){var t=e.uploadedFiles,n=e.onSaveFile,o=e.onCancelCapture,c=(0,i.useTranslation)().t,s=E((0,r.useState)(1),2),l=s[0],u=s[1],p=E((0,r.useState)([]),2),m=p[0],f=p[1],d=(0,r.useCallback)((function(){l<t.length&&u(l+1)}),[u,l,t]),_=(0,r.useCallback)((function(e){l===t.length?n(D(m).concat([e])):(f((function(t){return D(t).concat([e])})),d())}),[d,f,t,m,l,n]);return a().createElement("div",{className:x.filePreviewContainer},a().createElement("h3",{className:x.paddedProductiveHeading03},c("addAttachment","Add Attachment")," ",t.length>1&&"(".concat(l," of ").concat(t.length,")")),a().createElement(T,{uploadedFile:t[l-1],onCancelCapture:o,onSaveFile:_,moveToNextFile:d,collectDescription:"image"===t[l-1].fileType}))}},7128:(e,t,n)=>{e.exports=n.p+"1caaa464bd9603a4341c.svg"},7896:(e,t,n)=>{function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:()=>r})}}]);