(globalThis.webpackChunk_openmrs_esm_patient_conditions_app=globalThis.webpackChunk_openmrs_esm_patient_conditions_app||[]).push([[477],{8897:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(272),o=n.n(i),r=n(2609),a=n.n(r)()(o());a.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-conditions__conditions-form__condition___MtDNj{padding:1rem .75rem}.-esm-patient-conditions__conditions-form__conditionsList___vV61x{margin-top:.25rem;background-color:#fff;max-height:14rem;overflow-y:auto;border:1px solid #e0e0e0}.-esm-patient-conditions__conditions-form__conditionsList___vV61x li:hover{background-color:#e0e0e0}.-esm-patient-conditions__conditions-form__emptyResults___OM1Oc{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#525252;min-height:1rem}.-esm-patient-conditions__conditions-form__form___MGII0{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 6rem)}.-esm-patient-conditions__conditions-form__formContainer___l5mME{margin:1rem}.-esm-patient-conditions__conditions-form__button___KDl_0{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-conditions__conditions-form__tablet___HOE67{padding:1.5rem 1rem;background-color:#fff}.-esm-patient-conditions__conditions-form__desktop___WGj2I{padding:0rem}.-esm-patient-conditions__conditions-form__loader___RRvjL{padding:1rem .5rem}.-esm-patient-conditions__conditions-form__conditionLabel___W2IX3{font-size:var(--cds-label-02-font-size, 0.875rem);font-weight:var(--cds-label-02-font-weight, 400);line-height:var(--cds-label-02-line-height, 1.28572);letter-spacing:var(--cds-label-02-letter-spacing, 0.16px)}.-esm-patient-conditions__conditions-form__errorContainer___cBeJ_{margin:1rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/conditions/conditions-form.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCpDF,6DACE,mBAAA,CAGF,kEACE,iBAAA,CACA,qBDRM,CCSN,gBAAA,CACA,eAAA,CACA,wBAAA,CAGF,2EACE,wBDdM,CCiBR,gECuzBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDrzBF,aDhBQ,CCiBR,eAAA,CAGF,wDACE,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,yBAAA,CAGF,iEACE,WAAA,CAGF,0DACE,WAAA,CACA,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAGF,0DACE,mBAAA,CACA,qBD7CM,CCgDR,2DACE,YAAA,CAGF,0DACE,kBAAA,CAGF,kECixBI,iDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CD7wBJ,kEACE,WAAA",sourceRoot:""}]),a.locals={condition:"-esm-patient-conditions__conditions-form__condition___MtDNj",conditionsList:"-esm-patient-conditions__conditions-form__conditionsList___vV61x",emptyResults:"-esm-patient-conditions__conditions-form__emptyResults___OM1Oc",form:"-esm-patient-conditions__conditions-form__form___MGII0",formContainer:"-esm-patient-conditions__conditions-form__formContainer___l5mME",button:"-esm-patient-conditions__conditions-form__button___KDl_0",tablet:"-esm-patient-conditions__conditions-form__tablet___HOE67",desktop:"-esm-patient-conditions__conditions-form__desktop___WGj2I",loader:"-esm-patient-conditions__conditions-form__loader___RRvjL",conditionLabel:"-esm-patient-conditions__conditions-form__conditionLabel___W2IX3",errorContainer:"-esm-patient-conditions__conditions-form__errorContainer___cBeJ_"};const s=a},2609:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,o,r){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<t.length;l++){var u=[].concat(t[l]);i&&a[u[0]]||(void 0!==r&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=r),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),e.push(u))}},e}},272:t=>{"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),r="/*# ".concat(o," */"),a=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[e].concat(a).concat([r]).join("\n")}return[e].join("\n")}},264:function(t){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(i,o,r){var a=o.prototype;r.utc=function(t){return new o({date:t,utc:!0,args:arguments})},a.utc=function(e){var n=r(this.toDate(),{locale:this.$L,utc:!0});return e?n.add(this.utcOffset(),t):n},a.local=function(){return r(this.toDate(),{locale:this.$L,utc:!1})};var s=a.parse;a.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),s.call(this,t)};var c=a.init;a.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else c.call(this)};var l=a.utcOffset;a.utcOffset=function(i,o){var r=this.$utils().u;if(r(i))return this.$u?0:r(this.$offset)?l.call(this):this.$offset;if("string"==typeof i&&(i=function(t){void 0===t&&(t="");var i=t.match(e);if(!i)return null;var o=(""+i[0]).match(n)||["-",0,0],r=o[0],a=60*+o[1]+ +o[2];return 0===a?0:"+"===r?a:-a}(i),null===i))return this;var a=Math.abs(i)<=16?60*i:i,s=this;if(o)return s.$offset=a,s.$u=0===i,s;if(0!==i){var c=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(a+c,t)).$offset=a,s.$x.$localOffset=c}else s=this.utc();return s};var u=a.format;a.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return u.call(this,e)},a.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var d=a.toDate;a.toDate=function(t){return"s"===t&&this.$offset?r(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=a.diff;a.diff=function(t,e,n){if(t&&this.$u===t.$u)return f.call(this,t,e,n);var i=this.local(),o=r(t).local();return f.call(i,o,e,n)}}}()},6753:(t,e,n)=>{"use strict";n.d(e,{Z:()=>A});var i=n(1354),o=n.n(i),r=n(1583),a=n.n(r),s=n(7378),c=n.n(s),l=n(5993),u=n.n(l),d=n(4154),f=n.n(d),m=n(8141),p=n.n(m),v=n(8897),h={};h.styleTagTransform=p(),h.setAttributes=u(),h.insert=c().bind(null,"head"),h.domAPI=a(),h.insertStyleElement=f(),o()(v.Z,h);const A=v.Z&&v.Z.locals?v.Z.locals:void 0},1354:t=>{"use strict";var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var r={},a=[],s=0;s<t.length;s++){var c=t[s],l=i.base?c[0]+i.base:c[0],u=r[l]||0,d="".concat(l," ").concat(u);r[l]=u+1;var f=n(d),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==f)e[f].references++,e[f].updater(m);else{var p=o(m,i);i.byIndex=s,e.splice(s,0,{identifier:d,updater:p,references:1})}a.push(d)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var r=i(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<r.length;a++){var s=n(r[a]);e[s].references--}for(var c=i(t,o),l=0;l<r.length;l++){var u=n(r[l]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}r=c}}},7378:t=>{"use strict";var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},4154:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},5993:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},1583:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,o&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var r=n.sourceMap;r&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},8141:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},8477:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var i=n(268),o=n.n(i),r=(n(264),n(4924)),a=n(2444),s=n(4179),c=n(906),l=n(3444),u=n(6753);function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const m=function(t){var e=t.closeWorkspace,n=t.condition,d=t.formContext,m=t.patientUuid,p=(0,r.useTranslation)().t,v="tablet"===(0,c.useLayoutType)(),h=(0,i.useMemo)((function(){return new a.BehaviorSubject({isSubmitting:!1})}),[]),A=f((0,i.useState)(!1),2),_=A[0],g=A[1],C=f((0,i.useState)(!1),2),y=C[0],b=C[1],D=f((0,i.useState)(null),2),S=D[0],E=D[1],w=f((0,i.useState)(null),2),T=w[0],x=w[1];(0,i.useEffect)((function(){var t=h.pipe().subscribe((function(t){var e=t.isSubmitting;return b(e)}));return function(){return t.unsubscribe()}}),[h]);var I=(0,i.useCallback)((function(t){t.preventDefault(),h.next({isSubmitting:!0}),(S||T)&&h.next({isSubmitting:!1})}),[S,T,h]);return o().createElement(s.l09,{className:u.Z.form,onSubmit:I},o().createElement(l.default,{patientUuid:m,closeWorkspace:e,conditionToEdit:n,formContext:d,setErrorCreating:E,setErrorUpdating:x,setHasSubmissibleValue:g,submissionNotifier:h}),o().createElement("div",null,S?o().createElement("div",{className:u.Z.errorContainer},o().createElement(s.K0D,{className:u.Z.error,role:"alert",kind:"error",lowContrast:!0,title:p("errorCreatingCondition","Error creating condition"),subtitle:null==S?void 0:S.message})):null,T?o().createElement("div",{className:u.Z.errorContainer},o().createElement(s.K0D,{className:u.Z.error,role:"alert",kind:"error",lowContrast:!0,title:p("errorUpdatingCondition","Error updating condition"),subtitle:null==T?void 0:T.message})):null,o().createElement(s.uVA,{className:v?u.Z.tablet:u.Z.desktop},o().createElement(s.zxk,{className:u.Z.button,kind:"secondary",onClick:function(){return e()}},p("cancel","Cancel")),o().createElement(s.zxk,{className:u.Z.button,disabled:!_||_&&y,kind:"primary",type:"submit"},y?o().createElement(s.lSo,{description:p("saving","Saving")+"..."}):o().createElement("span",null,p("saveAndClose","Save & close"))))))}},3444:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>_});var i=n(5047),o=n.n(i),r=n(268),a=n.n(r),s=n(4924),c=n(3565),l=n.n(c),u=(n(264),n(4179)),d=n(906),f=n(3922),m=n(6753);function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function v(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,o)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var r=t.apply(e,n);function a(t){v(r,i,o,a,s,"next",t)}function s(t){v(r,i,o,a,s,"throw",t)}a(void 0)}))}}function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(r.push(i.value),!e||r.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const _=function(t){var e,n,i=t.closeWorkspace,c=t.conditionToEdit,p=t.formContext,v=t.patientUuid,_=t.setHasSubmissibleValue,g=t.setErrorCreating,C=t.setErrorUpdating,y=t.submissionNotifier,b=(0,s.useTranslation)().t,D=(0,f.l4)(v),S=D.conditions,E=D.mutate,w="editing"===p,T="tablet"===(0,d.useLayoutType)(),x=(0,d.useSession)(),I=null==S?void 0:S.find((function(t){return(null==t?void 0:t.id)===(null==c?void 0:c.id)})),k=function(t,e){var n;return null===(n=null==t?void 0:t.find((function(t){var n;return(null==t||null===(n=t.info)||void 0===n?void 0:n.header)===e})))||void 0===n?void 0:n.value},$=k(null==c?void 0:c.cells,"display"),M=k(null==c?void 0:c.cells,"clinicalStatus"),U=A((0,r.useState)(w?null==M?void 0:M.toLowerCase():"active"),2),B=U[0],O=U[1],L=A((0,r.useState)(null),2),N=L[0],j=L[1],Z=A((0,r.useState)(null),2),F=Z[0],R=Z[1],Y=A((0,r.useState)(w&&(null==I?void 0:I.onsetDateTime)?new Date(null==I?void 0:I.onsetDateTime):null),2),P=Y[0],H=Y[1],G=A((0,r.useState)(null),2),z=G[0],W=G[1],V=(0,f.sA)(N),q=V.searchResults,J=V.isSearching,K=B!==M||P!==new Date(null==I?void 0:I.onsetDateTime);(0,r.useEffect)((function(){w?_(!!K):w||_(!!z)}),[K,w,z,_]);var X=(0,r.useCallback)((function(t){W(t),j("")}),[]),Q=(0,r.useCallback)(h(o().mark((function t(){var e,n,r,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(z){t.next=3;break}return t.abrupt("return");case 3:return a={clinicalStatus:B,conceptId:null==z||null===(e=z.concept)||void 0===e?void 0:e.uuid,display:null==z||null===(n=z.concept)||void 0===n?void 0:n.display,endDate:F?l()(F).format():null,onsetDateTime:P?l()(P).format():null,patientId:v,userId:null==x||null===(r=x.user)||void 0===r?void 0:r.uuid},t.prev=4,t.next=7,(0,f.CL)(a);case 7:201===t.sent.status&&(E(),(0,d.showToast)({critical:!0,kind:"success",description:b("conditionNowVisible","It is now visible on the Conditions page"),title:b("conditionSaved","Condition saved")}),null==i||i()),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),g(t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),[B,i,F,E,P,v,z,null==x||null===(e=x.user)||void 0===e?void 0:e.uuid,g,b]),tt=(0,r.useCallback)(h(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(K){t.next=3;break}return t.abrupt("return");case 3:return n={clinicalStatus:K?B:M,conceptId:null==I?void 0:I.conceptId,display:$,endDate:F?l()(F).format():null,onsetDateTime:P?l()(P).format():null,patientId:v,userId:null==x||null===(e=x.user)||void 0===e?void 0:e.uuid},t.prev=4,t.next=7,(0,f.r4)(null==c?void 0:c.id,n);case 7:200===t.sent.status&&(E(),(0,d.showToast)({critical:!0,kind:"success",description:b("conditionNowVisible","It is now visible on the Conditions page"),title:b("conditionUpdated","Condition updated")}),i()),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),C(t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])}))),[B,i,null==c?void 0:c.id,$,M,F,K,null==I?void 0:I.conceptId,E,P,v,null==x||null===(n=x.user)||void 0===n?void 0:n.uuid,C,b]);return(0,r.useEffect)((function(){var t=y.subscribe((function(t){t.isSubmitting&&(w?tt():Q())}));return function(){return null==t?void 0:t.unsubscribe()}}),[Q,tt,w,y]),a().createElement("div",{className:m.Z.formContainer},a().createElement(u.Kqy,{gap:7},a().createElement(u.cwH,{legendText:b("condition","Condition")},w?a().createElement(u.lXp,{className:m.Z.conditionLabel},$):a().createElement(a().Fragment,null,a().createElement(u.olm,{size:"md",id:"conditionsSearch",labelText:b("enterCondition","Enter condition"),light:T,placeholder:b("searchConditions","Search conditions"),onChange:function(t){return j(t.target.value)},onClear:function(){return W(null)},disabled:w,value:w?$:N||(z?z.display:"")}),!N||z?null:J?a().createElement(u.lSo,{className:m.Z.loader,description:b("searching","Searching")+"..."}):q&&q.length?a().createElement("ul",{className:m.Z.conditionsList},null==q?void 0:q.map((function(t,e){return a().createElement("li",{role:"menuitem",className:m.Z.condition,key:e,onClick:function(){return X(t)}},t.display)}))):a().createElement(u.mh4,null,a().createElement(u.n9L,{className:m.Z.emptyResults},a().createElement("span",null,b("noResultsFor","No results for")," ",a().createElement("strong",null,'"',N,'"')))))),a().createElement(u.cwH,{legendText:""},a().createElement(u.Mtg,{id:"onsetDate",datePickerType:"single",dateFormat:"d/m/Y",light:T,maxDate:(new Date).toISOString(),placeholder:"dd/mm/yyyy",onChange:function(t){var e=A(t,1)[0];return H(e)},value:P},a().createElement(u.aj6,{id:"onsetDateInput",labelText:b("onsetDate","Onset date")}))),a().createElement(u.cwH,{legendText:b("currentStatus","Current status")},a().createElement(u.SYO,{defaultSelected:B,name:"clinicalStatus",valueSelected:B,orientation:"vertical",onChange:function(t){return O(t.toString())}},a().createElement(u.EUY,{id:"active",labelText:"Active",value:"active"}),a().createElement(u.EUY,{id:"inactive",labelText:"Inactive",value:"inactive"}))),"inactive"===B&&a().createElement(u.Mtg,{id:"endDate",datePickerType:"single",dateFormat:"d/m/Y",light:T,minDate:new Date(P).toISOString(),maxDate:l()().utc().format(),placeholder:"dd/mm/yyyy",onChange:function(t){var e=A(t,1)[0];return R(e)},value:F},a().createElement(u.aj6,{id:"endDateInput",labelText:b("endDate","End date")}))))}},3922:(t,e,n)=>{"use strict";n.d(e,{B6:()=>h,CL:()=>f,l4:()=>l,r4:()=>p,sA:()=>u});var i=n(5047),o=n.n(i),r=n(3255),a=n(906);function s(t,e,n,i,o,r,a){try{var s=t[r](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(i,o)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var r=t.apply(e,n);function a(t){s(r,i,o,a,c,"next",t)}function c(t){s(r,i,o,a,c,"throw",t)}a(void 0)}))}}function l(t){var e,n,i,o="".concat(a.fhirBaseUrl,"/Condition?patient=").concat(t,"&_count=100"),s=(0,r.ZP)(t?o:null,a.openmrsFetch),c=s.data,l=s.error,u=s.isLoading,f=s.isValidating,m=s.mutate,p=(null==c||null===(e=c.data)||void 0===e?void 0:e.total)>0?null==c||null===(n=c.data)||void 0===n?void 0:n.entry.map((function(t){return null!==(i=t.resource)&&void 0!==i?i:[]})).map(d).sort((function(t,e){return e.onsetDateTime>t.onsetDateTime?1:-1})):null;return{conditions:c?p:null,isError:l,isLoading:u,isValidating:f,mutate:m}}function u(t){var e,n,i=(0,a.useConfig)(),o=null==i?void 0:i.conditionConceptClassUuid,s="/ws/rest/v1/conceptsearch?conceptClasses=".concat(o,"&q=").concat(t),c=(0,r.ZP)(t?s:null,a.openmrsFetch),l=c.data,u=c.error,d=c.isLoading;return{searchResults:null!==(n=null==l||null===(e=l.data)||void 0===e?void 0:e.results)&&void 0!==n?n:[],error:u,isSearching:d}}function d(t){var e,n,i,o,r,a,s=null===(n=null==t||null===(e=t.clinicalStatus)||void 0===e?void 0:e.coding[0])||void 0===n?void 0:n.code;return{clinicalStatus:s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"",conceptId:null===(o=null==t||null===(i=t.code)||void 0===i?void 0:i.coding[0])||void 0===o?void 0:o.code,display:null===(a=null==t||null===(r=t.code)||void 0===r?void 0:r.coding[0])||void 0===a?void 0:a.display,onsetDateTime:null==t?void 0:t.onsetDateTime,recordedDate:null==t?void 0:t.recordedDate,id:null==t?void 0:t.id}}function f(t){return m.apply(this,arguments)}function m(){return(m=c(o().mark((function t(e){var n,i,r,s;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new AbortController,i="".concat(a.fhirBaseUrl,"/Condition"),r={clinicalStatus:{coding:[{system:"http://terminology.hl7.org/CodeSystem/condition-clinical",code:e.clinicalStatus}]},code:{coding:[{code:e.conceptId,display:e.display}]},endDate:e.endDate,onsetDateTime:e.onsetDateTime,recorder:{reference:"Practitioner/".concat(e.userId)},recordedDate:(new Date).toISOString(),resourceType:"Condition",subject:{reference:"Patient/".concat(e.patientId)}},t.next=5,(0,a.openmrsFetch)(i,{headers:{"Content-Type":"application/json"},method:"POST",body:r,signal:n.signal});case 5:return s=t.sent,t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t,e){return v.apply(this,arguments)}function v(){return(v=c(o().mark((function t(e,n){var i,r,s,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new AbortController,r="".concat(a.fhirBaseUrl,"/Condition/").concat(e),s={clinicalStatus:{coding:[{system:"http://terminology.hl7.org/CodeSystem/condition-clinical",code:n.clinicalStatus}]},code:{coding:[{code:n.conceptId,display:n.display}]},endDate:n.endDate,id:e,onsetDateTime:n.onsetDateTime,recorder:{reference:"Practitioner/".concat(n.userId)},recordedDate:(new Date).toISOString(),resourceType:"Condition",subject:{reference:"Patient/".concat(n.patientId)}},t.next=5,(0,a.openmrsFetch)(r,{headers:{"Content-Type":"application/json"},method:"PUT",body:s,signal:i.signal});case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(t){return A.apply(this,arguments)}function A(){return(A=c(o().mark((function t(e){var n,i,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new AbortController,i="".concat(a.fhirBaseUrl,"/Condition/").concat(e),t.next=4,(0,a.openmrsFetch)(i,{method:"DELETE",signal:n.signal});case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}}]);