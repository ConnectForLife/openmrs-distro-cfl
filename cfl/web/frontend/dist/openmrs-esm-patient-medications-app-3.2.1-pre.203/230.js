"use strict";(self.webpackChunk_openmrs_esm_patient_medications_app=self.webpackChunk_openmrs_esm_patient_medications_app||[]).push([[230],{4137:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(9601),a=n.n(i),o=n(2609),s=n.n(o)()(a());s.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-medications__medications-details-table__productiveHeading01___GVu_s{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px;margin-bottom:.5rem}.-esm-patient-medications__medications-details-table__productiveHeading02___qGLn7{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0;margin-bottom:1rem}.-esm-patient-medications__medications-details-table__productiveHeading03___OOYnS{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0;margin-bottom:1rem}.-esm-patient-medications__medications-details-table__productiveHeading04___n_Xv5{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0;margin-bottom:1rem}.-esm-patient-medications__medications-details-table__productiveHeading05___x49yR{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0;margin-bottom:1rem}.-esm-patient-medications__medications-details-table__productiveHeading06___Khhzg{font-size:2rem;font-weight:300;line-height:1.199;letter-spacing:0;margin-bottom:1.5rem}.-esm-patient-medications__medications-details-table__bodyShort01___I6pNA{font-size:.875rem;font-weight:400;line-height:1.29;letter-spacing:.16px}.-esm-patient-medications__medications-details-table__bodyShort02___avLo7{font-size:1rem;font-weight:400;line-height:1.375;letter-spacing:0}.-esm-patient-medications__medications-details-table__bodyLong01___CFwST{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px}.-esm-patient-medications__medications-details-table__bodyLong02___xikoO{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}.-esm-patient-medications__medications-details-table__label01___QnBIT{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.-esm-patient-medications__medications-details-table__caption01___XX9Dq{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px}.-esm-patient-medications__medications-details-table__clipTextWithEllipsis___VZLVJ{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.-esm-patient-medications__medications-details-table__widgetCard___BabjF{border:1px solid #e0e0e0}.-esm-patient-medications__medications-details-table__row___ILGo9 span{margin:auto}.-esm-patient-medications__medications-details-table__row___ILGo9 p{padding:.25rem 0}.-esm-patient-medications__medications-details-table__medicationRecord___yJ9tR{display:flex;flex-direction:column;justify-content:space-between}.-esm-patient-medications__medications-details-table__startDateColumn___zFCbn{height:100%;display:flex;flex-flow:column wrap;align-items:flex-start;justify-content:space-between;padding:.25rem 0}.-esm-patient-medications__medications-details-table__startDateColumn___zFCbn span{margin:0rem}.-esm-patient-medications__medications-details-table__dosage___Zp9Yn{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px;color:#161616}.-esm-patient-medications__medications-details-table__tooltip___lO0k6 svg{fill:#000}.-esm-patient-medications__medications-details-table__menuItem___WYEMt{max-width:none}",""]),s.locals={productiveHeading01:"-esm-patient-medications__medications-details-table__productiveHeading01___GVu_s",productiveHeading02:"-esm-patient-medications__medications-details-table__productiveHeading02___qGLn7",productiveHeading03:"-esm-patient-medications__medications-details-table__productiveHeading03___OOYnS",productiveHeading04:"-esm-patient-medications__medications-details-table__productiveHeading04___n_Xv5",productiveHeading05:"-esm-patient-medications__medications-details-table__productiveHeading05___x49yR",productiveHeading06:"-esm-patient-medications__medications-details-table__productiveHeading06___Khhzg",bodyShort01:"-esm-patient-medications__medications-details-table__bodyShort01___I6pNA",bodyShort02:"-esm-patient-medications__medications-details-table__bodyShort02___avLo7",bodyLong01:"-esm-patient-medications__medications-details-table__bodyLong01___CFwST",bodyLong02:"-esm-patient-medications__medications-details-table__bodyLong02___xikoO",label01:"-esm-patient-medications__medications-details-table__label01___QnBIT",caption01:"-esm-patient-medications__medications-details-table__caption01___XX9Dq",clipTextWithEllipsis:"-esm-patient-medications__medications-details-table__clipTextWithEllipsis___VZLVJ",widgetCard:"-esm-patient-medications__medications-details-table__widgetCard___BabjF",row:"-esm-patient-medications__medications-details-table__row___ILGo9",medicationRecord:"-esm-patient-medications__medications-details-table__medicationRecord___yJ9tR",startDateColumn:"-esm-patient-medications__medications-details-table__startDateColumn___zFCbn",dosage:"-esm-patient-medications__medications-details-table__dosage___Zp9Yn",tooltip:"-esm-patient-medications__medications-details-table__tooltip___lO0k6",menuItem:"-esm-patient-medications__medications-details-table__menuItem___WYEMt"};const r=s},7408:(e,t,n)=>{n.d(t,{BB:()=>s,TO:()=>r,Xm:()=>o,mv:()=>l,zj:()=>d});var i=n(9857),a=n(3066);function o(e,t,n){var o,s=(0,i.ZP)("/ws/rest/v1/order?patient=".concat(e,"&careSetting=").concat(n,"&status=").concat(t,"&v=").concat("custom:(uuid,dosingType,orderNumber,accessionNumber,patient:ref,action,careSetting:ref,previousOrder:ref,dateActivated,scheduledDate,dateStopped,autoExpireDate,orderType:ref,encounter:ref,orderer:(uuid,display,person:(display)),orderReason,orderReasonNonCoded,orderType,urgency,instructions,commentToFulfiller,drug:(uuid,name,strength,dosageForm:(display,uuid),concept),dose,doseUnits:ref,frequency:ref,asNeeded,asNeededCondition,quantity,quantityUnits:ref,numRefills,dosingInstructions,duration,durationUnits:ref,route:ref,brandName,dispenseAsWritten)"),a.openmrsFetch),r=s.data,d=s.error,l=s.isValidating,c=(null==r||null===(o=r.data)||void 0===o?void 0:o.results)?r.data.results.filter((function(e){return"Drug Order"===e.orderType.display})):null;return{data:r?c:null,isLoading:!r&&!d,isError:d,isValidating:l}}function s(e,t){return(0,a.openmrsFetch)("/ws/rest/v1/encounter?patient=".concat(e,"&order=desc&limit=1&v=custom:(uuid)"),{signal:t.signal})}function r(e,t){return(0,a.openmrsFetch)("/ws/rest/v1/drug?q=".concat(e,"&v=custom:(uuid,name,strength,dosageForm:(display,uuid),concept)"),{signal:null==t?void 0:t.signal})}function d(e,t){return(0,a.openmrsFetch)("/ws/rest/v1/concept/".concat(t,"?v=custom:(answers:(uuid,display))"),e)}function l(e,t){return(0,a.openmrsFetch)("/ws/rest/v1/order",{method:"POST",signal:null==t?void 0:t.signal,headers:{"Content-Type":"application/json"},body:e})}},5588:(e,t,n)=>{n.d(t,{Z:()=>Y});var i=n(9902),a=n.n(i),o=n(8011),s=n(258),r=n(59),d=n(321),l=n.n(d),c=n(1195),u=n.n(c),m=n(3275),_=n.n(m),p=n(7162),g=n.n(p),f=n(2094),b=n.n(f),y=n(757),h=n.n(y),v=n(4137),w={};w.styleTagTransform=h(),w.setAttributes=g(),w.insert=_().bind(null,"head"),w.domAPI=u(),w.insertStyleElement=b(),l()(v.Z,w);const D=v.Z&&v.Z.locals?v.Z.locals:void 0;var E=n(1145),C=n(9539),N=n(8532),I=n(160),T=n(364),x=n(7500),U=n(8345),R=n(1358),S=n(2427),k=n(3783),Z=n(7771),L=n(69),F=n(8967);function q(e,t){if(!e||!t)return"";var n=e.search(/\D/),i=+e.substring(0,n),a=e.search(/\//),o=e.substring(n);if(a>=0){o=e.substring(n,a);var s=e.substring(a+1).search(/\D/),r=+e.substr(a+1,s),d=e.substring(a+1+s);return"".concat(t," ").concat(o," (").concat(t/i*r," ").concat(d,")")}return"".concat(i*t," ").concat(o)}var O=n(4924);function H(e,t){return null==e&&null==t?0:null==e?-1:null==t?1:e<t?-1:e>t?1:0}var z=n(6027),A=n(7235),B=n(3771),P=n(3066),V=n(3565),j=n.n(V);function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function W(){return W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},W.apply(this,arguments)}function G(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e){var t=e.orderer;return a().createElement(Z.Z,{className:D.tooltip,align:"start",direction:"top",tooltipText:t,renderIcon:s.Z},t)}function X(e){var t=e.showDiscontinueButton,n=e.showModifyButton,o=e.showReorderButton,s=e.medication,r=e.items,d=e.setItems,l=(0,O.useTranslation)().t,c=r.some((function(e){return e.uuid===s.uuid})),u=(0,i.useCallback)((function(){d(G(r).concat([{uuid:s.uuid,previousOrder:null,action:"DISCONTINUE",drug:s.drug,dosage:{dosage:q(s.drug.strength,s.dose),numberOfPills:s.dose},dosageUnit:{uuid:s.doseUnits.uuid,name:s.doseUnits.display},frequency:{conceptUuid:s.frequency.uuid,name:s.frequency.display},route:{conceptUuid:s.route.uuid,name:s.route.display},encounterUuid:s.encounter.uuid,commonMedicationName:s.drug.name,isFreeTextDosage:"org.openmrs.FreeTextDosingInstructions"===s.dosingType,freeTextDosage:"org.openmrs.FreeTextDosingInstructions"===s.dosingType?s.dosingInstructions:"",patientInstructions:"org.openmrs.FreeTextDosingInstructions"!==s.dosingType?s.dosingInstructions:"",asNeeded:s.asNeeded,asNeededCondition:s.asNeededCondition,startDate:s.dateActivated,duration:s.duration,durationUnit:{uuid:s.durationUnits.uuid,display:s.durationUnits.display},pillsDispensed:s.quantity,numRefills:s.numRefills,indication:s.orderReasonNonCoded}])),(0,B.launchPatientWorkspace)("order-basket-workspace")}),[r,d,s]),m=(0,i.useCallback)((function(){d(G(r).concat([{uuid:s.uuid,previousOrder:s.uuid,startDate:new Date,action:"REVISE",drug:s.drug,dosage:{dosage:q(s.drug.strength,s.dose),numberOfPills:s.dose},dosageUnit:{uuid:s.doseUnits.uuid,name:s.doseUnits.display},frequency:{conceptUuid:s.frequency.uuid,name:s.frequency.display},route:{conceptUuid:s.route.uuid,name:s.route.display},encounterUuid:s.encounter.uuid,commonMedicationName:s.drug.name,isFreeTextDosage:"org.openmrs.FreeTextDosingInstructions"===s.dosingType,freeTextDosage:"org.openmrs.FreeTextDosingInstructions"===s.dosingType?s.dosingInstructions:"",patientInstructions:"org.openmrs.FreeTextDosingInstructions"!==s.dosingType?s.dosingInstructions:"",asNeeded:s.asNeeded,asNeededCondition:s.asNeededCondition,duration:s.duration,durationUnit:{uuid:s.durationUnits.uuid,display:s.durationUnits.display},pillsDispensed:s.quantity,numRefills:s.numRefills,indication:s.orderReasonNonCoded}])),(0,B.launchPatientWorkspace)("order-basket-workspace")}),[r,d,s]),_=(0,i.useCallback)((function(){d(G(r).concat([{uuid:s.uuid,previousOrder:null,startDate:new Date,action:"RENEWED",drug:s.drug,dosage:{dosage:q(s.drug.strength,s.dose),numberOfPills:s.dose},dosageUnit:{uuid:s.doseUnits.uuid,name:s.doseUnits.display},frequency:{conceptUuid:s.frequency.uuid,name:s.frequency.display},route:{conceptUuid:s.route.uuid,name:s.route.display},encounterUuid:s.encounter.uuid,commonMedicationName:s.drug.name,isFreeTextDosage:"org.openmrs.FreeTextDosingInstructions"===s.dosingType,freeTextDosage:"org.openmrs.FreeTextDosingInstructions"===s.dosingType?s.dosingInstructions:"",patientInstructions:"org.openmrs.FreeTextDosingInstructions"!==s.dosingType?s.dosingInstructions:"",asNeeded:s.asNeeded,asNeededCondition:s.asNeededCondition,duration:s.duration,durationUnit:{uuid:s.durationUnits.uuid,display:s.durationUnits.display},pillsDispensed:s.quantity,numRefills:s.numRefills,indication:s.orderReasonNonCoded}])),(0,B.launchPatientWorkspace)("order-basket-workspace")}),[r,d,s]);return a().createElement(L.Z,{selectorPrimaryFocus:"#modify",flipped:!0},n&&a().createElement(F.Z,{className:D.menuItem,id:"modify",itemText:l("modify","Modify"),onClick:m,disabled:c}),o&&a().createElement(F.Z,{className:D.menuItem,id:"reorder",itemText:l("reorder","Reorder"),onClick:_,disabled:c}),t&&a().createElement(F.Z,{className:D.menuItem,id:"discontinue",itemText:l("discontinue","Discontinue"),onClick:u,disabled:c,isDelete:!0,hasDivider:!0}))}const Y=(0,z.$)("items",A.R)((function(e){var t,n,i=e.isValidating,s=e.title,d=e.medications,l=e.showDiscontinueButton,c=e.showModifyButton,u=e.showReorderButton,m=e.showAddNewButton,_=e.items,p=e.setItems,g=(0,O.useTranslation)().t,f=a().useCallback((function(){return(0,B.launchPatientWorkspace)("order-basket-workspace")}),[]),b=[{key:"startDate",header:g("startDate","Start date"),isSortable:!0,isVisible:!0},{key:"details",header:g("details","Details"),isSortable:!0,isVisible:!0}],y=null==d?void 0:d.map((function(e,n){var i,o,s,d,l,c,u,m,_,p;return{id:"".concat(n),details:{sortKey:null===(i=e.drug)||void 0===i?void 0:i.name,content:a().createElement("div",{className:D.medicationRecord},a().createElement("div",null,a().createElement("p",{className:D.bodyLong01},a().createElement("strong",null,(0,r.Z)(null===(o=e.drug)||void 0===o?void 0:o.name))," — ",null===(s=e.drug)||void 0===s?void 0:s.strength.toLowerCase()," ","— ",null===(d=e.doseUnits)||void 0===d?void 0:d.display.toLowerCase()),a().createElement("p",{className:D.bodyLong01},a().createElement("span",{className:D.label01},g("dose","Dose").toUpperCase())," ",a().createElement("span",{className:D.dosage},q(null===(l=e.drug)||void 0===l?void 0:l.strength,e.dose).toLowerCase())," ","— ",null===(c=e.route)||void 0===c?void 0:c.display.toLowerCase()," — ",null===(u=e.frequency)||void 0===u?void 0:u.display.toLowerCase()," ","—"," ",e.duration?g("medicationDurationAndUnit","for {duration} {durationUnit}",{duration:e.duration,durationUnit:null===(m=e.durationUnits)||void 0===m?void 0:m.display.toLowerCase()}):g("medicationIndefiniteDuration","Indefinite duration").toLowerCase()," ",0!==e.numRefills&&a().createElement("span",null,a().createElement("span",{className:D.label01}," — ",g("refills","Refills").toUpperCase())," ",e.numRefills),e.dosingInstructions&&a().createElement("span",null," — ",e.dosingInstructions.toLocaleLowerCase()))),a().createElement("p",{className:D.bodyLong01},e.orderReasonNonCoded?a().createElement("span",null,a().createElement("span",{className:D.label01},g("indication","Indication").toUpperCase())," ",e.orderReasonNonCoded):null,e.quantity?a().createElement("span",null,a().createElement("span",{className:D.label01}," — ",g("quantity","Quantity").toUpperCase())," ",e.quantity):null,e.dateStopped?a().createElement("span",{className:D.bodyShort01},a().createElement("span",{className:D.label01},e.quantity?" — ":""," ",g("endDate","End date").toUpperCase())," ",(0,P.formatDate)(new Date(e.dateStopped))):null))},startDate:{sortKey:j()(e.dateActivated).toDate(),content:a().createElement("div",{className:D.startDateColumn},a().createElement("span",null,(0,P.formatDate)(new Date(e.dateActivated))),a().createElement(K,{orderer:null!==(t=null===(_=e.orderer)||void 0===_||null===(p=_.person)||void 0===p?void 0:p.display)&&void 0!==t?t:"--"}))}}}));return a().createElement("div",{className:D.widgetCard},a().createElement(B.CardHeader,{title:s},i?a().createElement("span",null,a().createElement(E.Z,null)):null,m&&a().createElement(C.Z,{kind:"ghost",renderIcon:o.Z,iconDescription:"Launch order basket",onClick:f},g("add","Add"))),a().createElement(N.ZP,{"data-floating-menu-container":!0,size:"short",headers:b,rows:y,isSortable:!0,sortRow:function(e,t,n){return n.sortDirection===n.sortStates.DESC?H(t.sortKey,e.sortKey):H(e.sortKey,t.sortKey)},overflowMenuOnHover:!1},(function(e){var t=e.rows,i=e.headers,o=e.getTableProps,s=e.getHeaderProps,r=e.getRowProps;return a().createElement(I.Z,null,a().createElement(T.Z,W({},o(),{useZebraStyles:!0}),a().createElement(x.Z,null,a().createElement(U.Z,null,i.map((function(e){return a().createElement(R.Z,W({},s({header:e,isSortable:e.isSortable})),e.header)})),a().createElement(R.Z,null))),a().createElement(S.Z,null,t.map((function(e,t){return a().createElement(U.Z,W({className:D.row},r({row:e})),e.cells.map((function(e){var t;return a().createElement(k.Z,{key:e.id},null!==(n=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==n?n:e.value)})),a().createElement(k.Z,{className:"bx--table-column-menu"},a().createElement(X,{showDiscontinueButton:l,showModifyButton:c,showReorderButton:u,medication:d[t],items:_,setItems:p})))})))))})))}))},7235:(e,t,n)=>{n.d(t,{R:()=>a,w:()=>i});var i=(0,n(3066).createGlobalStore)("drug-order-basket",{items:[]}),a={setItems:function(e,t){return{items:"function"==typeof t?t():t}}}}}]);