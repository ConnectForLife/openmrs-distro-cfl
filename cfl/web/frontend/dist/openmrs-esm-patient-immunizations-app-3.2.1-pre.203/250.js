"use strict";(self.webpackChunk_openmrs_esm_patient_immunizations_app=self.webpackChunk_openmrs_esm_patient_immunizations_app||[]).push([[250],{7513:(e,t,n)=>{n.d(t,{Z:()=>l});var i=n(9601),r=n.n(i),a=n(2609),o=n.n(a)()(r());o.push([e.id,"html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-patient-immunizations__immunizations-overview__skeleton___mkH4A{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}:root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-immunizations__immunizations-overview__widgetCard___ORNTb{border:1px solid #e0e0e0}.-esm-patient-immunizations__immunizations-overview__immunizationOverviewSummaryCard___sMaGc{margin:1.25rem 1.5rem}.-esm-patient-immunizations__immunizations-overview__immunizationMore___x829c{display:flex;align-items:center;border:none;padding:.625rem 1.625rem .625rem 1rem;background-color:var(--omrs-color-bg-medium-contrast);color:var(--omrs-color-ink-medium-contrast);cursor:pointer}.-esm-patient-immunizations__immunizations-overview__immunizationMore___x829c p{margin:0}",""]),o.locals={widgetCard:"-esm-patient-immunizations__immunizations-overview__widgetCard___ORNTb",immunizationOverviewSummaryCard:"-esm-patient-immunizations__immunizations-overview__immunizationOverviewSummaryCard___sMaGc",immunizationMore:"-esm-patient-immunizations__immunizations-overview__immunizationMore___x829c",skeleton:"-esm-patient-immunizations__immunizations-overview__skeleton___mkH4A"};const l=o},1756:(e,t,n)=>{n.d(t,{V:()=>d,j:()=>f});var i=n(3066),r=n(2449),a=n(772),o=n(468),l=n(4402),c=n(3012),s=n(3939),u=function(e){var t,n,r=null==e?void 0:e.resource,a=null==r?void 0:r.id,o=null==r||null===(t=r.manufacturer)||void 0===t?void 0:t.display,l=null==r?void 0:r.lotNumber,c=(null==r||null===(n=r.protocolApplied)||void 0===n?void 0:n.length)>0&&(null==r?void 0:r.protocolApplied[0]);return{immunizationObsUuid:a,manufacturer:o,lotNumber:l,sequenceLabel:null==c?void 0:c.series,sequenceNumber:null==c?void 0:c.doseNumberPositiveInt,occurrenceDateTime:(0,i.formatDate)(new Date(null==r?void 0:r.occurrenceDateTime)),expirationDate:(0,i.formatDate)(new Date(null==r?void 0:r.expirationDate))}},m=function(e){var t;return(0,r.Z)(null==e||null===(t=e.vaccineCode)||void 0===t?void 0:t.coding,(function(e){return(0,l.Z)(e.system)}))},d=function(e){var t=(0,o.Z)(e.entry,(function(e){var t;return null===(t=m(e.resource))||void 0===t?void 0:t.code}));return(0,c.Z)(t,(function(e){var t,n=(0,c.Z)(e,u),i=m(null===(t=e[0])||void 0===t?void 0:t.resource);return{vaccineName:null==i?void 0:i.display,vaccineUuid:null==i?void 0:i.code,existingDoses:(0,s.Z)(n,[function(e){return(0,a.Z)(e,"occurrenceDateTime")}],["desc"])}}))};function p(e,t){return{type:e,reference:"".concat(e,"/").concat(t)}}var f=function(e,t,n,r){return{resourceType:"Immunization",status:"completed",id:e.immunizationObsUuid,vaccineCode:{coding:[{code:e.vaccineUuid,display:e.vaccineName}]},patient:p("Patient",e.patientUuid),encounter:p("Encounter",t),occurrenceDateTime:(0,i.parseDate)(e.vaccinationDate),expirationDate:(0,i.parseDate)(e.expirationDate),location:p("Location",n),performer:[{actor:p("Practitioner",r)}],manufacturer:{display:e.manufacturer},lotNumber:e.lotNumber,protocolApplied:[{doseNumberPositiveInt:e.currentDose.sequenceNumber,series:e.currentDose.sequenceLabel}]}}},1250:(e,t,n)=>{n.r(t),n.d(t,{default:()=>q});var i=n(9902),r=n.n(i),a=n(8011),o=n(321),l=n.n(o),c=n(1195),s=n.n(c),u=n(3275),m=n.n(u),d=n(7162),p=n.n(d),f=n(2094),v=n.n(f),g=n(757),b=n.n(g),h=n(7513),y={};y.styleTagTransform=b(),y.setAttributes=p(),y.insert=m().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=v(),l()(h.Z,y);const _=h.Z&&h.Z.locals?h.Z.locals:void 0;var z=n(8580),w=n(1145),O=n(7030),k=n(160),P=n(4398),D=n(364),Z=n(7500),E=n(8345),S=n(1358),x=n(2427),j=n(3783),C=n(3771),N=n(4924),T=n(8108),A=n(3066);function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(){return M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},M.apply(this,arguments)}const q=function(e){e.patient;var t,n,i=e.patientUuid,o=e.basePath,l=(0,N.useTranslation)().t,c=l("immunizations","immunizations"),s=l("immunizations","Immunizations"),u=l("seeAll","See all"),m=window.spaBase+o+"/immunizations",d=(0,T.dv)(i),p=d.data,f=d.isError,v=d.isLoading,g=d.isValidating,b=(0,A.usePagination)(null!=p?p:[],5),h=b.results,y=b.goTo,q=b.currentPage,L=r().useCallback((function(){return(0,C.launchPatientWorkspace)("immunization-form-workspace")}),[]),U=[{key:"vaccineName",header:l("recentVaccination","Recent vaccination")},{key:"vaccinationDate",header:l("vaccinationDate","Vaccination date")}],X=r().useMemo((function(){return null==h?void 0:h.map((function(e,t){return n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){I(e,t,n[t])}))}return e}({},e),i=null!=(i={id:"".concat(t),vaccineName:e.vaccineName,vaccinationDate:"".concat((0,A.formatDate)((0,A.parseDate)(e.existingDoses[0].occurrenceDateTime),{day:!1,time:!1}))})?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n.push.apply(n,i)}return n}(Object(i)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})),n;var n,i}))}),[h]);return v?r().createElement(z.Z,{role:"progressbar"}):f?r().createElement(C.ErrorState,{error:f,headerTitle:s}):(null==p?void 0:p.length)?r().createElement("div",{className:_.widgetCard},r().createElement(C.CardHeader,{title:s},r().createElement("span",null,g?r().createElement(w.Z,null):null),r().createElement(O.Z,{kind:"ghost",renderIcon:a.Z,iconDescription:"Add immunizations",onClick:L},l("add","Add"))),r().createElement(k.Z,null,r().createElement(P.ZP,{headers:U,rows:X,isSortable:!0,size:"short"},(function(e){var i=e.rows,a=e.headers,o=e.getHeaderProps,l=e.getTableProps;return r().createElement(D.Z,M({},l(),{useZebraStyles:!0}),r().createElement(Z.Z,null,r().createElement(E.Z,null,a.map((function(e){var n;return r().createElement(S.Z,M({className:"".concat(_.productiveHeading01," ").concat(_.text02)},o({header:e,isSortable:e.isSortable})),null!==(t=null===(n=e.header)||void 0===n?void 0:n.content)&&void 0!==t?t:e.header)})))),r().createElement(x.Z,null,i.map((function(e){return r().createElement(E.Z,{key:e.id},e.cells.map((function(e){var t;return r().createElement(j.Z,{key:e.id},null!==(n=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==n?n:e.value)})))}))))}))),r().createElement(C.PatientChartPagination,{currentItems:h.length,onPageNumberChange:function(e){var t=e.page;return y(t)},pageNumber:q,pageSize:5,totalItems:p.length,dashboardLinkUrl:m,dashboardLinkLabel:u})):r().createElement(C.EmptyState,{displayText:c,headerTitle:s,launchForm:L})}},8108:(e,t,n)=>{n.d(t,{dv:()=>s,eu:()=>u,iX:()=>c}),n(5047);var i=n(9857),r=n(3066),a=n(9867),o=n(1756);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(){var e,t,n,o=(0,r.useConfig)().immunizationsConfig,c=null==o?void 0:o.vaccinesConceptSet,s=(t=c.split(":"),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw r}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=s[0],m=s[1],d="/ws/rest/v1/concept?source=".concat(u,"&code=").concat(m,"&v=full"),p="/ws/rest/v1/concept/".concat(c,"?v=full"),f=(0,i.ZP)((e=c,(0,a.Z)(e,":")?d:p),r.openmrsFetch),v=f.data,g=f.error;return{data:v?v.data.results[0]:null,isError:g,isLoading:!v&&!g}}function s(e){var t="".concat(r.fhirBaseUrl,"/Immunization?patient=").concat(e),n=(0,i.ZP)(t,r.openmrsFetch),a=n.data,l=n.error,c=n.isValidating,s=a?(0,o.V)(a.data):null;return{data:a?s:null,isError:l,isLoading:!a&&!l,isValidating:c}}function u(e,t,n,i){var a="".concat(r.fhirBaseUrl,"/Immunization");return n&&(a="".concat(a,"/").concat(n)),(0,r.openmrsFetch)(a,{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:i.signal})}}}]);