"use strict";(self.webpackChunk_openmrs_esm_patient_immunizations_app=self.webpackChunk_openmrs_esm_patient_immunizations_app||[]).push([[110],{237:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(9601),r=t.n(i),o=t(2609),a=t.n(o)()(r());a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-patient-immunizations__immunizations-detailed-summary__skeleton___alDyu{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}.-esm-patient-immunizations__immunizations-detailed-summary__widgetCard___THJK4{border:1px solid #e0e0e0}",""]),a.locals={widgetCard:"-esm-patient-immunizations__immunizations-detailed-summary__widgetCard___THJK4",skeleton:"-esm-patient-immunizations__immunizations-detailed-summary__skeleton___alDyu"};const s=a},1756:(e,n,t)=>{t.d(n,{V:()=>m,j:()=>g});var i=t(3066),r=t(2449),o=t(772),a=t(468),s=t(4402),c=t(3012),u=t(3939),l=function(e){var n,t,r=null==e?void 0:e.resource,o=null==r?void 0:r.id,a=null==r||null===(n=r.manufacturer)||void 0===n?void 0:n.display,s=null==r?void 0:r.lotNumber,c=(null==r||null===(t=r.protocolApplied)||void 0===t?void 0:t.length)>0&&(null==r?void 0:r.protocolApplied[0]);return{immunizationObsUuid:o,manufacturer:a,lotNumber:s,sequenceLabel:null==c?void 0:c.series,sequenceNumber:null==c?void 0:c.doseNumberPositiveInt,occurrenceDateTime:(0,i.formatDate)(new Date(null==r?void 0:r.occurrenceDateTime)),expirationDate:(0,i.formatDate)(new Date(null==r?void 0:r.expirationDate))}},d=function(e){var n;return(0,r.Z)(null==e||null===(n=e.vaccineCode)||void 0===n?void 0:n.coding,(function(e){return(0,s.Z)(e.system)}))},m=function(e){var n=(0,a.Z)(e.entry,(function(e){var n;return null===(n=d(e.resource))||void 0===n?void 0:n.code}));return(0,c.Z)(n,(function(e){var n,t=(0,c.Z)(e,l),i=d(null===(n=e[0])||void 0===n?void 0:n.resource);return{vaccineName:null==i?void 0:i.display,vaccineUuid:null==i?void 0:i.code,existingDoses:(0,u.Z)(t,[function(e){return(0,o.Z)(e,"occurrenceDateTime")}],["desc"])}}))};function f(e,n){return{type:e,reference:"".concat(e,"/").concat(n)}}var g=function(e,n,t,r){return{resourceType:"Immunization",status:"completed",id:e.immunizationObsUuid,vaccineCode:{coding:[{code:e.vaccineUuid,display:e.vaccineName}]},patient:f("Patient",e.patientUuid),encounter:f("Encounter",n),occurrenceDateTime:(0,i.parseDate)(e.vaccinationDate),expirationDate:(0,i.parseDate)(e.expirationDate),location:f("Location",t),performer:[{actor:f("Practitioner",r)}],manufacturer:{display:e.manufacturer},lotNumber:e.lotNumber,protocolApplied:[{doseNumberPositiveInt:e.currentDose.sequenceNumber,series:e.currentDose.sequenceLabel}]}}},2458:(e,n,t)=>{t.d(n,{s:()=>i});var i=new(t(2444).BehaviorSubject)(null)},8110:(e,n,t)=>{t.r(n),t.d(n,{default:()=>J});var i=t(9902),r=t.n(i),o=t(8011),a=t(739),s=t(7210),c=t(4248),u=t(7885),l=t(3282),d=t(4975),m=t(5441),f=t(130),g=Object.prototype.hasOwnProperty;const p=function(e){if(null==e)return!0;if((0,l.Z)(e)&&((0,u.Z)(e)||"string"==typeof e||"function"==typeof e.splice||(0,d.Z)(e)||(0,f.Z)(e)||(0,c.Z)(e)))return!e.length;var n=(0,s.Z)(e);if("[object Map]"==n||"[object Set]"==n)return!e.size;if((0,m.Z)(e))return!(0,a.Z)(e).length;for(var t in e)if(g.call(e,t))return!1;return!0};var v=t(7030),h=t(4398),b=(t(364),t(7500),t(8345),t(1358),t(2427),t(3783),t(3771)),y=t(4924),D=t(772);const _=function(e){return e&&e.length?e[0]:void 0};var z=t(3939),Z=t(321),w=t.n(Z),x=t(1195),T=t.n(x),k=t(3275),q=t.n(k),C=t(7162),S=t.n(C),N=t(2094),P=t.n(N),U=t(757),A=t.n(U),I=t(237),E={};E.styleTagTransform=A(),E.setAttributes=S(),E.insert=q().bind(null,"head"),E.domAPI=T(),E.insertStyleElement=P(),w()(I.Z,E);const L=I.Z&&I.Z.locals?I.Z.locals:void 0;var V=t(3066),j=t(8108),M=t(8580),X=t(1145),O=(t(8117),t(318),t(1683),t(3012)),B=t(2449),F=function(e,n){return new Date(n.occurrenceDateTime).getTime()-new Date(e.occurrenceDateTime).getTime()},H=t(2458);const J=function(e){var n,t,a,s,c,u=e.patientUuid,l=(e.basePath,(0,y.useTranslation)()),d=l.t,m=l.i18n,f=(0,V.useConfig)().immunizationsConfig,g=null==f?void 0:f.sequenceDefinitions,Z=d("immunizations","immunizations"),w=d("immunizations","Immunizations"),x=m.language.replace("_","-"),T=(window.spaBase,d("goToSummary","Go to Summary"),(0,j.iX)().data),k=(0,j.dv)(u),q=k.data,C=k.isError,S=k.isLoading,N=k.isValidating,P=(n=g,a=null==(t=T)?void 0:t.setMembers,s=(0,O.Z)(a,(function(e){var t={vaccineName:e.display,vaccineUuid:e.uuid,existingDoses:[]},i=(0,B.Z)(n,(function(n){return n.vaccineConceptUuid===e.uuid}));return t.sequences=null==i?void 0:i.sequences,t})),c=q||[],(0,O.Z)(s,(function(e){var n=(0,B.Z)(c,(function(n){return n.vaccineUuid===e.vaccineUuid}));return n&&(e.existingDoses=n.existingDoses),e}))),U=(0,z.Z)(P,[function(e){return(0,D.Z)(e,"existingDoses.length",0)}],["desc"]),A=r().useCallback((function(){return(0,b.launchPatientWorkspace)("immunization-form-workspace")}),[]),I=((0,i.useMemo)((function(){return[{key:"vaccine",header:d("vaccine","Vaccine")},{key:"recentVaccination",header:d("recentVaccination","Recent Vaccination")},{key:"add",header:""}]}),[d]),(0,i.useMemo)((function(){return null==U?void 0:U.map((function(e){var n,t,i,a=p(e.sequences)&&!p(e.existingDoses)?"".concat(d("singleDoseOn","Single Dose on")," ").concat(new Date(null===(n=_(e.existingDoses.sort(F)))||void 0===n?void 0:n.occurrenceDateTime).toLocaleDateString(x,{dateStyle:"medium"})):p(e.existingDoses)?"":"".concat(null===(t=_(null==e?void 0:e.sequences))||void 0===t?void 0:t.sequenceLabel," on ").concat(new Date(null===(i=_(e.existingDoses.sort(F)))||void 0===i?void 0:i.occurrenceDateTime).toLocaleDateString(x,{dateStyle:"medium"})," ");return{id:e.vaccineUuid,vaccine:e.vaccineName,recentVaccination:a,add:r().createElement(v.Z,{kind:"ghost",renderIcon:o.Z,iconDescription:"Add",onClick:function(){H.s.next({vaccineName:e.vaccineName,vaccineUuid:e.vaccineUuid,sequences:null==e?void 0:e.sequences,existingDoses:null==e?void 0:e.existingDoses,immunizationObsUuid:null==e?void 0:e.immunizationObsUuid,manufacturer:e.manufacturer,lotNumber:e.lotNumber,expirationDate:e.expirationDate,currentDose:{sequenceLabel:e.sequenceLabel,sequenceNumber:e.sequenceNumber},vaccinationDate:e.occurrenceDateTime,formChanged:e.formChanged}),A()}})}}))}),[U,d,x,A])),E=(0,V.usePagination)(I,10),J=E.results;return E.currentPage,E.goTo,S||!U?r().createElement(M.Z,{role:"progressbar"}):C?r().createElement(b.ErrorState,{error:C,headerTitle:w}):((null==U?void 0:U.length)&&(L.widgetCard,b.CardHeader,N&&X.Z,v.Z,o.Z,d("add","Add"),h.ZP,b.PatientChartPagination,null==I||I.length,null==J||J.length),r().createElement(b.EmptyState,{displayText:Z,headerTitle:w,launchForm:A}))}},8108:(e,n,t)=>{t.d(n,{dv:()=>u,eu:()=>l,iX:()=>c}),t(5047);var i=t(9857),r=t(3066),o=t(9867),a=t(1756);function s(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function c(){var e,n,t,a=(0,r.useConfig)().immunizationsConfig,c=null==a?void 0:a.vaccinesConceptSet,u=(n=c.split(":"),t=2,function(e){if(Array.isArray(e))return e}(n)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var i,r,o=[],a=!0,s=!1;try{for(t=t.call(e);!(a=(i=t.next()).done)&&(o.push(i.value),!n||o.length!==n);a=!0);}catch(e){s=!0,r=e}finally{try{a||null==t.return||t.return()}finally{if(s)throw r}}return o}}(n,t)||function(e,n){if(e){if("string"==typeof e)return s(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,n):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=u[0],d=u[1],m="/ws/rest/v1/concept?source=".concat(l,"&code=").concat(d,"&v=full"),f="/ws/rest/v1/concept/".concat(c,"?v=full"),g=(0,i.ZP)((e=c,(0,o.Z)(e,":")?m:f),r.openmrsFetch),p=g.data,v=g.error;return{data:p?p.data.results[0]:null,isError:v,isLoading:!p&&!v}}function u(e){var n="".concat(r.fhirBaseUrl,"/Immunization?patient=").concat(e),t=(0,i.ZP)(n,r.openmrsFetch),o=t.data,s=t.error,c=t.isValidating,u=o?(0,a.V)(o.data):null;return{data:o?u:null,isError:s,isLoading:!o&&!s,isValidating:c}}function l(e,n,t,i){var o="".concat(r.fhirBaseUrl,"/Immunization");return t&&(o="".concat(o,"/").concat(t)),(0,r.openmrsFetch)(o,{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:i.signal})}}}]);