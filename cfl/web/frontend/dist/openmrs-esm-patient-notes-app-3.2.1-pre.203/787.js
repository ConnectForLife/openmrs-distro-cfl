"use strict";(self.webpackChunk_openmrs_esm_patient_notes_app=self.webpackChunk_openmrs_esm_patient_notes_app||[]).push([[787],{1368:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(9601),r=n.n(o),i=n(2609),a=n.n(i)()(r());a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-patient-notes__notes-overview__skeleton___jLMTi{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}.-esm-patient-notes__notes-overview__widgetCard___WzB_a{border:1px solid #e0e0e0}.-esm-patient-notes__notes-overview__expandedRow___DPijZ>td{padding-left:2.5rem !important}.-esm-patient-notes__notes-overview__expandedRow___DPijZ>td>div{max-height:max-content !important}.-esm-patient-notes__notes-overview__expandedRow___DPijZ th[colspan] td[colspan]>div:first-child{padding:0 1rem}.-esm-patient-notes__notes-overview__copy___bAAS0{font-size:.875rem;font-weight:400;line-height:1.43;letter-spacing:.16px;color:#161616;display:flex;flex-direction:column}.-esm-patient-notes__notes-overview__container___BxDZw{margin:.5rem}.-esm-patient-notes__notes-overview__metadata___dsa2Y{font-size:.75rem;font-weight:400;line-height:1.34;letter-spacing:.32px;color:#525252;margin:.5rem 0}.-esm-patient-notes__notes-overview__hiddenRow___EdPRM{display:none}",""]),a.locals={widgetCard:"-esm-patient-notes__notes-overview__widgetCard___WzB_a",expandedRow:"-esm-patient-notes__notes-overview__expandedRow___DPijZ",copy:"-esm-patient-notes__notes-overview__copy___bAAS0",container:"-esm-patient-notes__notes-overview__container___BxDZw",metadata:"-esm-patient-notes__notes-overview__metadata___dsa2Y",hiddenRow:"-esm-patient-notes__notes-overview__hiddenRow___EdPRM",skeleton:"-esm-patient-notes__notes-overview__skeleton___jLMTi"};const s=a},4787:(e,t,n)=>{n.d(t,{Z:()=>F});var o=n(9902),r=n.n(o),i=n(8011),a=n(4924),s=n(8580),l=n(182),c=n(7030),d=n(3066),u=n(3771),p=n(3236),m=n(4919),f=n(160),g=n(364),v=n(7500),_=n(8804),h=n(8117),b=n(1358),y=n(2427),w=n(318),P=n(3783),E=n(1683),k=n(321),Z=n.n(k),x=n(1195),O=n.n(x),j=n(3275),D=n.n(j),N=n(7162),C=n.n(N),S=n(2094),R=n.n(S),z=n(757),T=n.n(z),M=n(1368),A={};A.styleTagTransform=T(),A.setAttributes=C(),A.insert=D().bind(null,"head"),A.domAPI=O(),A.insertStyleElement=R(),Z()(M.Z,A);const L=M.Z&&M.Z.locals?M.Z.locals:void 0;function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(){return V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},V.apply(this,arguments)}const U=function(e){var t=e.notes,n=e.pageSize,o=e.pageUrl,i=e.urlLabel,s=(0,a.useTranslation)().t,l=(0,d.usePagination)(t,n),c=l.results,p=l.goTo,k=l.currentPage,Z=[{key:"encounterDate",header:s("date","Date")},{key:"diagnoses",header:s("diagnoses","Diagnoses")}],x=r().useMemo((function(){return null==c?void 0:c.map((function(e){return t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){q(e,t,n[t])}))}return e}({},e),n=null!=(n={id:"".concat(e.id),encounterDate:(0,d.formatDate)((0,d.parseDate)(e.encounterDate),{mode:"wide"})})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t;var t,n}))}),[c]);return r().createElement(r().Fragment,null,r().createElement(m.ZP,{rows:x,headers:Z,isSortable:!0,size:"short",useZebraStyles:!0},(function(e){var t=e.rows,n=e.headers,o=e.getTableProps,i=e.getTableContainerProps,a=e.getHeaderProps,l=e.getRowProps;return r().createElement(f.Z,V({},i),r().createElement(g.Z,V({},o()),r().createElement(v.Z,null,r().createElement(_.Z,null,r().createElement(h.Z,null),n.map((function(e,t){return r().createElement(b.Z,V({key:t,className:"".concat(L.productiveHeading01," ").concat(L.text02)},a({header:e})),e.header)})))),r().createElement(y.Z,null,t.map((function(e,t){var o,i,a,c,u;return r().createElement(r().Fragment,{key:e.id},r().createElement(w.Z,V({},l({row:e})),e.cells.map((function(e){return r().createElement(P.Z,{key:e.id},e.value)}))),e.isExpanded?r().createElement(E.Z,{className:L.expandedRow,colSpan:n.length+1},r().createElement("div",{className:L.container,key:t},(null==x||null===(o=x[t])||void 0===o?void 0:o.encounterNote)?r().createElement("div",{className:L.copy},r().createElement("span",{className:L.content},null==x||null===(i=x[t])||void 0===i?void 0:i.encounterNote),r().createElement("span",{className:L.metadata},(0,d.formatTime)(new Date(null==x||null===(a=x[t])||void 0===a?void 0:a.encounterNoteRecordedAt))," Â·"," ",null==x||null===(c=x[t])||void 0===c?void 0:c.encounterProvider,", ",null==x||null===(u=x[t])||void 0===u?void 0:u.encounterProviderRole)):r().createElement("span",{className:L.copy},s("noVisitNoteToDisplay","No visit note to display")))):r().createElement(E.Z,{className:L.hiddenRow,colSpan:n.length+2}))})))))})),r().createElement(u.PatientChartPagination,{pageNumber:k,totalItems:t.length,currentItems:c.length,pageSize:n,onPageNumberChange:function(e){var t=e.page;return p(t)},dashboardLinkUrl:o,dashboardLinkLabel:i}))},F=function(e){var t=e.patientUuid,n=e.showAddNote,o=e.pageSize,m=e.urlLabel,f=e.pageUrl,g=(0,a.useTranslation)().t,v=(0,d.useVisit)(t).currentVisit,_=g("visitNotes","Visit notes"),h=g("visitNotes","Visit notes"),b=(0,p.q6)(t),y=b.visitNotes,w=b.isError,P=b.isLoading,E=b.isValidating,k=r().useCallback((function(){v?(0,u.launchPatientWorkspace)("visit-notes-form-workspace"):(0,u.launchStartVisitPrompt)()}),[v]);return r().createElement(r().Fragment,null,P?r().createElement(s.Z,{role:"progressbar"}):w?r().createElement(u.ErrorState,{error:w,headerTitle:h}):(null==y?void 0:y.length)?r().createElement("div",{className:L.widgetCard},r().createElement(u.CardHeader,{title:h},r().createElement("span",null,E?r().createElement(l.Z,null):null),n&&r().createElement(c.Z,{kind:"ghost",renderIcon:i.Z,iconDescription:"Add visit note",onClick:k},g("add","Add"))),r().createElement(U,{notes:y,pageSize:o,urlLabel:m,pageUrl:f})):r().createElement(u.EmptyState,{displayText:_,headerTitle:h,launchForm:k}))}},3236:(e,t,n)=>{n.d(t,{NC:()=>c,aH:()=>u,jm:()=>s,lu:()=>l,q6:()=>a});var o=n(9857),r=n(2188),i=n(3066);function a(e){var t,n,r=(0,i.useConfig)().visitNoteConfig,a=r.encounterNoteTextConceptUuid,s=r.problemListConceptUuid,l=r.visitDiagnosesConceptUuid,c="/ws/rest/v1/encounter?patient=".concat(e,"&obsConcept=").concat(l,"&v=").concat("custom:(uuid,display,encounterDatetime,patient,obs,encounterProviders:(uuid,display,encounterRole:(uuid,display),provider:(uuid,person:(uuid,display)))"),d=(0,o.ZP)(c,i.openmrsFetch),u=d.data,p=d.error,m=d.isValidating,f=null==u||null===(t=u.data)||void 0===t||null===(n=t.results)||void 0===n?void 0:n.map((function(e,t){var n,o,r,i,l,c,d;return{id:"".concat(t),diagnoses:e.obs.map((function(e){var t,n,o;return null===(n=null===(t=e.groupMembers)||void 0===t?void 0:t.find((function(e){return e.concept.uuid===s})))||void 0===n||null===(o=n.value)||void 0===o?void 0:o.display})).filter((function(e){return e})).join(", "),encounterDate:e.encounterDatetime,encounterNote:null===(n=e.obs.find((function(e){return e.concept.uuid===a})))||void 0===n?void 0:n.value,encounterNoteRecordedAt:null===(o=e.obs.find((function(e){return e.concept.uuid===a})))||void 0===o?void 0:o.obsDatetime,encounterProvider:null===(r=null==e?void 0:e.encounterProviders[0])||void 0===r||null===(i=r.provider)||void 0===i||null===(l=i.person)||void 0===l?void 0:l.display,encounterProviderRole:null===(c=null==e?void 0:e.encounterProviders[0])||void 0===c||null===(d=c.encounterRole)||void 0===d?void 0:d.display}}));return{visitNotes:u?f:null,isError:p,isLoading:!u&&!p,isValidating:m}}function s(e,t){return(0,i.openmrsFetch)("/ws/rest/v1/location/".concat(t),{signal:e.signal})}function l(e,t){return(0,i.openmrsFetch)("/ws/rest/v1/provider/".concat(t),{signal:e.signal})}function c(e){return(0,i.openmrsObservableFetch)("/coreapps/diagnoses/search.action?&term=".concat(e)).pipe((0,r.U)((function(e){return e.data})),(0,r.U)((function(e){return e.map(d)})))}function d(e){return{concept:e.concept,conceptReferenceTermCode:(t=e.concept.conceptMappings,t.find((function(e){return"ICD-10-WHO"===e.conceptReferenceTerm.conceptSource.name}))).conceptReferenceTerm.code,primary:!1,confirmed:!1};var t}function u(e,t){return(0,i.openmrsFetch)("/ws/rest/v1/encounter",{headers:{"Content-Type":"application/json"},method:"POST",body:t,signal:e.signal})}}}]);