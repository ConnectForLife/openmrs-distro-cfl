"use strict";(self.webpackChunk_openmrs_esm_fast_data_entry_app=self.webpackChunk_openmrs_esm_fast_data_entry_app||[]).push([[74],{4211:(t,e,n)=>{n.d(e,{Z:()=>u});var a=n(4422),r=n(1672),i=n.n(r),o=n(3397);function s(t,e,n,a,r,i,o){try{var s=t[i](o),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(a,r)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(a,r){var i=t.apply(e,n);function o(t){s(i,a,r,o,l,"next",t)}function l(t){s(i,a,r,o,l,"throw",t)}o(void 0)}))}}var c=function(t,e){var n,a,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=e.call(t,o)}catch(t){i=[6,t],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};const u=function(t){var e,n=t.open,r=t.setOpen,s=t.context,u=(0,o.useTranslation)().t,d=(e=l((function(){return c(this,(function(t){switch(t.label){case 0:return[4,s.destroySession()];case 1:return t.sent(),[2]}}))})),function(){return e.apply(this,arguments)}),f=function(){var t=l((function(){return c(this,(function(t){switch(t.label){case 0:return[4,s.closeSession()];case 1:return t.sent(),[2]}}))}));return function(){return t.apply(this,arguments)}}();return i().createElement(a.ComposedModal,{open:n},i().createElement(a.ModalHeader,null,u("areYouSure","Are you sure?")),i().createElement(a.ModalBody,null,u("cancelExplanation","You will lose any unsaved changes on the current form. Do you want to discard the current session?")),i().createElement(a.ModalFooter,null,i().createElement(a.Button,{kind:"secondary",onClick:function(){return r(!1)}},u("cancel","Cancel")),i().createElement(a.Button,{kind:"danger",onClick:d},u("discard","Discard")),i().createElement(a.Button,{kind:"primary",onClick:f},u("saveSession","Save Session"))))}},2223:(t,e,n)=>{n.d(e,{Z:()=>s});var a=n(4422),r=n(1672),i=n.n(r),o=n(3397);const s=function(t){var e=t.open,n=t.setOpen,r=t.context,s=t.validateFirst,l=void 0!==s&&s,c=(0,o.useTranslation)().t;return i().createElement(a.ComposedModal,{open:e},i().createElement(a.ModalHeader,null,c("areYouSure","Are you sure?")),i().createElement(a.ModalBody,null,c("saveExplanation","Do you want to save the current form and exit the workflow?")),i().createElement(a.ModalFooter,null,i().createElement(a.Button,{kind:"secondary",onClick:function(){return n(!1)}},c("cancel","Cancel")),i().createElement(a.Button,{kind:"primary",onClick:function(){l?r.validateForComplete():r.submitForComplete(),n(!1)}},c("complete","Complete"))))}},611:(t,e,n)=>{n.d(e,{Z:()=>l});var a=n(1672),r=n.n(a),i=n(1132),o=n(4439);function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}const l=function(t){var e=t.formUuid,n=t.patientUuid,l=t.visitUuid,c=t.visitTypeUuid,u=t.encounterUuid,d=t.handlePostResponse,f=t.handleEncounterCreate,_=t.handleOnValidate,m=(0,o.Z)(n);(0,a.useEffect)((function(){return function(){return(0,i.detach)("form-widget-slot","form-widget-slot")}}));var y,v,p=(y=(0,a.useState)(!0),v=2,function(t){if(Array.isArray(t))return t}(y)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(a=n.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){s=!0,r=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return i}}(y,v)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(y,v)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=p[0],b=p[1];return(0,a.useEffect)((function(){n&&e&&m&&(b(!1),setTimeout((function(){b(!0)})))}),[n,e,m]),r().createElement("div",null,h&&e&&n&&m&&r().createElement(i.ExtensionSlot,{name:"form-widget-slot",state:{view:"form",formUuid:e,visitUuid:null!=l?l:"",visitTypeUuid:null!=c?c:"",patientUuid:n,patient:m,encounterUuid:null!=u?u:"",closeWorkspace:function(){},handlePostResponse:d,handleEncounterCreate:f,handleOnValidate:_,showDiscardSubmitButtons:!1}}))}},9688:(t,e,n)=>{n.d(e,{Z:()=>l});var a=n(1672),r=n(3397),i=n(1132);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,r,i=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(a=n.next()).done)&&(i.push(a.value),!e||i.length!==e);o=!0);}catch(t){s=!0,r=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return i}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const l=function(t){var e=t.showSuccessNotification,n=void 0===e||e,o=t.showErrorNotification,l=void 0===o||o,c=(0,r.useTranslation)().t,u=s((0,a.useState)(!1),2),d=u[0],f=u[1],_=s((0,a.useState)(null),2),m=_[0],y=_[1],v=s((0,a.useState)(null),2),p=v[0],h=v[1],b=(0,a.useCallback)((function(t){var e,a;f(!1),h(!1),y(t),n&&(0,i.showToast)({critical:!0,kind:"success",description:c("visitStartedSuccessfully","".concat(null==t||null===(e=t.data)||void 0===e||null===(a=e.visitType)||void 0===a?void 0:a.display," started successfully")),title:c("visitStarted","Visit started")})}),[c,n]),w=(0,a.useCallback)((function(t){f(!1),y(!1),h(t),l&&(0,i.showNotification)({title:c("startVisitError","Error starting visit"),kind:"error",critical:!0,description:null==t?void 0:t.message})}),[c,l]);return{saveVisit:(0,a.useCallback)((function(t){var e={patient:t.patientUuid,startDatetime:t.startDatetime,stopDatetime:t.stopDatetime,visitType:t.visitType,location:t.location};(0,i.openmrsFetch)("/ws/rest/v1/visit",{method:"POST",body:e,headers:{"Content-Type":"application/json"}}).then(b).catch(w)}),[w,b]),updateEncounter:(0,a.useCallback)((function(t){(0,i.openmrsFetch)("/ws/rest/v1/encounter/"+t.uuid,{method:"POST",body:{visit:t.visit},headers:{"Content-Type":"application/json"}})}),[]),success:m,error:p,isSubmitting:d}}},1671:(t,e,n)=>{n.d(e,{Z:()=>k});var a=n(3133),r=n(1409),i=n(4422),o=n(1672),s=n.n(o),l=n(4439),c=n(3379),u=n.n(c),d=n(7795),f=n.n(d),_=n(569),m=n.n(_),y=n(3565),v=n.n(y),p=n(9216),h=n.n(p),b=n(4589),w=n.n(b),E=n(7018),S={};S.styleTagTransform=w(),S.setAttributes=v(),S.insert=m().bind(null,"head"),S.domAPI=f(),S.insertStyleElement=h(),u()(E.Z,S);const C=E.Z&&E.Z.locals?E.Z.locals:void 0;var g=function(t){var e=t.onClick,n=void 0===e?function(){}:e,a=t.active,r=t.children;return s().createElement("div",{onClick:n,className:"".concat(C.cardContainer," ").concat(!a&&C.inactiveCard),role:"button",tabIndex:0},r)};const k=function(t){var e,n,o,c,u,d,f,_=t.patientUuid,m=t.activePatientUuid,y=t.editEncounter,v=t.encounters,p=(0,l.Z)(_),h=null==p||null===(e=p.name)||void 0===e||null===(n=e[0])||void 0===n||null===(o=n.given)||void 0===o?void 0:o[0],b=null==p||null===(c=p.name)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.family,w=null==p||null===(d=p.identifier)||void 0===d||null===(f=d[0])||void 0===f?void 0:f.value;if(!p)return s().createElement(g,{active:!0},s().createElement(i.SkeletonText,{className:C.skeletonText}));var E=m===_;return s().createElement(g,{onClick:E?function(){}:function(){return y(_)},active:E},s().createElement("div",{className:C.patientInfo},s().createElement("div",{className:C.identifier},w),s().createElement("div",{className:"".concat(C.displayName," ").concat(E&&C.activeDisplayName)},h," ",b)),s().createElement("div",null,_ in v?s().createElement(a.Wz,{size:16,className:C.statusSuccess}):s().createElement(r.lw,{size:16,className:C.statusWarning})))}},7018:(t,e,n)=>{n.d(e,{Z:()=>i});var a=n(3645),r=n.n(a)()((function(t){return t[1]}));r.push([t.id,".-esm-fast-data-entry__styles__cardContainer___4G2XB{padding:1rem;display:flex;cursor:pointer}.-esm-fast-data-entry__styles__skeletonText___OTsMw{max-width:8rem}.-esm-fast-data-entry__styles__identifier___QX2jh{font-weight:300;font-size:.8rem;line-height:.9rem}.-esm-fast-data-entry__styles__displayName___LPMSY{font-weight:bold}.-esm-fast-data-entry__styles__activeDisplayName___38O3T{color:#4589ff}.-esm-fast-data-entry__styles__inactiveCard___VF8Fq:hover{background-color:#c6c6c6}.-esm-fast-data-entry__styles__patientInfo___1U6KC{flex-grow:1}.-esm-fast-data-entry__styles__statusSuccess___aKUxu{fill:#198038}.-esm-fast-data-entry__styles__statusWarning___F1leF{fill:#d2a106}",""]),r.locals={cardContainer:"-esm-fast-data-entry__styles__cardContainer___4G2XB",skeletonText:"-esm-fast-data-entry__styles__skeletonText___OTsMw",identifier:"-esm-fast-data-entry__styles__identifier___QX2jh",displayName:"-esm-fast-data-entry__styles__displayName___LPMSY",activeDisplayName:"-esm-fast-data-entry__styles__activeDisplayName___38O3T",inactiveCard:"-esm-fast-data-entry__styles__inactiveCard___VF8Fq",patientInfo:"-esm-fast-data-entry__styles__patientInfo___1U6KC",statusSuccess:"-esm-fast-data-entry__styles__statusSuccess___aKUxu",statusWarning:"-esm-fast-data-entry__styles__statusWarning___F1leF"};const i=r}}]);