"use strict";(globalThis.webpackChunk_openmrs_esm_patient_banner_app=globalThis.webpackChunk_openmrs_esm_patient_banner_app||[]).push([[53],{6674:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(272),r=n.n(a),i=n(2609),o=n.n(i)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-banner__patient-banner__container___ecRPF{border-top:.063rem solid #e0e0e0;border-bottom:.063rem solid #e0e0e0;background-color:#f4f4f4}.-esm-patient-banner__patient-banner__activePatientContainer___tskjN{background-color:#f4f4f4}.-esm-patient-banner__patient-banner__deceasedPatientContainer___C7l_Q{background-color:#393939}.-esm-patient-banner__patient-banner__deceasedPatientContainer___C7l_Q .-esm-patient-banner__patient-banner__patientName___OL0dB{color:#f4f4f4}.-esm-patient-banner__patient-banner__deceasedPatientContainer___C7l_Q .-esm-patient-banner__patient-banner__demographics___V1alp,.-esm-patient-banner__patient-banner__deceasedPatientContainer___C7l_Q .-esm-patient-banner__patient-banner__row___t0GLQ,.-esm-patient-banner__patient-banner__deceasedPatientContainer___C7l_Q .-esm-patient-banner__patient-banner__identifierTag___DGuqK,.-esm-patient-banner__patient-banner__deceasedPatientContainer___C7l_Q .-esm-patient-banner__patient-banner__identifier___gGse_,.-esm-patient-banner__patient-banner__deceasedPatientContainer___C7l_Q .-esm-patient-banner__patient-banner__contactDetails___uX5w3 .-esm-patient-banner__patient-banner__heading___Wphgj{color:#fff}.-esm-patient-banner__patient-banner__deceasedPatientContainer___C7l_Q .-esm-patient-banner__patient-banner__toggleContactDetailsButton___HZ72I,.-esm-patient-banner__patient-banner__deceasedPatientContainer___C7l_Q .-esm-patient-banner__patient-banner__toggleContactDetailsButton___HZ72I>svg,.-esm-patient-banner__patient-banner__deceasedPatientContainer___C7l_Q .-esm-patient-banner__patient-banner__actionsButtonText___r3Ahr{color:#78a9ff}.-esm-patient-banner__patient-banner__deceasedPatientContainer___C7l_Q:focus,.-esm-patient-banner__patient-banner__deceasedPatientContainer___C7l_Q:hover{background-color:#262626}.-esm-patient-banner__patient-banner__overflowMenuContainer___FYrIB{margin:-0.75rem 0}.-esm-patient-banner__patient-banner__patientBanner___jpW_m{display:flex}.-esm-patient-banner__patient-banner__patientName___OL0dB{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);margin-right:.25rem}.-esm-patient-banner__patient-banner__patientAvatar___CxTCp{width:5rem;height:5rem;margin:1rem;border-radius:1px}.-esm-patient-banner__patient-banner__patientAvatarButton___JLA2C{cursor:pointer;border:none;padding:0px;background:none}.-esm-patient-banner__patient-banner__patientInfo___rn9Ty{width:100%}.-esm-patient-banner__patient-banner__demographics___V1alp{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#525252;margin-top:.375rem}.-esm-patient-banner__patient-banner__row___t0GLQ{display:flex;flex-direction:row;justify-content:space-between;align-items:baseline}.-esm-patient-banner__patient-banner__patientNameRow___SJSwx{margin-top:.875rem}.-esm-patient-banner__patient-banner__flexRow___YJJkj{display:flex;flex-flow:row wrap;align-items:center}.-esm-patient-banner__patient-banner__identifiers___jRMNR{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#8d8d8d;display:flex;flex-wrap:wrap}.-esm-patient-banner__patient-banner__identifierTag___DGuqK{display:flex;align-items:center;margin-right:.75rem}.-esm-patient-banner__patient-banner__tag___xmTcg{margin:.25rem .25rem .25rem 0rem}.-esm-patient-banner__patient-banner__tooltipPadding___Cv7bZ{padding:.25rem}.-esm-patient-banner__patient-banner__tooltipSmallText___G1Y0F{font-size:80%}.-esm-patient-banner__patient-banner__actionsButtonText___r3Ahr{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#0f62fe}html[dir=rtl] .-esm-patient-banner__patient-banner__overflowMenuContainer___FYrIB>div{margin-left:unset;margin-right:-1.5rem}html[dir=rtl] .-esm-patient-banner__patient-banner__overflowMenuContainer___FYrIB>div>div{left:unset;right:-6.025rem}html[dir=rtl] .-esm-patient-banner__patient-banner__demographics___V1alp{display:flex;gap:.25rem}html[dir=rtl] .-esm-patient-banner__patient-banner__tag___xmTcg{margin:.25rem 0rem .25rem .25rem}html[dir=rtl] .-esm-patient-banner__patient-banner__patientName___OL0dB{margin-right:unset;margin-left:.25rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/banner/patient-banner.scss","webpack://./../../node_modules/@carbon/colors/index.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,wDACE,gCAAA,CACA,mCAAA,CACA,wBDPM,CCUR,qEACE,wBDXM,CCcR,uEACE,wBCkCQ,CDhCR,iIACE,aDlBI,CCqBN,wrBACE,UDrBI,CCwBN,2aACE,aCXM,CDcR,0JACE,wBCoBM,CDhBV,oEACE,iBAAA,CAGF,4DACE,YAAA,CAGF,0DEgyBI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CF9xBF,mBAAA,CAGF,4DACE,UAAA,CACA,WAAA,CACA,WAAA,CACA,iBAAA,CAGF,kEACE,cAAA,CACA,WAAA,CACA,WAAA,CACA,eAAA,CAGF,0DACE,UAAA,CAGF,2DEywBI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CFvwBF,aD9DQ,CC+DR,kBAAA,CAGF,kDACE,YAAA,CACA,kBAAA,CACA,6BAAA,CACA,oBAAA,CAGF,6DACE,kBAAA,CAGF,sDACE,YAAA,CACA,kBAAA,CACA,kBAAA,CAGF,0DEkvBI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CFhvBF,aDvFM,CCwFN,YAAA,CACA,cAAA,CAGF,4DACE,YAAA,CACA,kBAAA,CACA,mBAAA,CAIF,kDACE,gCAAA,CAGF,6DACE,cAAA,CAGF,+DACE,aAAA,CAGF,gEEwtBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CFttBF,aD/Fe,CCqGb,sFACE,iBAAA,CACA,oBAAA,CACA,0FACE,UAAA,CACA,eAAA,CAKN,yEACE,YAAA,CACA,UAAA,CAGF,gEACE,gCAAA,CAGF,wEACE,kBAAA,CACA,kBAAA",sourceRoot:""}]),o.locals={container:"-esm-patient-banner__patient-banner__container___ecRPF",activePatientContainer:"-esm-patient-banner__patient-banner__activePatientContainer___tskjN",deceasedPatientContainer:"-esm-patient-banner__patient-banner__deceasedPatientContainer___C7l_Q",patientName:"-esm-patient-banner__patient-banner__patientName___OL0dB",demographics:"-esm-patient-banner__patient-banner__demographics___V1alp",row:"-esm-patient-banner__patient-banner__row___t0GLQ",identifierTag:"-esm-patient-banner__patient-banner__identifierTag___DGuqK",identifier:"-esm-patient-banner__patient-banner__identifier___gGse_",contactDetails:"-esm-patient-banner__patient-banner__contactDetails___uX5w3",heading:"-esm-patient-banner__patient-banner__heading___Wphgj",toggleContactDetailsButton:"-esm-patient-banner__patient-banner__toggleContactDetailsButton___HZ72I",actionsButtonText:"-esm-patient-banner__patient-banner__actionsButtonText___r3Ahr",overflowMenuContainer:"-esm-patient-banner__patient-banner__overflowMenuContainer___FYrIB",patientBanner:"-esm-patient-banner__patient-banner__patientBanner___jpW_m",patientAvatar:"-esm-patient-banner__patient-banner__patientAvatar___CxTCp",patientAvatarButton:"-esm-patient-banner__patient-banner__patientAvatarButton___JLA2C",patientInfo:"-esm-patient-banner__patient-banner__patientInfo___rn9Ty",patientNameRow:"-esm-patient-banner__patient-banner__patientNameRow___SJSwx",flexRow:"-esm-patient-banner__patient-banner__flexRow___YJJkj",identifiers:"-esm-patient-banner__patient-banner__identifiers___jRMNR",tag:"-esm-patient-banner__patient-banner__tag___xmTcg",tooltipPadding:"-esm-patient-banner__patient-banner__tooltipPadding___Cv7bZ",tooltipSmallText:"-esm-patient-banner__patient-banner__tooltipSmallText___G1Y0F"};const s=o},6649:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(272),r=n.n(a),i=n(2609),o=n.n(i)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-banner__contact-details__contactDetailsContainer___GtWXt{color:#525252;width:100%;border-top:1px solid #e0e0e0;display:flex}.-esm-patient-banner__contact-details__contactDetailsContainer___GtWXt a{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);text-decoration:none}.-esm-patient-banner__contact-details__heading___Wn1cM{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);color:#525252}.-esm-patient-banner__contact-details__deceased___SxeyH .-esm-patient-banner__contact-details__contactDetails___WcOBT,.-esm-patient-banner__contact-details__deceased___SxeyH .-esm-patient-banner__contact-details__heading___Wn1cM,.-esm-patient-banner__contact-details__deceased___SxeyH .-esm-patient-banner__contact-details__row___TsP8B,.-esm-patient-banner__contact-details__deceased___SxeyH .-esm-patient-banner__contact-details__row___TsP8B>.-esm-patient-banner__contact-details__col___K6cAe{color:#fff}.-esm-patient-banner__contact-details__deceased___SxeyH a{color:#78a9ff}.-esm-patient-banner__contact-details__row___TsP8B{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);display:flex;flex:1}.-esm-patient-banner__contact-details__row___TsP8B>.-esm-patient-banner__contact-details__col___K6cAe{flex:1;padding:1rem 1rem}.-esm-patient-banner__contact-details__row___TsP8B li{margin:.5rem 0}.-esm-patient-banner__contact-details__relationship___jewSg{display:flex;flex-flow:row nowrap}.-esm-patient-banner__contact-details__relationship___jewSg div{flex:1 1}.-esm-patient-banner__contact-details__tabletSizeBanner___QQqvw{color:#525252;width:100%;border-top:1px solid #e0e0e0;display:flex;display:block}.-esm-patient-banner__contact-details__tabletSizeBanner___QQqvw a{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);text-decoration:none}.-esm-patient-banner__contact-details__tabletSizeBanner___QQqvw .-esm-patient-banner__contact-details__row___TsP8B:first-child{border-bottom:1px solid #e0e0e0}.-esm-patient-banner__contact-details__tabletSizeBanner___QQqvw .-esm-patient-banner__contact-details__row___TsP8B>.-esm-patient-banner__contact-details__col___K6cAe:nth-of-type(2n + 1){border-right:1px solid #e0e0e0}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/contact-details/contact-details.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCvCF,uEAXE,aAAA,CACA,UAAA,CACA,4BAAA,CACA,YAAA,CAEA,yECg0BE,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD9zBA,oBAAA,CAQJ,uDCszBI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CDpzBF,aDjBQ,CCqBR,8eACE,UD1BI,CC6BN,0DACE,aDhBW,CCoBf,mDCuyBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDryBF,YAAA,CACA,MAAA,CAGF,sGACE,MAAA,CACA,iBAAA,CAGF,sDACE,cAAA,CAGF,4DACE,YAAA,CACA,oBAAA,CAEA,gEACE,QAAA,CAIJ,gEAtDE,aAAA,CACA,UAAA,CACA,4BAAA,CACA,YAAA,CAqDA,aAAA,CAnDA,kECg0BE,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD9zBA,oBAAA,CAoDA,+HACA,+BAAA,CAKA,0LACE,8BAAA",sourceRoot:""}]),o.locals={contactDetailsContainer:"-esm-patient-banner__contact-details__contactDetailsContainer___GtWXt",heading:"-esm-patient-banner__contact-details__heading___Wn1cM",deceased:"-esm-patient-banner__contact-details__deceased___SxeyH",contactDetails:"-esm-patient-banner__contact-details__contactDetails___WcOBT",row:"-esm-patient-banner__contact-details__row___TsP8B",col:"-esm-patient-banner__contact-details__col___K6cAe",relationship:"-esm-patient-banner__contact-details__relationship___jewSg",tabletSizeBanner:"-esm-patient-banner__contact-details__tabletSizeBanner___QQqvw"};const s=o},8333:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(272),r=n.n(a),i=n(2609),o=n.n(i)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-banner__overflow-menu__container___dRXW5{margin-top:-1.25rem;margin-left:-1.5rem;width:auto;height:auto}.-esm-patient-banner__overflow-menu__menu___SHQYw{display:none;top:3.125rem;min-width:initial;left:auto;right:0;background-color:#f4f4f4;margin-right:.2rem;box-shadow:0 6px 6px rgba(0,0,0,.3)}.-esm-patient-banner__overflow-menu__show___hAAhj{display:block}.-esm-patient-banner__overflow-menu__overflowMenuButton___meRmh{width:auto;height:auto;padding:.875rem 1rem;color:#0f62fe}.-esm-patient-banner__overflow-menu__overflowMenuButton___meRmh:hover{background-color:#e8e8e8}.-esm-patient-banner__overflow-menu__deceased___MBoXd{color:#78a9ff}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/ui-components/overflow-menu.scss","webpack://./../../node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCpDF,uDACE,mBAAA,CACA,mBAAA,CACA,UAAA,CACA,WAAA,CAGF,kDACE,YAAA,CACA,YAAA,CACA,iBAAA,CACA,SAAA,CACA,OAAA,CACA,wBDhBM,CCiBN,kBAAA,CACA,mCAAA,CAGF,kDACE,aAAA,CAGF,gEACE,UAAA,CACA,WAAA,CACA,oBAAA,CACA,aCZQ,CDcR,sEACE,wBCsIY,CDlIhB,sDACE,aCtBQ",sourceRoot:""}]),o.locals={container:"-esm-patient-banner__overflow-menu__container___dRXW5",menu:"-esm-patient-banner__overflow-menu__menu___SHQYw",show:"-esm-patient-banner__overflow-menu__show___hAAhj",overflowMenuButton:"-esm-patient-banner__overflow-menu__overflowMenuButton___meRmh",deceased:"-esm-patient-banner__overflow-menu__deceased___MBoXd"};const s=o},4053:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var a=n(268),r=n.n(a),i=n(4924),o=n(4422),s=n(8043),l=n(2074),_=n(2870),c=n(3255);var A=n(2303),d=n(1354),u=n.n(d),m=n(1583),p=n.n(m),b=n(7378),C=n.n(b),f=n(5993),g=n.n(f),v=n(4154),h=n.n(v),w=n(8141),y=n.n(w),E=n(6649),B={};B.styleTagTransform=y(),B.setAttributes=g(),B.insert=C().bind(null,"head"),B.domAPI=p(),B.insertStyleElement=h(),u()(E.Z,B);const D=E.Z&&E.Z.locals?E.Z.locals:void 0;function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k=function(e){var t,n=e.patientUuid,s=(0,i.useTranslation)().t,l=function(e){var t,n=e?"ws/rest/v1/cohortm/cohortmember?patient=".concat(e,"&v=").concat("custom:(uuid,patient:ref,cohort:(uuid,name,startDate,endDate))"):null,r=(0,c.ZP)(n,_.openmrsFetch),i=r.data,o=r.isLoading,s=null==i||null===(t=i.data)||void 0===t?void 0:t.results.map((function(e){return{uuid:e.cohort.uuid,name:e.cohort.name,startDate:e.cohort.startDate,endDate:e.cohort.endDate}}));return(0,a.useMemo)((function(){return{cohorts:s,isLoading:o}}),[o,s])}(n),A=l.cohorts,d=void 0===A?[]:A,u=l.isLoading;return r().createElement(r().Fragment,null,r().createElement("p",{className:D.heading},s("patientLists","Patient Lists")," (",null!==(t=null==d?void 0:d.length)&&void 0!==t?t:0,")"),u?r().createElement(o.lSo,{description:"".concat(s("loading","Loading")," ..."),role:"progressbar"}):r().createElement("ul",null,function(){if((null==d?void 0:d.length)>0){var e=d.sort((function(e,t){return(0,_.parseDate)(e.startDate).getTime()-(0,_.parseDate)(t.startDate).getTime()})).slice(0,3);return null==e?void 0:e.map((function(e){return r().createElement("li",{key:e.uuid},r().createElement(_.ConfigurableLink,{to:"".concat(window.spaBase,"/home/patient-lists/").concat(e.uuid),key:e.uuid},e.name))}))}return r().createElement("li",null,"--")}(),r().createElement("li",{style:{marginTop:"1rem"}},r().createElement(_.ConfigurableLink,{to:"".concat(window.spaBase,"/home/patient-lists")},d.length>3?s("seeMoreLists","See {listCount} more lists",{listCount:(null==d?void 0:d.length)-3}):""))))},F=function(e){var t=e.address,n=(0,i.useTranslation)().t,a=(0,_.useConfig)().useCustomAddressLabel,o=null==a?void 0:a.enabled,s=null==a?void 0:a.customAddressLabel,l=function(e){return e.split("#")[1]};return r().createElement(r().Fragment,null,r().createElement("p",{className:D.heading},n("address","Address")),r().createElement("ul",null,t?r().createElement(r().Fragment,null,Object.entries(t).filter((function(e){var t=T(e,1)[0];return!["use","id"].some((function(e){return e===t}))})).map((function(e){var a,i=T(e,2),_=i[0],c=i[1];return"extension"===_?null==t||null===(a=t.extension[0])||void 0===a?void 0:a.extension.map((function(e,t){return r().createElement("li",{key:"address-".concat(_,"-").concat(t)},n(o?s[l(e.url)]:l(e.url)),": ",e.valueString)})):r().createElement("li",{key:"address-".concat(_)},n(o?s[_]:_),": ",c)}))):"--"))},S=function(e){var t=e.telecom,n=e.patientUuid,a=(0,i.useTranslation)().t,s=(null==t?void 0:t.length)?t[0].value:"--",l=function(e){var t=(0,_.useConfig)().contactAttributeType,n=function(e){var t,n,a,r,i,o=(0,A.Z)("/ws/rest/v1/patient/".concat(e,"?v=").concat("custom:(uuid,display,identifiers:(identifier,uuid,preferred,location:(uuid,name),identifierType:(uuid,name,format,formatDescription,validator)),person:(uuid,display,gender,birthdate,dead,age,deathDate,birthdateEstimated,causeOfDeath,preferredName:(uuid,preferred,givenName,middleName,familyName),attributes,preferredAddress:(uuid,preferred,address1,address2,cityVillage,longitude,stateProvince,latitude,country,postalCode,countyDistrict,address3,address4,address5,address6,address7)))"),_.openmrsFetch),s=o.data,l=o.error;return{isLoading:o.isLoading,attributes:null!==(r=null==s||null===(n=s.data)||void 0===n||null===(t=n.person)||void 0===t?void 0:t.attributes)&&void 0!==r?r:[],person:null!==(i=null==s||null===(a=s.data)||void 0===a?void 0:a.person)&&void 0!==i?i:null,error:l}}(e),a=n.attributes,r=n.isLoading,i=null==a?void 0:a.filter((function(e){var n=e.attributeType;return null==t?void 0:t.some((function(e){return(null==n?void 0:n.uuid)===e}))}));return{contactAttributes:null!=i?i:[],isLoading:r}}(n),c=l.isLoading,d=l.contactAttributes;return r().createElement(r().Fragment,null,r().createElement("p",{className:D.heading},a("contactDetails","Contact Details")),c?r().createElement(o.lSo,{description:"".concat(a("loading","Loading")," ..."),role:"progressbar"}):r().createElement("ul",null,s?r().createElement(r().Fragment,null,r().createElement("li",null,s),(null==d?void 0:d.length)>0&&d.map((function(e){var t=e.attributeType,n=e.value,a=e.uuid;return r().createElement("li",{key:a},t.display,": ",n)}))):r().createElement("li",null,"--")))},N=function(e){var t=e.patientId,n=(0,i.useTranslation)().t,s=function(e){var t,n=e?"/ws/rest/v1/relationship?person=".concat(e,"&v=").concat("custom:(display,uuid,personA:(uuid,age,display),personB:(uuid,age,display),relationshipType:(uuid,display,description,aIsToB,bIsToA))"):null,r=(0,c.ZP)(n,_.openmrsFetch),i=r.data,o=r.error,s=r.isLoading,l=r.isValidating,A=(0,a.useMemo)((function(){var t,n;return(null==i||null===(n=i.data)||void 0===n||null===(t=n.results)||void 0===t?void 0:t.length)?function(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var l=o.value;e===l.personA.uuid?n.push({uuid:l.uuid,display:l.personB.display,relativeAge:l.personB.age,relativeUuid:l.personB.uuid,relationshipType:l.relationshipType.bIsToA}):n.push({uuid:l.uuid,display:l.personA.display,relativeAge:l.personA.age,relativeUuid:l.personA.uuid,relationshipType:l.relationshipType.aIsToB})}}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,i.data.results):null}),[null==i||null===(t=i.data)||void 0===t?void 0:t.results,e]);return{data:A,isError:o,isLoading:s,isValidating:l}}(t),l=s.data,A=s.isLoading;return r().createElement(r().Fragment,null,r().createElement("p",{className:D.heading},n("relationships","Relationships")),A?r().createElement(o.lSo,{description:"".concat(n("loading","Loading")," ..."),role:"progressbar"}):r().createElement("ul",null,(null==l?void 0:l.length)>0?r().createElement(r().Fragment,null,l.map((function(e){return r().createElement("li",{key:e.uuid,className:D.relationship},r().createElement("div",null,(n=(t=e.display).match(/-\s*(.*)$/))&&n.length>1?n[1].trim():t.trim()),r().createElement("div",null,e.relationshipType),r().createElement("div",null,"".concat(e.relativeAge?e.relativeAge:"--"," ").concat(e.relativeAge?1===e.relativeAge?"yr":"yrs":"")));var t,n}))):r().createElement("li",null,"--")))};const I=function(e){var t=e.address,n=e.telecom,a=e.patientId,i=e.deceased,o=e.isTabletViewport,s=null==t?void 0:t.find((function(e){return"home"===e.use})),l="".concat(D[i&&"deceased"]," ").concat(D[o?"tabletSizeBanner":"contactDetailsContainer"]);return r().createElement("div",{className:l},r().createElement("div",{className:D.row},r().createElement("div",{className:D.col},r().createElement(F,{address:s})),r().createElement("div",{className:D.col},r().createElement(S,{telecom:n,patientUuid:a}))),r().createElement("div",{className:D.row},r().createElement("div",{className:D.col},r().createElement(N,{patientId:a})),r().createElement("div",{className:D.col},r().createElement(k,{patientUuid:a}))))};var P=n(8333),M={};M.styleTagTransform=y(),M.setAttributes=g(),M.insert=C().bind(null,"head"),M.domAPI=p(),M.insertStyleElement=h(),u()(P.Z,M);const G=P.Z&&P.Z.locals?P.Z.locals:void 0;function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const R=function(e){var t,n,i=e.dropDownMenu,o=e.menuTitle,s=e.children,l=e.deceased,c=(t=(0,a.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),A=c[0],d=c[1],u="tablet"===(0,_.useLayoutType)(),m=(0,a.useRef)(null);(0,a.useEffect)((function(){i||d((function(e){return e})),d((function(){return!1}))}),[i]);var p=(0,a.useCallback)((function(){return d((function(e){return!e}))}),[]);return(0,a.useEffect)((function(){var e=function(e){m.current&&!m.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[m]),r().createElement("div",{"data-overflow-menu":!0,className:"cds--overflow-menu ".concat(G.container),ref:m},r().createElement("button",{className:"cds--btn cds--btn--ghost cds--overflow-menu__trigger ".concat(A&&"cds--overflow-menu--open"," ").concat(l&&G.deceased," ").concat(G.overflowMenuButton),"aria-haspopup":"true","aria-expanded":A,id:"custom-actions-overflow-menu-trigger","aria-controls":"custom-actions-overflow-menu",onClick:p},o),r().createElement("div",{className:"cds--overflow-menu-options cds--overflow-menu--flip ".concat(G.menu," ").concat(A&&G.show),tabIndex:0,"data-floating-menu-direction":"bottom",role:"menu","aria-labelledby":"custom-actions-overflow-menu-trigger",id:"custom-actions-overflow-menu"},r().createElement("ul",{className:"cds--overflow-menu-options__content ".concat(u&&"cds--overflow-menu-options--lg")},s),r().createElement("span",null)))};var Q=n(6674),j={};j.styleTagTransform=y(),j.setAttributes=g(),j.insert=C().bind(null,"head"),j.domAPI=p(),j.insertStyleElement=h(),u()(Q.Z,j);const z=Q.Z&&Q.Z.locals?Q.Z.locals:void 0;function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){U(e,t,n[t])}))}return e}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const W=function(e){var t,n,c,A,d,u=e.patient,m=e.patientUuid,p=e.onClick,b=e.onTransition,C=e.hideActionsOverflow,f=(0,i.useTranslation)().t,g=(0,a.useRef)(null),v=(0,a.useRef)(null),h=Y((0,a.useState)(!1),2),w=h[0],y=h[1],E=(0,_.useConfig)().excludePatientIdentifierCodeTypes,B=(0,_.useConnectedExtensions)("patient-actions-slot");(0,a.useEffect)((function(){var e=v.current,t=new ResizeObserver((function(e){var t=!0,n=!1,a=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;y(o.contentRect.width<1023)}}catch(e){n=!0,a=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw a}}}));return t.observe(v.current),function(){e&&t.unobserve(e)}}),[v,y]);var D,x,T,k=(0,a.useMemo)((function(){return{patientUuid:m,onClick:p,onTransition:b}}),[m,p,b]),F="".concat(null==u||null===(c=u.name)||void 0===c||null===(n=c[0])||void 0===n||null===(t=n.given)||void 0===t?void 0:t.join(" ")," ").concat(null==u||null===(A=u.name)||void 0===A?void 0:A[0].family),S=(0,a.useMemo)((function(){return{patientUuid:m,patientName:F}}),[m,F]),N=Y((0,a.useState)(!1),2),P=N[0],M=N[1],G=(0,a.useCallback)((function(){M((function(e){return!e}))}),[]),L=Boolean(null==u?void 0:u.deceasedDateTime),Q=r().createElement("div",{className:z.patientAvatar,role:"img"},r().createElement(_.ExtensionSlot,{name:"patient-photo-slot",state:S})),j=(0,a.useCallback)((function(e){p&&(!(null==g?void 0:g.current)||!(null==g?void 0:g.current.contains(e.target)))&&p(m)}),[p,m]),O=Y((0,a.useState)(!1),2),U=O[0],W=O[1],q=(0,a.useCallback)((function(){W((function(e){return!e}))}),[]),H=(0,a.useMemo)((function(){return!C&&B.length>0}),[B.length,C]),X=null!==(D=null==u||null===(d=u.identifier)||void 0===d?void 0:d.filter((function(e){return!(null==E?void 0:E.uuids.includes(e.type.coding[0].code))})))&&void 0!==D?D:[];return r().createElement("div",{className:"".concat(z.container," ").concat(L?z.deceasedPatientContainer:z.activePatientContainer),role:"banner",ref:v},r().createElement("div",{onClick:j,tabIndex:0,role:"button",className:"".concat(z.patientBanner," ").concat(p&&z.patientAvatarButton)},Q,r().createElement("div",{className:z.patientInfo},r().createElement("div",{className:"".concat(z.row," ").concat(z.patientNameRow)},r().createElement("div",{className:z.flexRow},r().createElement("span",{className:z.patientName},F),r().createElement(_.ExtensionSlot,{name:"patient-banner-tags-slot",state:{patientUuid:m,patient:u},className:z.flexRow})),H&&r().createElement("div",{className:z.overflowMenuContainer,ref:g},r().createElement(R,{deceased:L,menuTitle:r().createElement(r().Fragment,null,r().createElement("span",{className:z.actionsButtonText},f("actions","Actions"))," ",r().createElement(s.r4,{size:16,style:{marginLeft:"0.5rem",fill:"#78A9FF"}})),dropDownMenu:U},r().createElement(_.ExtensionSlot,{onClick:q,name:"patient-actions-slot",key:"patient-actions-slot",className:z.overflowMenuItemList,state:k})))),r().createElement("div",{className:z.demographics},r().createElement("span",null,function(e){switch(e){case"male":return f("male","Male");case"female":return f("female","Female");case"other":return f("other","Other");case"unknown":return f("unknown","Unknown");default:return e}}(u.gender))," · ",r().createElement("span",null,(0,_.age)(u.birthDate))," ·"," ",r().createElement("span",null,(0,_.formatDate)((0,_.parseDate)(u.birthDate),{mode:"wide",time:!1}))),r().createElement("div",{className:z.row},r().createElement("div",{className:z.identifiers},(null==X?void 0:X.length)?X.map((function(e){var t=e.value,n=e.type;return r().createElement("span",{key:t,className:z.identifierTag},r().createElement(o.Vp9,{className:z.tag,type:"gray",title:n.text},n.text),t)})):""),r().createElement(o.zxk,{className:z.toggleContactDetailsButton,kind:"ghost",renderIcon:function(e){return P?r().createElement(l.Kh,Z({size:16},e)):r().createElement(l._M,Z({size:16},e))},iconDescription:"Toggle contact details",onClick:G,style:{marginTop:"-0.25rem"}},P?f("hideDetails","Hide details"):f("showDetails","Show details"))))),P&&r().createElement(I,{isTabletViewport:w,address:null!==(x=null==u?void 0:u.address)&&void 0!==x?x:[],telecom:null!==(T=null==u?void 0:u.telecom)&&void 0!==T?T:[],patientId:null==u?void 0:u.id,deceased:L}))}}}]);