"use strict";(self.webpackChunk_openmrs_esm_patient_immunizations_app=self.webpackChunk_openmrs_esm_patient_immunizations_app||[]).push([[885],{7513:(e,n,t)=>{t.d(n,{Z:()=>c});var r=t(9601),i=t.n(r),a=t(2609),o=t.n(a)()(i());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-immunizations__immunizations-overview__widgetCard___ORNTb{border:1px solid #e0e0e0}.-esm-patient-immunizations__immunizations-overview__immunizationOverviewSummaryCard___sMaGc{margin:1.25rem 1.5rem}.-esm-patient-immunizations__immunizations-overview__immunizationMore___x829c{display:flex;align-items:center;border:none;padding:.625rem 1.625rem .625rem 1rem;background-color:var(--omrs-color-bg-medium-contrast);color:var(--omrs-color-ink-medium-contrast);cursor:pointer}.-esm-patient-immunizations__immunizations-overview__immunizationMore___x829c p{margin:0}",""]),o.locals={widgetCard:"-esm-patient-immunizations__immunizations-overview__widgetCard___ORNTb",immunizationOverviewSummaryCard:"-esm-patient-immunizations__immunizations-overview__immunizationOverviewSummaryCard___sMaGc",immunizationMore:"-esm-patient-immunizations__immunizations-overview__immunizationMore___x829c"};const c=o},1756:(e,n,t)=>{t.d(n,{V:()=>d,j:()=>v});var r=t(906),i=t(2449),a=t(772),o=t(468),c=t(4402),u=t(3012),l=t(3939),s=function(e){var n,t,i=null==e?void 0:e.resource,a=null==i?void 0:i.id,o=null==i||null===(n=i.manufacturer)||void 0===n?void 0:n.display,c=null==i?void 0:i.lotNumber,u=(null==i||null===(t=i.protocolApplied)||void 0===t?void 0:t.length)>0&&(null==i?void 0:i.protocolApplied[0]);return{immunizationObsUuid:a,manufacturer:o,lotNumber:c,sequenceLabel:null==u?void 0:u.series,sequenceNumber:null==u?void 0:u.doseNumberPositiveInt,occurrenceDateTime:(0,r.formatDate)(new Date(null==i?void 0:i.occurrenceDateTime)),expirationDate:(0,r.formatDate)(new Date(null==i?void 0:i.expirationDate))}},m=function(e){var n;return(0,i.Z)(null==e||null===(n=e.vaccineCode)||void 0===n?void 0:n.coding,(function(e){return(0,c.Z)(e.system)}))},d=function(e){var n=(0,o.Z)(e.entry,(function(e){var n;return null===(n=m(e.resource))||void 0===n?void 0:n.code}));return(0,u.Z)(n,(function(e){var n,t=(0,u.Z)(e,s),r=m(null===(n=e[0])||void 0===n?void 0:n.resource);return{vaccineName:null==r?void 0:r.display,vaccineUuid:null==r?void 0:r.code,existingDoses:(0,l.Z)(t,[function(e){return(0,a.Z)(e,"occurrenceDateTime")}],["desc"])}}))};function p(e,n){return{type:e,reference:"".concat(e,"/").concat(n)}}var v=function(e,n,t,i){return{resourceType:"Immunization",status:"completed",id:e.immunizationObsUuid,vaccineCode:{coding:[{code:e.vaccineUuid,display:e.vaccineName}]},patient:p("Patient",e.patientUuid),encounter:p("Encounter",n),occurrenceDateTime:(0,r.parseDate)(e.vaccinationDate),expirationDate:(0,r.parseDate)(e.expirationDate),location:p("Location",t),performer:[{actor:p("Practitioner",i)}],manufacturer:{display:e.manufacturer},lotNumber:e.lotNumber,protocolApplied:[{doseNumberPositiveInt:e.currentDose.sequenceNumber,series:e.currentDose.sequenceLabel}]}}},1885:(e,n,t)=>{t.r(n),t.d(n,{default:()=>C});var r=t(268),i=t.n(r),a=t(4924),o=t(4732),c=t(6759),u=t(6217),l=t(8108),s=t(906),m=t(6062),d=t.n(m),p=t(4036),v=t.n(p),f=t(6793),b=t.n(f),g=t(7892),y=t.n(g),_=t(1173),h=t.n(_),w=t(2464),z=t.n(w),O=t(7513),D={};D.styleTagTransform=z(),D.setAttributes=y(),D.insert=b().bind(null,"head"),D.domAPI=v(),D.insertStyleElement=h(),d()(O.Z,D);const E=O.Z&&O.Z.locals?O.Z.locals:void 0;function P(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function S(){return S=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},S.apply(this,arguments)}const C=function(e){e.patient;var n,t,r=e.patientUuid,m=e.basePath,d=(0,a.useTranslation)().t,p=d("immunizations","immunizations"),v=d("immunizations","Immunizations"),f=d("seeAll","See all"),b=window.spaBase+m+"/immunizations",g=(0,l.dv)(r),y=g.data,_=g.isError,h=g.isLoading,w=g.isValidating,z=(0,s.usePagination)(null!=y?y:[],5),O=z.results,D=z.goTo,C=z.currentPage,j=i().useCallback((function(){return(0,u.launchPatientWorkspace)("immunization-form-workspace")}),[]),k=[{key:"vaccineName",header:d("recentVaccination","Recent vaccination")},{key:"vaccinationDate",header:d("vaccinationDate","Vaccination date")}],N=i().useMemo((function(){return null==O?void 0:O.map((function(e,n){return t=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){P(e,n,t[n])}))}return e}({},e),r=null!=(r={id:"".concat(n),vaccineName:e.vaccineName,vaccinationDate:"".concat((0,s.formatDate)((0,s.parseDate)(e.existingDoses[0].occurrenceDateTime),{day:!1,time:!1}))})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})),t;var t,r}))}),[O]);return h?i().createElement(o.gqd,{role:"progressbar"}):_?i().createElement(u.ErrorState,{error:_,headerTitle:v}):(null==y?void 0:y.length)?i().createElement("div",{className:E.widgetCard},i().createElement(u.CardHeader,{title:v},i().createElement("span",null,w?i().createElement(o.lSo,null):null),i().createElement(o.zxk,{kind:"ghost",renderIcon:function(e){return i().createElement(c.mm,S({size:16},e))},iconDescription:"Add immunizations",onClick:j},d("add","Add"))),i().createElement(o.wQF,{headers:k,rows:N,isSortable:!0,size:"sm",useZebraStyles:!0},(function(e){var r=e.rows,a=e.headers,c=e.getHeaderProps,u=e.getTableProps;return i().createElement(o.xJi,null,i().createElement(o.iA_,S({},u()),i().createElement(o.ssF,null,i().createElement(o.SCH,null,a.map((function(e){var t;return i().createElement(o.xDH,S({className:"".concat(E.productiveHeading01," ").concat(E.text02)},c({header:e,isSortable:e.isSortable})),null!==(n=null===(t=e.header)||void 0===t?void 0:t.content)&&void 0!==n?n:e.header)})))),i().createElement(o.RMI,null,r.map((function(e){return i().createElement(o.SCH,{key:e.id},e.cells.map((function(e){var n;return i().createElement(o.pj1,{key:e.id},null!==(t=null===(n=e.value)||void 0===n?void 0:n.content)&&void 0!==t?t:e.value)})))})))))})),i().createElement(u.PatientChartPagination,{currentItems:O.length,onPageNumberChange:function(e){var n=e.page;return D(n)},pageNumber:C,pageSize:5,totalItems:y.length,dashboardLinkUrl:b,dashboardLinkLabel:f})):i().createElement(u.EmptyState,{displayText:p,headerTitle:v,launchForm:j})}},8108:(e,n,t)=>{t.d(n,{dv:()=>l,eu:()=>s,iX:()=>u}),t(5047);var r=t(9857),i=t(906),a=t(9867),o=t(1756);function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function u(){var e,n,t,o=(0,i.useConfig)().immunizationsConfig,u=null==o?void 0:o.vaccinesConceptSet,l=(n=u.split(":"),t=2,function(e){if(Array.isArray(e))return e}(n)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,c=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(e){c=!0,i=e}finally{try{o||null==t.return||t.return()}finally{if(c)throw i}}return a}}(n,t)||function(e,n){if(e){if("string"==typeof e)return c(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,n):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=l[0],m=l[1],d="/ws/rest/v1/concept?source=".concat(s,"&code=").concat(m,"&v=full"),p="/ws/rest/v1/concept/".concat(u,"?v=full"),v=(0,r.ZP)((e=u,(0,a.Z)(e,":")?d:p),i.openmrsFetch),f=v.data,b=v.error;return{data:f?f.data.results[0]:null,isError:b,isLoading:!f&&!b}}function l(e){var n="".concat(i.fhirBaseUrl,"/Immunization?patient=").concat(e),t=(0,r.ZP)(n,i.openmrsFetch),a=t.data,c=t.error,u=t.isValidating,l=a?(0,o.V)(a.data):null;return{data:a?l:null,isError:c,isLoading:!a&&!c,isValidating:u}}function s(e,n,t,r){var a="".concat(i.fhirBaseUrl,"/Immunization");return t&&(a="".concat(a,"/").concat(t)),(0,i.openmrsFetch)(a,{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:r.signal})}}}]);