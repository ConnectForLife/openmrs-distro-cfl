"use strict";(globalThis.webpackChunk_openmrs_esm_patient_allergies_app=globalThis.webpackChunk_openmrs_esm_patient_allergies_app||[]).push([[802],{2557:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(272),l=r.n(n),a=r(2609),i=r.n(a)()(l());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-allergies__allergies-detailed-summary__widgetCard___h_2Ps{border:1px solid #e0e0e0}.-esm-patient-allergies__allergies-detailed-summary__allergyCriticality___oKFHF{display:flex;align-items:center;text-transform:uppercase}.-esm-patient-allergies__allergies-detailed-summary__allergySeverityHigh___BXOA1{font-weight:800}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/allergies/allergies-detailed-summary.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,wEACE,wBAAA,CAGF,gFACE,YAAA,CACA,kBAAA,CACA,wBAAA,CAGF,iFACE,eAAA",sourceRoot:""}]),i.locals={widgetCard:"-esm-patient-allergies__allergies-detailed-summary__widgetCard___h_2Ps",allergyCriticality:"-esm-patient-allergies__allergies-detailed-summary__allergyCriticality___oKFHF",allergySeverityHigh:"-esm-patient-allergies__allergies-detailed-summary__allergySeverityHigh___BXOA1"};const o=i},2802:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var n=r(7900),l=r.n(n),a=r(4924),i=r(3520),o=r(6759),c=r(2870),s=r(4556),d=r(6705),u=r(1354),f=r.n(u),p=r(1583),m=r.n(p),g=r(7378),v=r.n(g),y=r(5993),b=r.n(y),A=r(4154),_=r.n(A),h=r(8141),E=r.n(h),C=r(2557),O={};O.styleTagTransform=E(),O.setAttributes=b(),O.insert=v().bind(null,"head"),O.domAPI=m(),O.insertStyleElement=_(),f()(C.Z,O);const j=C.Z&&C.Z.locals?C.Z.locals:void 0;function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){Z(e,t,r[t])}))}return e}const w=function(e){var t=e.patient,r=(0,a.useTranslation)().t,n=r("allergyIntolerances","allergy intolerances"),u=r("allergies","Allergies"),f=(0,d.PI)(t.id),p=f.allergies,m=f.isError,g=f.isLoading,v=f.isValidating,y=(0,c.useLayoutType)(),b="tablet"===y,A="small-desktop"===y||"large-desktop"===y,_=l().useCallback((function(){return(0,s.launchPatientWorkspace)("patient-allergy-form-workspace")}),[]),h=[{key:"display",header:r("allergen","Allergen")},{key:"criticality",header:r("severityandReaction","Severity")},{key:"reaction",header:r("reaction","Reaction")},{key:"note",header:r("onsetDateAndComments","Onset date and comments")}],E=l().useMemo((function(){return null==p?void 0:p.map((function(e){var t,r,n,a;return n=S({},e),a=null!=(a={criticality:{content:l().createElement("span",{className:j.allergyCriticality},"high"===e.criticality&&l().createElement("svg",{className:"omrs-icon omrs-margin-right-4",fill:"rgba(181, 7, 6, 1)",style:{height:"1.25rem"}},l().createElement("use",{xlinkHref:"#omrs-icon-important-notification"})),l().createElement("span",{className:"".concat("high"===e.criticality&&j.allergySeverityHigh)},e.criticality))},lastUpdated:e.lastUpdated?(0,c.formatDate)((0,c.parseDate)(e.lastUpdated),{time:!1}):"--",reaction:null===(t=e.reactionManifestations)||void 0===t?void 0:t.join(", "),note:null!==(r=null==e?void 0:e.note)&&void 0!==r?r:"--"})?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(a)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})),n}))}),[p]);return g?l().createElement(i.gqd,{role:"progressbar",compact:A,zebra:!0}):m?l().createElement(s.ErrorState,{error:m,headerTitle:u}):(null==p?void 0:p.length)?l().createElement("div",{className:j.widgetCard},l().createElement(s.CardHeader,{title:u},l().createElement("span",null,v?l().createElement(i.lSo,null):null),l().createElement(i.zxk,{kind:"ghost",renderIcon:function(e){return l().createElement(o.mm,S({size:16},e))},iconDescription:"Add allergies",onClick:_},r("add","Add"))),l().createElement(i.wQF,{rows:E,headers:h,isSortable:!0,useZebraStyles:!0,size:b?"lg":"sm"},(function(e){var t=e.rows,r=e.headers,n=e.getHeaderProps,a=e.getTableProps;return l().createElement(i.xJi,null,l().createElement(i.iA_,a(),l().createElement(i.ssF,null,l().createElement(i.SCH,null,r.map((function(e){var t,r;return l().createElement(i.xDH,S({className:"".concat(j.productiveHeading01," ").concat(j.text02)},n({header:e,isSortable:e.isSortable})),null!==(r=null===(t=e.header)||void 0===t?void 0:t.content)&&void 0!==r?r:e.header)})))),l().createElement(i.RMI,{"data-testid":"allergy-table"},t.map((function(e){return l().createElement(i.SCH,{key:e.id},e.cells.map((function(e){var t,r;return l().createElement(i.pj1,{key:e.id},null!==(r=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==r?r:e.value)})))})))))}))):l().createElement(s.EmptyState,{displayText:n,headerTitle:u,launchForm:_})}},6705:(e,t,r)=>{r.d(t,{PI:()=>i});var n=r(3255),l=r(3315),a=r(2870);function i(e){var t,r="".concat(a.fhirBaseUrl,"/AllergyIntolerance?patient=").concat(e),l=(0,n.ZP)(e?r:null,a.openmrsFetch),i=l.data,c=l.error,s=l.isLoading,d=l.isValidating,u=l.mutate,f=(null==i||null===(t=i.data)||void 0===t?void 0:t.total)>0?null==i?void 0:i.data.entry.map((function(e){var t;return null!==(t=e.resource)&&void 0!==t?t:[]})).map(o).sort((function(e,t){return t.lastUpdated>e.lastUpdated?1:-1})):null;return{allergies:i?f:null,isError:c,isLoading:s,isValidating:d,mutate:u}}function o(e){var t,r,n,a,i,o,c,s,d,u,f,p,m,g,v,y=null==e||null===(r=e.reaction[0])||void 0===r||null===(t=r.manifestation)||void 0===t?void 0:t.map((function(e){var t;return null===(t=e.coding[0])||void 0===t?void 0:t.display}));return{id:null==e?void 0:e.id,clinicalStatus:null==e||null===(a=e.clinicalStatus)||void 0===a||null===(n=a.coding[0])||void 0===n?void 0:n.display,criticality:null==e?void 0:e.criticality,display:null==e||null===(o=e.code)||void 0===o||null===(i=o.coding[0])||void 0===i?void 0:i.display,recordedDate:null==e?void 0:e.recordedDate,recordedBy:null==e||null===(c=e.recorder)||void 0===c?void 0:c.display,recorderType:null==e||null===(s=e.recorder)||void 0===s?void 0:s.type,note:null==e||null===(u=e.note)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.text,reactionToSubstance:null==e||null===(m=e.reaction[0])||void 0===m||null===(p=m.substance)||void 0===p||null===(f=p.coding[1])||void 0===f?void 0:f.display,reactionManifestations:y,reactionSeverity:(0,l.Z)(null==e||null===(g=e.reaction[0])||void 0===g?void 0:g.severity),lastUpdated:null==e||null===(v=e.meta)||void 0===v?void 0:v.lastUpdated}}},187:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r(3221).Z.Symbol},8147:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(187),l=Object.prototype,a=l.hasOwnProperty,i=l.toString,o=n.Z?n.Z.toStringTag:void 0;var c=Object.prototype.toString;var s=n.Z?n.Z.toStringTag:void 0;const d=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?function(e){var t=a.call(e,o),r=e[o];try{e[o]=void 0;var n=!0}catch(e){}var l=i.call(e);return n&&(t?e[o]=r:delete e[o]),l}(e):function(e){return c.call(e)}(e)}},2168:(e,t,r)=>{r.d(t,{Z:()=>n});const n="object"==typeof global&&global&&global.Object===Object&&global},3221:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(2168),l="object"==typeof self&&self&&self.Object===Object&&self;const a=n.Z||l||Function("return this")()},3315:(e,t,r)=>{r.d(t,{Z:()=>A});var n=r(4020);const l=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:function(e,t,r){var n=-1,l=e.length;t<0&&(t=-t>l?0:l+t),(r=r>l?l:r)<0&&(r+=l),l=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(l);++n<l;)a[n]=e[n+t];return a}(e,t,r)};var a=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const i=function(e){return a.test(e)};var o="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",c="\\ud83c[\\udffb-\\udfff]",s="[^\\ud800-\\udfff]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",f="(?:"+o+"|"+c+")?",p="[\\ufe0e\\ufe0f]?",m=p+f+"(?:\\u200d(?:"+[s,d,u].join("|")+")"+p+f+")*",g="(?:"+[s+o+"?",o,d,u,"[\\ud800-\\udfff]"].join("|")+")",v=RegExp(c+"(?="+c+")|"+g+m,"g");const y=function(e){return i(e)?function(e){return e.match(v)||[]}(e):function(e){return e.split("")}(e)},b=function(e){e=(0,n.Z)(e);var t=i(e)?y(e):void 0,r=t?t[0]:e.charAt(0),a=t?l(t,1).join(""):e.slice(1);return r.toUpperCase()+a},A=function(e){return b((0,n.Z)(e).toLowerCase())}},7885:(e,t,r)=>{r.d(t,{Z:()=>n});const n=Array.isArray},3391:(e,t,r)=>{r.d(t,{Z:()=>n});const n=function(e){return null!=e&&"object"==typeof e}},2758:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(8147),l=r(3391);const a=function(e){return"symbol"==typeof e||(0,l.Z)(e)&&"[object Symbol]"==(0,n.Z)(e)}},4020:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(187);var l=r(7885),a=r(2758),i=n.Z?n.Z.prototype:void 0,o=i?i.toString:void 0;const c=function e(t){if("string"==typeof t)return t;if((0,l.Z)(t))return function(e,t){for(var r=-1,n=null==e?0:e.length,l=Array(n);++r<n;)l[r]=t(e[r],r,e);return l}(t,e)+"";if((0,a.Z)(t))return o?o.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},s=function(e){return null==e?"":c(e)}}}]);