"use strict";(self.webpackChunk_openmrs_esm_patient_chart_app=self.webpackChunk_openmrs_esm_patient_chart_app||[]).push([[534],{3467:(e,t,a)=>{a.d(t,{x:()=>p});var n=a(7896),r=a(6666),i=a(9740),o=a(3980),s=a.n(o),l=a(9902),c=a.n(l),u=(0,l.createContext)(null),d=["as","children","dir"];function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){var t=e.as,a=void 0===t?"span":t,o=e.children,s=e.dir,p=void 0===s?"auto":s,f=(0,i.Z)(e,d),h=(0,l.useContext)(u),b={},g=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},h);if(h){var v=h.direction,y=h.getTextDirection;if(y&&y.current){var _=function(e){if("string"==typeof e)return e;var t=c().Children.map(e,(function(e){return"string"==typeof e?e:null})).filter((function(e){return null!==e}));return 1===t.length?t[0]:t}(o),w=y.current(_);v!==w?(b.dir=w,g.direction=w):"auto"===v&&(b.dir=w)}else v!==p?(b.dir=p,g.direction=p):"auto"===v&&(b.dir=p)}else b.dir=p,g.direction=p;return c().createElement(u.Provider,{value:g},c().createElement(a,(0,n.Z)({},f,b),o))}p.propTypes={as:s().oneOfType([s().func,s().string,s().elementType]),children:s().node.isRequired,dir:s().oneOf(["ltr","rtl","auto"])}},5188:(e,t,a)=>{a.d(t,{Z:()=>s});var n=a(9601),r=a.n(n),i=a(2609),o=a.n(i)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-patient-chart__past-visit-overview__skeleton___DznKV{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}.-esm-patient-chart__past-visit-overview__button___tKz1d{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-chart__past-visit-overview__container___K53eg{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 6rem)}",""]),o.locals={button:"-esm-patient-chart__past-visit-overview__button___tKz1d",container:"-esm-patient-chart__past-visit-overview__container___K53eg",skeleton:"-esm-patient-chart__past-visit-overview__skeleton___DznKV"};const s=o},8453:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var n=a(9902),r=a.n(n),i=a(7896),o=a(6666),s=a(9740),l=a(3980),c=a.n(l),u=a(2779),d=a.n(u),m=a(330),p=["headers","rowCount","columnCount","zebra","compact","className","showHeader","showToolbar"],f=function(e){for(var t,a=e.headers,n=e.rowCount,l=e.columnCount,c=e.zebra,u=e.compact,f=e.className,h=e.showHeader,b=e.showToolbar,g=(0,s.Z)(e,p),v=(0,m.A)(),y=d()(f,(t={},(0,o.Z)(t,"".concat(v,"--skeleton"),!0),(0,o.Z)(t,"".concat(v,"--data-table"),!0),(0,o.Z)(t,"".concat(v,"--data-table--zebra"),c),(0,o.Z)(t,"".concat(v,"--data-table--compact"),u),t)),_=n,w=Array(_),E=Array.from({length:l},(function(e,t){return t})),k=0;k<_;k++)w[k]=r().createElement("tr",{key:k},E.map((function(e){return r().createElement("td",{key:e},r().createElement("span",null))})));return r().createElement("div",{className:"".concat(v,"--skeleton ").concat(v,"--data-table-container")},h?r().createElement("div",{className:"".concat(v,"--data-table-header")},r().createElement("div",{className:"".concat(v,"--data-table-header__title")}),r().createElement("div",{className:"".concat(v,"--data-table-header__description")})):null,b?r().createElement("section",{"aria-label":"data table toolbar",className:"".concat(v,"--table-toolbar")},r().createElement("div",{className:"".concat(v,"--toolbar-content")},r().createElement("span",{className:"".concat(v,"--skeleton ").concat(v,"--btn ").concat(v,"--btn--sm")}))):null,r().createElement("table",(0,i.Z)({className:y},g),r().createElement("thead",null,r().createElement("tr",null,E.map((function(e){var t;return r().createElement("th",{key:e},a?r().createElement("div",{className:"bx--table-header-label"},null===(t=a[e])||void 0===t?void 0:t.header):r().createElement("span",null))})))),r().createElement("tbody",null,w)))};f.propTypes={className:c().string,columnCount:c().number,compact:c().bool,headers:c().oneOfType([c().array,c().shape({key:c().string})]),rowCount:c().number,showHeader:c().bool,showToolbar:c().bool,zebra:c().bool},f.defaultProps={rowCount:5,columnCount:5,zebra:!1,compact:!1,showHeader:!0,showToolbar:!0};const h=f;var b=a(3311),g=a(160),v=a(364),y=a(7500),_=a(8804),w=a(1358),E=a(2427),k=a(3783),D=a(4907),Z=a(8967),T=a(9539),O=a(4924),P=a(3771),x=a(3066),z=a(5968),C=a(321),N=a.n(C),S=a(1195),V=a.n(S),j=a(3275),L=a.n(j),q=a(7162),M=a.n(q),I=a(2094),X=a.n(I),A=a(757),H=a.n(A),K=a(5188),B={};B.styleTagTransform=H(),B.setAttributes=M(),B.insert=L().bind(null,"head"),B.domAPI=V(),B.insertStyleElement=X(),N()(K.Z,B);const F=K.Z&&K.Z.locals?K.Z.locals:void 0;function G(){return G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},G.apply(this,arguments)}const R=function(e){var t,a=e.patientUuid,i=e.closeWorkspace,o=(0,O.useTranslation)(),s=o.t,l=o.i18n.language.toLowerCase().replace("_","-"),c=(0,z.N2)(a),u=c.data,d=c.isError,m=c.isLoading,p=(0,n.useMemo)((function(){return[{key:"startDate",header:s("startDate","Start Date")},{key:"visitType",header:s("type","Type")},{key:"location",header:s("location","Location")},{key:"endDate",header:s("endDate","End Date"),colSpan:2}]}),[s]),f=(0,n.useMemo)((function(){return null==u?void 0:u.map((function(e,t){var a;return{id:"".concat(t),startDate:new Date(e.startDatetime).toLocaleDateString(l,{dateStyle:"medium"}),visitType:e.visitType.display,location:null===(a=e.location)||void 0===a?void 0:a.display,endDate:e.stopDatetime?new Date(e.startDatetime).toLocaleDateString(l,{dateStyle:"medium"}):"",visit:e}}))}),[l,u]),C=(0,n.useCallback)((function(){(0,P.launchPatientWorkspace)("start-visit-workspace-form"),i()}),[i]);return m?r().createElement(h,{role:"progressbar"}):d?r().createElement(P.ErrorState,{error:d,headerTitle:s("pastVisitErrorText","Past Visit Error")}):(null==u?void 0:u.length)?r().createElement("div",{className:F.container},r().createElement(b.ZP,{headers:p,rows:f},(function(e){var a=e.rows,n=e.headers,i=e.getTableProps,o=e.getHeaderProps,l=e.getRowProps;return r().createElement(g.Z,{title:s("pastVisits","Past Visits")},r().createElement(v.Z,G({},i(),{useZebraStyles:!0}),r().createElement(y.Z,null,r().createElement(_.Z,null,n.map((function(e){return r().createElement(w.Z,G({},o({header:e,isSortable:e.isSortable})),e.header)})),r().createElement(w.Z,null))),r().createElement(E.Z,null,a.map((function(e,a){return r().createElement(_.Z,G({},l({row:e})),e.cells.map((function(e){var a;return r().createElement(k.Z,{key:e.id},null!==(t=null===(a=e.value)||void 0===a?void 0:a.content)&&void 0!==t?t:e.value)})),r().createElement(k.Z,{className:"bx--table-column-menu"},r().createElement(D.Z,{flipped:!0,selectorPrimaryFocus:"option-two"},r().createElement(Z.Z,{onClick:C,itemText:s("edit","Edit")}),r().createElement(Z.Z,{onClick:function(){x.getStartedVisit.next({mode:x.VisitMode.LOADING,visitData:f[a].visit,status:x.VisitStatus.ONGOING})},itemText:s("loadVisitInfo","Load Visit Info")}))))})))))})),r().createElement(T.Z,{className:F.button,onClick:i,kind:"secondary"},s("cancel","Cancel"))):void 0}},5968:(e,t,a)=>{a.d(t,{L4:()=>s,N2:()=>o,Tn:()=>i});var n=a(9857),r=a(3066);function i(e){var t,a=(0,n.ZP)("/ws/rest/v1/visit?patient=".concat(e,"&v=").concat("custom:(uuid,encounters:(uuid,form:(uuid,display),encounterDatetime,orders:full,obs:(uuid,concept:(uuid,display,conceptClass:(uuid,display)),display,groupMembers:(uuid,concept:(uuid,display),value:(uuid,display)),value),encounterType:(uuid,display),encounterProviders:(uuid,display,encounterRole:(uuid,display),provider:(uuid,person:(uuid,display)))),visitType:(uuid,name,display),startDatetime,patient"),r.openmrsFetch),i=a.data,o=a.error,s=a.isValidating;return{visits:i?null==i||null===(t=i.data)||void 0===t?void 0:t.results:null,isError:o,isLoading:!i&&!o,isValidating:s}}function o(e){var t=(0,n.ZP)("/ws/rest/v1/visit?patient=".concat(e,"&v=").concat("custom:(uuid,encounters:(uuid,encounterDatetime,form:(uuid,name),location:ref,encounterType:ref,encounterProviders:(uuid,display,provider:(uuid,display))),patient:(uuid,uuid),visitType:(uuid,name,display),attributes:(uuid,display,value),location:(uuid,name,display),startDatetime,stopDatetime)"),r.openmrsFetch),a=t.data,i=t.error,o=t.isValidating;return{data:a?a.data.results:null,isError:i,isLoading:!a&&!i,isValidating:o}}function s(e,t){if(!e||!t)return"";var a=e.search(/\D/),n=parseInt(e.substring(0,a)),r=e.search(/\//),i=e.substring(a);if(r>=0){i=e.substring(a,r);var o=e.substring(r+1).search(/\D/),s=parseInt(e.substr(r+1,o)),l=e.substring(r+1+o);return"".concat(t," ").concat(i," (").concat(t/n*s," ").concat(l,")")}return"".concat(n*t," ").concat(i)}}}]);