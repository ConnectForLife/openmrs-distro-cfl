"use strict";(globalThis.webpackChunk_openmrs_esm_patient_allergies_app=globalThis.webpackChunk_openmrs_esm_patient_allergies_app||[]).push([[199],{2557:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(272),l=r.n(n),a=r(2609),i=r.n(a)()(l());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-allergies__allergies-detailed-summary__widgetCard___h_2Ps{border:1px solid #e0e0e0}.-esm-patient-allergies__allergies-detailed-summary__allergyCriticality___oKFHF{display:flex;align-items:center;text-transform:uppercase}.-esm-patient-allergies__allergies-detailed-summary__allergySeverityHigh___BXOA1{font-weight:800}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/allergies/allergies-detailed-summary.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,wEACE,wBAAA,CAGF,gFACE,YAAA,CACA,kBAAA,CACA,wBAAA,CAGF,iFACE,eAAA",sourceRoot:""}]),i.locals={widgetCard:"-esm-patient-allergies__allergies-detailed-summary__widgetCard___h_2Ps",allergyCriticality:"-esm-patient-allergies__allergies-detailed-summary__allergyCriticality___oKFHF",allergySeverityHigh:"-esm-patient-allergies__allergies-detailed-summary__allergySeverityHigh___BXOA1"};const o=i},8199:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var n=r(7900),l=r.n(n),a=r(4924),i=r(3520),o=r(6759),c=r(906),d=r(6217),s=r(7614),u=r(5552),f=r(1354),v=r.n(f),p=r(1583),g=r.n(p),m=r(7378),y=r.n(m),b=r(5993),A=r.n(b),_=r(4154),h=r.n(_),E=r(8141),O=r.n(E),j=r(2557),C={};C.styleTagTransform=O(),C.setAttributes=A(),C.insert=y().bind(null,"head"),C.domAPI=g(),C.insertStyleElement=h(),v()(j.Z,C);const Z=j.Z&&j.Z.locals?j.Z.locals:void 0;function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(this,arguments)}const k=function(e){var t,r,n=e.patient,f=e.showAddAllergyButton,v=(0,a.useTranslation)().t,p=v("allergyIntolerances","allergy intolerances"),g=v("allergies","Allergies"),m=(0,s.PI)(n.id),y=m.allergies,b=m.isError,A=m.isLoading,_=m.isValidating,h=(0,c.useLayoutType)(),E="tablet"===h,O="small-desktop"===h||"large-desktop"===h,j=l().useCallback((function(){return(0,d.launchPatientWorkspace)(u.Hz)}),[]),C=[{key:"display",header:v("allergen","Allergen")},{key:"criticality",header:v("severityandReaction","Severity")},{key:"reaction",header:v("reaction","Reaction")},{key:"note",header:v("onsetDateAndComments","Onset date and comments")}],k=l().useMemo((function(){var e;return null==y?void 0:y.map((function(t){var r,n,a;return n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){S(e,t,r[t])}))}return e}({},t),a=null!=(a={criticality:{content:l().createElement("span",{className:Z.allergyCriticality},"high"===t.criticality&&l().createElement("svg",{className:"omrs-icon omrs-margin-right-4",fill:"rgba(181, 7, 6, 1)",style:{height:"1.25rem"}},l().createElement("use",{xlinkHref:"#omrs-icon-important-notification"})),l().createElement("span",{className:"".concat("high"===t.criticality&&Z.allergySeverityHigh)},t.criticality))},lastUpdated:t.lastUpdated?(0,c.formatDate)((0,c.parseDate)(t.lastUpdated),{time:!1}):"--",reaction:null===(r=t.reactionManifestations)||void 0===r?void 0:r.join(", "),note:null!==(e=null==t?void 0:t.note)&&void 0!==e?e:"--"})?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(a)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))})),n}))}),[y]);return A?l().createElement(i.gqd,{role:"progressbar",compact:O,zebra:!0}):b?l().createElement(d.ErrorState,{error:b,headerTitle:g}):(null==y?void 0:y.length)?l().createElement("div",{className:Z.widgetCard},l().createElement(d.CardHeader,{title:g},l().createElement("span",null,_?l().createElement(i.lSo,null):null),f&&l().createElement(i.zxk,{kind:"ghost",renderIcon:function(e){return l().createElement(o.mm,w({size:16},e))},iconDescription:"Add allergies",onClick:j},v("add","Add"))),l().createElement(i.wQF,{rows:k,headers:C,isSortable:!0,useZebraStyles:!0,size:E?"lg":"sm"},(function(e){var n=e.rows,a=e.headers,o=e.getHeaderProps,c=e.getTableProps;return l().createElement(i.xJi,null,l().createElement(i.iA_,w({},c()),l().createElement(i.ssF,null,l().createElement(i.SCH,null,a.map((function(e){var r;return l().createElement(i.xDH,w({className:"".concat(Z.productiveHeading01," ").concat(Z.text02)},o({header:e,isSortable:e.isSortable})),null!==(t=null===(r=e.header)||void 0===r?void 0:r.content)&&void 0!==t?t:e.header)})))),l().createElement(i.RMI,null,n.map((function(e){return l().createElement(i.SCH,{key:e.id},e.cells.map((function(e){var t;return l().createElement(i.pj1,{key:e.id},null!==(r=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==r?r:e.value)})))})))))}))):l().createElement(d.EmptyState,{displayText:p,headerTitle:g,launchForm:j})}},7614:(e,t,r)=>{r.d(t,{PI:()=>i});var n=r(3255),l=r(3315),a=r(906);function i(e){var t,r,l="".concat(a.fhirBaseUrl,"/AllergyIntolerance?patient=").concat(e),i=(0,n.ZP)(e?l:null,a.openmrsFetch),c=i.data,d=i.error,s=i.isLoading,u=i.isValidating,f=i.mutate,v=(null==c||null===(t=c.data)||void 0===t?void 0:t.total)>0?null==c?void 0:c.data.entry.map((function(e){return null!==(r=e.resource)&&void 0!==r?r:[]})).map(o).sort((function(e,t){return t.lastUpdated>e.lastUpdated?1:-1})):null;return{allergies:c?v:null,isError:d,isLoading:s,isValidating:u,mutate:f}}function o(e){var t,r,n,a,i,o,c,d,s,u,f,v,p,g,m,y=null===(t=null==e?void 0:e.reaction[0])||void 0===t||null===(r=t.manifestation)||void 0===r?void 0:r.map((function(e){var t;return null===(t=e.coding[0])||void 0===t?void 0:t.display}));return{id:null==e?void 0:e.id,clinicalStatus:null===(a=null==e||null===(n=e.clinicalStatus)||void 0===n?void 0:n.coding[0])||void 0===a?void 0:a.display,criticality:null==e?void 0:e.criticality,display:null===(o=null==e||null===(i=e.code)||void 0===i?void 0:i.coding[0])||void 0===o?void 0:o.display,recordedDate:null==e?void 0:e.recordedDate,recordedBy:null==e||null===(c=e.recorder)||void 0===c?void 0:c.display,recorderType:null==e||null===(d=e.recorder)||void 0===d?void 0:d.type,note:null==e||null===(s=e.note)||void 0===s||null===(u=s[0])||void 0===u?void 0:u.text,reactionToSubstance:null===(p=null===(f=null==e?void 0:e.reaction[0])||void 0===f||null===(v=f.substance)||void 0===v?void 0:v.coding[1])||void 0===p?void 0:p.display,reactionManifestations:y,reactionSeverity:(0,l.Z)(null===(g=null==e?void 0:e.reaction[0])||void 0===g?void 0:g.severity),lastUpdated:null==e||null===(m=e.meta)||void 0===m?void 0:m.lastUpdated}}},5552:(e,t,r)=>{r.d(t,{Hz:()=>n});var n="patient-allergy-form-workspace"},187:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r(3221).Z.Symbol},8147:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(187),l=Object.prototype,a=l.hasOwnProperty,i=l.toString,o=n.Z?n.Z.toStringTag:void 0;var c=Object.prototype.toString;var d=n.Z?n.Z.toStringTag:void 0;const s=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":d&&d in Object(e)?function(e){var t=a.call(e,o),r=e[o];try{e[o]=void 0;var n=!0}catch(e){}var l=i.call(e);return n&&(t?e[o]=r:delete e[o]),l}(e):function(e){return c.call(e)}(e)}},2168:(e,t,r)=>{r.d(t,{Z:()=>n});const n="object"==typeof global&&global&&global.Object===Object&&global},3221:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(2168),l="object"==typeof self&&self&&self.Object===Object&&self;const a=n.Z||l||Function("return this")()},3315:(e,t,r)=>{r.d(t,{Z:()=>A});var n=r(4020);const l=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:function(e,t,r){var n=-1,l=e.length;t<0&&(t=-t>l?0:l+t),(r=r>l?l:r)<0&&(r+=l),l=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(l);++n<l;)a[n]=e[n+t];return a}(e,t,r)};var a=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const i=function(e){return a.test(e)};var o="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",c="\\ud83c[\\udffb-\\udfff]",d="[^\\ud800-\\udfff]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",f="(?:"+o+"|"+c+")?",v="[\\ufe0e\\ufe0f]?",p=v+f+"(?:\\u200d(?:"+[d,s,u].join("|")+")"+v+f+")*",g="(?:"+[d+o+"?",o,s,u,"[\\ud800-\\udfff]"].join("|")+")",m=RegExp(c+"(?="+c+")|"+g+p,"g");const y=function(e){return i(e)?function(e){return e.match(m)||[]}(e):function(e){return e.split("")}(e)},b=function(e){e=(0,n.Z)(e);var t=i(e)?y(e):void 0,r=t?t[0]:e.charAt(0),a=t?l(t,1).join(""):e.slice(1);return r.toUpperCase()+a},A=function(e){return b((0,n.Z)(e).toLowerCase())}},7885:(e,t,r)=>{r.d(t,{Z:()=>n});const n=Array.isArray},3391:(e,t,r)=>{r.d(t,{Z:()=>n});const n=function(e){return null!=e&&"object"==typeof e}},2758:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(8147),l=r(3391);const a=function(e){return"symbol"==typeof e||(0,l.Z)(e)&&"[object Symbol]"==(0,n.Z)(e)}},4020:(e,t,r)=>{r.d(t,{Z:()=>d});var n=r(187);var l=r(7885),a=r(2758),i=n.Z?n.Z.prototype:void 0,o=i?i.toString:void 0;const c=function e(t){if("string"==typeof t)return t;if((0,l.Z)(t))return function(e,t){for(var r=-1,n=null==e?0:e.length,l=Array(n);++r<n;)l[r]=t(e[r],r,e);return l}(t,e)+"";if((0,a.Z)(t))return o?o.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},d=function(e){return null==e?"":c(e)}}}]);