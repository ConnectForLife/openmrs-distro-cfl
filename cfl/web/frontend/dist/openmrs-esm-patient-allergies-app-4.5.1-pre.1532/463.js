"use strict";(globalThis.webpackChunk_openmrs_esm_patient_allergies_app=globalThis.webpackChunk_openmrs_esm_patient_allergies_app||[]).push([[463],{2435:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(272),r=a.n(n),l=a(2609),i=a.n(l)()(r());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}:root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-allergies__allergy-form__productiveHeading01___jVHlb{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-patient-allergies__allergy-form__productiveHeading02___AqkSP{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-patient-allergies__allergy-form__productiveHeading03___Dz8TI{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-allergies__allergy-form__productiveHeading04___O3iLB{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-patient-allergies__allergy-form__productiveHeading05___HYHD4{font-size:var(--cds-heading-05-font-size, 2rem);font-weight:var(--cds-heading-05-font-weight, 400);line-height:var(--cds-heading-05-line-height, 1.25);letter-spacing:var(--cds-heading-05-letter-spacing, 0)}.-esm-patient-allergies__allergy-form__productiveHeading06___EpNh_{font-size:var(--cds-heading-06-font-size, 2.625rem);font-weight:var(--cds-heading-06-font-weight, 300);line-height:var(--cds-heading-06-line-height, 1.199);letter-spacing:var(--cds-heading-06-letter-spacing, 0)}.-esm-patient-allergies__allergy-form__bodyShort01___b4MZO{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-allergies__allergy-form__bodyShort02___GvHHe{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0)}.-esm-patient-allergies__allergy-form__bodyLong01___g6fq0{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-patient-allergies__allergy-form__bodyLong02___Rzjzc{font-size:var(--cds-body-02-font-size, 1rem);font-weight:var(--cds-body-02-font-weight, 400);line-height:var(--cds-body-02-line-height, 1.5);letter-spacing:var(--cds-body-02-letter-spacing, 0)}.-esm-patient-allergies__allergy-form__label01___KyOYB{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-patient-allergies__allergy-form__header___QZLSQ{border-bottom:.0625rem solid #e0e0e0;margin:0}.-esm-patient-allergies__allergy-form__content___BiJ1K{display:grid;grid-template-columns:50% 10% 1fr;margin:.5rem 1rem;width:100%}.-esm-patient-allergies__allergy-form__container___azun6{border:solid 1px #e0e0e0;margin:0rem 1rem 1rem}.-esm-patient-allergies__allergy-form__container___azun6:first-of-type{margin-bottom:2rem}.-esm-patient-allergies__allergy-form__container___azun6:last-of-type{margin-top:2.5rem}.-esm-patient-allergies__allergy-form__heading___Y2mIr{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);margin:1rem 1rem .5rem}.-esm-patient-allergies__allergy-form__section___cQIuG:not(:first-of-type){margin-bottom:2rem}.-esm-patient-allergies__allergy-form__wrapperContainer___sEcVG fieldset{display:grid;grid-template-columns:1fr 1fr;width:100%}.-esm-patient-allergies__allergy-form__wrapperContainer___sEcVG .cds--radio-button__label{justify-content:flex-start}.-esm-patient-allergies__allergy-form__tablist___JWVw1 .cds--tab--list{justify-content:center;width:100%}.-esm-patient-allergies__allergy-form__tab___XwK7G{flex-grow:1}.-esm-patient-allergies__allergy-form__sectionHeading___pzf6h{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);margin:1rem 1rem .5rem}.-esm-patient-allergies__allergy-form__midSectionHeading___Fb7nc{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);margin:0rem 1rem .5rem}.-esm-patient-allergies__allergy-form__radio___cCJp1{margin:1rem 0rem}.-esm-patient-allergies__allergy-form__radio___cCJp1 label{justify-content:flex-start}.-esm-patient-allergies__allergy-form__checkbox___A9usx:not(:first-child){margin:.3rem 0rem}.-esm-patient-allergies__allergy-form__input___RQrII{margin:0rem 1rem 1rem}.-esm-patient-allergies__allergy-form__checkboxContainer___EHQjt{display:grid;grid-template-columns:1fr 1fr}.-esm-patient-allergies__allergy-form__wrapper___BZ3jn{margin:1rem}.-esm-patient-allergies__allergy-form__wrapper___BZ3jn:last-of-type{margin-top:1.5rem}.-esm-patient-allergies__allergy-form__textbox___HeV7n{width:26.375rem}.-esm-patient-allergies__allergy-form__button___WnjB1{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-allergies__allergy-form__tablet___p6TGp{padding:0rem}.-esm-patient-allergies__allergy-form__desktopButtons___Xmt1r{margin-top:2rem}.-esm-patient-allergies__allergy-form__tabletButtons___rIW7a{margin-top:2rem;padding:1.5rem 1rem;background-color:#fff}.-esm-patient-allergies__allergy-form__desktop___bF4ok{padding:0rem}.-esm-patient-allergies__allergy-form__form___ri4Rk{display:flex;flex-direction:column;justify-content:space-between}.-esm-patient-allergies__allergy-form__desktopContainer___PiWdJ{background-color:#f4f4f4}.-esm-patient-allergies__allergy-form__tabletContainer___oQ07C{background-color:#fff}.omrs-breakpoint-gt-tablet .-esm-patient-allergies__allergy-form__form___ri4Rk{height:calc(100vh - 6rem)}.omrs-breakpoint-gt-tablet .-esm-patient-allergies__allergy-form__section___cQIuG:last-of-type{margin-top:2rem}.omrs-breakpoint-lt-desktop .-esm-patient-allergies__allergy-form__form___ri4Rk{height:calc(100vh - 9rem)}.omrs-breakpoint-lt-desktop .-esm-patient-allergies__allergy-form__section___cQIuG:last-of-type{margin-top:0rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/root.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./src/allergies/allergies-form/allergy-form.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CAHF,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,mECs0BI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CDl0BJ,mECk0BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD9zBJ,mEC8zBI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD1zBJ,mEC0zBI,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,sDAAA,CDtzBJ,mECszBI,+CAAA,CAAA,kDAAA,CAAA,mDAAA,CAAA,sDAAA,CDlzBJ,mECkzBI,mDAAA,CAAA,kDAAA,CAAA,oDAAA,CAAA,sDAAA,CD9yBJ,2DC8yBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD1yBJ,2DC0yBI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CDtyBJ,0DCsyBI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CDlyBJ,0DCkyBI,4CAAA,CAAA,+CAAA,CAAA,+CAAA,CAAA,mDAAA,CD9xBJ,uDC8xBI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CCr0BJ,sDACE,oCAAA,CACA,QAAA,CAGF,uDACE,YAAA,CACA,iCAAA,CACA,iBAAA,CACA,UAAA,CAGF,yDACE,wBAAA,CACA,qBAAA,CAEA,uEACE,kBAAA,CAGF,sEACE,iBAAA,CAIJ,uDD4yBI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CC1yBF,sBAAA,CAIA,2EACE,kBAAA,CAIJ,yEACE,YAAA,CACA,6BAAA,CACA,UAAA,CAGF,0FACE,0BAAA,CAIA,uEACE,sBAAA,CACA,UAAA,CAIJ,mDACE,WAAA,CAGF,8DD4wBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CC1wBF,sBAAA,CAGF,iEDuwBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CCrwBF,sBAAA,CAGF,qDACE,gBAAA,CAEA,2DACE,0BAAA,CAKF,0EACE,iBAAA,CAIJ,qDACE,qBAAA,CAGF,iEACE,YAAA,CACA,6BAAA,CAGF,uDACE,WAAA,CAEA,oEACE,iBAAA,CAIJ,uDACE,eAAA,CAGF,sDACE,WAAA,CACA,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAGF,sDACE,YAAA,CAGF,8DACE,eAAA,CAGF,6DACE,eAAA,CACA,mBAAA,CACA,qBH7HM,CGgIR,uDACE,YAAA,CAGF,oDACE,YAAA,CACA,qBAAA,CACA,6BAAA,CAGF,gEACE,wBH5IM,CG+IR,+DACE,qBAAA,CAKA,+EACE,yBAAA,CAIA,+FACE,eAAA,CAOJ,gFACE,yBAAA,CAIA,gGACE,eAAA",sourceRoot:""}]),i.locals={productiveHeading01:"-esm-patient-allergies__allergy-form__productiveHeading01___jVHlb",productiveHeading02:"-esm-patient-allergies__allergy-form__productiveHeading02___AqkSP",productiveHeading03:"-esm-patient-allergies__allergy-form__productiveHeading03___Dz8TI",productiveHeading04:"-esm-patient-allergies__allergy-form__productiveHeading04___O3iLB",productiveHeading05:"-esm-patient-allergies__allergy-form__productiveHeading05___HYHD4",productiveHeading06:"-esm-patient-allergies__allergy-form__productiveHeading06___EpNh_",bodyShort01:"-esm-patient-allergies__allergy-form__bodyShort01___b4MZO",bodyShort02:"-esm-patient-allergies__allergy-form__bodyShort02___GvHHe",bodyLong01:"-esm-patient-allergies__allergy-form__bodyLong01___g6fq0",bodyLong02:"-esm-patient-allergies__allergy-form__bodyLong02___Rzjzc",label01:"-esm-patient-allergies__allergy-form__label01___KyOYB",header:"-esm-patient-allergies__allergy-form__header___QZLSQ",content:"-esm-patient-allergies__allergy-form__content___BiJ1K",container:"-esm-patient-allergies__allergy-form__container___azun6",heading:"-esm-patient-allergies__allergy-form__heading___Y2mIr",section:"-esm-patient-allergies__allergy-form__section___cQIuG",wrapperContainer:"-esm-patient-allergies__allergy-form__wrapperContainer___sEcVG",tablist:"-esm-patient-allergies__allergy-form__tablist___JWVw1",tab:"-esm-patient-allergies__allergy-form__tab___XwK7G",sectionHeading:"-esm-patient-allergies__allergy-form__sectionHeading___pzf6h",midSectionHeading:"-esm-patient-allergies__allergy-form__midSectionHeading___Fb7nc",radio:"-esm-patient-allergies__allergy-form__radio___cCJp1",checkbox:"-esm-patient-allergies__allergy-form__checkbox___A9usx",input:"-esm-patient-allergies__allergy-form__input___RQrII",checkboxContainer:"-esm-patient-allergies__allergy-form__checkboxContainer___EHQjt",wrapper:"-esm-patient-allergies__allergy-form__wrapper___BZ3jn",textbox:"-esm-patient-allergies__allergy-form__textbox___HeV7n",button:"-esm-patient-allergies__allergy-form__button___WnjB1",tablet:"-esm-patient-allergies__allergy-form__tablet___p6TGp",desktopButtons:"-esm-patient-allergies__allergy-form__desktopButtons___Xmt1r",tabletButtons:"-esm-patient-allergies__allergy-form__tabletButtons___rIW7a",desktop:"-esm-patient-allergies__allergy-form__desktop___bF4ok",form:"-esm-patient-allergies__allergy-form__form___ri4Rk",desktopContainer:"-esm-patient-allergies__allergy-form__desktopContainer___PiWdJ",tabletContainer:"-esm-patient-allergies__allergy-form__tabletContainer___oQ07C"};const o=i},6463:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var n=a(7900),r=a.n(n),l=a(4924),i=a(3520),o=a(906),s=a(2303),c=a(1354),A=a.n(c),_=a(1583),d=a.n(_),g=a(7378),m=a.n(g),u=a(5993),p=a.n(u),f=a(4154),y=a.n(f),C=a(8141),v=a.n(C),h=a(2435),b={};b.styleTagTransform=v(),b.setAttributes=p(),b.insert=m().bind(null,"head"),b.domAPI=d(),b.insertStyleElement=y(),A()(h.Z,b);const E=h.Z&&h.Z.locals?h.Z.locals:void 0;var D=a(7614);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l=[],i=!0,o=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(l.push(n.value),!t||l.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==a.return||a.return()}finally{if(o)throw r}}return l}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(e,t):void 0}}const S=function(e){var t,a,c,A,_,d,g,m,u,p,f,y,C,v=e.closeWorkspace,h=e.promptBeforeClosing,b=e.patientUuid,S=(0,l.useTranslation)().t,I=(0,o.useConfig)().concepts,x="tablet"===(0,o.useLayoutType)(),z=[S("drug","Drug"),S("food","Food"),S("environmental","Environmental")],H=[S("mild","Mild"),S("moderate","Moderate"),S("severe","Severe")],Z=(0,n.useMemo)((function(){return{patientUuid:b}}),[b]),N=(0,n.useMemo)((function(){return I}),[I]),F=N.mildReactionUuid,j=N.severeReactionUuid,G=N.moderateReactionUuid,O=N.otherConceptUuid,R=(c=(a=(0,o.useConfig)().concepts).drugAllergenUuid,A=a.environmentalAllergenUuid,_=a.foodAllergenUuid,d=a.allergyReactionUuid,g=(0,s.Z)("/ws/rest/v1/concept/".concat(c,"?v=full"),o.openmrsFetch).data,m=(0,s.Z)("/ws/rest/v1/concept/".concat(A,"?v=full"),o.openmrsFetch).data,u=(0,s.Z)("/ws/rest/v1/concept/".concat(_,"?v=full"),o.openmrsFetch).data,p=(0,s.Z)("/ws/rest/v1/concept/".concat(d,"?v=full"),o.openmrsFetch).data,f=function(e){var t,a;return null==e||null===(t=e.data)||void 0===t||null===(a=t.setMembers)||void 0===a?void 0:a.map((function(e){return{uuid:e.uuid,display:e.display}}))},y=f(g),C=f(m),{isLoading:!(g&&m&&u&&p),allergensAndAllergicReactions:{drugAllergens:y,foodAllergens:f(u),environmentalAllergens:C,allergicReactions:f(p)}}),T=R.allergensAndAllergicReactions,J=R.isLoading,U=B((0,n.useState)([]),2),L=U[0],Y=U[1],Q=B((0,n.useState)(""),2),P=Q[0],M=Q[1],V=B((0,n.useState)(null),2),W=V[0],q=(V[1],B((0,n.useState)(""),2)),K=q[0],X=q[1],$=B((0,n.useState)(""),2),ee=$[0],te=$[1],ae=B((0,n.useState)(null),2),ne=ae[0],re=(ae[1],B((0,n.useState)(""),2)),le=re[0],ie=re[1],oe=B((0,n.useState)("DRUG"),2),se=oe[0],ce=oe[1],Ae=B((0,n.useState)(""),2),_e=Ae[0],de=Ae[1],ge=(0,D.PI)(b).mutate;(0,n.useEffect)((function(){h((function(){return Boolean(K||ee||ne||le||_e)}))}),[h,K,ee,ne,le,se,_e]);var me=(0,n.useCallback)((function(e,t){var a=t.checked,n=t.id;Y(a?function(e){return(t=e,function(e){if(Array.isArray(e))return w(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||k(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([n]);var t}:function(e){return e.filter((function(e){return e!==n}))})}),[]),ue=(0,n.useCallback)((function(e){e.preventDefault();var t={allergen:le===O?{allergenType:se,codedAllergen:{uuid:le},nonCodedAllergen:K}:{allergenType:se,codedAllergen:{uuid:le}},severity:{uuid:_e},comment:P,reactions:null==L?void 0:L.map((function(e){return e===O?{reaction:{uuid:e},reactionNonCoded:ee}:{reaction:{uuid:e}}}))},a=new AbortController;(function(e,t,a){return(0,o.openmrsFetch)("/ws/rest/v1/patient/".concat(t,"/allergy"),{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:a.signal})})(t,b,a).then((function(e){201===e.status&&(ge(),v(),(0,o.showToast)({critical:!0,kind:"success",title:S("allergySaved","Allergy saved"),description:S("allergyNowVisible","It is now visible on the Allergies page")}))}),(function(e){(0,o.showNotification)({title:S("allergySaveError","Error saving allergy"),kind:"error",critical:!0,description:null==e?void 0:e.message})})).finally((function(){return a.abort()}))}),[le,O,se,K,_e,P,L,b,ee,v,S,ge]);return r().createElement(i.l09,null,x?r().createElement(i.X2j,{className:E.header},r().createElement(o.ExtensionSlot,{className:E.content,extensionSlotName:"patient-details-header-slot",state:Z})):null,r().createElement("div",{className:"".concat(E.form," ").concat(x?E.tablet:E.desktop)},r().createElement("div",null,r().createElement("h1",{className:E.heading},S("allergensAndReactions","Allergens and reactions")),W?r().createElement(i.K0D,{style:{margin:"0rem",minWidth:"100%"},kind:"error",lowContrast:!0,title:S("errorFetchingData","Error fetching allergens and reactions"),subtitle:S("tryReopeningTheForm","Please try launching the form again")}):null,r().createElement("div",{className:"".concat(E.container," ").concat(x?E.tabletContainer:E.desktopContainer)},r().createElement("section",{className:E.section},r().createElement("h2",{className:E.sectionHeading},S("selectAllergens","Select the allergens")),r().createElement(i.mQc,{onSelectionChange:function(e){switch(e){case 0:ce("DRUG");break;case 1:ce("FOOD");break;case 2:ce("ENVIRONMENT")}}},r().createElement(i.tdY,{"aria-label":"Allergen tabs",className:E.tablist},z.map((function(e,t){return r().createElement(i.OK9,{className:E.tab,id:"tab-".concat(t+1),key:"allergen-tab-".concat(t)},e)}))),r().createElement(i.nPR,null,J?r().createElement(i.lSo,{style:{margin:"1rem"},description:"".concat(S("loading","Loading")," ...")}):z.map((function(e,t){var a,n=e.toLowerCase()+"Allergens";return r().createElement(i.x45,{key:"allergen-tab-panel-".concat(t)},r().createElement("div",{className:x?E.wrapperContainer:void 0},r().createElement(i.SYO,{name:"allergen-type-".concat(t+1),key:n,orientation:"vertical",onChange:function(e){return ie(e.toString())},valueSelected:le},null==T||null===(a=T[n])||void 0===a?void 0:a.map((function(e,t){return r().createElement(i.EUY,{key:"allergen-".concat(t),className:E.radio,id:e.display,labelText:e.display,value:e.uuid})})))))})))),le===O?r().createElement("div",{className:E.input},r().createElement(i.oil,{light:x,id:"nonCodedAllergenType",labelText:S("otherNonCodedAllergen","Other non-coded allergen"),onChange:function(e){return X(e.target.value)},placeholder:S("typeAllergenName","Please type in the name of the allergen")})):null),r().createElement("section",{className:E.section},r().createElement("h2",{className:E.midSectionHeading},S("selectReactions","Select the reactions")),r().createElement("div",{className:x?E.checkboxContainer:void 0,style:{margin:"1rem"}},J?r().createElement(i.lSo,{description:"".concat(S("loading","Loading")," ...")}):null==T||null===(t=T.allergicReactions)||void 0===t?void 0:t.map((function(e,t){return r().createElement(i.XZJ,{className:E.checkbox,key:t,labelText:e.display,id:e.uuid,onChange:me,value:e.display})}))),L.includes(O)?r().createElement("div",{className:E.input},r().createElement(i.oil,{light:x,id:"nonCodedAllergicReaction",labelText:S("otherNonCodedAllergicReaction","Other non-coded allergic reaction"),onChange:function(e){return te(e.target.value)},placeholder:S("typeAllergicReactionName","Please type in the name of the allergic reaction")})):null)),r().createElement("h1",{className:E.heading},S("severityAndOnsetDate","Severity and date of onset")),r().createElement("div",{className:"".concat(E.container," ").concat(x?E.tabletContainer:E.desktopContainer)},r().createElement("section",{className:E.section},r().createElement("h2",{className:E.sectionHeading},S("severityOfWorstReaction","Severity of worst reaction")),r().createElement("div",{className:E.wrapper},r().createElement(i.SYO,{name:"severity-of-worst-reaction",onChange:function(e){return de(e.toString())},valueSelected:_e},H.map((function(e,t){return r().createElement(i.EUY,{id:e.toLowerCase()+"Severity",key:"severity-".concat(t),labelText:e,value:function(){switch(e.toLowerCase()){case"mild":return F;case"moderate":return G;case"severe":return j;default:return""}}()})}))))),r().createElement("section",{className:E.section},r().createElement("h2",{className:E.sectionHeading},S("onsetDateAndComments","Onset date and comments")),r().createElement("div",{className:E.wrapper},r().createElement(i.Kx8,{className:E.textbox,cols:20,light:!x,id:"comments",invalidText:S("invalidComment","Invalid comment, try again"),labelText:S("dateOfOnsetAndComments","Date of onset and comments"),onChange:function(e){return M(e.target.value)},placeholder:S("typeAdditionalComments","Type any additional comments here"),rows:4}))))),r().createElement(i.uVA,{className:x?E.tabletButtons:E.desktopButtons},r().createElement(i.zxk,{className:E.button,onClick:v,kind:"secondary"},S("discard","Discard")),r().createElement(i.zxk,{className:E.button,disabled:!le||le===O&&!K,onClick:ue,kind:"primary"},S("saveAndClose","Save and close")))))}},7614:(e,t,a)=>{a.d(t,{PI:()=>i});var n=a(3255),r=a(3315),l=a(906);function i(e){var t,a,r="".concat(l.fhirBaseUrl,"/AllergyIntolerance?patient=").concat(e),i=(0,n.ZP)(e?r:null,l.openmrsFetch),s=i.data,c=i.error,A=i.isLoading,_=i.isValidating,d=i.mutate,g=(null==s||null===(t=s.data)||void 0===t?void 0:t.total)>0?null==s?void 0:s.data.entry.map((function(e){return null!==(a=e.resource)&&void 0!==a?a:[]})).map(o).sort((function(e,t){return t.lastUpdated>e.lastUpdated?1:-1})):null;return{allergies:s?g:null,isError:c,isLoading:A,isValidating:_,mutate:d}}function o(e){var t,a,n,l,i,o,s,c,A,_,d,g,m,u,p,f=null===(t=null==e?void 0:e.reaction[0])||void 0===t||null===(a=t.manifestation)||void 0===a?void 0:a.map((function(e){var t;return null===(t=e.coding[0])||void 0===t?void 0:t.display}));return{id:null==e?void 0:e.id,clinicalStatus:null===(l=null==e||null===(n=e.clinicalStatus)||void 0===n?void 0:n.coding[0])||void 0===l?void 0:l.display,criticality:null==e?void 0:e.criticality,display:null===(o=null==e||null===(i=e.code)||void 0===i?void 0:i.coding[0])||void 0===o?void 0:o.display,recordedDate:null==e?void 0:e.recordedDate,recordedBy:null==e||null===(s=e.recorder)||void 0===s?void 0:s.display,recorderType:null==e||null===(c=e.recorder)||void 0===c?void 0:c.type,note:null==e||null===(A=e.note)||void 0===A||null===(_=A[0])||void 0===_?void 0:_.text,reactionToSubstance:null===(m=null===(d=null==e?void 0:e.reaction[0])||void 0===d||null===(g=d.substance)||void 0===g?void 0:g.coding[1])||void 0===m?void 0:m.display,reactionManifestations:f,reactionSeverity:(0,r.Z)(null===(u=null==e?void 0:e.reaction[0])||void 0===u?void 0:u.severity),lastUpdated:null==e||null===(p=e.meta)||void 0===p?void 0:p.lastUpdated}}},187:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a(3221).Z.Symbol},8147:(e,t,a)=>{a.d(t,{Z:()=>A});var n=a(187),r=Object.prototype,l=r.hasOwnProperty,i=r.toString,o=n.Z?n.Z.toStringTag:void 0;var s=Object.prototype.toString;var c=n.Z?n.Z.toStringTag:void 0;const A=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":c&&c in Object(e)?function(e){var t=l.call(e,o),a=e[o];try{e[o]=void 0;var n=!0}catch(e){}var r=i.call(e);return n&&(t?e[o]=a:delete e[o]),r}(e):function(e){return s.call(e)}(e)}},2168:(e,t,a)=>{a.d(t,{Z:()=>n});const n="object"==typeof global&&global&&global.Object===Object&&global},3221:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(2168),r="object"==typeof self&&self&&self.Object===Object&&self;const l=n.Z||r||Function("return this")()},3315:(e,t,a)=>{a.d(t,{Z:()=>C});var n=a(4020);const r=function(e,t,a){var n=e.length;return a=void 0===a?n:a,!t&&a>=n?e:function(e,t,a){var n=-1,r=e.length;t<0&&(t=-t>r?0:r+t),(a=a>r?r:a)<0&&(a+=r),r=t>a?0:a-t>>>0,t>>>=0;for(var l=Array(r);++n<r;)l[n]=e[n+t];return l}(e,t,a)};var l=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const i=function(e){return l.test(e)};var o="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",s="\\ud83c[\\udffb-\\udfff]",c="[^\\ud800-\\udfff]",A="(?:\\ud83c[\\udde6-\\uddff]){2}",_="[\\ud800-\\udbff][\\udc00-\\udfff]",d="(?:"+o+"|"+s+")?",g="[\\ufe0e\\ufe0f]?",m=g+d+"(?:\\u200d(?:"+[c,A,_].join("|")+")"+g+d+")*",u="(?:"+[c+o+"?",o,A,_,"[\\ud800-\\udfff]"].join("|")+")",p=RegExp(s+"(?="+s+")|"+u+m,"g");const f=function(e){return i(e)?function(e){return e.match(p)||[]}(e):function(e){return e.split("")}(e)},y=function(e){e=(0,n.Z)(e);var t=i(e)?f(e):void 0,a=t?t[0]:e.charAt(0),l=t?r(t,1).join(""):e.slice(1);return a.toUpperCase()+l},C=function(e){return y((0,n.Z)(e).toLowerCase())}},7885:(e,t,a)=>{a.d(t,{Z:()=>n});const n=Array.isArray},3391:(e,t,a)=>{a.d(t,{Z:()=>n});const n=function(e){return null!=e&&"object"==typeof e}},2758:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(8147),r=a(3391);const l=function(e){return"symbol"==typeof e||(0,r.Z)(e)&&"[object Symbol]"==(0,n.Z)(e)}},4020:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(187);var r=a(7885),l=a(2758),i=n.Z?n.Z.prototype:void 0,o=i?i.toString:void 0;const s=function e(t){if("string"==typeof t)return t;if((0,r.Z)(t))return function(e,t){for(var a=-1,n=null==e?0:e.length,r=Array(n);++a<n;)r[a]=t(e[a],a,e);return r}(t,e)+"";if((0,l.Z)(t))return o?o.call(t):"";var a=t+"";return"0"==a&&1/t==-1/0?"-0":a},c=function(e){return null==e?"":s(e)}},2303:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(3255),r=(0,a(4729).xD)(n.ZP,(e=>(t,a,n)=>(n.revalidateOnFocus=!1,n.revalidateIfStale=!1,n.revalidateOnReconnect=!1,e(t,a,n))))}}]);