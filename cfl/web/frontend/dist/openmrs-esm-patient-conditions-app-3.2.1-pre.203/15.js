"use strict";(self.webpackChunk_openmrs_esm_patient_conditions_app=self.webpackChunk_openmrs_esm_patient_conditions_app||[]).push([[15],{652:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(9601),o=n.n(r),i=n(2609),a=n.n(i)()(o());a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.29;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.29;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-patient-conditions__conditions-detailed-summary__skeleton___iDTj0{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}.-esm-patient-conditions__conditions-detailed-summary__widgetCard___QyCQM{border:1px solid #e0e0e0}",""]),a.locals={widgetCard:"-esm-patient-conditions__conditions-detailed-summary__widgetCard___QyCQM",skeleton:"-esm-patient-conditions__conditions-detailed-summary__skeleton___iDTj0"};const l=a},15:(e,t,n)=>{n.r(t),n.d(t,{default:()=>re});var r=n(9902),o=n.n(r),i=n(8011),a=n(321),l=n.n(a),s=n(1195),c=n.n(s),d=n(3275),u=n.n(d),f=n(7162),p=n.n(f),m=n(2094),g=n.n(m),b=n(757),h=n.n(b),v=n(652),y={};y.styleTagTransform=h(),y.setAttributes=p(),y.insert=u().bind(null,"head"),y.domAPI=c(),y.insertStyleElement=g(),l()(v.Z,y);const Z=v.Z&&v.Z.locals?v.Z.locals:void 0;var _=n(2237);const j=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}(e,t,n)};var w=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const O=function(e){return w.test(e)};var E="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",k="\\ud83c[\\udffb-\\udfff]",S="[^\\ud800-\\udfff]",P="(?:\\ud83c[\\udde6-\\uddff]){2}",C="[\\ud800-\\udbff][\\udc00-\\udfff]",T="(?:"+E+"|"+k+")?",D="[\\ufe0e\\ufe0f]?",x=D+T+"(?:\\u200d(?:"+[S,P,C].join("|")+")"+D+T+")*",z="(?:"+[S+E+"?",E,P,C,"[\\ud800-\\udfff]"].join("|")+")",q=RegExp(k+"(?="+k+")|"+z+x,"g");const A=function(e){return O(e)?function(e){return e.match(q)||[]}(e):function(e){return e.split("")}(e)},M=function(e){e=(0,_.Z)(e);var t=O(e)?A(e):void 0,n=t?t[0]:e.charAt(0),r=t?j(t,1).join(""):e.slice(1);return n.toUpperCase()+r};var X=n(4924),B=n(8580),U=n(182),F=n(7030),I=n(160),V=n(4152),H=n(364),L=n(7500),N=n(8804),Q=n(1358),R=n(2427),W=n(3783),G=n(4548),J=n(3771),K=(0,r.createContext)({patientUuid:void 0,patient:void 0}),Y=n(3066);function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ee(){return ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ee.apply(this,arguments)}const te=function(){var e,t,n=(0,X.useTranslation)().t,a=(0,r.useContext)(K).patient,l=n("conditions","Conditions"),s=n("conditions","Conditions"),c=(0,G.l4)(a.id),d=c.data,u=c.isError,f=c.isLoading,p=c.isValidating,m=o().useMemo((function(){return[{key:"condition",header:n("condition","Condition")},{key:"onsetDateTime",header:n("since","Since")},{key:"status",header:n("status","Status")}]}),[n]),g=o().useMemo((function(){return null==d?void 0:d.map((function(e){return t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$(e,t,n[t])}))}return e}({},e),n=null!=(n={id:e.id,condition:e.display,onsetDateTime:(0,Y.formatDate)((0,Y.parseDate)(e.onsetDateTime),{time:!1,day:!1}),status:(r=e.clinicalStatus,M((0,_.Z)(r).toLowerCase()))})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t;var t,n,r}))}),[d]),b=o().useCallback((function(){return(0,J.launchPatientWorkspace)("conditions-form-workspace")}),[]);return f?o().createElement(B.Z,{role:"progressbar"}):u?o().createElement(J.ErrorState,{error:u,headerTitle:s}):(null==d?void 0:d.length)?o().createElement("div",{className:Z.widgetCard},o().createElement(J.CardHeader,{title:s},o().createElement("span",null,p?o().createElement(U.Z,null):null),o().createElement(F.Z,{kind:"ghost",renderIcon:i.Z,iconDescription:"Add conditions",onClick:b},n("add","Add"))),o().createElement(I.Z,null,o().createElement(V.ZP,{rows:g,headers:m,isSortable:!0,size:"short"},(function(n){var r=n.rows,i=n.headers,a=n.getHeaderProps,l=n.getTableProps;return o().createElement(H.Z,ee({},l(),{useZebraStyles:!0}),o().createElement(L.Z,null,o().createElement(N.Z,null,i.map((function(t){var n;return o().createElement(Q.Z,ee({className:"".concat(Z.productiveHeading01," ").concat(Z.text02)},a({header:t,isSortable:t.isSortable})),null!==(e=null===(n=t.header)||void 0===n?void 0:n.content)&&void 0!==e?e:t.header)})))),o().createElement(R.Z,null,r.map((function(e){return o().createElement(N.Z,{key:e.id},e.cells.map((function(e){var n;return o().createElement(W.Z,{key:e.id},null!==(t=null===(n=e.value)||void 0===n?void 0:n.content)&&void 0!==t?t:e.value)})))}))))})))):o().createElement(J.EmptyState,{displayText:l,headerTitle:s,launchForm:b})};var ne=n(9575);function re(e){var t=e.basePath,n=e.patientUuid,r=e.patient;return o().createElement(K.Provider,{value:{patientUuid:n,patient:r}},o().createElement(ne.BrowserRouter,{basename:"".concat(window.spaBase).concat(t,"/conditions")},o().createElement(ne.Switch,null,o().createElement(ne.Route,{exact:!0,path:"/",component:te}))))}},4548:(e,t,n)=>{n.d(t,{De:()=>l,l4:()=>a,qz:()=>c});var r=n(9857),o=n(2188),i=n(3066);function a(e){var t,n,o,a=(0,r.ZP)("".concat(i.fhirBaseUrl,"/Condition?patient=").concat(e),i.openmrsFetch),l=a.data,c=a.error,d=a.isValidating,u=(null==l||null===(t=l.data)||void 0===t?void 0:t.total)>0?null==l||null===(n=l.data)||void 0===n?void 0:n.entry.map((function(e){return null!==(o=e.resource)&&void 0!==o?o:[]})).map(s).sort((function(e,t){return t.onsetDateTime>e.onsetDateTime?1:-1})):null;return{data:l?u:null,isError:c,isLoading:!l&&!c,isValidating:d}}function l(e){return(0,i.openmrsObservableFetch)("/ws/rest/v1/conceptsearch?conceptClasses=".concat("8d4918b0-c2cc-11de-8d13-0010c6dffd0f","&q=").concat(e)).pipe((0,o.U)((function(e){return e.data.results})))}function s(e){var t,n,r,o,i,a;return{clinicalStatus:null===(n=null==e||null===(t=e.clinicalStatus)||void 0===t?void 0:t.coding[0])||void 0===n?void 0:n.code,conceptId:null===(o=null==e||null===(r=e.code)||void 0===r?void 0:r.coding[0])||void 0===o?void 0:o.code,display:null===(a=null==e||null===(i=e.code)||void 0===i?void 0:i.coding[0])||void 0===a?void 0:a.display,onsetDateTime:null==e?void 0:e.onsetDateTime,recordedDate:null==e?void 0:e.recordedDate,id:null==e?void 0:e.id}}function c(e,t){return(0,i.openmrsObservableFetch)("".concat(i.fhirBaseUrl,"/Condition"),{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:t})}},187:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n(3221).Z.Symbol},9001:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(187),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,l=r.Z?r.Z.toStringTag:void 0;var s=Object.prototype.toString;var c=r.Z?r.Z.toStringTag:void 0;const d=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":c&&c in Object(e)?function(e){var t=i.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[l]=n:delete e[l]),o}(e):function(e){return s.call(e)}(e)}},2168:(e,t,n)=>{n.d(t,{Z:()=>r});const r="object"==typeof global&&global&&global.Object===Object&&global},3221:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(2168),o="object"==typeof self&&self&&self.Object===Object&&self;const i=r.Z||o||Function("return this")()},7885:(e,t,n)=>{n.d(t,{Z:()=>r});const r=Array.isArray},3391:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(e){return null!=e&&"object"==typeof e}},2758:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(9001),o=n(3391);const i=function(e){return"symbol"==typeof e||(0,o.Z)(e)&&"[object Symbol]"==(0,r.Z)(e)}},2237:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(187);var o=n(7885),i=n(2758),a=r.Z?r.Z.prototype:void 0,l=a?a.toString:void 0;const s=function e(t){if("string"==typeof t)return t;if((0,o.Z)(t))return function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(t,e)+"";if((0,i.Z)(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},c=function(e){return null==e?"":s(e)}}}]);