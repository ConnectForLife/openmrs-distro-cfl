"use strict";(self.webpackChunk_openmrs_esm_patient_banner_app=self.webpackChunk_openmrs_esm_patient_banner_app||[]).push([[3],{9926:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(9601),r=n.n(a),i=n(2609),o=n.n(i)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-banner__patient-banner__container___zZt9_{border-top:.063rem solid #e0e0e0;border-bottom:.063rem solid #e0e0e0;background-color:#f4f4f4}.-esm-patient-banner__patient-banner__patientBanner___IDwxO{display:flex}.-esm-patient-banner__patient-banner__patientName___P3BMI{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);margin-right:.25rem}.-esm-patient-banner__patient-banner__patientAvatar___hniLH{width:5rem;height:5rem;margin:1rem;border-radius:1px}.-esm-patient-banner__patient-banner__patientAvatarButton___b_2TM{cursor:pointer;border:none;padding:0px;background:none}.-esm-patient-banner__patient-banner__patientInfo___UzTFD{width:100%}.-esm-patient-banner__patient-banner__demographics___eVcsb{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#525252;margin-top:.375rem}.-esm-patient-banner__patient-banner__row___hXYG5{display:flex;flex-direction:row;justify-content:space-between;align-items:baseline}.-esm-patient-banner__patient-banner__patientNameRow___w7562{margin-top:.875rem}.-esm-patient-banner__patient-banner__flexRow___nebHD{display:flex;flex-flow:row wrap;align-items:center}.-esm-patient-banner__patient-banner__identifiers___RmAPe{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#8d8d8d;display:flex;flex-wrap:wrap}.-esm-patient-banner__patient-banner__identifierTag____c1md{display:flex;align-items:center;padding:.125rem}.-esm-patient-banner__patient-banner__tooltipPadding___TRa3p{padding:.25rem}.-esm-patient-banner__patient-banner__tooltipSmallText___OUMvJ{font-size:80%}.-esm-patient-banner__patient-banner__actionsButtonText___n8Zan{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#0f62fe}.cds--tooltip--definition .cds--tooltip__trigger{border-bottom:none}",""]),o.locals={container:"-esm-patient-banner__patient-banner__container___zZt9_",patientBanner:"-esm-patient-banner__patient-banner__patientBanner___IDwxO",patientName:"-esm-patient-banner__patient-banner__patientName___P3BMI",patientAvatar:"-esm-patient-banner__patient-banner__patientAvatar___hniLH",patientAvatarButton:"-esm-patient-banner__patient-banner__patientAvatarButton___b_2TM",patientInfo:"-esm-patient-banner__patient-banner__patientInfo___UzTFD",demographics:"-esm-patient-banner__patient-banner__demographics___eVcsb",row:"-esm-patient-banner__patient-banner__row___hXYG5",patientNameRow:"-esm-patient-banner__patient-banner__patientNameRow___w7562",flexRow:"-esm-patient-banner__patient-banner__flexRow___nebHD",identifiers:"-esm-patient-banner__patient-banner__identifiers___RmAPe",identifierTag:"-esm-patient-banner__patient-banner__identifierTag____c1md",tooltipPadding:"-esm-patient-banner__patient-banner__tooltipPadding___TRa3p",tooltipSmallText:"-esm-patient-banner__patient-banner__tooltipSmallText___OUMvJ",actionsButtonText:"-esm-patient-banner__patient-banner__actionsButtonText___n8Zan"};const l=o},7018:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(9601),r=n.n(a),i=n(2609),o=n.n(i)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-banner__contact-details__contactDetails___DhvqY{color:#525252;width:100%;border-top:1px solid #e0e0e0}.-esm-patient-banner__contact-details__heading___kI1H1{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);color:#525252}.-esm-patient-banner__contact-details__row___He4h7{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);display:flex}.-esm-patient-banner__contact-details__row___He4h7:first-child{border-bottom:1px solid #e0e0e0}.-esm-patient-banner__contact-details__row___He4h7>.-esm-patient-banner__contact-details__col___EWBGr{flex:1;padding:1rem 1rem}.-esm-patient-banner__contact-details__row___He4h7>.-esm-patient-banner__contact-details__col___EWBGr:nth-of-type(2n + 1){border-right:1px solid #e0e0e0}.-esm-patient-banner__contact-details__row___He4h7 li{margin:.5rem 0}.-esm-patient-banner__contact-details__relationship___WTjpq{display:flex;flex-flow:row nowrap}.-esm-patient-banner__contact-details__relationship___WTjpq div{flex:1 1}",""]),o.locals={contactDetails:"-esm-patient-banner__contact-details__contactDetails___DhvqY",heading:"-esm-patient-banner__contact-details__heading___kI1H1",row:"-esm-patient-banner__contact-details__row___He4h7",col:"-esm-patient-banner__contact-details__col___EWBGr",relationship:"-esm-patient-banner__contact-details__relationship___WTjpq"};const l=o},4003:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var a=n(268),r=n.n(a),i=n(4924),o=n(5573),l=n(2711),s=n(6070),c=n(2074),d=n(906),p=n(9857);var _=n(2303),u=n(6062),m=n.n(u),f=n(4036),b=n.n(f),v=n(6793),g=n.n(v),h=n(7892),y=n.n(h),w=n(1173),E=n.n(w),x=n(2464),T=n.n(x),A=n(7018),N={};N.styleTagTransform=T(),N.setAttributes=y(),N.insert=g().bind(null,"head"),N.domAPI=b(),N.insertStyleElement=E(),m()(A.Z,N);const S=A.Z&&A.Z.locals?A.Z.locals:void 0;var I=function(e){var t=e.address,n=(0,i.useTranslation)().t;return r().createElement(r().Fragment,null,r().createElement("p",{className:S.heading},n("address","Address")),r().createElement("ul",null,t?r().createElement(r().Fragment,null,r().createElement("li",null,t.postalCode),r().createElement("li",null,t.city),r().createElement("li",null,t.state),r().createElement("li",null,t.country)):"--"))},D=function(e){var t=e.telecom,n=e.patientUuid,a=(0,i.useTranslation)().t,o=(null==t?void 0:t.length)?t[0].value:"--",s=function(e){var t=(0,d.useConfig)().contactAttributeType,n=function(e){var t,n,a,r=(0,_.Z)("/ws/rest/v1/patient/".concat(e,"?v=").concat("custom:(uuid,display,identifiers:(identifier,uuid,preferred,location:(uuid,name),identifierType:(uuid,name,format,formatDescription,validator)),person:(uuid,display,gender,birthdate,dead,age,deathDate,birthdateEstimated,causeOfDeath,preferredName:(uuid,preferred,givenName,middleName,familyName),attributes,preferredAddress:(uuid,preferred,address1,address2,cityVillage,longitude,stateProvince,latitude,country,postalCode,countyDistrict,address3,address4,address5,address6,address7)))"),d.openmrsFetch),i=r.data,o=r.error;return{isLoading:!i&&!o,attributes:null!==(a=null==i||null===(t=i.data)||void 0===t||null===(n=t.person)||void 0===n?void 0:n.attributes)&&void 0!==a?a:[],error:o}}(e),a=n.attributes,r=n.isLoading,i=null==a?void 0:a.filter((function(e){var n=e.attributeType;return null==t?void 0:t.some((function(e){return(null==n?void 0:n.uuid)===e}))}));return{contactAttributes:null!=i?i:[],isLoading:r}}(n),c=s.isLoading,p=s.contactAttributes;return r().createElement(r().Fragment,null,r().createElement("p",{className:S.heading},a("contactDetails","Contact Details")),r().createElement("ul",null,r().createElement("li",null,o),c?r().createElement(l.lSo,{description:a("loading","Loading...")}):null==p?void 0:p.map((function(e){var t=e.attributeType,n=e.value,a=e.uuid;return r().createElement("li",{key:a},t.display," : ",n)}))))},k=function(e){var t=e.patientId,n=(0,i.useTranslation)().t,a=function(e){var t,n,a=(0,p.ZP)("/ws/rest/v1/relationship?v=".concat("custom:(display,uuid,personA:(uuid,display,person:(age,display)),personB:(uuid,display,person:(age,display)),relationshipType:(uuid,display,description,aIsToB,bIsToA))","&person=").concat(e),d.openmrsFetch),r=a.data,i=a.error,o=a.isValidating,l=(null==r||null===(t=r.data)||void 0===t||null===(n=t.results)||void 0===n?void 0:n.length)?function(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var s=o.value;e===s.personA.uuid?n.push({uuid:s.uuid,display:s.personB.person.display,relativeAge:s.personB.person.age,relativeUuid:s.personB.uuid,relationshipType:s.relationshipType.bIsToA}):n.push({uuid:s.uuid,display:s.personA.person.display,relativeAge:s.personA.person.age,relativeUuid:s.personA.uuid,relationshipType:s.relationshipType.aIsToB})}}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,r.data.results):null;return{data:r?l:null,isError:i,isLoading:!r&&!i,isValidating:o}}(t),o=a.data,s=a.isLoading;return r().createElement(r().Fragment,null,r().createElement("p",{className:S.heading},n("relationships","Relationships")),r().createElement(r().Fragment,null,s?r().createElement(l.lSo,{description:"Loading...",role:"progressbar"}):(null==o?void 0:o.length)?r().createElement("ul",null,o.map((function(e){return r().createElement("li",{key:e.uuid,className:S.relationship},r().createElement("div",null,e.display),r().createElement("div",null,e.relationshipType),r().createElement("div",null,"".concat(e.relativeAge," ").concat(1===e.relativeAge?"yr":"yrs")))}))):r().createElement("p",null,"--")))};const B=function(e){var t=e.address,n=e.telecom,a=e.patientId,i=t?t.find((function(e){return"home"===e.use})):void 0;return r().createElement("div",{className:S.contactDetails},r().createElement("div",{className:S.row},r().createElement("div",{className:S.col},r().createElement(I,{address:i})),r().createElement("div",{className:S.col},r().createElement(D,{telecom:n,patientUuid:a}))),r().createElement("div",{className:S.row},r().createElement("div",{className:S.col},r().createElement(k,{patientId:a})),r().createElement("div",{className:S.col})))};function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const C=function(e){var t,n,i=e.dropDownMenu,o=e.menuTitle,l=e.children,s=(t=(0,a.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw r}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=s[0],d=s[1],p=(0,a.useRef)(null);(0,a.useEffect)((function(){i||d((function(e){return e})),d((function(){return!1}))}),[i]);var _=(0,a.useCallback)((function(){return d((function(e){return!e}))}),[]);return(0,a.useEffect)((function(){var e=function(e){p.current&&!p.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[p]),r().createElement("div",{"data-overflow-menu":!0,className:"cds--overflow-menu",style:{width:"auto",height:"auto",marginBottom:"-1.5rem",marginTop:"-1.25rem"},ref:p},r().createElement("button",{className:"cds--overflow-menu__trigger ".concat(c&&"cds--overflow-menu--open"),"aria-haspopup":"true","aria-expanded":c,id:"custom-actions-overflow-menu-trigger","aria-controls":"custom-actions-overflow-menu",onClick:_,style:{width:"auto",height:"auto",padding:"1rem",color:"#0f62fe",outline:"2rem solid transparent",boxShadow:c?"0 2px 6px 0 rgb(0 0 0 / 30%)":"none"}},o),r().createElement("div",{className:"cds--overflow-menu-options cds--overflow-menu--flip",tabIndex:0,"data-floating-menu-direction":"bottom",role:"menu","aria-labelledby":"custom-actions-overflow-menu-trigger",id:"custom-actions-overflow-menu",style:{display:c?"block":"none",top:"3.125rem",minWidth:"initial",left:"auto",right:"0",backgroundColor:"#f4f4f4",marginRight:"0.2rem",boxShadow:"0 6px 6px rgb(0 0 0 / 30%)"}},r().createElement("ul",{className:"cds--overflow-menu-options__content"},l),r().createElement("span",null)))};var R=n(9926),Z={};Z.styleTagTransform=T(),Z.setAttributes=y(),Z.insert=g().bind(null,"head"),Z.domAPI=b(),Z.insertStyleElement=E(),m()(R.Z,Z);const L=R.Z&&R.Z.locals?R.Z.locals:void 0;function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function P(){return P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},P.apply(this,arguments)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(l)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const j=function(e){var t,n,a,p,_,u,m,f=e.patient,b=e.patientUuid,v=e.onClick,g=e.onTransition,h=e.hideActionsOverflow,y=(0,i.useTranslation)().t,w=r().useRef(null),E=r().useMemo((function(){return{patientUuid:b,onClick:v,onTransition:g}}),[b,v,g]),x="".concat(null==f||null===(t=f.name)||void 0===t||null===(n=t[0])||void 0===n||null===(a=n.given)||void 0===a?void 0:a.join(" ")," ").concat(null==f||null===(p=f.name)||void 0===p?void 0:p[0].family),T=r().useMemo((function(){return{patientUuid:b,patientName:x}}),[b,x]),A=U(r().useState(!1),2),N=A[0],S=A[1],I=r().useCallback((function(e){e.stopPropagation(),S((function(e){return!e}))}),[]),D=r().createElement("div",{className:L.patientAvatar,role:"img"},r().createElement(d.ExtensionSlot,{extensionSlotName:"patient-photo-slot",state:T})),k=U(r().useState(!1),2),z=k[0],R=k[1],Z=r().useCallback((function(e){e.stopPropagation(),R((function(e){return!e}))}),[]);return r().createElement("div",{className:L.container,role:"banner"},r().createElement("div",{onClick:function(e){v&&(!(null==w?void 0:w.current)||!(null==w?void 0:w.current.contains(e.target)))&&v(b)},tabIndex:0,role:"button",className:"".concat(L.patientBanner," ").concat(v&&L.patientAvatarButton)},D,r().createElement("div",{className:L.patientInfo},r().createElement("div",{className:"".concat(L.row," ").concat(L.patientNameRow)},r().createElement("div",{className:L.flexRow},r().createElement("span",{className:L.patientName},x),r().createElement(d.ExtensionSlot,{extensionSlotName:"patient-banner-tags-slot",state:{patientUuid:b,patient:f},className:L.flexRow})),!h&&r().createElement("div",{ref:w},r().createElement(C,{menuTitle:r().createElement(r().Fragment,null,r().createElement("span",{className:L.actionsButtonText},y("actions","Actions"))," ",r().createElement(s.r4,{size:16,style:{marginLeft:"0.5rem"}})),dropDownMenu:z},r().createElement(d.ExtensionSlot,{onClick:Z,extensionSlotName:"patient-actions-slot",key:"patient-actions-slot",className:L.overflowMenuItemList,state:E})))),r().createElement("div",{className:L.demographics},r().createElement("span",null,(0,o.Z)(null==f?void 0:f.gender))," · ",r().createElement("span",null,(0,d.age)(null==f?void 0:f.birthDate))," ·"," ",r().createElement("span",null,(0,d.formatDate)((0,d.parseDate)(null==f?void 0:f.birthDate),{mode:"wide",time:!1}))),r().createElement("div",{className:L.row},r().createElement("div",{className:L.identifiers},(null==f||null===(_=f.identifier)||void 0===_?void 0:_.length)?null==f?void 0:f.identifier.map((function(e){var t=e.value,n=e.type;return r().createElement("span",{className:L.identifierTag},r().createElement(l.Vp9,{key:t,type:"gray",title:n.text},n.text),t,"·")})):""),r().createElement(l.zxk,{kind:"ghost",renderIcon:function(e){return N?r().createElement(c.Kh,P({size:16},e)):r().createElement(c._M,P({size:16},e))},iconDescription:"Toggle contact details",onClick:I,style:{marginTop:"-0.25rem"}},N?y("showLess","Show less"):y("showAllDetails","Show all details"))))),N&&r().createElement(B,{address:null!==(u=null==f?void 0:f.address)&&void 0!==u?u:[],telecom:null!==(m=null==f?void 0:f.telecom)&&void 0!==m?m:[],patientId:null==f?void 0:f.id}))}}}]);