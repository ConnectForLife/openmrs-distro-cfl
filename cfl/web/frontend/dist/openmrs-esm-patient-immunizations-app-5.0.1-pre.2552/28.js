"use strict";(globalThis.webpackChunk_openmrs_esm_patient_immunizations_app=globalThis.webpackChunk_openmrs_esm_patient_immunizations_app||[]).push([[28],{4345:(e,n,t)=>{t.d(n,{Z:()=>c});var r=t(272),i=t.n(r),a=t(2609),o=t.n(a)()(i());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-immunizations__immunizations-overview__widgetCard___ZH5vJ{border:1px solid #e0e0e0}.-esm-patient-immunizations__immunizations-overview__immunizationOverviewSummaryCard___chDLb{margin:1.25rem 1.5rem}.-esm-patient-immunizations__immunizations-overview__immunizationMore___bGnAQ{display:flex;align-items:center;border:none;padding:.625rem 1.625rem .625rem 1rem;background-color:var(--omrs-color-bg-medium-contrast);color:var(--omrs-color-ink-medium-contrast);cursor:pointer}.-esm-patient-immunizations__immunizations-overview__immunizationMore___bGnAQ p{margin:0}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/immunizations/immunizations-overview.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCrDF,wEACE,wBAAA,CAGF,6FACE,qBAAA,CAGF,8EACE,YAAA,CACA,kBAAA,CACA,WAAA,CACA,qCAAA,CACA,qDAAA,CACA,2CAAA,CACA,cAAA,CAGF,gFACE,QAAA",sourceRoot:""}]),o.locals={widgetCard:"-esm-patient-immunizations__immunizations-overview__widgetCard___ZH5vJ",immunizationOverviewSummaryCard:"-esm-patient-immunizations__immunizations-overview__immunizationOverviewSummaryCard___chDLb",immunizationMore:"-esm-patient-immunizations__immunizations-overview__immunizationMore___bGnAQ"};const c=o},1756:(e,n,t)=>{t.d(n,{V:()=>d,j:()=>p});var r=t(2870),i=t(5961),a=t(772),o=t(8128),c=t(4402),u=t(3012),l=t(3211),s=function(e){var n,t,i=null==e?void 0:e.resource,a=null==i?void 0:i.id,o=null==i||null===(n=i.manufacturer)||void 0===n?void 0:n.display,c=null==i?void 0:i.lotNumber,u=(null==i||null===(t=i.protocolApplied)||void 0===t?void 0:t.length)>0&&(null==i?void 0:i.protocolApplied[0]);return{immunizationObsUuid:a,manufacturer:o,lotNumber:c,sequenceLabel:null==u?void 0:u.series,sequenceNumber:null==u?void 0:u.doseNumberPositiveInt,occurrenceDateTime:(0,r.formatDate)(new Date(null==i?void 0:i.occurrenceDateTime)),expirationDate:(0,r.formatDate)(new Date(null==i?void 0:i.expirationDate))}},m=function(e){var n;return(0,i.Z)(null==e||null===(n=e.vaccineCode)||void 0===n?void 0:n.coding,(function(e){return(0,c.Z)(e.system)}))},d=function(e){var n=(0,o.Z)(e.entry,(function(e){var n;return null===(n=m(e.resource))||void 0===n?void 0:n.code}));return(0,u.Z)(n,(function(e){var n,t=(0,u.Z)(e,s),r=m(null===(n=e[0])||void 0===n?void 0:n.resource);return{vaccineName:null==r?void 0:r.display,vaccineUuid:null==r?void 0:r.code,existingDoses:(0,l.Z)(t,[function(e){return(0,a.Z)(e,"occurrenceDateTime")}],["desc"])}}))};function v(e,n){return{type:e,reference:"".concat(e,"/").concat(n)}}var p=function(e,n,t,i){return{resourceType:"Immunization",status:"completed",id:e.immunizationObsUuid,vaccineCode:{coding:[{code:e.vaccineUuid,display:e.vaccineName}]},patient:v("Patient",e.patientUuid),encounter:v("Encounter",n),occurrenceDateTime:(0,r.parseDate)(e.vaccinationDate),expirationDate:(0,r.parseDate)(e.expirationDate),location:v("Location",t),performer:[{actor:v("Practitioner",i)}],manufacturer:{display:e.manufacturer},lotNumber:e.lotNumber,protocolApplied:[{doseNumberPositiveInt:e.currentDose.sequenceNumber,series:e.currentDose.sequenceLabel}]}}},8028:(e,n,t)=>{t.r(n),t.d(n,{default:()=>P});var r=t(268),i=t.n(r),a=t(4924),o=t(4538),c=t(6759),u=t(4556),l=t(8108),s=t(2870),m=t(1354),d=t.n(m),v=t(1583),p=t.n(v),A=t(7378),b=t.n(A),f=t(5993),g=t.n(f),_=t(4154),y=t.n(_),C=t(8141),h=t.n(C),w=t(4345),z={};z.styleTagTransform=h(),z.setAttributes=g(),z.insert=b().bind(null,"head"),z.domAPI=p(),z.insertStyleElement=y(),d()(w.Z,z);const D=w.Z&&w.Z.locals?w.Z.locals:void 0;function E(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){E(e,n,t[n])}))}return e}const P=function(e){e.patient;var n=e.patientUuid,t=e.basePath,r=(0,a.useTranslation)().t,m=r("immunizations","immunizations"),d=r("immunizations","Immunizations"),v=r("seeAll","See all"),p=window.spaBase+t+"/immunizations",A=(0,l.dv)(n),b=A.data,f=A.isError,g=A.isLoading,_=A.isValidating,y=(0,s.usePagination)(null!=b?b:[],5),C=y.results,h=y.goTo,w=y.currentPage,z=i().useCallback((function(){return(0,u.launchPatientWorkspace)("immunization-form-workspace")}),[]),E=[{key:"vaccineName",header:r("recentVaccination","Recent vaccination")},{key:"vaccinationDate",header:r("vaccinationDate","Vaccination date")}],P=i().useMemo((function(){return null==C?void 0:C.map((function(e,n){return t=O({},e),r=null!=(r={id:"".concat(n),vaccineName:e.vaccineName,vaccinationDate:"".concat((0,s.formatDate)((0,s.parseDate)(e.existingDoses[0].occurrenceDateTime),{day:!1,time:!1}))})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t}(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})),t;var t,r}))}),[C]);return g?i().createElement(o.gqd,{role:"progressbar"}):f?i().createElement(u.ErrorState,{error:f,headerTitle:d}):(null==b?void 0:b.length)?i().createElement("div",{className:D.widgetCard},i().createElement(u.CardHeader,{title:d},i().createElement("span",null,_?i().createElement(o.lSo,null):null),i().createElement(o.zxk,{kind:"ghost",renderIcon:function(e){return i().createElement(c.mm,O({size:16},e))},iconDescription:"Add immunizations",onClick:z},r("add","Add"))),i().createElement(o.wQF,{headers:E,rows:P,isSortable:!0,size:"sm",useZebraStyles:!0},(function(e){var n=e.rows,t=e.headers,r=e.getHeaderProps,a=e.getTableProps;return i().createElement(o.xJi,null,i().createElement(o.iA_,a(),i().createElement(o.ssF,null,i().createElement(o.SCH,null,t.map((function(e){var n,t;return i().createElement(o.xDH,O({className:"".concat(D.productiveHeading01," ").concat(D.text02)},r({header:e,isSortable:e.isSortable})),null!==(t=null===(n=e.header)||void 0===n?void 0:n.content)&&void 0!==t?t:e.header)})))),i().createElement(o.RMI,null,n.map((function(e){return i().createElement(o.SCH,{key:e.id},e.cells.map((function(e){var n,t;return i().createElement(o.pj1,{key:e.id},null!==(t=null===(n=e.value)||void 0===n?void 0:n.content)&&void 0!==t?t:e.value)})))})))))})),i().createElement(u.PatientChartPagination,{currentItems:C.length,onPageNumberChange:function(e){var n=e.page;return h(n)},pageNumber:w,pageSize:5,totalItems:b.length,dashboardLinkUrl:p,dashboardLinkLabel:v})):i().createElement(u.EmptyState,{displayText:m,headerTitle:d,launchForm:z})}},8108:(e,n,t)=>{t.d(n,{dv:()=>l,eu:()=>s,iX:()=>u});var r=t(3255),i=t(2870),a=t(4185),o=t(1756);function c(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function u(){var e,n,t,o=(0,i.useConfig)().immunizationsConfig,u=null==o?void 0:o.vaccinesConceptSet,l=(n=u.split(":"),t=2,function(e){if(Array.isArray(e))return e}(n)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,c=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(e){c=!0,i=e}finally{try{o||null==t.return||t.return()}finally{if(c)throw i}}return a}}(n,t)||function(e,n){if(e){if("string"==typeof e)return c(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?c(e,n):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=l[0],m=l[1],d="/ws/rest/v1/concept?source=".concat(s,"&code=").concat(m,"&v=full"),v="/ws/rest/v1/concept/".concat(u,"?v=full"),p=(0,r.ZP)((e=u,(0,a.Z)(e,":")?d:v),i.openmrsFetch),A=p.data,b=p.error,f=p.isLoading;return{data:A?A.data.results[0]:null,isError:b,isLoading:f}}function l(e){var n="".concat(i.fhirBaseUrl,"/Immunization?patient=").concat(e),t=(0,r.ZP)(n,i.openmrsFetch),a=t.data,c=t.error,u=t.isLoading,l=t.isValidating,s=a?(0,o.V)(a.data):null;return{data:a?s:null,isError:c,isLoading:u,isValidating:l}}function s(e,n,t,r){var a="".concat(i.fhirBaseUrl,"/Immunization");return t&&(a="".concat(a,"/").concat(t)),(0,i.openmrsFetch)(a,{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:r.signal})}}}]);