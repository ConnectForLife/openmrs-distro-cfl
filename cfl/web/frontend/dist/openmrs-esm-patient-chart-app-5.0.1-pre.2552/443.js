"use strict";(globalThis.webpackChunk_openmrs_esm_patient_chart_app=globalThis.webpackChunk_openmrs_esm_patient_chart_app||[]).push([[443],{443:(e,n,a)=>{a.r(n),a.d(n,{default:()=>d});var t=a(268),i=a.n(t),s=a(4350),o=a(4924),r=a(2870),u=a(7089);const d=function(e){var n=e.patientUuid,a=(0,o.useTranslation)().t,d=(0,u.mk)(n),l=d.isDead,c=d.isLoading,p=(0,t.useCallback)((function(){var e=(0,r.showModal)("confirm-alive-modal",{patientUuid:n,closeDialog:function(){return e()}})}),[n]);return!c&&l&&i().createElement(s.OverflowMenuItem,{itemText:a("markAlive","Mark alive"),onClick:p,style:{maxWidth:"100vw"}})}},7089:(e,n,a)=>{a.d(n,{FA:()=>r,ZY:()=>l,mk:()=>u,sy:()=>c});var t=a(268),i=a(3255),s=a(2870);function o(e,n){return null!=n&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](e):e instanceof n}function r(){var e,n,a,r,u=(e=(0,i.ZP)("/ws/rest/v1/systemsetting/concept.causeOfDeath",s.openmrsFetch,{shouldRetryOnError:function(e){return o(e,Response)&&404!==e.status}}),n=e.data,e.error,a=e.isLoading,r=e.isValidating,(0,t.useMemo)((function(){var e,t;return{value:null!==(t=null==n||null===(e=n.data)||void 0===e?void 0:e.value)&&void 0!==t?t:void 0,isCauseOfDeathLoading:a,isCauseOfDeathValidating:r}}),[n,a,r])),d=u.isCauseOfDeathLoading,l=u.isCauseOfDeathValidating,c=function(e){var n,a,t=(0,i.ZP)("/ws/rest/v1/concept/".concat(e),(function(n){return e?(0,s.openmrsFetch)(n):void 0}),{shouldRetryOnError:function(e){return o(e,Response)&&404!==e.status}}),r=t.data,u=t.error,d=t.isLoading,l=t.isValidating;return{conceptAnswers:null!==(a=null==r||null===(n=r.data)||void 0===n?void 0:n.answers)&&void 0!==a?a:[],isConceptLoading:d,conceptError:u,isConceptAnswerValidating:l}}(u.value),p=c.isConceptLoading,v=c.isConceptAnswerValidating;return{conceptAnswers:c.conceptAnswers,isLoading:d||p,isValidating:v||l}}function u(e){var n,a=(0,s.usePatient)(e),t=a.isLoading,i=a.patient;return t?{deathDate:void 0,isDead:void 0,isLoading:t}:{deathDate:i.deceasedDateTime,isDead:null!==(n=i.deceasedBoolean)&&void 0!==n?n:Boolean(i.deceasedDateTime),isLoading:t}}var d=function(e,n,a){return(0,s.openmrsFetch)("/ws/rest/v1/person/".concat(e),{headers:{"Content-type":"application/json"},method:"POST",body:n,signal:a.signal})};function l(e,n,a,t){var i={causeOfDeath:a,dead:!0};return i.deathDate=e?new Date(e.getFullYear(),e.getMonth(),e.getDay()):null,d(n,i,t)}function c(e,n){return d(e,{deathDate:null,causeOfDeath:null,dead:!1},n)}}}]);