"use strict";(self.webpackChunk_openmrs_esm_patient_conditions_app=self.webpackChunk_openmrs_esm_patient_conditions_app||[]).push([[103],{5404:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(9601),o=n.n(r),a=n(2609),i=n.n(a)()(o());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-conditions__conditions-overview__widgetCard___LjFok{border:1px solid #e0e0e0}",""]),i.locals={widgetCard:"-esm-patient-conditions__conditions-overview__widgetCard___LjFok"};const l=i},5103:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var r=n(268),o=n.n(r),a=n(4924),i=n(3385),l=n(906),c=n(6217),d=n(6759),s=n(4548),u=n(6062),p=n.n(u),m=n(4036),v=n.n(m),b=n(6793),f=n.n(b),g=n(7892),h=n.n(g),y=n(1173),O=n.n(y),E=n(2464),_=n.n(E),P=n(5404),w={};w.styleTagTransform=_(),w.setAttributes=h(),w.insert=f().bind(null,"head"),w.domAPI=v(),w.insertStyleElement=O(),p()(P.Z,w);const C=P.Z&&P.Z.locals?P.Z.locals:void 0;function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(){return j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}const k=function(e){var t,n,r=e.patient,u=(e.basePath,(0,a.useTranslation)().t),p=u("conditions","Conditions"),m=u("conditions","Conditions"),v=u("seeAll","See all"),b="${openmrsSpaBase}/patient/".concat(r.id,"/chart/Conditions"),f=(0,s.l4)(r.id),g=f.data,h=f.isError,y=f.isLoading,O=f.isValidating,E=(0,l.usePagination)(null!=g?g:[],5),_=E.results,P=E.goTo,w=E.currentPage,k=o().useCallback((function(){return(0,c.launchPatientWorkspace)("conditions-form-workspace")}),[]),D=[{key:"display",header:u("activeConditions","Active Conditions")},{key:"onsetDateTime",header:u("since","Since")}],T=o().useMemo((function(){return null==_?void 0:_.map((function(e){return t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}({},e),n=null!=(n={onsetDateTime:(0,l.formatDate)((0,l.parseDate)(e.onsetDateTime),{time:!1,day:!1})})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t;var t,n}))}),[_]);return y?o().createElement(i.gqd,{role:"progressbar"}):h?o().createElement(c.ErrorState,{error:h,headerTitle:m}):(null==g?void 0:g.length)?o().createElement("div",{className:C.widgetCard},o().createElement(c.CardHeader,{title:m},o().createElement("span",null,O?o().createElement(i.lSo,null):null),o().createElement(i.zxk,{kind:"ghost",renderIcon:function(e){return o().createElement(d.mm,j({size:16},e))},iconDescription:"Add conditions",onClick:k},u("add","Add"))),o().createElement(i.wQF,{rows:T,headers:D,isSortable:!0,size:"sm",useZebraStyles:!0},(function(e){var r=e.rows,a=e.headers,l=e.getHeaderProps,c=e.getTableProps;return o().createElement(i.xJi,null,o().createElement(i.iA_,j({},c()),o().createElement(i.ssF,null,o().createElement(i.SCH,null,a.map((function(e){var n;return o().createElement(i.xDH,j({className:"".concat(C.productiveHeading01," ").concat(C.text02)},l({header:e,isSortable:e.isSortable})),null!==(t=null===(n=e.header)||void 0===n?void 0:n.content)&&void 0!==t?t:e.header)})))),o().createElement(i.RMI,null,r.map((function(e){return o().createElement(i.SCH,{key:e.id},e.cells.map((function(e){var t;return o().createElement(i.pj1,{key:e.id},null!==(n=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==n?n:e.value)})))})))))})),o().createElement(c.PatientChartPagination,{currentItems:_.length,onPageNumberChange:function(e){var t=e.page;return P(t)},pageNumber:w,pageSize:5,totalItems:g.length,dashboardLinkUrl:b,dashboardLinkLabel:v})):o().createElement(c.EmptyState,{displayText:p,headerTitle:m,launchForm:k})}},4548:(e,t,n)=>{n.d(t,{De:()=>l,l4:()=>i,qz:()=>d});var r=n(9857),o=n(2188),a=n(906);function i(e){var t,n,o,i=(0,r.ZP)("".concat(a.fhirBaseUrl,"/Condition?patient=").concat(e),a.openmrsFetch),l=i.data,d=i.error,s=i.isValidating,u=(null==l||null===(t=l.data)||void 0===t?void 0:t.total)>0?null==l||null===(n=l.data)||void 0===n?void 0:n.entry.map((function(e){return null!==(o=e.resource)&&void 0!==o?o:[]})).map(c).sort((function(e,t){return t.onsetDateTime>e.onsetDateTime?1:-1})):null;return{data:l?u:null,isError:d,isLoading:!l&&!d,isValidating:s}}function l(e){return(0,a.openmrsObservableFetch)("/ws/rest/v1/conceptsearch?conceptClasses=".concat("8d4918b0-c2cc-11de-8d13-0010c6dffd0f","&q=").concat(e)).pipe((0,o.U)((function(e){return e.data.results})))}function c(e){var t,n,r,o,a,i;return{clinicalStatus:null===(n=null==e||null===(t=e.clinicalStatus)||void 0===t?void 0:t.coding[0])||void 0===n?void 0:n.code,conceptId:null===(o=null==e||null===(r=e.code)||void 0===r?void 0:r.coding[0])||void 0===o?void 0:o.code,display:null===(i=null==e||null===(a=e.code)||void 0===a?void 0:a.coding[0])||void 0===i?void 0:i.display,onsetDateTime:null==e?void 0:e.onsetDateTime,recordedDate:null==e?void 0:e.recordedDate,id:null==e?void 0:e.id}}function d(e,t){return(0,a.openmrsObservableFetch)("".concat(a.fhirBaseUrl,"/Condition"),{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:t})}}}]);