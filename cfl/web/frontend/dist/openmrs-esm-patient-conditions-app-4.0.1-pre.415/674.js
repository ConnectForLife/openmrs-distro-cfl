"use strict";(self.webpackChunk_openmrs_esm_patient_conditions_app=self.webpackChunk_openmrs_esm_patient_conditions_app||[]).push([[674],{652:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(9601),o=n.n(r),i=n(2609),a=n.n(i)()(o());a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-conditions__conditions-detailed-summary__widgetCard___QyCQM{border:1px solid #e0e0e0}",""]),a.locals={widgetCard:"-esm-patient-conditions__conditions-detailed-summary__widgetCard___QyCQM"};const c=a},5674:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});var r=n(268),o=n.n(r),i=n(2237);const a=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}(e,t,n)};var c=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const l=function(e){return c.test(e)};var u="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",d="\\ud83c[\\udffb-\\udfff]",s="[^\\ud800-\\udfff]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",v="(?:"+u+"|"+d+")?",m="[\\ufe0e\\ufe0f]?",b=m+v+"(?:\\u200d(?:"+[s,f,p].join("|")+")"+m+v+")*",y="(?:"+[s+u+"?",u,f,p,"[\\ud800-\\udfff]"].join("|")+")",g=RegExp(d+"(?="+d+")|"+y+b,"g");const h=function(e){return l(e)?function(e){return e.match(g)||[]}(e):function(e){return e.split("")}(e)},O=function(e){e=(0,i.Z)(e);var t=l(e)?h(e):void 0,n=t?t[0]:e.charAt(0),r=t?a(t,1).join(""):e.slice(1);return n.toUpperCase()+r};var j=n(4924),Z=n(3385),E=n(6759),S=n(906),_=n(6217),w=n(4548),C=n(6062),P=n.n(C),D=n(4036),T=n.n(D),k=n(6793),A=n.n(k),x=n(7892),F=n.n(x),H=n(1173),M=n.n(H),Q=n(2464),U=n.n(Q),z=n(652),I={};I.styleTagTransform=U(),I.setAttributes=F(),I.insert=A().bind(null,"head"),I.domAPI=T(),I.insertStyleElement=M(),P()(z.Z,I);const q=z.Z&&z.Z.locals?z.Z.locals:void 0;function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}const R=function(e){var t,n,r=e.patient,a=(0,j.useTranslation)().t,c=a("conditions","Conditions"),l=a("conditions","Conditions"),u=(0,w.l4)(r.id),d=u.data,s=u.isError,f=u.isLoading,p=u.isValidating,v=o().useMemo((function(){return[{key:"condition",header:a("condition","Condition")},{key:"onsetDateTime",header:a("since","Since")},{key:"status",header:a("status","Status")}]}),[a]),m=o().useMemo((function(){return null==d?void 0:d.map((function(e){return t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){L(e,t,n[t])}))}return e}({},e),n=null!=(n={id:e.id,condition:e.display,onsetDateTime:(0,S.formatDate)((0,S.parseDate)(e.onsetDateTime),{time:!1,day:!1}),status:(r=e.clinicalStatus,O((0,i.Z)(r).toLowerCase()))})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t;var t,n,r}))}),[d]),b=o().useCallback((function(){return(0,_.launchPatientWorkspace)("conditions-form-workspace")}),[]);return f?o().createElement(Z.gqd,{role:"progressbar"}):s?o().createElement(_.ErrorState,{error:s,headerTitle:l}):(null==d?void 0:d.length)?o().createElement("div",{className:q.widgetCard},o().createElement(_.CardHeader,{title:l},o().createElement("span",null,p?o().createElement(Z.lSo,null):null),o().createElement(Z.zxk,{kind:"ghost",renderIcon:function(e){return o().createElement(E.mm,N({size:16},e))},iconDescription:"Add conditions",onClick:b},a("add","Add"))),o().createElement(Z.wQF,{rows:m,headers:v,isSortable:!0,size:"sm",useZebraStyles:!0},(function(e){var r=e.rows,i=e.headers,a=e.getHeaderProps,c=e.getTableProps;return o().createElement(Z.xJi,null,o().createElement(Z.iA_,N({},c()),o().createElement(Z.ssF,null,o().createElement(Z.SCH,null,i.map((function(e){var n;return o().createElement(Z.xDH,N({className:"".concat(q.productiveHeading01," ").concat(q.text02)},a({header:e,isSortable:e.isSortable})),null!==(t=null===(n=e.header)||void 0===n?void 0:n.content)&&void 0!==t?t:e.header)})))),o().createElement(Z.RMI,null,r.map((function(e){return o().createElement(Z.SCH,{key:e.id},e.cells.map((function(e){var t;return o().createElement(Z.pj1,{key:e.id},null!==(n=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==n?n:e.value)})))})))))}))):o().createElement(_.EmptyState,{displayText:c,headerTitle:l,launchForm:b})}},4548:(e,t,n)=>{n.d(t,{De:()=>c,l4:()=>a,qz:()=>u});var r=n(9857),o=n(2188),i=n(906);function a(e){var t,n,o,a=(0,r.ZP)("".concat(i.fhirBaseUrl,"/Condition?patient=").concat(e),i.openmrsFetch),c=a.data,u=a.error,d=a.isValidating,s=(null==c||null===(t=c.data)||void 0===t?void 0:t.total)>0?null==c||null===(n=c.data)||void 0===n?void 0:n.entry.map((function(e){return null!==(o=e.resource)&&void 0!==o?o:[]})).map(l).sort((function(e,t){return t.onsetDateTime>e.onsetDateTime?1:-1})):null;return{data:c?s:null,isError:u,isLoading:!c&&!u,isValidating:d}}function c(e){return(0,i.openmrsObservableFetch)("/ws/rest/v1/conceptsearch?conceptClasses=".concat("8d4918b0-c2cc-11de-8d13-0010c6dffd0f","&q=").concat(e)).pipe((0,o.U)((function(e){return e.data.results})))}function l(e){var t,n,r,o,i,a;return{clinicalStatus:null===(n=null==e||null===(t=e.clinicalStatus)||void 0===t?void 0:t.coding[0])||void 0===n?void 0:n.code,conceptId:null===(o=null==e||null===(r=e.code)||void 0===r?void 0:r.coding[0])||void 0===o?void 0:o.code,display:null===(a=null==e||null===(i=e.code)||void 0===i?void 0:i.coding[0])||void 0===a?void 0:a.display,onsetDateTime:null==e?void 0:e.onsetDateTime,recordedDate:null==e?void 0:e.recordedDate,id:null==e?void 0:e.id}}function u(e,t){return(0,i.openmrsObservableFetch)("".concat(i.fhirBaseUrl,"/Condition"),{headers:{"Content-Type":"application/json"},method:"POST",body:e,signal:t})}},187:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n(3221).Z.Symbol},9001:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(187),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,c=r.Z?r.Z.toStringTag:void 0;var l=Object.prototype.toString;var u=r.Z?r.Z.toStringTag:void 0;const d=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":u&&u in Object(e)?function(e){var t=i.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[c]=n:delete e[c]),o}(e):function(e){return l.call(e)}(e)}},2168:(e,t,n)=>{n.d(t,{Z:()=>r});const r="object"==typeof global&&global&&global.Object===Object&&global},3221:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(2168),o="object"==typeof self&&self&&self.Object===Object&&self;const i=r.Z||o||Function("return this")()},7885:(e,t,n)=>{n.d(t,{Z:()=>r});const r=Array.isArray},3391:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(e){return null!=e&&"object"==typeof e}},2758:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(9001),o=n(3391);const i=function(e){return"symbol"==typeof e||(0,o.Z)(e)&&"[object Symbol]"==(0,r.Z)(e)}},2237:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(187);var o=n(7885),i=n(2758),a=r.Z?r.Z.prototype:void 0,c=a?a.toString:void 0;const l=function e(t){if("string"==typeof t)return t;if((0,o.Z)(t))return function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}(t,e)+"";if((0,i.Z)(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},u=function(e){return null==e?"":l(e)}}}]);