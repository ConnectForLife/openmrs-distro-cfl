(self.webpackChunk_openmrs_esm_patient_vitals_app=self.webpackChunk_openmrs_esm_patient_vitals_app||[]).push([[761],{9942:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(9601),r=i.n(n),a=i(2609),o=i.n(a)()(r());o.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-vitals__vitals-biometrics-form__productiveHeading03___dHBkT,.-esm-patient-vitals__vitals-biometrics-form__vitalsTitle___AYWCD{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-vitals__vitals-biometrics-form__vitalsTitle___AYWCD{margin:0 .5rem 1rem 0}.-esm-patient-vitals__vitals-biometrics-form__danger___qma9P{color:#da1e28}.-esm-patient-vitals__vitals-biometrics-form__button___uMlVz{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-vitals__vitals-biometrics-form__tablet___iyW_8{padding:1.5rem 1rem;background-color:#fff}.-esm-patient-vitals__vitals-biometrics-form__desktop___IFu4r{padding:0rem}.-esm-patient-vitals__vitals-biometrics-form__form___IXt1i{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 6rem)}.-esm-patient-vitals__vitals-biometrics-form__grid___ohzGm{margin:1rem}.-esm-patient-vitals__vitals-biometrics-form__row___lDyji{margin:.5rem 0rem 0rem;display:flex;flex-flow:row wrap}.-esm-patient-vitals__vitals-biometrics-form__column___Fo1cf{flex-grow:1;flex-basis:0}.-esm-patient-vitals__vitals-biometrics-form__spacer___uj5S4{margin-top:3rem}",""]),o.locals={productiveHeading03:"-esm-patient-vitals__vitals-biometrics-form__productiveHeading03___dHBkT",vitalsTitle:"-esm-patient-vitals__vitals-biometrics-form__vitalsTitle___AYWCD",danger:"-esm-patient-vitals__vitals-biometrics-form__danger___qma9P",button:"-esm-patient-vitals__vitals-biometrics-form__button___uMlVz",tablet:"-esm-patient-vitals__vitals-biometrics-form__tablet___iyW_8",desktop:"-esm-patient-vitals__vitals-biometrics-form__desktop___IFu4r",form:"-esm-patient-vitals__vitals-biometrics-form__form___IXt1i",grid:"-esm-patient-vitals__vitals-biometrics-form__grid___ohzGm",row:"-esm-patient-vitals__vitals-biometrics-form__row___lDyji",column:"-esm-patient-vitals__vitals-biometrics-form__column___Fo1cf",spacer:"-esm-patient-vitals__vitals-biometrics-form__spacer___uj5S4"};const l=o},5663:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(9601),r=i.n(n),a=i(2609),o=i.n(a)()(r());o.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-vitals__vitals-biometrics-input__label01___WEYf_,.-esm-patient-vitals__vitals-biometrics-input__vitalsBiometricInputLabel01___VpfqL{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-patient-vitals__vitals-biometrics-input__bodyLong01___zr584,.-esm-patient-vitals__vitals-biometrics-input__textarea___zYbSs{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-patient-vitals__vitals-biometrics-input__productiveHeading04___cWQ4I,.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ZMKi2,.-esm-patient-vitals__vitals-biometrics-input__textInput___XhgER{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-patient-vitals__vitals-biometrics-input__inputContainer___QXJdB{width:11.625rem;border-bottom:.063rem solid #8d8d8d;margin-bottom:1rem}.-esm-patient-vitals__vitals-biometrics-input__vitalsBiometricInputLabel01___VpfqL{color:#525252;margin-bottom:.5rem}.-esm-patient-vitals__vitals-biometrics-input__textInput___XhgER{border:none;text-align:center;padding:0;color:#161616}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ZMKi2{height:4.875rem;display:flex;justify-content:center;flex-direction:column;text-align:center;padding:.5rem;color:#525252;background-color:#fff}.omrs-breakpoint-gt-tablet .-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ZMKi2{background-color:#f4f4f4}.-esm-patient-vitals__vitals-biometrics-input__textarea___zYbSs{border:none;text-align:left}.-esm-patient-vitals__vitals-biometrics-input__textarea___zYbSs textarea{border-bottom:none}.-esm-patient-vitals__vitals-biometrics-input__centerDiv___vFqqK{display:flex;flex-direction:row;align-items:center;text-align:center;margin:0;padding:0}.-esm-patient-vitals__vitals-biometrics-input__unitName___hp7rq{margin-bottom:.5rem}.-esm-patient-vitals__vitals-biometrics-input__disableInput___xioKT{background-color:#f4f4f4}.-esm-patient-vitals__vitals-biometrics-input__danger___KxkVA{color:#da1e28}",""]),o.locals={label01:"-esm-patient-vitals__vitals-biometrics-input__label01___WEYf_",vitalsBiometricInputLabel01:"-esm-patient-vitals__vitals-biometrics-input__vitalsBiometricInputLabel01___VpfqL",bodyLong01:"-esm-patient-vitals__vitals-biometrics-input__bodyLong01___zr584",textarea:"-esm-patient-vitals__vitals-biometrics-input__textarea___zYbSs",productiveHeading04:"-esm-patient-vitals__vitals-biometrics-input__productiveHeading04___cWQ4I",textInputContainer:"-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ZMKi2",textInput:"-esm-patient-vitals__vitals-biometrics-input__textInput___XhgER",inputContainer:"-esm-patient-vitals__vitals-biometrics-input__inputContainer___QXJdB",centerDiv:"-esm-patient-vitals__vitals-biometrics-input__centerDiv___vFqqK",unitName:"-esm-patient-vitals__vitals-biometrics-input__unitName___hp7rq",disableInput:"-esm-patient-vitals__vitals-biometrics-input__disableInput___xioKT",danger:"-esm-patient-vitals__vitals-biometrics-input__danger___KxkVA"};const l=o},857:(t,e,i)=>{var n=i(7772).Symbol;t.exports=n},3366:(t,e,i)=>{var n=i(857),r=i(2107),a=i(7157),o=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?r(t):a(t)}},8222:t=>{var e=Math.max,i=Math.min;t.exports=function(t,n,r){return t>=i(n,r)&&t<e(n,r)}},1704:(t,e,i)=>{var n=i(2153),r=/^\s+/;t.exports=function(t){return t?t.slice(0,n(t)+1).replace(r,""):t}},1242:(t,e,i)=>{var n="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;t.exports=n},2107:(t,e,i)=>{var n=i(857),r=Object.prototype,a=r.hasOwnProperty,o=r.toString,l=n?n.toStringTag:void 0;t.exports=function(t){var e=a.call(t,l),i=t[l];try{t[l]=void 0;var n=!0}catch(t){}var r=o.call(t);return n&&(e?t[l]=i:delete t[l]),r}},7157:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},7772:(t,e,i)=>{var n=i(1242),r="object"==typeof self&&self&&self.Object===Object&&self,a=n||r||Function("return this")();t.exports=a},2153:t=>{var e=/\s/;t.exports=function(t){for(var i=t.length;i--&&e.test(t.charAt(i)););return i}},264:(t,e,i)=>{var n=i(8222),r=i(5707),a=i(7642);t.exports=function(t,e,i){return e=r(e),void 0===i?(i=e,e=0):i=r(i),t=a(t),n(t,e,i)}},537:(t,e,i)=>{var n=i(3366),r=i(5125);t.exports=function(t){return"number"==typeof t||r(t)&&"[object Number]"==n(t)}},9259:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},5125:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},4795:(t,e,i)=>{var n=i(3366),r=i(5125);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==n(t)}},5707:(t,e,i)=>{var n=i(7642);t.exports=function(t){return t?Infinity===(t=n(t))||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},7642:(t,e,i)=>{var n=i(1704),r=i(9259),a=i(4795),o=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(a(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=n(t);var i=l.test(t);return i||s.test(t)?c(t.slice(2),i?2:8):o.test(t)?NaN:+t}},6761:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>X});var n=i(268),r=i.n(n),a=i(4924),o=i(9857),l=i(906),s=i(6217),c=i(7160),u=i(3461),m=i(168),p=i(6062),d=i.n(p),_=i(4036),v=i.n(_),f=i(6793),b=i.n(f),g=i(7892),y=i.n(g),h=i(1173),w=i.n(h),x=i(2464),N=i.n(x),O=i(5663),j={};j.styleTagTransform=N(),j.setAttributes=y(),j.insert=b().bind(null,"head"),j.domAPI=v(),j.insertStyleElement=w(),d()(O.Z,j);const S=O.Z&&O.Z.locals?O.Z.locals:void 0;function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function E(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function P(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),n.forEach((function(e){E(t,e,i[e])}))}return t}const C=function(t){var e,i,o=t.title,s=t.onInputChange,u=t.textFields,m=t.unitSymbol,p=t.textFieldStyles,d=t.textFieldWidth,_=t.placeholder,v=t.disabled,f=t.inputIsNormal,b=(0,a.useTranslation)().t,g="tablet"===(0,l.useLayoutType)(),y=(e=(0,n.useState)(!1),i=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,r,a=[],o=!0,l=!1;try{for(i=i.call(t);!(o=(n=i.next()).done)&&(a.push(n.value),!e||a.length!==e);o=!0);}catch(t){l=!0,r=t}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,i)||function(t,e){if(t){if("string"==typeof t)return I(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?I(t,e):void 0}}(e,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=y[0],w=y[1];return r().createElement("div",{className:S.inputContainer,style:{width:d}},r().createElement("p",{className:S.vitalsBiometricInputLabel01},o),r().createElement("div",{className:"".concat(S.textInputContainer," ").concat(v&&S.disableInput," ").concat(!f&&S.danger),style:P({},p)},r().createElement("div",{className:S.centerDiv},u.map((function(t){return"number"===t.type?r().createElement(n.Fragment,{key:t.name},r().createElement(c.oil,{style:P({},p),className:"".concat(S.textInput," ").concat(v&&S.disableInput," ").concat(t.className," ").concat(!f&&S.danger),id:t.name,invalid:h,type:t.type,min:0,name:t.name,onChange:function(t){return e=t.target.value,void w(!(Number(e)||""===e));var e},onInput:s,labelText:"",value:t.value,title:t.name,light:g}),null==t?void 0:t.separator):r().createElement(c.Kx8,{key:t.name,style:P({},p),className:S.textarea,id:t.name,name:t.name,labelText:"",onChange:s,rows:2,placeholder:_,value:t.value,title:t.name,light:g})}))),r().createElement("p",{className:S.unitName},m)),h?r().createElement(c.lXp,{className:S.danger},b("numericInputError","Must be a number")):null)};var U=i(9942),A={};A.styleTagTransform=N(),A.setAttributes=y(),A.insert=b().bind(null,"head"),A.domAPI=v(),A.insertStyleElement=w(),d()(U.Z,A);const k=U.Z&&U.Z.locals?U.Z.locals:void 0;function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function B(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function F(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),n.forEach((function(e){B(t,e,i[e])}))}return t}function D(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i.push.apply(i,n)}return i}(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))})),t}function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,r,a=[],o=!0,l=!1;try{for(i=i.call(t);!(o=(n=i.next()).done)&&(a.push(n.value),!e||a.length!==e);o=!0);}catch(t){l=!0,r=t}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return T(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?T(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const X=function(t){var e,i,p,d,_,v,f,b,g,y=t.patientUuid,h=t.closeWorkspace,w=(0,a.useTranslation)().t,x="tablet"===(0,l.useLayoutType)(),N=(0,l.useSession)(),O=(0,l.useConfig)(),j=(0,o.kY)(),S=j.cache,I=j.mutate,E=(0,s.useVitalsConceptMetadata)(),P=E.data,U=E.conceptMetadata,A=O.biometrics,T=M((0,n.useState)(),2),B=T[0],X=T[1],z=M((0,n.useState)(),2),R=z[0],V=z[1],L=M((0,n.useState)(!1),2),W=L[0],Z=L[1];return(0,n.useEffect)((function(){if((null==B?void 0:B.height)&&(null==B?void 0:B.weight)){var t=(0,u.V)(Number(B.weight),Number(B.height));V(t)}}),[null==B?void 0:B.weight,null==B?void 0:B.height]),r().createElement(c.l09,{className:k.form},r().createElement("div",{className:k.grid},r().createElement(c.Kqy,null,r().createElement(c.sgG,{className:k.column},r().createElement("p",{className:k.vitalsTitle},w("recordVitals","Record vitals"))),r().createElement(c.X2j,{className:k.row},r().createElement(c.sgG,{className:k.column},r().createElement(C,{title:w("temp","Temp"),onInputChange:function(t){X(D(F({},B),{temperature:t.target.value}))},textFields:[{name:w("temperature","Temperature"),type:"number",value:(null==B?void 0:B.temperature)||""}],unitSymbol:null!==(e=P.get(O.concepts.temperatureUuid))&&void 0!==e?e:"",inputIsNormal:(0,u.X)(U,O.concepts.temperatureUuid,null==B?void 0:B.temperature)})),r().createElement(c.sgG,{className:k.column},r().createElement(C,{title:w("bloodPressure","Blood Pressure"),onInputChange:function(t){"systolic"===t.target.name?X(D(F({},B),{systolicBloodPressure:t.target.value})):X(D(F({},B),{diastolicBloodPressure:t.target.value}))},textFields:[{name:w("systolic","systolic"),separator:"/",type:"number",value:(null==B?void 0:B.systolicBloodPressure)||""},{name:w("diastolic","diastolic"),type:"number",value:(null==B?void 0:B.diastolicBloodPressure)||""}],unitSymbol:null!==(i=P.get(O.concepts.systolicBloodPressureUuid))&&void 0!==i?i:"",inputIsNormal:(0,u.X)(U,O.concepts.systolicBloodPressureUuid,null==B?void 0:B.systolicBloodPressure)&&(0,u.X)(U,O.concepts.diastolicBloodPressureUuid,null==B?void 0:B.diastolicBloodPressure)})),r().createElement(c.sgG,{className:k.column},r().createElement(C,{title:w("pulse","Pulse"),onInputChange:function(t){X(D(F({},B),{pulse:t.target.value}))},textFields:[{name:w("pulse","Pulse"),type:"number",value:(null==B?void 0:B.pulse)||""}],unitSymbol:null!==(p=P.get(O.concepts.pulseUuid))&&void 0!==p?p:"",inputIsNormal:(0,u.X)(U,O.concepts.pulseUuid,null==B?void 0:B.pulse)})),r().createElement(c.sgG,{className:k.column},r().createElement(C,{title:w("spo2","SpO2"),onInputChange:function(t){X(D(F({},B),{oxygenSaturation:t.target.value}))},textFields:[{name:w("oxygenSaturation","Oxygen Saturation"),type:"number",value:(null==B?void 0:B.oxygenSaturation)||""}],unitSymbol:null!==(d=P.get(O.concepts.oxygenSaturationUuid))&&void 0!==d?d:"",inputIsNormal:(0,u.X)(U,O.concepts.oxygenSaturationUuid,null==B?void 0:B.oxygenSaturation)}))),r().createElement(c.X2j,{className:k.row},r().createElement(c.sgG,{className:k.column},r().createElement(C,{title:w("respirationRate","Respiration Rate"),onInputChange:function(t){X(D(F({},B),{respiratoryRate:t.target.value}))},textFields:[{name:w("respirationRate","Respiration Rate"),type:"number",value:(null==B?void 0:B.respiratoryRate)||""}],unitSymbol:null!==(_=P.get(O.concepts.respiratoryRateUuid))&&void 0!==_?_:"",inputIsNormal:(0,u.X)(U,O.concepts.respiratoryRateUuid,null==B?void 0:B.respiratoryRate)}))),r().createElement(c.X2j,{className:k.row},r().createElement(c.sgG,{className:k.column},r().createElement(C,{title:w("notes","Notes"),onInputChange:function(t){X(D(F({},B),{generalPatientNote:t.target.value}))},textFields:[{name:w("notes","Notes"),type:"textArea",value:null==B?void 0:B.generalPatientNote}],textFieldWidth:"26.375rem",placeholder:w("additionalNoteText","Type any additional notes here"),inputIsNormal:!0})))),r().createElement(c.Kqy,{className:k.spacer},r().createElement(c.sgG,{className:k.column},r().createElement("p",{className:k.vitalsTitle},w("recordBiometrics","Record biometrics"))),r().createElement(c.X2j,{className:k.row},r().createElement(c.sgG,{className:k.column},r().createElement(C,{title:w("weight","Weight"),onInputChange:function(t){X(D(F({},B),{weight:t.target.value}))},textFields:[{name:w("weight","Weight"),type:"number",value:(null==B?void 0:B.weight)||""}],unitSymbol:null!==(v=P.get(O.concepts.weightUuid))&&void 0!==v?v:"",inputIsNormal:!0})),r().createElement(c.sgG,{className:k.column},r().createElement(C,{title:w("height","Height"),onInputChange:function(t){X(D(F({},B),{height:t.target.value}))},textFields:[{name:w("height","Height"),type:"number",value:(null==B?void 0:B.height)||""}],unitSymbol:null!==(f=P.get(O.concepts.heightUuid))&&void 0!==f?f:"",inputIsNormal:!0})),r().createElement(c.sgG,{className:k.column},r().createElement(C,{title:w("bmiCalc","BMI (calc.)"),onInputChange:function(){},textFields:[{name:w("bmi","BMI"),type:"number",value:R||""}],unitSymbol:A.bmiUnit,disabled:!0,inputIsNormal:(g=R,void 0===g||""===g||g>=18.5&&g<=24.9)})),r().createElement(c.sgG,{className:k.column},r().createElement(C,{title:w("muac","MUAC"),onInputChange:function(t){X(D(F({},B),{midUpperArmCircumference:t.target.value}))},textFields:[{name:w("muac","MUAC"),type:"number",value:(null==B?void 0:B.midUpperArmCircumference)||""}],unitSymbol:null!==(b=P.get(O.concepts.midUpperArmCircumferenceUuid))&&void 0!==b?b:"",inputIsNormal:(0,u.X)(U,O.concepts.midUpperArmCircumferenceUuid,null==B?void 0:B.midUpperArmCircumference)}))))),r().createElement(c.uVA,{className:x?k.tablet:k.desktop},r().createElement(c.zxk,{className:k.button,kind:"secondary",onClick:function(){return h()}},w("discard","Discard")),r().createElement(c.zxk,{className:k.button,kind:"primary",onClick:function(t){var e;t.preventDefault(),Z(!0);var i=new AbortController;(0,m.tX)(O.vitals.encounterTypeUuid,O.vitals.formUuid,O.concepts,y,B,new Date,i,null==N||null===(e=N.sessionLocation)||void 0===e?void 0:e.uuid).then((function(t){if(201===t.status){h(),(0,l.showToast)({critical:!0,kind:"success",title:w("vitalsAndBiometricsRecorded","Vitals and Biometrics saved"),description:w("vitalsAndBiometricsNowAvailable","They are now visible on the Vitals and Biometrics page")});var e=new RegExp(l.fhirBaseUrl+"\\/Observation\\?subject\\:Patient\\="+y+"\\&code\\=");Array.from(S.keys()).filter((function(t){return e.test(t)})).forEach((function(t){return I(t)}))}})).catch((function(t){(0,l.createErrorHandler)(),(0,l.showNotification)({title:w("vitalsAndBiometricsSaveError","Error saving vitals and biometrics"),kind:"error",critical:!0,description:null==t?void 0:t.message})})).finally((function(){i.abort()}))},disabled:W,type:"submit"},w("saveAndClose","Save and close"))))}},3461:(t,e,i)=>{"use strict";i.d(e,{V:()=>l,X:()=>s});var n=i(264),r=i.n(n),a=i(537),o=i.n(a);function l(t,e){if(t&&e)return t>0&&e>0?Number((t/Math.pow(e/100,2)).toFixed(1)):void 0}function s(t,e,i){if(void 0===i||""===i)return!0;var n=t.find((function(t){return t.uuid===e}));return!o()(null==n?void 0:n.lowNormal)||!o()(null==n?void 0:n.hiNormal)||r()(Number(i),Number(n.lowNormal),Number(n.hiNormal))}},168:(t,e,i)=>{"use strict";i.d(e,{WK:()=>g,bc:()=>f,tQ:()=>b,tX:()=>d,wA:()=>v,yL:()=>p});var n=i(9857),r=i(906),a=i(6217),o=i(3461);function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),n.forEach((function(e){s(t,e,i[e])}))}return t}function u(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i.push.apply(i,n)}return i}(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))})),t}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,r,a=[],o=!0,l=!1;try{for(i=i.call(t);!(o=(n=i.next()).done)&&(a.push(n.value),!e||a.length!==e);o=!0);}catch(t){l=!0,r=t}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){var e,i,l,p=arguments.length>1&&void 0!==arguments[1]&&arguments[1],d=(0,r.useConfig)().concepts,_=(0,a.useVitalsConceptMetadata)().conceptMetadata,f=[d.heightUuid,d.midUpperArmCircumferenceUuid,d.weightUuid],y=p?Object.values(d).join(","):Object.values(d).filter((function(t){return!f.includes(t)})).join(","),h="".concat(r.fhirBaseUrl,"/Observation?subject:Patient=").concat(t,"&code=")+y+"&_summary=data&_sort=-date"+"&_count=".concat(100,"\n        "),w=(0,n.ZP)(h,r.openmrsFetch),x=w.data,N=w.error,O=w.isValidating,j=function(t){switch(t){case d.systolicBloodPressureUuid:return"systolic";case d.diastolicBloodPressureUuid:return"diastolic";case d.pulseUuid:return"pulse";case d.temperatureUuid:return"temperature";case d.oxygenSaturationUuid:return"spo2";case d.respiratoryRateUuid:return"respiratoryRate";case d.heightUuid:return"height";case d.weightUuid:return"weight";case d.midUpperArmCircumferenceUuid:return"muac"}},S=function(t){var e,i,n,r,a,o,l,s;return{code:null==t||null===(e=t.code)||void 0===e||null===(i=e.coding)||void 0===i||null===(n=i[0])||void 0===n?void 0:n.code,interpretation:v(null==t||null===(r=t.valueQuantity)||void 0===r?void 0:r.value,b(null==t||null===(a=t.code)||void 0===a||null===(o=a.coding)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.code,_)),issued:null==t?void 0:t.issued,value:null==t||null===(s=t.valueQuantity)||void 0===s?void 0:s.value}},I=new Map,E=null==x||null===(e=x.data)||void 0===e||null===(i=e.entry)||void 0===i?void 0:i.map((function(t){return null!==(l=t.resource)&&void 0!==l?l:[]})).map(S);null==E||E.map((function(t){var e,i,n=new Date(new Date(t.issued).setSeconds(0,0)).toISOString();I.has(n)&&I.get(n)?I.set(n,u(c({},I.get(n)),(s(e={},j(t.code),t.value),s(e,j(t.code)+"Interpretation",t.interpretation),e))):t.value&&I.set(n,(s(i={},j(t.code),t.value),s(i,j(t.code)+"Interpretation",t.interpretation),i))}));var P=Array.from(I).map((function(t,e){var i=m(t,2),n=i[0],r=i[1];return u(c({},r),{id:e.toString(),bmi:(0,o.V)(Number(r.weight),Number(r.height)),date:n,bloodPressureInterpretation:g(r.systolic,r.diastolic,d,_)})}));return{vitals:P,isError:N,isLoading:!x&&!N,isValidating:O}}function d(t,e,i,n,a,o,l,s){return(0,r.openmrsFetch)("/ws/rest/v1/encounter",{method:"POST",headers:{"Content-Type":"application/json"},signal:l.signal,body:{patient:n,encounterDatetime:o,location:s,encounterType:t,form:e,obs:_(a,i)}})}function _(t,e){return Object.entries(t).filter((function(t){var e=m(t,2);return e[0],null!=e[1]})).map((function(t){var i=m(t,2),n=i[0],r=i[1];return{concept:e[n+"Uuid"],value:r}}))}function v(t,e){return(null==e?void 0:e.hiCritical)&&t>=e.hiCritical?"critically_high":(null==e?void 0:e.hiNormal)&&t>e.hiNormal?"high":(null==e?void 0:e.lowCritical)&&t<=e.lowCritical?"critically_low":(null==e?void 0:e.lowNormal)&&t<e.lowNormal?"low":"normal"}function f(t){return Object.entries(t).filter((function(t){return m(t,1)[0].match(/interpretation/i)})).map((function(t){return m(t,2)[1]})).some((function(t){return"normal"!==t}))}function b(t,e){return t&&(null==e?void 0:e.length)?null==e?void 0:e.find((function(e){return e.uuid===t})):null}function g(t,e,i,n){var r=v(t,b(null==i?void 0:i.systolicBloodPressureUuid,n)),a=v(e,b(null==i?void 0:i.diastolicBloodPressureUuid,n));return"critically_high"===r||"critically_high"===a?"critically_high":"critically_low"===r||"critically_low"===a?"critically_low":"high"===r||"high"===a?"high":"low"===r||"low"===a?"low":"normal"}}}]);