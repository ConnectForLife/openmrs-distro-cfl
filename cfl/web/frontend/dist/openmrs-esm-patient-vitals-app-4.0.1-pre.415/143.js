"use strict";(self.webpackChunk_openmrs_esm_patient_vitals_app=self.webpackChunk_openmrs_esm_patient_vitals_app||[]).push([[143],{8393:(t,e,a)=>{a.d(e,{Z:()=>o});var i=a(9601),r=a.n(i),n=a(2609),l=a.n(n)()(r());l.push([t.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}td.-esm-patient-vitals__paginated-vitals__criticallyLow___PO0hT td:nth-child(2),td.-esm-patient-vitals__paginated-vitals__criticallyHigh___Otswl td:nth-child(2),td.-esm-patient-vitals__paginated-vitals__low___yciTG td:nth-child(2),td.-esm-patient-vitals__paginated-vitals__high___N2tLl td:nth-child(2){font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}td.-esm-patient-vitals__paginated-vitals__criticallyLow___PO0hT,td.-esm-patient-vitals__paginated-vitals__criticallyHigh___Otswl{outline:2px solid #da1e28;outline-offset:-1px}td.-esm-patient-vitals__paginated-vitals__low___yciTG,td.-esm-patient-vitals__paginated-vitals__high___N2tLl{outline:1px solid #000}td.-esm-patient-vitals__paginated-vitals__criticallyLow___PO0hT td:nth-child(2)::after{content:" ↓↓"}td.-esm-patient-vitals__paginated-vitals__criticallyHigh___Otswl td:nth-child(2)::after{content:" ↑↑"}td.-esm-patient-vitals__paginated-vitals__low___yciTG td:nth-child(2)::after{content:" ↓"}td.-esm-patient-vitals__paginated-vitals__high___N2tLl td:nth-child(2)::after{content:" ↑"}td.-esm-patient-vitals__paginated-vitals__off-scale-low___Bnpov td:nth-child(2)::after{content:" ↓↓↓"}td.-esm-patient-vitals__paginated-vitals__off-scale-high___SchEq td:nth-child(2)::after{content:" ↑↑↑"}.-esm-patient-vitals__paginated-vitals__offScaleHigh___ZYm5T,.-esm-patient-vitals__paginated-vitals__offScaleLow___VD9mL,.-esm-patient-vitals__paginated-vitals__criticallyHigh___Otswl,.-esm-patient-vitals__paginated-vitals__criticallyLow___PO0hT,.-esm-patient-vitals__paginated-vitals__high___N2tLl,.-esm-patient-vitals__paginated-vitals__low___yciTG{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-patient-vitals__paginated-vitals__criticallyLow___PO0hT::after{content:" ↓↓"}.-esm-patient-vitals__paginated-vitals__criticallyHigh___Otswl::after{content:" ↑↑"}.-esm-patient-vitals__paginated-vitals__low___yciTG::after{content:" ↓"}.-esm-patient-vitals__paginated-vitals__high___N2tLl::after{content:" ↑"}',""]),l.locals={criticallyLow:"-esm-patient-vitals__paginated-vitals__criticallyLow___PO0hT",criticallyHigh:"-esm-patient-vitals__paginated-vitals__criticallyHigh___Otswl",low:"-esm-patient-vitals__paginated-vitals__low___yciTG",high:"-esm-patient-vitals__paginated-vitals__high___N2tLl","off-scale-low":"-esm-patient-vitals__paginated-vitals__off-scale-low___Bnpov","off-scale-high":"-esm-patient-vitals__paginated-vitals__off-scale-high___SchEq",offScaleHigh:"-esm-patient-vitals__paginated-vitals__offScaleHigh___ZYm5T",offScaleLow:"-esm-patient-vitals__paginated-vitals__offScaleLow___VD9mL"};const o=l},9361:(t,e,a)=>{a.d(e,{Z:()=>o});var i=a(9601),r=a.n(i),n=a(2609),l=a.n(n)()(r());l.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-vitals__vitals-chart__label01___jZtva,.-esm-patient-vitals__vitals-chart__vitalsSignLabel___lbFm9{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-patient-vitals__vitals-chart__bodyShort01___dSoow{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-vitals__vitals-chart__vitalsChartContainer___G2z9m{display:flex;margin:0rem 1rem;flex-direction:row;justify-content:space-between}.-esm-patient-vitals__vitals-chart__vitalSignsArea___VN0qz{flex-grow:1;margin:.5rem 0;padding-right:1rem}.-esm-patient-vitals__vitals-chart__vitalsChartArea____XI1O{flex-grow:4;padding:0 1rem 3rem}.-esm-patient-vitals__vitals-chart__vitalsChartArea____XI1O .cds--cc--layout-row{height:0}.-esm-patient-vitals__vitals-chart__vitalsChartArea____XI1O .layout-child{margin-top:.5rem}.-esm-patient-vitals__vitals-chart__vitalsSignLabel___lbFm9{margin-bottom:1rem;display:inline-block}.-esm-patient-vitals__vitals-chart__verticalTabs___T491N{margin:1rem 0;scroll-behavior:smooth}.-esm-patient-vitals__vitals-chart__verticalTabs___T491N>ul{flex-direction:column !important}.-esm-patient-vitals__vitals-chart__verticalTabs___T491N .cds--tabs--scrollable .cds--tabs--scrollable__nav-item+.cds--tabs--scrollable__nav-item{margin-left:0rem}.-esm-patient-vitals__vitals-chart__verticalTabs___T491N .cds--tabs--scrollable .cds--tabs--scrollable__nav-link{border-bottom:0 !important;border-left:2px solid #c6c6c6}.-esm-patient-vitals__vitals-chart__tab___uwn7Z{outline:0;outline-offset:0}.-esm-patient-vitals__vitals-chart__tab___uwn7Z:active,.-esm-patient-vitals__vitals-chart__tab___uwn7Z:focus{outline:2px solid var(--brand-03) !important}.-esm-patient-vitals__vitals-chart__tab___uwn7Z[aria-selected=true]{border-left:3px solid var(--brand-03);border-bottom:none;font-weight:600;margin-left:0rem !important}.-esm-patient-vitals__vitals-chart__tab___uwn7Z[aria-selected=false]{border-bottom:none;border-left:2px solid #e0e0e0;margin-left:0rem !important}.-esm-patient-vitals__vitals-chart__tablist___yfHUM .cds--tab--list{flex-direction:column;max-height:fit-content;overflow-x:visible}.-esm-patient-vitals__vitals-chart__tablist___yfHUM>button .cds--tabs .cds--tabs__nav-link{border-bottom:none}",""]),l.locals={label01:"-esm-patient-vitals__vitals-chart__label01___jZtva",vitalsSignLabel:"-esm-patient-vitals__vitals-chart__vitalsSignLabel___lbFm9",bodyShort01:"-esm-patient-vitals__vitals-chart__bodyShort01___dSoow",vitalsChartContainer:"-esm-patient-vitals__vitals-chart__vitalsChartContainer___G2z9m",vitalSignsArea:"-esm-patient-vitals__vitals-chart__vitalSignsArea___VN0qz",vitalsChartArea:"-esm-patient-vitals__vitals-chart__vitalsChartArea____XI1O",verticalTabs:"-esm-patient-vitals__vitals-chart__verticalTabs___T491N",tab:"-esm-patient-vitals__vitals-chart__tab___uwn7Z",tablist:"-esm-patient-vitals__vitals-chart__tablist___yfHUM"};const o=l},6299:(t,e,a)=>{a.d(e,{Z:()=>o});var i=a(9601),r=a.n(i),n=a(2609),l=a.n(n)()(r());l.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-vitals__vitals-overview__widgetCard___fB04y{background-color:#fff;border:1px solid #e0e0e0}.-esm-patient-vitals__vitals-overview__divider___IE89r{width:1px;height:1rem;color:#e0e0e0;margin:0rem .5rem}.-esm-patient-vitals__vitals-overview__toggleButtons___tbRBo{width:fit-content;margin:0 .5rem}.-esm-patient-vitals__vitals-overview__toggleButtons___tbRBo button{color:#0f62fe;min-height:0px}.-esm-patient-vitals__vitals-overview__toggleButtons___tbRBo button.cds--btn--tertiary{border-color:#0f62fe}.-esm-patient-vitals__vitals-overview__toggleButtons___tbRBo button.cds--tooltip__trigger:active:not([disabled]){border-color:#0f62fe}.-esm-patient-vitals__vitals-overview__toggleButtons___tbRBo button.cds--btn--tertiary:active{border-color:#0f62fe;background-color:#edf5ff;color:#edf5ff}.-esm-patient-vitals__vitals-overview__toggleButtons___tbRBo button.cds--btn--tertiary:focus{background-color:#0f62fe;color:#fff}.-esm-patient-vitals__vitals-overview__toggleButtons___tbRBo button.cds--btn--tertiary:hover{color:#fff;background-color:#0f62fe}.-esm-patient-vitals__vitals-overview__toggleButtons___tbRBo button.cds--btn--ghost{border-color:#a6c8ff}.-esm-patient-vitals__vitals-overview__toggleButtons___tbRBo button.cds--btn--ghost:hover{color:#000;background-color:#f4f4f4}.-esm-patient-vitals__vitals-overview__tableViewToggle___oT_if{border-radius:.25rem 0 0 .25rem}.-esm-patient-vitals__vitals-overview__tableViewToggle___oT_if.cds--btn--ghost{border-right:0}.-esm-patient-vitals__vitals-overview__chartViewToggle___iO_VR{border-radius:0 .25rem .25rem 0}.-esm-patient-vitals__vitals-overview__chartViewToggle___iO_VR.cds--btn--ghost{border-left:0}.-esm-patient-vitals__vitals-overview__vitalsHeaderActionItems___KY8X8{align-items:center;display:flex;flex:1 1 0%;justify-content:end}.-esm-patient-vitals__vitals-overview__customRow___Q8z7u tbody{white-space:nowrap}.-esm-patient-vitals__vitals-overview__backgroundDataFetchingIndicator___VT3j3{align-items:center;display:flex;flex:1 1 0%;justify-content:end}",""]),l.locals={widgetCard:"-esm-patient-vitals__vitals-overview__widgetCard___fB04y",divider:"-esm-patient-vitals__vitals-overview__divider___IE89r",toggleButtons:"-esm-patient-vitals__vitals-overview__toggleButtons___tbRBo",tableViewToggle:"-esm-patient-vitals__vitals-overview__tableViewToggle___oT_if",chartViewToggle:"-esm-patient-vitals__vitals-overview__chartViewToggle___iO_VR",vitalsHeaderActionItems:"-esm-patient-vitals__vitals-overview__vitalsHeaderActionItems___KY8X8",customRow:"-esm-patient-vitals__vitals-overview__customRow___Q8z7u",backgroundDataFetchingIndicator:"-esm-patient-vitals__vitals-overview__backgroundDataFetchingIndicator___VT3j3"};const o=l},8179:(t,e,a)=>{a.d(e,{s:()=>i});var i="patient-vitals-biometrics-form-workspace"},3461:(t,e,a)=>{a.d(e,{V:()=>o,X:()=>s});var i=a(264),r=a.n(i),n=a(537),l=a.n(n);function o(t,e){if(t&&e)return t>0&&e>0?Number((t/Math.pow(e/100,2)).toFixed(1)):void 0}function s(t,e,a){if(void 0===a||""===a)return!0;var i=t.find((function(t){return t.uuid===e}));return!l()(null==i?void 0:i.lowNormal)||!l()(null==i?void 0:i.hiNormal)||r()(Number(a),Number(i.lowNormal),Number(i.hiNormal))}},3143:(t,e,a)=>{a.d(e,{Z:()=>G});var i=a(268),r=a.n(i),n=a(4924),l=a(7160),o=a(37),s=a(2074),c=a(6759),_=a(6217),u=a(906),d=a(8179),v=a(6062),p=a.n(v),m=a(4036),g=a.n(m),h=a(6793),f=a.n(h),b=a(7892),y=a.n(b),w=a(1173),O=a.n(w),S=a(2464),T=a.n(S),E=a(8393),P={};P.styleTagTransform=T(),P.setAttributes=y(),P.insert=f().bind(null,"head"),P.domAPI=g(),P.insertStyleElement=O(),p()(E.Z,P);const j=E.Z&&E.Z.locals?E.Z.locals:void 0;function U(){return U=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},U.apply(this,arguments)}const A=function(t){var e,a=t.tableRows,i=t.pageSize,n=t.pageUrl,o=t.urlLabel,s=t.tableHeaders,c=(0,u.usePagination)(a,i),d=c.results,v=c.goTo,p=c.currentPage,m=function(t){var e=t.interpretation,a=t.children;switch(e){case"critically_high":return r().createElement(l.pj1,{className:j.criticallyHigh},a);case"critically_low":return r().createElement(l.pj1,{className:j.criticallyLow},a);case"high":return r().createElement(l.pj1,{className:j.high},a);case"low":return r().createElement(l.pj1,{className:j.low},a);default:return r().createElement(l.pj1,null,a)}};return r().createElement("div",null,r().createElement(l.wQF,{rows:d,headers:s,isSortable:!0,size:"sm",useZebraStyles:!0},(function(t){var a=t.rows,i=t.headers,n=t.getHeaderProps,o=t.getTableProps;return r().createElement(l.xJi,null,r().createElement(l.iA_,U({},o(),{className:j.customRow}),r().createElement(l.ssF,null,r().createElement(l.SCH,null,i.map((function(t){var a;return r().createElement(l.xDH,U({className:"".concat(j.productiveHeading01," ").concat(j.text02)},n({header:t,isSortable:t.isSortable})),null!==(e=null===(a=t.header)||void 0===a?void 0:a.content)&&void 0!==e?e:t.header)})))),r().createElement(l.RMI,null,a.map((function(t){return r().createElement(l.SCH,{key:t.id},t.cells.map((function(e,a){var i,n,l=d[t.id][e.id.substring(2)+"Interpretation"];return r().createElement(m,{key:"styled-".concat(a),interpretation:l},null!==(n=null===(i=e.value)||void 0===i?void 0:i.content)&&void 0!==n?n:e.value)})))})))))})),r().createElement(_.PatientChartPagination,{pageNumber:p,totalItems:a.length,currentItems:d.length,pageSize:i,onPageNumberChange:function(t){var e=t.page;return v(e)},dashboardLinkUrl:n,dashboardLinkLabel:o}))};var k=a(419),N=a(9361),C={};C.styleTagTransform=T(),C.setAttributes=y(),C.insert=f().bind(null,"head"),C.domAPI=g(),C.insertStyleElement=O(),p()(N.Z,C);const L=N.Z&&N.Z.locals?N.Z.locals:void 0;function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var i,r,n=[],l=!0,o=!1;try{for(a=a.call(t);!(l=(i=a.next()).done)&&(n.push(i.value),!e||n.length!==e);l=!0);}catch(t){o=!0,r=t}finally{try{l||null==a.return||a.return()}finally{if(o)throw r}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return x(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?x(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var B;!function(t){t.TIME="time",t.LINEAR="linear",t.LOG="log",t.LABELS="labels",t.LABELS_RATIO="labels-ratio"}(B||(B={}));const V=function(t){var e,a,o,s,c,d,v,p,m=t.patientVitals,g=t.conceptUnits,h=t.config,f=(0,n.useTranslation)().t,b=I(r().useState({title:"BP (".concat(g.get(h.concepts.systolicBloodPressureUuid),")"),value:"systolic"}),2),y=b[0],w=b[1],O=[{id:"bloodPressure",title:(0,_.withUnit)("BP",null!==(e=g.get(h.concepts.systolicBloodPressureUuid))&&void 0!==e?e:"-"),value:"systolic"},{id:"oxygenSaturation",title:(0,_.withUnit)("SPO2",null!==(a=g.get(h.concepts.oxygenSaturationUuid))&&void 0!==a?a:"-"),value:"spo2"},{id:"temperature",title:(0,_.withUnit)("Temp",null!==(o=g.get(h.concepts.temperatureUuid))&&void 0!==o?o:"-"),value:"temperature"},{id:"respiratoryRate",title:(0,_.withUnit)("R. Rate",null!==(s=g.get(h.concepts.respiratoryRateUuid))&&void 0!==s?s:"-"),value:"respiratoryRate"},{id:"pulse",title:(0,_.withUnit)("Pulse",null!==(c=g.get(h.concepts.pulseUuid))&&void 0!==c?c:"-"),value:"pulse"}],S=(0,i.useMemo)((function(){return m.filter((function(t){return t[y.value]})).splice(0,10).sort((function(t,e){return new Date(t.date).getTime()-new Date(e.date).getTime()})).map((function(t){if(t[y.value])return["systolic","diastolic"].includes(y.value)?[{group:"Systolic blood pressure",key:(0,u.formatDate)((0,u.parseDate)(t.date.toString()),{year:!1}),value:t.systolic,date:t.date},{group:"Diastolic blood pressure",key:(0,u.formatDate)((0,u.parseDate)(t.date.toString()),{year:!1}),value:t.diastolic,date:t.date}]:{group:y.title,key:(0,u.formatDate)((0,u.parseDate)(t.date.toString()),{year:!1}),value:t[y.value],date:t.date}}))}),[m,y]),T={axes:{bottom:{title:"Date",mapsTo:"key",scaleType:B.LABELS},left:{mapsTo:"value",title:y.title,scaleType:B.LINEAR,includeZero:!1}},legend:{enabled:!1},color:{scale:(d={},v=y.title,p="#6929c4",v in d?Object.defineProperty(d,v,{value:p,enumerable:!0,configurable:!0,writable:!0}):d[v]=p,d)},tooltip:{customHTML:function(t){var e=I(t,1)[0],a=e.value,i=e.group,r=e.key;return'<div class="cds--tooltip cds--tooltip--shown" style="min-width: max-content; font-weight:600">'.concat(a," - ").concat(String(i).toUpperCase(),'\n        <span style="color: #c6c6c6; font-size: 1rem; font-weight:600">').concat(r,"</span></div>")}},height:"400px"};return r().createElement("div",{className:L.vitalsChartContainer},r().createElement("div",{className:L.vitalSignsArea},r().createElement("label",{className:L.vitalsSignLabel,htmlFor:"vitals-chart-tab-group"},f("vitalSignDisplayed","Vital sign displayed")),r().createElement(l.mQc,{className:L.verticalTabs},r().createElement(l.tdY,{className:L.tablist,"aria-label":"Vitals signs"},O.map((function(t){var e=t.id,a=t.title,i=t.value;return r().createElement(l.OK9,{key:e,className:"".concat(L.tab," ").concat(L.bodyLong01," ").concat(y.title===a&&L.selectedTab),onClick:function(){return w({title:a,value:i})}},a)}))))),r().createElement("div",{className:L.vitalsChartArea},r().createElement(k.LineChart,{data:S.flat(),options:T})))};var R=a(168),D=a(6299),Z={};Z.styleTagTransform=T(),Z.setAttributes=y(),Z.insert=f().bind(null,"head"),Z.domAPI=g(),Z.insertStyleElement=O(),p()(D.Z,Z);const z=D.Z&&D.Z.locals?D.Z.locals:void 0;function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function F(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function M(){return M=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},M.apply(this,arguments)}const G=function(t){var e,a,i,v,p,m,g,h=t.patientUuid,f=t.showAddVitals,b=t.pageSize,y=t.urlLabel,w=t.pageUrl,O=(0,n.useTranslation)().t,S=(0,u.useConfig)(),T=O("vitalSigns","Vital signs"),E=O("vitals","Vitals"),P=(m=r().useState(),g=2,function(t){if(Array.isArray(t))return t}(m)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var i,r,n=[],l=!0,o=!1;try{for(a=a.call(t);!(l=(i=a.next()).done)&&(n.push(i.value),!e||n.length!==e);l=!0);}catch(t){o=!0,r=t}finally{try{l||null==a.return||a.return()}finally{if(o)throw r}}return n}}(m,g)||function(t,e){if(t){if("string"==typeof t)return H(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?H(t,e):void 0}}(m,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),j=P[0],U=P[1],k=(0,R.yL)(h),N=k.vitals,C=k.isError,L=k.isLoading,x=k.isValidating,I=(0,_.useVitalsConceptMetadata)().data,B=r().useCallback((function(){var t,e;S.vitals.useFormEngine?(t=S.vitals.formUuid,"",e=S.vitals.formName,_.formEntrySub.next({formUuid:t,encounterUuid:""}),(0,_.launchPatientWorkspace)("patient-form-entry-workspace",{workspaceTitle:e})):(0,_.launchPatientWorkspace)(d.s)}),[S.vitals]),D=[{key:"date",header:"Date and time",isSortable:!0},{key:"bloodPressure",header:(0,_.withUnit)("BP",null!==(e=I.get(S.concepts.systolicBloodPressureUuid))&&void 0!==e?e:"")},{key:"respiratoryRate",header:(0,_.withUnit)("R. Rate",null!==(a=I.get(S.concepts.respiratoryRateUuid))&&void 0!==a?a:"")},{key:"pulse",header:(0,_.withUnit)("Pulse",null!==(i=I.get(S.concepts.pulseUuid))&&void 0!==i?i:"")},{key:"spo2",header:(0,_.withUnit)("SPO2",null!==(v=I.get(S.concepts.oxygenSaturationUuid))&&void 0!==v?v:"")},{key:"temperature",header:(0,_.withUnit)("Temp",null!==(p=I.get(S.concepts.temperatureUuid))&&void 0!==p?p:"")}],Z=r().useMemo((function(){return null==N?void 0:N.map((function(t,e){var a,i,r,n,l,o,s,c;return s=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){F(t,e,a[e])}))}return t}({},t),c=null!=(c={id:"".concat(e),date:(0,u.formatDate)((0,u.parseDate)(t.date.toString()),{mode:"wide",time:!0}),bloodPressure:"".concat(null!==(a=t.systolic)&&void 0!==a?a:"--"," / ").concat(null!==(i=t.diastolic)&&void 0!==i?i:"--"),pulse:null!==(r=t.pulse)&&void 0!==r?r:"--",spo2:null!==(n=t.spo2)&&void 0!==n?n:"--",temperature:null!==(l=t.temperature)&&void 0!==l?l:"--",respiratoryRate:null!==(o=t.respiratoryRate)&&void 0!==o?o:"--"})?c:{},Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):function(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a.push.apply(a,i)}return a}(Object(c)).forEach((function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(c,t))})),s}))}),[N]);return r().createElement(r().Fragment,null,L?r().createElement(l.gqd,{role:"progressbar"}):C?r().createElement(_.ErrorState,{error:C,headerTitle:E}):(null==N?void 0:N.length)?r().createElement("div",{className:z.widgetCard},r().createElement(_.CardHeader,{title:E},r().createElement("div",{className:z.backgroundDataFetchingIndicator},r().createElement("span",null,x?r().createElement(l.lSo,null):null)),r().createElement("div",{className:z.vitalsHeaderActionItems},r().createElement("div",{className:z.toggleButtons},r().createElement(l.zxk,{className:z.tableViewToggle,size:"sm",kind:j?"ghost":"tertiary",hasIconOnly:!0,renderIcon:function(t){return r().createElement(o.iA,M({},t,{size:16}))},iconDescription:O("tableView","Table View"),onClick:function(){return U(!1)}}),r().createElement(l.zxk,{className:z.chartViewToggle,size:"sm",kind:j?"tertiary":"ghost",hasIconOnly:!0,renderIcon:function(t){return r().createElement(s.eA,M({},t,{size:16}))},iconDescription:O("chartView","Chart View"),onClick:function(){return U(!0)}})),r().createElement("span",{className:z.divider},"|"),f&&r().createElement(l.zxk,{kind:"ghost",renderIcon:function(t){return r().createElement(c.mm,M({},t,{size:16}))},iconDescription:"Add vitals",onClick:B},O("add","Add")))),j?r().createElement(V,{patientVitals:N,conceptUnits:I,config:S}):r().createElement(A,{tableRows:Z,pageSize:b,urlLabel:y,pageUrl:w,tableHeaders:D})):r().createElement(_.EmptyState,{displayText:T,headerTitle:E,launchForm:B}))}},168:(t,e,a)=>{a.d(e,{WK:()=>f,bc:()=>g,tQ:()=>h,tX:()=>v,wA:()=>m,yL:()=>d});var i=a(9857),r=a(906),n=a(6217),l=a(3461);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){s(t,e,a[e])}))}return t}function _(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a.push.apply(a,i)}return a}(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))})),t}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var i,r,n=[],l=!0,o=!1;try{for(a=a.call(t);!(l=(i=a.next()).done)&&(n.push(i.value),!e||n.length!==e);l=!0);}catch(t){o=!0,r=t}finally{try{l||null==a.return||a.return()}finally{if(o)throw r}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t){var e,a,o,d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],v=(0,r.useConfig)().concepts,p=(0,n.useVitalsConceptMetadata)().conceptMetadata,g=[v.heightUuid,v.midUpperArmCircumferenceUuid,v.weightUuid],b=d?Object.values(v).join(","):Object.values(v).filter((function(t){return!g.includes(t)})).join(","),y="".concat(r.fhirBaseUrl,"/Observation?subject:Patient=").concat(t,"&code=")+b+"&_summary=data&_sort=-date"+"&_count=".concat(100,"\n        "),w=(0,i.ZP)(y,r.openmrsFetch),O=w.data,S=w.error,T=w.isValidating,E=function(t){switch(t){case v.systolicBloodPressureUuid:return"systolic";case v.diastolicBloodPressureUuid:return"diastolic";case v.pulseUuid:return"pulse";case v.temperatureUuid:return"temperature";case v.oxygenSaturationUuid:return"spo2";case v.respiratoryRateUuid:return"respiratoryRate";case v.heightUuid:return"height";case v.weightUuid:return"weight";case v.midUpperArmCircumferenceUuid:return"muac"}},P=function(t){var e,a,i,r,n,l,o,s;return{code:null==t||null===(e=t.code)||void 0===e||null===(a=e.coding)||void 0===a||null===(i=a[0])||void 0===i?void 0:i.code,interpretation:m(null==t||null===(r=t.valueQuantity)||void 0===r?void 0:r.value,h(null==t||null===(n=t.code)||void 0===n||null===(l=n.coding)||void 0===l||null===(o=l[0])||void 0===o?void 0:o.code,p)),issued:null==t?void 0:t.issued,value:null==t||null===(s=t.valueQuantity)||void 0===s?void 0:s.value}},j=new Map,U=null==O||null===(e=O.data)||void 0===e||null===(a=e.entry)||void 0===a?void 0:a.map((function(t){return null!==(o=t.resource)&&void 0!==o?o:[]})).map(P);null==U||U.map((function(t){var e,a,i=new Date(new Date(t.issued).setSeconds(0,0)).toISOString();j.has(i)&&j.get(i)?j.set(i,_(c({},j.get(i)),(s(e={},E(t.code),t.value),s(e,E(t.code)+"Interpretation",t.interpretation),e))):t.value&&j.set(i,(s(a={},E(t.code),t.value),s(a,E(t.code)+"Interpretation",t.interpretation),a))}));var A=Array.from(j).map((function(t,e){var a=u(t,2),i=a[0],r=a[1];return _(c({},r),{id:e.toString(),bmi:(0,l.V)(Number(r.weight),Number(r.height)),date:i,bloodPressureInterpretation:f(r.systolic,r.diastolic,v,p)})}));return{vitals:A,isError:S,isLoading:!O&&!S,isValidating:T}}function v(t,e,a,i,n,l,o,s){return(0,r.openmrsFetch)("/ws/rest/v1/encounter",{method:"POST",headers:{"Content-Type":"application/json"},signal:o.signal,body:{patient:i,encounterDatetime:l,location:s,encounterType:t,form:e,obs:p(n,a)}})}function p(t,e){return Object.entries(t).filter((function(t){var e=u(t,2);return e[0],null!=e[1]})).map((function(t){var a=u(t,2),i=a[0],r=a[1];return{concept:e[i+"Uuid"],value:r}}))}function m(t,e){return(null==e?void 0:e.hiCritical)&&t>=e.hiCritical?"critically_high":(null==e?void 0:e.hiNormal)&&t>e.hiNormal?"high":(null==e?void 0:e.lowCritical)&&t<=e.lowCritical?"critically_low":(null==e?void 0:e.lowNormal)&&t<e.lowNormal?"low":"normal"}function g(t){return Object.entries(t).filter((function(t){return u(t,1)[0].match(/interpretation/i)})).map((function(t){return u(t,2)[1]})).some((function(t){return"normal"!==t}))}function h(t,e){return t&&(null==e?void 0:e.length)?null==e?void 0:e.find((function(e){return e.uuid===t})):null}function f(t,e,a,i){var r=m(t,h(null==a?void 0:a.systolicBloodPressureUuid,i)),n=m(e,h(null==a?void 0:a.diastolicBloodPressureUuid,i));return"critically_high"===r||"critically_high"===n?"critically_high":"critically_low"===r||"critically_low"===n?"critically_low":"high"===r||"high"===n?"high":"low"===r||"low"===n?"low":"normal"}}}]);