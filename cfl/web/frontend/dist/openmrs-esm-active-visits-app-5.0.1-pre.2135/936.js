(globalThis.webpackChunk_openmrs_esm_active_visits_app=globalThis.webpackChunk_openmrs_esm_active_visits_app||[]).push([[936],{4967:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var a=i(272),s=i.n(a),n=i(2609),r=i.n(n)()(s());r.push([e.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-active-visits__active-visits__productiveHeading01___pEj2L{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-active-visits__active-visits__productiveHeading02___Us5A8{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-active-visits__active-visits__bodyLong01___WZ75D{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-active-visits__active-visits__caption01___m1wE2{font-size:var(--cds-legal-01-font-size, 0.75rem);font-weight:var(--cds-legal-01-font-weight, 400);line-height:var(--cds-legal-01-line-height, 1.33333);letter-spacing:var(--cds-legal-01-letter-spacing, 0.32px)}.-esm-active-visits__active-visits__bodyShort02___Wgm3_{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0)}.-esm-active-visits__active-visits__text02___xH5EN{color:#525252}.-esm-active-visits__active-visits__text01___Chnr_{color:#161616}.-esm-active-visits__active-visits__container___yBbpS{margin:0rem 1rem}.-esm-active-visits__active-visits__activeVisitsContainer___CM_W4{background-color:#fff;border:1px solid #e0e0e0;width:100%;margin:0 auto;max-width:95vw;padding-bottom:0}.-esm-active-visits__active-visits__activeVisitsDetailHeaderContainer___YArnO{display:flex;justify-content:space-between;align-items:center;padding:.75rem 0 .75rem 1rem;background-color:#fff}.-esm-active-visits__active-visits__backgroundDataFetchingIndicator___JKdXx{align-items:center;display:flex;flex:1 1 0%;justify-content:center}.-esm-active-visits__active-visits__tableContainer___SEFfo section{position:relative}.-esm-active-visits__active-visits__tableContainer___SEFfo a{text-decoration:none}.-esm-active-visits__active-visits__pagination___ah_dt{overflow:hidden}.-esm-active-visits__active-visits__pagination___ah_dt.cds--pagination{border-top:none}.-esm-active-visits__active-visits__hiddenRow___xXMiL{display:none}.-esm-active-visits__active-visits__emptyRow___l0jLZ{padding:0 1rem;display:flex;align-items:center}.-esm-active-visits__active-visits__visitSummaryContainer___QbU25{width:100%;max-width:768px;margin:1rem auto}.-esm-active-visits__active-visits__expandedActiveVisitRow___JNpwl>td>div{max-height:max-content !important}.-esm-active-visits__active-visits__expandedActiveVisitRow___JNpwl td{padding:0 2rem}.-esm-active-visits__active-visits__expandedActiveVisitRow___JNpwl th[colspan] td[colspan]>div:first-child{padding:0 1rem}.-esm-active-visits__active-visits__action___xnabI{margin-bottom:.5rem}.-esm-active-visits__active-visits__content___hhgHo{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);color:#525252;margin-top:1rem;margin-bottom:.5rem}.-esm-active-visits__active-visits__desktopHeading___v01T2,.-esm-active-visits__active-visits__tabletHeading___z6mBV{text-align:left;text-transform:capitalize}.-esm-active-visits__active-visits__desktopHeading___v01T2 h4,.-esm-active-visits__active-visits__tabletHeading___z6mBV h4{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252}.-esm-active-visits__active-visits__desktopHeading___v01T2 h4:after,.-esm-active-visits__active-visits__tabletHeading___z6mBV h4:after{content:"";display:block;width:2rem;padding-top:3px;border-bottom:.375rem solid;border-bottom-color:#007d79;border-bottom-color:var(--brand-03)}.-esm-active-visits__active-visits__tile___EDfYW{text-align:center;border-bottom:1px solid #e0e0e0}.-esm-active-visits__active-visits__filterEmptyState___naZ93{display:flex;justify-content:center;align-items:center;padding:1rem;margin:5rem;text-align:center}.-esm-active-visits__active-visits__filterEmptyStateTile___q6M77{margin:auto}.-esm-active-visits__active-visits__filterEmptyStateContent___T7wvs{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin-bottom:.5rem}.-esm-active-visits__active-visits__filterEmptyStateHelper___B5tXz{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#525252}html[dir=rtl] .-esm-active-visits__active-visits__activeVisitsContainer___CM_W4 .-esm-active-visits__active-visits__activeVisitsDetailHeaderContainer___YArnO{padding:.75rem 1rem .75rem 0}html[dir=rtl] .-esm-active-visits__active-visits__activeVisitsContainer___CM_W4 .-esm-active-visits__active-visits__desktopHeading___v01T2 h4,html[dir=rtl] .-esm-active-visits__active-visits__activeVisitsContainer___CM_W4 .-esm-active-visits__active-visits__tabletHeading___z6mBV h4{text-align:right}html[dir=rtl] .-esm-active-visits__active-visits__activeVisitsContainer___CM_W4 div[role=search] :first-child svg{left:unset;right:.5rem}html[dir=rtl] .-esm-active-visits__active-visits__activeVisitsContainer___CM_W4 div[role=search] :last-child{right:unset;left:0}html[dir=rtl] .-esm-active-visits__active-visits__activeVisitsContainer___CM_W4 .-esm-active-visits__active-visits__tableContainer___SEFfo th>div{text-align:right}html[dir=rtl] .-esm-active-visits__active-visits__activeVisitsContainer___CM_W4 .-esm-active-visits__active-visits__tableContainer___SEFfo td{text-align:right}html[dir=rtl] .-esm-active-visits__active-visits__activeVisitsContainer___CM_W4 .-esm-active-visits__active-visits__tableContainer___SEFfo td .-esm-active-visits__active-visits__serviceColor___XHD6S{margin-right:0;margin-left:.5rem}html[dir=rtl] .-esm-active-visits__active-visits__activeVisitsContainer___CM_W4 .-esm-active-visits__active-visits__tableContainer___SEFfo td button{text-align:right}',"",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/root.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./src/active-visits-widget/active-visits.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCpDF,gECu0BI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CDn0BJ,gECm0BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD/zBJ,uDC+zBI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CD3zBJ,sDC2zBI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CDvzBJ,wDCuzBI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CDnzBJ,mDACE,aDnBQ,CCsBV,mDACE,aDxBM,CAAA,sDGCN,gBAAA,CAGF,kEACE,qBHRM,CGSN,wBAAA,CACA,UAAA,CACA,aAAA,CACA,cAAA,CACA,gBAAA,CAGF,8EACE,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,4BAAA,CACA,qBHrBM,CGwBR,4EACE,kBAAA,CACA,YAAA,CACA,WAAA,CACA,sBAAA,CAGF,mEACE,iBAAA,CAGF,6DACE,oBAAA,CAGF,uDACE,eAAA,CAEA,uEACE,eAAA,CAIJ,sDACE,YAAA,CAGF,qDACE,cAAA,CACA,YAAA,CACA,kBAAA,CAGF,kEACE,UAAA,CACA,eAAA,CACA,gBAAA,CAGF,0EACE,iCAAA,CAGF,sEACE,cAAA,CAGF,2GACE,cAAA,CAGF,mDACE,mBCxDW,CD2Db,oDD0vBI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CCxvBF,aH7EQ,CG8ER,eCpDW,CDqDX,mBC/DW,CDkEb,qHAEE,eAAA,CACA,yBAAA,CAEA,2HD8uBE,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CC5uBA,aHzFM,CG2FN,uIACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,eAAA,CACA,2BAAA,CHrDJ,2BAAA,CACA,mCAAA,CG0DF,iDACE,iBAAA,CACA,+BAAA,CAGF,6DACE,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,YCrFW,CDsFX,WCxDW,CDyDX,iBAAA,CAGF,iEACE,WAAA,CAGF,oED6sBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CC3sBF,aH1HQ,CG2HR,mBAAA,CAGF,mEDusBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CCrsBF,aHhIQ,CGsIN,8JACE,4BAAA,CAIA,2RACE,gBAAA,CAKA,kHACE,UAAA,CACA,WCnIG,CDsIP,6GACE,WAAA,CACA,MAAA,CAIF,kJACE,gBAAA,CAEF,8IACE,gBAAA,CACA,uMACE,cAAA,CACA,iBCnJG,CDqJL,qJACE,gBAAA",sourceRoot:""}]),r.locals={productiveHeading01:"-esm-active-visits__active-visits__productiveHeading01___pEj2L",productiveHeading02:"-esm-active-visits__active-visits__productiveHeading02___Us5A8",bodyLong01:"-esm-active-visits__active-visits__bodyLong01___WZ75D",caption01:"-esm-active-visits__active-visits__caption01___m1wE2",bodyShort02:"-esm-active-visits__active-visits__bodyShort02___Wgm3_",text02:"-esm-active-visits__active-visits__text02___xH5EN",text01:"-esm-active-visits__active-visits__text01___Chnr_",container:"-esm-active-visits__active-visits__container___yBbpS",activeVisitsContainer:"-esm-active-visits__active-visits__activeVisitsContainer___CM_W4",activeVisitsDetailHeaderContainer:"-esm-active-visits__active-visits__activeVisitsDetailHeaderContainer___YArnO",backgroundDataFetchingIndicator:"-esm-active-visits__active-visits__backgroundDataFetchingIndicator___JKdXx",tableContainer:"-esm-active-visits__active-visits__tableContainer___SEFfo",pagination:"-esm-active-visits__active-visits__pagination___ah_dt",hiddenRow:"-esm-active-visits__active-visits__hiddenRow___xXMiL",emptyRow:"-esm-active-visits__active-visits__emptyRow___l0jLZ",visitSummaryContainer:"-esm-active-visits__active-visits__visitSummaryContainer___QbU25",expandedActiveVisitRow:"-esm-active-visits__active-visits__expandedActiveVisitRow___JNpwl",action:"-esm-active-visits__active-visits__action___xnabI",content:"-esm-active-visits__active-visits__content___hhgHo",desktopHeading:"-esm-active-visits__active-visits__desktopHeading___v01T2",tabletHeading:"-esm-active-visits__active-visits__tabletHeading___z6mBV",tile:"-esm-active-visits__active-visits__tile___EDfYW",filterEmptyState:"-esm-active-visits__active-visits__filterEmptyState___naZ93",filterEmptyStateTile:"-esm-active-visits__active-visits__filterEmptyStateTile___q6M77",filterEmptyStateContent:"-esm-active-visits__active-visits__filterEmptyStateContent___T7wvs",filterEmptyStateHelper:"-esm-active-visits__active-visits__filterEmptyStateHelper___B5tXz",serviceColor:"-esm-active-visits__active-visits__serviceColor___XHD6S"};const l=r},6824:function(e){e.exports=function(){"use strict";return function(e,t,i){t.prototype.isToday=function(){var e="YYYY-MM-DD",t=i();return this.format(e)===t.format(e)}}}()},4936:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>L});var a=i(5206),s=i.n(a),n=i(5053),r=i(2870),l=i(4924),o=function(e){var t=e.width,i=void 0===t?"64":t,a=e.height,n=void 0===a?"64":a;return s().createElement("svg",{width:i,height:n,viewBox:"0 0 64 64"},s().createElement("title",null,"Empty data illustration"),s().createElement("g",{fill:"none",fillRule:"evenodd"},s().createElement("path",{d:"M38.133 13.186H21.947c-.768.001-1.39.623-1.39 1.391V50.55l-.186.057-3.97 1.216a.743.743 0 01-.927-.493L3.664 12.751a.742.742 0 01.492-.926l6.118-1.874 17.738-5.43 6.119-1.873a.741.741 0 01.926.492L38.076 13l.057.186z",fill:"#F4F4F4"}),s().createElement("path",{d:"M41.664 13L38.026 1.117A1.576 1.576 0 0036.056.07l-8.601 2.633-17.737 5.43-8.603 2.634a1.578 1.578 0 00-1.046 1.97l12.436 40.616a1.58 1.58 0 001.969 1.046l5.897-1.805.185-.057v-.194l-.185.057-5.952 1.822a1.393 1.393 0 01-1.737-.923L.247 12.682a1.39 1.39 0 01.923-1.738L9.772 8.31 27.51 2.881 36.112.247a1.393 1.393 0 011.737.923L41.47 13l.057.186h.193l-.057-.185z",fill:"#8D8D8D"}),s().createElement("path",{d:"M11.378 11.855a.836.836 0 01-.798-.59L9.385 7.361a.835.835 0 01.554-1.042l16.318-4.996a.836.836 0 011.042.554l1.195 3.902a.836.836 0 01-.554 1.043l-16.318 4.995a.831.831 0 01-.244.037z",fill:"#C6C6C6"}),s().createElement("circle",{fill:"#C6C6C6",cx:17.636,cy:2.314,r:1.855}),s().createElement("circle",{fill:"#FFF",fillRule:"nonzero",cx:17.636,cy:2.314,r:1.175}),s().createElement("path",{d:"M55.893 53.995H24.544a.79.79 0 01-.788-.789V15.644a.79.79 0 01.788-.788h31.349a.79.79 0 01.788.788v37.562a.79.79 0 01-.788.789z",fill:"#F4F4F4"}),s().createElement("path",{d:"M41.47 13H21.948a1.579 1.579 0 00-1.576 1.577V52.4l.185-.057V14.577c.001-.768.623-1.39 1.391-1.39h19.581L41.471 13zm17.02 0H21.947a1.579 1.579 0 00-1.576 1.577v42.478c0 .87.706 1.576 1.576 1.577H58.49a1.579 1.579 0 001.576-1.577V14.577a1.579 1.579 0 00-1.576-1.576zm1.39 44.055c0 .768-.622 1.39-1.39 1.392H21.947c-.768-.001-1.39-.624-1.39-1.392V14.577c0-.768.622-1.39 1.39-1.39H58.49c.768 0 1.39.622 1.39 1.39v42.478z",fill:"#8D8D8D"}),s().createElement("path",{d:"M48.751 17.082H31.686a.836.836 0 01-.835-.835v-4.081c0-.46.374-.834.835-.835H48.75c.461 0 .834.374.835.835v4.08c0 .462-.374.835-.835.836z",fill:"#C6C6C6"}),s().createElement("circle",{fill:"#C6C6C6",cx:40.218,cy:9.755,r:1.855}),s().createElement("circle",{fill:"#FFF",fillRule:"nonzero",cx:40.218,cy:9.755,r:1.13})))},c=i(3255),v=i(4729),_=i(3100);const d=Promise.resolve();var A=(0,v.xD)(c.ZP,(e=>(t,i,s)=>{const n=(0,a.useRef)(!1),r=(0,a.useRef)(),{cache:l,initialSize:o=1,revalidateAll:c=!1,persistSize:A=!1,revalidateFirstPage:m=!0,revalidateOnMount:u=!1}=s;let p;try{p=(e=>(0,v.qC)(e?e(0,null):null)[0])(t),p&&(p="$inf$"+p)}catch(e){}const[C,g,h]=(0,v.JN)(l,p),f=(0,a.useCallback)((()=>(0,v.o8)(C()._l)?o:C()._l),[l,p,o]);(0,_.useSyncExternalStore)((0,a.useCallback)((e=>p?h(p,(()=>{e()})):()=>{}),[l,p]),f,f);const E=(0,a.useCallback)((()=>{const e=C()._l;return(0,v.o8)(e)?o:e}),[p,o]),y=(0,a.useRef)(E());(0,v.LI)((()=>{n.current?p&&g({_l:A?y.current:o}):n.current=!0}),[p,l]);const b=u&&!n.current,D=e(p,(async()=>{const[e,a]=C()._i||[],n=[],o=E();let _=null;for(let d=0;d<o;++d){const[o,A]=(0,v.qC)(t(d,_));if(!o)break;const[u,p]=(0,v.JN)(l,o);let C=u().data;const g=c||e||(0,v.o8)(C)||m&&!d&&!(0,v.o8)(r.current)||b||a&&!(0,v.o8)(a[d])&&!s.compare(a[d],C);i&&g&&(C=await i(A),p({data:C,_k:A})),n.push(C),_=C}return g({_i:v.i_}),n}),s);(0,v.LI)((()=>{r.current=D.data}),[D.data]);const w=(0,a.useCallback)((function(e,t){const i="boolean"==typeof t?{revalidate:t}:t||{},a=!1!==i.revalidate;if(!p)return d;if(a)if((0,v.o8)(e))g({_i:[!0]});else{const e=r.current;g({_i:[!1,e]})}return arguments.length?D.mutate(e,{...i,revalidate:a}):D.mutate()}),[p,l]),S=(0,a.useCallback)((e=>{if(!p)return d;let i;return(0,v.mf)(e)?i=e(E()):"number"==typeof e&&(i=e),"number"!=typeof i?d:(g({_l:i}),y.current=i,w((e=>{const i=[];let a=null;for(let n=0;n<e;++n){var s;const[e]=(0,v.qC)(t(n,a)),o=e?null==(s=l.get(e))?void 0:s.data:v.i_;if((0,v.o8)(o))return r.current;i.push(o),a=o}return i})(i)))}),[p,E,w,l]);return{size:E(),setSize:S,mutate:w,get data(){return D.data},get error(){return D.error},get isValidating(){return D.isValidating},get isLoading(){return D.isLoading}}})),m=i(3565),u=i.n(m),p=i(6824),C=i.n(p);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}u().extend(C());var h=i(1354),f=i.n(h),E=i(1583),y=i.n(E),b=i(7378),D=i.n(b),w=i(5993),S=i.n(w),k=i(4154),x=i.n(k),V=i(8141),B=i.n(V),H=i(4967),z={};z.styleTagTransform=B(),z.setAttributes=S(),z.insert=D().bind(null,"head"),z.domAPI=y(),z.insertStyleElement=x(),f()(H.Z,z);const F=H.Z&&H.Z.locals?H.Z.locals:void 0;function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},N.apply(this,arguments)}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var a,s,n=[],r=!0,l=!1;try{for(i=i.call(e);!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){l=!0,s=e}finally{try{r||null==i.return||i.return()}finally{if(l)throw s}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var M=function(e){var t=e.from,i=e.to,a=e.children;return s().createElement("a",{onClick:function(e){return function(e,i){e.preventDefault(),(0,r.navigate)({to:i}),localStorage.setItem("fromPage",t)}(e,i)},href:(0,r.interpolateUrl)(i)},a)};const L=function(){var e,t,i,c,v=(0,l.useTranslation)().t,_=(0,r.useConfig)(),d=(0,r.useLayoutType)(),m=null!==(i=null==_||null===(e=_.activeVisits)||void 0===e?void 0:e.pageSizes)&&void 0!==i?i:[10,20,30,40,50],u=I((0,a.useState)(null!==(c=null==_||null===(t=_.activeVisits)||void 0===t?void 0:t.pageSize)&&void 0!==c?c:10),2),p=u[0],C=u[1],h=function(){var e,t,i,s,n=(0,r.useSession)(),l=(0,r.useConfig)(),o=null==n||null===(t=n.sessionLocation)||void 0===t?void 0:t.uuid,c=A(o?function(e,t){var i,a;if(e&&!(null==t||null===(i=t.data)||void 0===i||null===(a=i.links)||void 0===a?void 0:a.some((function(e){return"next"===e.rel}))))return null;var s="/ws/rest/v1/visit?v=".concat("custom:(uuid,patient:(uuid,identifiers:(identifier,uuid,identifierType:(name,uuid)),person:(age,display,gender,uuid,attributes:(value,attributeType:(uuid,display)))),visitType:(uuid,name,display),location:(uuid,name,display),startDatetime,stopDatetime)","&"),n=new URLSearchParams;return n.append("includeInactive","false"),n.append("totalCount","true"),n.append("location","".concat(o)),e&&n.append("startIndex","".concat(50*e)),s+n.toString()}:null,r.openmrsFetch),v=c.data,_=c.error,d=c.isLoading,m=c.isValidating,u=c.size,p=c.setSize;(0,a.useEffect)((function(){var e,t,i;v&&(null==v||null===(e=v[u-1])||void 0===e||null===(t=e.data)||void 0===t||null===(i=t.links)||void 0===i?void 0:i.some((function(e){return"next"===e.rel})))&&p((function(e){return e+1}))}),[v,u]);var C,h,f=function(e){var t,i,a,s,n,o,c,v,_,d,A,m,u,p,C,g,h,f={age:null==e||null===(t=e.patient)||void 0===t||null===(i=t.person)||void 0===i?void 0:i.age,id:e.uuid,idNumber:null,gender:null==e||null===(a=e.patient)||void 0===a||null===(s=a.person)||void 0===s?void 0:s.gender,location:null==e||null===(n=e.location)||void 0===n?void 0:n.uuid,name:null==e||null===(o=e.patient)||void 0===o||null===(c=o.person)||void 0===c?void 0:c.display,patientUuid:null==e||null===(v=e.patient)||void 0===v?void 0:v.uuid,visitStartTime:(0,r.formatDatetime)((0,r.parseDate)(null==e?void 0:e.startDatetime)),visitType:null==e||null===(_=e.visitType)||void 0===_?void 0:_.display,visitUuid:e.uuid};return(null==l||null===(d=l.activeVisits)||void 0===d?void 0:d.identifiers)?null==l||null===(u=l.activeVisits)||void 0===u||null===(p=u.identifiers)||void 0===p||p.map((function(t){var i,a,s,n=null==e||null===(i=e.patient)||void 0===i?void 0:i.identifiers.find((function(e){var i;return(null==e||null===(i=e.identifierType)||void 0===i?void 0:i.name)===(null==t?void 0:t.identifierName)}));f[null===(a=t.header)||void 0===a?void 0:a.key]=null!==(s=null==n?void 0:n.identifier)&&void 0!==s?s:"--"})):f.idNumber=null!==(h=null===(g=null==e||null===(C=e.patient)||void 0===C?void 0:C.identifiers[0])||void 0===g?void 0:g.identifier)&&void 0!==h?h:"--",null==l||null===(A=l.activeVisits)||void 0===A||null===(m=A.attributes)||void 0===m||m.map((function(t){var i,a,s,n=t.display,r=t.header,l=null==e||null===(i=e.patient)||void 0===i||null===(a=i.person)||void 0===a?void 0:a.attributes.find((function(e){var t;return(null==e||null===(t=e.attributeType)||void 0===t?void 0:t.display)===n}));f[null==r?void 0:r.key]=null!==(s=null==l?void 0:l.value)&&void 0!==s?s:"--"})),f},E=v?(e=[]).concat.apply(e,(h=null==v?void 0:v.map((function(e){var t,i;return null==e||null===(t=e.data)||void 0===t||null===(i=t.results)||void 0===i?void 0:i.map(f)})),function(e){if(Array.isArray(e))return g(e)}(h)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(h)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?g(e,t):void 0}}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())):[];return{activeVisits:E,error:_,isLoading:d,isValidating:m,totalResults:null!==(C=null==v||null===(i=v[0])||void 0===i||null===(s=i.data)||void 0===s?void 0:s.totalCount)&&void 0!==C?C:0}}(),f=h.activeVisits,E=h.isLoading,y=h.isValidating,b=h.error,D=I((0,a.useState)(""),2),w=D[0],S=D[1],k=function(){var e,t,i=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/");return(t=null==(e=i)?0:e.length)?e[t-1]:void 0}(window.location.pathname),x=(0,a.useMemo)((function(){return function(e,t){var i,a,s,n,r,l=0,o=[{id:l++,header:e("visitStartTime","Visit Time"),key:"visitStartTime"}];return null==t||null===(i=t.activeVisits)||void 0===i||null===(a=i.identifiers)||void 0===a||a.map((function(t){var i,a,s;o.push({id:l++,header:e(null==t||null===(i=t.header)||void 0===i?void 0:i.key,null==t||null===(a=t.header)||void 0===a?void 0:a.default),key:null==t||null===(s=t.header)||void 0===s?void 0:s.key})})),(null==t||null===(s=t.activeVisit)||void 0===s?void 0:s.identifiers)||o.push({id:l++,header:e("idNumber","ID Number"),key:"idNumber"}),null==t||null===(n=t.activeVisits)||void 0===n||null===(r=n.attributes)||void 0===r||r.map((function(t){var i,a,s;o.push({id:l++,header:e(null==t||null===(i=t.header)||void 0===i?void 0:i.key,null==t||null===(a=t.header)||void 0===a?void 0:a.default),key:null==t||null===(s=t.header)||void 0===s?void 0:s.key})})),o.push({id:l++,header:e("name","Name"),key:"name"},{id:l++,header:e("gender","Gender"),key:"gender"},{id:l++,header:e("age","Age"),key:"age"},{id:l++,header:e("visitType","Visit Type"),key:"visitType"}),o}(v,_)}),[_,v]),V=(0,a.useMemo)((function(){if(void 0!==f&&f.length>0&&w&&""!==w.trim()){var e=w.toLowerCase();return null==f?void 0:f.filter((function(t){return Object.entries(t).some((function(t){var i=I(t,2),a=i[0],s=i[1];return"patientUuid"!==a&&"".concat(s).toLowerCase().includes(e)}))}))}return f}),[w,f]),B=(0,r.usePagination)(V,p),H=B.paginated,z=B.goTo,T=B.results,L=B.currentPage,R=(0,a.useCallback)((function(e){z(1),S(e.target.value)}),[z,S]);return E?s().createElement("div",{className:F.activeVisitsContainer},s().createElement("div",{className:F.activeVisitsDetailHeaderContainer},s().createElement("div",{className:(0,r.isDesktop)(d)?F.desktopHeading:F.tabletHeading},s().createElement("h4",null,v("activeVisits","Active Visits"))),s().createElement("div",{className:F.backgroundDataFetchingIndicator},s().createElement("span",null,y?s().createElement(n.lSo,null):null))),s().createElement(n.olm,{labelText:"",placeholder:v("filterTable","Filter table"),onChange:R,size:(0,r.isDesktop)(d)?"sm":"lg",disabled:!0}),s().createElement(n.gqd,{rowCount:p,showHeader:!1,showToolbar:!1,zebra:!0,columnCount:null==x?void 0:x.length,size:(0,r.isDesktop)(d)?"sm":"lg"})):b?s().createElement("div",{className:F.activeVisitsContainer},s().createElement(n.mh4,null,s().createElement(r.ErrorState,{error:b,headerTitle:v("activeVisits","Active Visits")}))):f.length?s().createElement("div",{className:F.activeVisitsContainer},s().createElement("div",{className:F.activeVisitsDetailHeaderContainer},s().createElement("div",{className:(0,r.isDesktop)(d)?F.desktopHeading:F.tabletHeading},s().createElement("h4",null,v("activeVisits","Active Visits"))),s().createElement("div",{className:F.backgroundDataFetchingIndicator},s().createElement("span",null,y?s().createElement(n.lSo,null):null))),s().createElement(n.olm,{labelText:"",placeholder:v("filterTable","Filter table"),onChange:R,size:(0,r.isDesktop)(d)?"sm":"lg"}),s().createElement(n.wQF,{rows:T,headers:x,size:(0,r.isDesktop)(d)?"sm":"lg",useZebraStyles:(null==f?void 0:f.length)>1},(function(e){var t=e.rows,i=e.headers,a=e.getHeaderProps,l=e.getTableProps,o=e.getRowProps,c=e.getExpandHeaderProps;return s().createElement(n.xJi,{className:F.tableContainer},s().createElement(n.iA_,N({className:F.activeVisitsTable},l()),s().createElement(n.ssF,null,s().createElement(n.SCH,null,s().createElement(n.MOD,N({enableToggle:!0},c())),i.map((function(e){return s().createElement(n.xDH,N({},a({header:e})),e.header)})))),s().createElement(n.RMI,null,t.map((function(e,t){var a=f.find((function(t){return t.id===e.id}));if(!a)return null;var l="${openmrsSpaBase}/patient/".concat(a.patientUuid,"/chart/Patient%20Summary");return s().createElement(s().Fragment,{key:t},s().createElement(n.RcE,N({},o({row:e}),{"data-testid":"activeVisitRow".concat(a.patientUuid||"unknown")}),e.cells.map((function(e){return s().createElement(n.pj1,{key:e.id,"data-testid":e.id},"name"===e.info.header&&a.patientUuid?s().createElement(M,{from:k,to:l},e.value):e.value)}))),e.isExpanded?s().createElement(n.SCH,{className:F.expandedActiveVisitRow},s().createElement("th",{colSpan:i.length+2},s().createElement(r.ExtensionSlot,{className:F.visitSummaryContainer,name:"visit-summary-slot",state:{visitUuid:a.visitUuid,patientUuid:a.patientUuid}}))):s().createElement(n.WdL,{className:F.hiddenRow,colSpan:i.length+2}))})))))})),0===(null==V?void 0:V.length)&&s().createElement("div",{className:F.filterEmptyState},s().createElement(n.mh4,{level:0},s().createElement(n.n9L,{className:F.filterEmptyStateTile},s().createElement("p",{className:F.filterEmptyStateContent},v("noVisitsToDisplay","No visits to display")),s().createElement("p",{className:F.filterEmptyStateHelper},v("checkFilters","Check the filters above"))))),H&&s().createElement(n.tlE,{forwardText:"Next page",backwardText:"Previous page",page:L,pageSize:p,pageSizes:m,totalItems:null==V?void 0:V.length,className:F.pagination,size:(0,r.isDesktop)(d)?"sm":"lg",onChange:function(e){var t=e.pageSize,i=e.page;t!==p&&C(t),i!==L&&z(i)}})):s().createElement("div",{className:F.activeVisitsContainer},s().createElement(n.mh4,null,s().createElement(n.n9L,{className:F.tile},s().createElement("div",{className:(0,r.isDesktop)(d)?F.desktopHeading:F.tabletHeading},s().createElement("h4",null,v("activeVisits","Active Visits"))),s().createElement(o,null),s().createElement("p",{className:F.content},v("noActiveVisitsForLocation","There are no active visits to display for this location.")))))}}}]);