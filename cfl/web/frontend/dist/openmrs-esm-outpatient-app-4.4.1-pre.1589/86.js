"use strict";(globalThis.webpackChunk_openmrs_esm_outpatient_app=globalThis.webpackChunk_openmrs_esm_outpatient_app||[]).push([[86],{4086:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var r=n(5206),l=n.n(r),o=n(4924),i=n(8234),a=n(2931),u=n(906),c=n(8053);function s(e,t,n,r,l,o,i){try{var a=e[o](i),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,l)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,l){var o=e.apply(t,n);function i(e){s(o,r,l,i,a,"next",e)}function a(e){s(o,r,l,i,a,"throw",e)}i(void 0)}))}}var d=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},p=function(e,t){var n,r,l,o,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(l=2&o[0]?r.return:o[0]?r.throw||((l=r.return)&&l.call(r),0):r.next)&&!(l=l.call(r,o[1])).done)return l;switch(r=0,l&&(o=[2&o[0],l.value]),o[0]){case 0:case 1:l=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((l=(l=i.trys).length>0&&l[l.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!l||o[1]>l[0]&&o[1]<l[3])){i.label=o[1];break}if(6===o[0]&&i.label<l[1]){i.label=l[1],l=o;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(o);break}l[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=l=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},h=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function y(){return(y=f((function(e){var t,n,r,l,o;return p(this,(function(i){switch(i.label){case 0:t=function(){var t,o,i,a,s,f,d,h,y,v;return p(this,(function(p){switch(p.label){case 0:t=e.length<l+r?e.length:l+r,o=new Array(r),i=(0,u.toDateObjectStrict)((0,u.toOmrsIsoString)(new Date)),a=l,p.label=1;case 1:return a<t?[4,Promise.all([(0,c.TW)(null===(s=e[a])||void 0===s?void 0:s.queueUuid,null===(f=e[a])||void 0===f?void 0:f.queueEntryUuid,i)])]:[3,4];case 2:p.sent(),o.push((0,u.openmrsFetch)("/ws/rest/v1/visit/".concat(e[a].visitUuid),{method:"POST",headers:{"Content-Type":"application/json"},signal:n.signal,body:{location:null===(d=e[a])||void 0===d?void 0:d.visitLocation,startDatetime:(0,u.parseDate)(null===(h=e[a])||void 0===h?void 0:h.visitStartDateTime),visitType:null===(y=e[a])||void 0===y?void 0:y.visitTypeUuid,stopDatetime:new Date}})),l++,p.label=3;case 3:return a++,[3,1];case 4:return v={},[4,Promise.all(o).then((function(e){return e})).catch((function(e){return e}))];case 5:return[2,(v.v=p.sent(),v)]}}))},n=new AbortController,r=10,l=0,i.label=1;case 1:return l<e.length?[5,h(t())]:[3,3];case 2:return o=i.sent(),"object"===d(o)?[2,o.v]:[3,1];case 3:return[2]}}))}))).apply(this,arguments)}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const b=function(e){var t,n,s=e.visitQueueEntries,f=e.closeModal,d=(0,o.useTranslation)().t,p=(0,c.P4)("","").mutate,h=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,o=[],i=!0,a=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){a=!0,l=e}finally{try{i||null==n.return||n.return()}finally{if(a)throw l}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=h[0],m=h[1],w=(0,r.useCallback)((function(){m(!0),function(e){return y.apply(this,arguments)}(s).then((function(e){f(),(0,u.showToast)({critical:!0,title:d("clearQueue","Clear queue"),kind:"success",description:d("queuesClearedSuccessfully","Queues cleared successfully")}),p()}),(function(e){(0,u.showNotification)({title:d("errorClearingQueues","Error clearing queues"),kind:"error",critical:!0,description:null==e?void 0:e.message})}))}),[f,p,d,s]);return l().createElement("div",null,l().createElement(a.xBx,{closeModal:f,label:d("serviceQueue","Service queue"),title:d("clearAllQueueEntries","Clear all queue entries?")}),l().createElement(a.fef,null,l().createElement("p",{className:i.Z.subHeading,id:"subHeading"},d("clearAllQueueEntriesWarningMessage","Clearing all queue entries will remove  all the patients from the queues and will not allow you to fill any other encounter forms for the patients"))),l().createElement(a.mzw,null,l().createElement(a.zxk,{kind:"secondary",onClick:f},d("cancel","Cancel")),!0===b?l().createElement(a.Db,null):l().createElement(a.zxk,{kind:"danger",onClick:w},d("clearQueue","Clear queue"))))}}}]);