"use strict";(globalThis.webpackChunk_openmrs_esm_patient_vitals_app=globalThis.webpackChunk_openmrs_esm_patient_vitals_app||[]).push([[313],{1757:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(272),r=i.n(n),a=i(2609),o=i.n(a)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-vitals__vitals-biometrics-form__productiveHeading03___pv0zR,.-esm-patient-vitals__vitals-biometrics-form__title___slS1h{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-patient-vitals__vitals-biometrics-form__title___slS1h{margin:0 .5rem .5rem 0}.-esm-patient-vitals__vitals-biometrics-form__danger___Sl84T{color:#da1e28}.-esm-patient-vitals__vitals-biometrics-form__button___w5V8j{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-vitals__vitals-biometrics-form__tablet___kfbT3{padding:1.5rem 1rem;background-color:#fff}.-esm-patient-vitals__vitals-biometrics-form__desktop___M2h6I{padding:0rem}.-esm-patient-vitals__vitals-biometrics-form__form___X68Me{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 6rem)}.omrs-breakpoint-lt-desktop .-esm-patient-vitals__vitals-biometrics-form__form___X68Me{background-color:#ededed}.omrs-breakpoint-gt-tablet .-esm-patient-vitals__vitals-biometrics-form__form___X68Me{background-color:#fff}.-esm-patient-vitals__vitals-biometrics-form__grid___MnsKn{margin:1rem}.-esm-patient-vitals__vitals-biometrics-form__row___XW3d8{margin:.5rem 0rem 0rem;display:flex;flex-flow:row wrap;gap:1rem}.-esm-patient-vitals__vitals-biometrics-form__spacer___dYIyX{margin-top:1rem}.-esm-patient-vitals__vitals-biometrics-form__noteInput___OMvYE{width:100%}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/vitals/vitals-biometrics-form/vitals-biometrics-form.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CClDF,sICq0BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDj0BJ,4DAEE,sBAAA,CAGF,6DACE,aDKO,CCFT,6DACE,WAAA,CACA,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAGF,6DACE,mBAAA,CACA,qBD3BM,CC8BR,8DACE,YAAA,CAGF,2DACE,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,yBAAA,CAGF,uFACE,wBAAA,CAGF,sFACE,qBD9CM,CCiDR,2DACE,WAAA,CAGF,0DACE,sBAAA,CACA,YAAA,CACA,kBAAA,CACA,QAAA,CAGF,6DACE,eAAA,CAGF,gEACE,UAAA",sourceRoot:""}]),o.locals={productiveHeading03:"-esm-patient-vitals__vitals-biometrics-form__productiveHeading03___pv0zR",title:"-esm-patient-vitals__vitals-biometrics-form__title___slS1h",danger:"-esm-patient-vitals__vitals-biometrics-form__danger___Sl84T",button:"-esm-patient-vitals__vitals-biometrics-form__button___w5V8j",tablet:"-esm-patient-vitals__vitals-biometrics-form__tablet___kfbT3",desktop:"-esm-patient-vitals__vitals-biometrics-form__desktop___M2h6I",form:"-esm-patient-vitals__vitals-biometrics-form__form___X68Me",grid:"-esm-patient-vitals__vitals-biometrics-form__grid___MnsKn",row:"-esm-patient-vitals__vitals-biometrics-form__row___XW3d8",spacer:"-esm-patient-vitals__vitals-biometrics-form__spacer___dYIyX",noteInput:"-esm-patient-vitals__vitals-biometrics-form__noteInput___OMvYE"};const l=o},1785:(e,t,i)=>{i.d(t,{Z:()=>l});var n=i(272),r=i.n(n),a=i(2609),o=i.n(a)()(r());o.push([e.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-vitals__vitals-biometrics-input__label01___jkE3w,.-esm-patient-vitals__vitals-biometrics-input__vitalsBiometricInputLabel01___sY9Bu{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-patient-vitals__vitals-biometrics-input__bodyLong01___ddl2G,.-esm-patient-vitals__vitals-biometrics-input__textarea___AVm9q{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-patient-vitals__vitals-biometrics-input__productiveHeading04___DGZWE,.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5,.-esm-patient-vitals__vitals-biometrics-input__textInput___sxOQM{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-patient-vitals__vitals-biometrics-input__inputContainer___OFahY{width:11.625rem;border-bottom:1px solid #8d8d8d;margin-bottom:1rem}.-esm-patient-vitals__vitals-biometrics-input__vitalsBiometricInputLabel01___sY9Bu{color:#525252;margin-bottom:.5rem}.-esm-patient-vitals__vitals-biometrics-input__textInput___sxOQM{border:none;text-align:center;padding:0;color:#161616}.-esm-patient-vitals__vitals-biometrics-input__textInput___sxOQM .cds--number input[type="number"]{border:none !important;text-align:center;font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0);font-family:ibm plex sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif;min-width:auto !important}.-esm-patient-vitals__vitals-biometrics-input__textInput___sxOQM .cds--number--nosteppers input[type="number"]{padding-right:1rem !important}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5{height:4.875rem;display:flex;justify-content:center;flex-direction:column;text-align:center;padding:.5rem;color:#525252;background-color:#f4f4f4}.omrs-breakpoint-lt-desktop .-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5{background-color:#fff}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5.red{background-color:#ffd7d9}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5.red input{background-color:#ffd7d9}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5.green{background-color:#a7f0ba}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5.green input{background-color:#a7f0ba}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5.yellow{background-color:#fcf4d6}.-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5.yellow input{background-color:#fcf4d6}.-esm-patient-vitals__vitals-biometrics-input__textarea___AVm9q{border:none;text-align:left}.-esm-patient-vitals__vitals-biometrics-input__textarea___AVm9q textarea{border-bottom:none}.-esm-patient-vitals__vitals-biometrics-input__centerDiv___BrhaH{display:flex;flex-direction:row;align-items:center;text-align:center;margin:0;padding:0}.-esm-patient-vitals__vitals-biometrics-input__unitName___bqjSg{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#525252;margin-top:.5rem}.-esm-patient-vitals__vitals-biometrics-input__disabledInput___Xu1zm{background-color:#f4f4f4 !important}.-esm-patient-vitals__vitals-biometrics-input__disabledInput___Xu1zm .cds--number input[type="number"]{background-color:#f4f4f4 !important}.-esm-patient-vitals__vitals-biometrics-input__danger___c0A8K{color:#da1e28}.-esm-patient-vitals__vitals-biometrics-input__layer___hKiYl{width:100%}',"",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/vitals/vitals-biometrics-form/vitals-biometrics-input.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CClDF,kJCq0BI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CDj0BJ,kICi0BI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CD7zBJ,sNC6zBI,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,sDAAA,CDzzBJ,sEACE,eAAA,CACA,+BAAA,CACA,kBEWW,CFRb,mFAEE,aDpBQ,CCqBR,mBELW,CFQb,iEACE,WAAA,CAEA,iBAAA,CACA,SAAA,CACA,aD9BM,CCgCN,mGACE,sBAAA,CACA,iBAAA,CCoyBA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,sDAAA,CDlyBA,mGAAA,CACA,yBAAA,CAGF,+GACE,6BAAA,CAIJ,0EAEE,eAAA,CACA,YAAA,CACA,sBAAA,CACA,qBAAA,CACA,iBAAA,CACA,aEnCW,CFoCX,aDpDQ,CCqDR,wBD1DM,CC6DR,sGACE,qBD7DM,CCiEN,8EACE,wBG0BK,CHxBL,oFACE,wBGuBG,CHpBP,gFACE,wBGrBO,CHuBP,sFACE,wBGxBK,CH2BT,iFACE,wBG0CQ,CHzCP,uFACC,wBGwCM,CHnCZ,gEACE,WAAA,CAEA,eAAA,CAEA,yEACE,kBAAA,CAIJ,iEACE,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,iBAAA,CACA,QAAA,CACA,SAAA,CAGF,gEC+tBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD7tBF,aDxGQ,CCyGR,gBEzFW,CF4Fb,qEACE,mCAAA,CAEA,uGACE,mCAAA,CAIJ,8DACE,aDtGO,CCyGT,6DACE,UAAA",sourceRoot:""}]),o.locals={label01:"-esm-patient-vitals__vitals-biometrics-input__label01___jkE3w",vitalsBiometricInputLabel01:"-esm-patient-vitals__vitals-biometrics-input__vitalsBiometricInputLabel01___sY9Bu",bodyLong01:"-esm-patient-vitals__vitals-biometrics-input__bodyLong01___ddl2G",textarea:"-esm-patient-vitals__vitals-biometrics-input__textarea___AVm9q",productiveHeading04:"-esm-patient-vitals__vitals-biometrics-input__productiveHeading04___DGZWE",textInputContainer:"-esm-patient-vitals__vitals-biometrics-input__textInputContainer___ySTm5",textInput:"-esm-patient-vitals__vitals-biometrics-input__textInput___sxOQM",inputContainer:"-esm-patient-vitals__vitals-biometrics-input__inputContainer___OFahY",centerDiv:"-esm-patient-vitals__vitals-biometrics-input__centerDiv___BrhaH",unitName:"-esm-patient-vitals__vitals-biometrics-input__unitName___bqjSg",disabledInput:"-esm-patient-vitals__vitals-biometrics-input__disabledInput___Xu1zm",danger:"-esm-patient-vitals__vitals-biometrics-input__danger___c0A8K",layer:"-esm-patient-vitals__vitals-biometrics-input__layer___hKiYl"};const l=o},7313:(e,t,i)=>{i.r(t),i.d(t,{default:()=>G});var n=i(268),r=i.n(n),a=i(3955),o=i(4924),l=i(195),s=i(8883),c=i(4851),u=i(2870),m=i(4556),d=i(3461),p=i(168),_=i(1354),A=i.n(_),v=i(1583),b=i.n(v),g=i(7378),f=i.n(g),h=i(5993),y=i.n(h),C=i(4154),w=i.n(C),E=i(8141),B=i.n(E),x=i(1785),S={};S.styleTagTransform=B(),S.setAttributes=y(),S.insert=f().bind(null,"head"),S.domAPI=b(),S.insertStyleElement=w(),A()(x.Z,S);const k=x.Z&&x.Z.locals?x.Z.locals:void 0;function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function D(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function I(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){D(e,t,i[t])}))}return e}function R(e){var t=e.children;return e.isTablet?r().createElement(c.mh4,{className:k.layer},t," "):r().createElement(r().Fragment,null,t)}const N=function(e){var t,i,l=e.title,s=e.control,m=e.textFields,d=e.unitSymbol,p=e.textFieldStyles,_=e.textFieldWidth,A=e.placeholder,v=e.disabled,b=e.muacColorCode,g=e.useMuacColors,f=e.isWithinNormalRange,h=void 0===f||f,y=(0,o.useTranslation)().t,C="tablet"===(0,u.useLayoutType)(),w=(t=(0,n.useState)(!1),i=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(t,i)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?U(e,t):void 0}}(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=w[0],B=w[1];return r().createElement("div",{className:k.inputContainer,style:{width:_}},r().createElement("p",{className:k.vitalsBiometricInputLabel01},l),r().createElement("div",{className:"".concat(k.textInputContainer," ").concat(v&&k.disabledInput," ").concat(!h&&k.danger," ").concat(g?b:void 0),style:I({},p)},r().createElement("div",{className:k.centerDiv},m.map((function(e,t){return"number"===e.type?r().createElement(n.Fragment,{key:"vitals-text-input-".concat(e.name,"-").concat(t)},r().createElement(R,{isTablet:C},r().createElement(a.Qr,{name:e.id,control:s,render:function(t){var i=t.field,n=i.onBlur,a=i.onChange,o=i.value,l=i.ref;return r().createElement(c.Y2U,{allowEmpty:!0,className:"".concat(k.textInput," ").concat(v&&k.disabledInput," ").concat(e.className," ").concat(!h&&k.danger),defaultValue:"--",disabled:v,disableWheel:!0,hideSteppers:!0,id:e.name+"input",label:"",max:e.max,min:e.min,name:e.name,onBlur:n,onChange:function(e){return function(e,t){B(!(Number(e)||""===e)),E||t(Number(e))}(e.target.value,a)},style:I({},p),ref:l,title:e.name,type:e.type,value:o})}})),null==e?void 0:e.separator):r().createElement(R,{key:"vitals-text-area-".concat(e.name,"-").concat(t),isTablet:C},r().createElement(a.Qr,{name:e.id,control:s,render:function(t){var i=t.field,n=i.onBlur,a=i.onChange,o=i.value,l=i.ref;return r().createElement(c.Kx8,{key:e.name,style:I({},p),className:k.textarea,id:e.name,name:e.name,labelText:"",onChange:function(e){return a(e.target.value)},onBlur:n,rows:2,placeholder:A,value:o,title:e.name,ref:l})}}))}))),r().createElement("p",{className:k.unitName},d)),(!h||E)&&r().createElement(c.lXp,{className:k.danger},y("numericInputError","Must be a number with in acceptable ranges")))};var P=i(1757),F={};F.styleTagTransform=B(),F.setAttributes=y(),F.insert=f().bind(null,"head"),F.domAPI=b(),F.insertStyleElement=w(),A()(P.Z,F);const O=P.Z&&P.Z.locals?P.Z.locals:void 0;function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=l.z.object({systolicBloodPressure:l.z.number(),diastolicBloodPressure:l.z.number(),respiratoryRate:l.z.number(),oxygenSaturation:l.z.number(),pulse:l.z.number(),temperature:l.z.number(),generalPatientNote:l.z.string(),weight:l.z.number(),height:l.z.number(),midUpperArmCircumference:l.z.number(),computedBodyMassIndex:l.z.number()}).partial().refine((function(e){return Object.values(e).some((function(e){return Boolean(e)}))}),{message:"Atleast one fields is required",path:["oneFieldRequired"]});const G=function(e){var t,i,l,_=e.patientUuid,A=e.closeWorkspace,v=(0,o.useTranslation)().t,b="tablet"===(0,u.useLayoutType)(),g=(0,u.useConfig)(),f=g.biometrics,h=g.vitals.useMuacColors,y=(0,u.useSession)(),C=(0,u.usePatient)(_),w=(0,u.useVisit)(_).currentVisit,E=(0,p.yL)(_).mutate,B=(0,m.useVitalsConceptMetadata)(),x=B.data,S=B.conceptMetadata,k=B.conceptRanges,U=M((0,n.useState)(),2),D=(U[0],U[1],M((0,n.useState)(""),2)),I=D[0],R=D[1],P=M((0,n.useState)(!1),2),F=P[0],j=P[1],G=M((0,n.useState)(!1),2),z=G[0],W=G[1],L=(0,a.cI)({mode:"all",resolver:(0,s.F)(T)}),Q=L.control,q=L.handleSubmit,X=(L.getValues,L.watch),V=L.setValue,Y=null==w||null===(i=w.encounters)||void 0===i||null===(t=i.find((function(e){var t;return(null==e||null===(t=e.form)||void 0===t?void 0:t.uuid)===g.vitals.formUuid})))||void 0===t?void 0:t.uuid,H=X("midUpperArmCircumference"),K=X("systolicBloodPressure"),Z=X("diastolicBloodPressure"),J=X("respiratoryRate"),$=X("oxygenSaturation"),ee=X("temperature"),te=X("pulse"),ie=X("weight"),ne=X("height");(0,n.useEffect)((function(){var e;(0,d.AX)((0,d.gW)((0,u.age)(null===(e=C.patient)||void 0===e?void 0:e.birthDate)),H,R)}),[X,null===(l=C.patient)||void 0===l?void 0:l.birthDate,H]);var re,ae,oe,le,se,ce,ue,me,de,pe=(0,n.useMemo)((function(){return{midUpperArmCircumferenceRange:k.get(g.concepts.midUpperArmCircumferenceUuid),diastolicBloodPressureRange:k.get(g.concepts.diastolicBloodPressureUuid),systolicBloodPressureRange:k.get(g.concepts.systolicBloodPressureUuid),oxygenSaturationRange:k.get(g.concepts.oxygenSaturationUuid),respiratoryRateRange:k.get(g.concepts.respiratoryRateUuid),temperatureRange:k.get(g.concepts.temperatureUuid),weightRange:k.get(g.concepts.weightUuid),heightRange:k.get(g.concepts.heightUuid),pulseRange:k.get(g.concepts.pulseUuid)}}),[k,g.concepts.diastolicBloodPressureUuid,g.concepts.heightUuid,g.concepts.midUpperArmCircumferenceUuid,g.concepts.oxygenSaturationUuid,g.concepts.pulseUuid,g.concepts.respiratoryRateUuid,g.concepts.systolicBloodPressureUuid,g.concepts.temperatureUuid,g.concepts.weightUuid]);return(0,n.useEffect)((function(){if(ne&&ie){var e=(0,d.Bc)(ie,ne);V("computedBodyMassIndex",e)}}),[ie,ne,V]),g.vitals.useFormEngine?r().createElement(u.ExtensionSlot,{name:"form-widget-slot",state:{view:"form",formUuid:g.vitals.formUuid,visitUuid:null==w?void 0:w.uuid,visitTypeUuid:null==w||null===(re=w.visitType)||void 0===re?void 0:re.uuid,patientUuid:null!=_?_:null,patient:C,encounterUuid:Y,closeWorkspace:A}}):r().createElement(c.l09,{className:O.form},r().createElement("div",{className:O.grid},r().createElement(c.Kqy,null,r().createElement(c.sgG,null,r().createElement("p",{className:O.title},v("recordVitals","Record vitals"))),r().createElement(c.X2j,{className:O.row},r().createElement(c.sgG,null,r().createElement(N,{title:v("bloodPressure","Blood Pressure"),control:Q,textFields:[{name:v("systolic","systolic"),separator:"/",type:"number",min:pe.systolicBloodPressureRange.lowAbsolute,max:pe.systolicBloodPressureRange.highAbsolute,id:"systolicBloodPressure"},{name:v("diastolic","diastolic"),type:"number",min:pe.diastolicBloodPressureRange.lowAbsolute,max:pe.diastolicBloodPressureRange.highAbsolute,id:"diastolicBloodPressure"}],unitSymbol:null!==(ae=x.get(g.concepts.systolicBloodPressureUuid))&&void 0!==ae?ae:"",isWithinNormalRange:(0,d.QL)(S,g.concepts.systolicBloodPressureUuid,K)&&(0,d.QL)(S,g.concepts.diastolicBloodPressureUuid,Z)})),r().createElement(c.sgG,null,r().createElement(N,{title:v("pulse","Pulse"),control:Q,textFields:[{name:v("pulse","Pulse"),type:"number",min:pe.pulseRange.lowAbsolute,max:pe.pulseRange.highAbsolute,id:"pulse"}],unitSymbol:null!==(oe=x.get(g.concepts.pulseUuid))&&void 0!==oe?oe:"",isWithinNormalRange:(0,d.QL)(S,g.concepts.pulseUuid,te)})),r().createElement(c.sgG,null,r().createElement(N,{title:v("respirationRate","Respiration Rate"),control:Q,textFields:[{name:v("respirationRate","Respiration Rate"),type:"number",min:pe.respiratoryRateRange.lowAbsolute,max:pe.respiratoryRateRange.highAbsolute,id:"respiratoryRate"}],unitSymbol:null!==(le=x.get(g.concepts.respiratoryRateUuid))&&void 0!==le?le:"",isWithinNormalRange:(0,d.QL)(S,g.concepts.respiratoryRateUuid,J)})),r().createElement(c.sgG,null,r().createElement(N,{title:v("spo2","SpO2"),control:Q,textFields:[{name:v("oxygenSaturation","Oxygen Saturation"),type:"number",min:pe.oxygenSaturationRange.lowAbsolute,max:pe.oxygenSaturationRange.highAbsolute,id:"oxygenSaturation"}],unitSymbol:null!==(se=x.get(g.concepts.oxygenSaturationUuid))&&void 0!==se?se:"",isWithinNormalRange:(0,d.QL)(S,g.concepts.oxygenSaturationUuid,$)})),r().createElement(c.sgG,null,r().createElement(N,{title:v("temp","Temp"),control:Q,textFields:[{name:v("temperature","Temperature"),type:"number",min:pe.temperatureRange.lowAbsolute,max:pe.temperatureRange.highAbsolute,id:"temperature"}],unitSymbol:null!==(ce=x.get(g.concepts.temperatureUuid))&&void 0!==ce?ce:"",isWithinNormalRange:(0,d.QL)(S,g.concepts.temperatureUuid,ee)}))),r().createElement(c.X2j,{className:O.row},r().createElement(c.sgG,{className:O.noteInput},r().createElement(N,{textFieldWidth:b?"70%":"100%",title:v("notes","Notes"),control:Q,textFields:[{name:v("notes","Notes"),type:"textArea",id:"generalPatientNote"}],placeholder:v("additionalNoteText","Type any additional notes here")})))),r().createElement(c.Kqy,{className:O.spacer},r().createElement(c.sgG,null,r().createElement("p",{className:O.title},v("recordBiometrics","Record biometrics"))),r().createElement(c.X2j,{className:O.row},r().createElement(c.sgG,null,r().createElement(N,{title:v("weight","Weight"),control:Q,textFields:[{name:v("weight","Weight"),type:"number",min:pe.weightRange.lowAbsolute,max:pe.weightRange.highAbsolute,id:"weight"}],unitSymbol:null!==(ue=x.get(g.concepts.weightUuid))&&void 0!==ue?ue:"",isWithinNormalRange:(0,d.QL)(S,g.concepts.weightUuid,ie)})),r().createElement(c.sgG,null,r().createElement(N,{title:v("height","Height"),control:Q,textFields:[{name:v("height","Height"),type:"number",min:pe.heightRange.lowAbsolute,max:pe.heightRange.highAbsolute,id:"height"}],unitSymbol:null!==(me=x.get(g.concepts.heightUuid))&&void 0!==me?me:"",isWithinNormalRange:(0,d.QL)(S,g.concepts.heightUuid,ne)})),r().createElement(c.sgG,null,r().createElement(N,{title:v("calculatedBmi","BMI (calc.)"),control:Q,textFields:[{name:v("bmi","BMI"),type:"number",id:"computedBodyMassIndex"}],unitSymbol:f.bmiUnit,disabled:!0})),r().createElement(c.sgG,null,r().createElement(N,{title:v("muac","MUAC"),control:Q,useMuacColors:h,muacColorCode:I,textFields:[{name:v("muac","MUAC"),type:"number",min:pe.midUpperArmCircumferenceRange.lowAbsolute,max:pe.midUpperArmCircumferenceRange.highAbsolute,id:"midUpperArmCircumference"}],unitSymbol:null!==(de=x.get(g.concepts.midUpperArmCircumferenceUuid))&&void 0!==de?de:"",isWithinNormalRange:(0,d.QL)(S,g.concepts.midUpperArmCircumferenceUuid,H)}))),r().createElement(c.X2j,null,z&&r().createElement(c.sgG,null,r().createElement(c.K0D,{lowContrast:!0,title:v("error","Error"),subtitle:v("pleaseFillField","Please fill at least one field")+".",onClose:function(){return W(!1)}}))))),r().createElement(c.uVA,{className:b?O.tablet:O.desktop},r().createElement(c.zxk,{className:O.button,kind:"secondary",onClick:function(){return A()}},v("discard","Discard")),r().createElement(c.zxk,{className:O.button,kind:"primary",onClick:q((function(e){(null==e?void 0:e.computedBodyMassIndex)&&delete e.computedBodyMassIndex;var t=e,i=!0;for(var n in t)if(0==(0,d.QL)(S,g.concepts[n+"Uuid"],t[n])){i=!1,(0,u.showNotification)({title:v("vitalsAndBiometricsSaveError","Error saving vitals and biometrics"),kind:"error",critical:!0,description:v("checkForValidity","Some of the values entered are invalid")});break}if(i){var r;j(!0);var a=new AbortController;(0,p.tX)(g.vitals.encounterTypeUuid,g.vitals.formUuid,g.concepts,_,t,new Date,a,null==y||null===(r=y.sessionLocation)||void 0===r?void 0:r.uuid).then((function(e){201===e.status&&(E(),A(),(0,u.showToast)({critical:!0,kind:"success",title:v("vitalsAndBiometricsRecorded","Vitals and Biometrics saved"),description:v("vitalsAndBiometricsNowAvailable","They are now visible on the Vitals and Biometrics page")}))})).catch((function(e){j(!1),(0,u.createErrorHandler)(),(0,u.showNotification)({title:v("vitalsAndBiometricsSaveError","Error saving vitals and biometrics"),kind:"error",critical:!0,description:null==e?void 0:e.message})})).finally((function(){a.abort()}))}}),(function(e){(null==e?void 0:e.oneFieldRequired)&&W(!0)})),disabled:F,type:"submit"},v("saveAndClose","Save and close"))))}},3461:(e,t,i)=>{i.d(t,{AX:()=>s,Bc:()=>a,QL:()=>o,gW:()=>l});var n=i(537),r=i.n(n);function a(e,t){if(e&&t)return e>0&&t>0?Number((e/Math.pow(t/100,2)).toFixed(1)):void 0}function o(e,t,i){if(void 0===i||""===i)return!0;var n=e.find((function(e){return e.uuid===t}));return!r()(null==n?void 0:n.lowAbsolute)||!r()(null==n?void 0:n.hiAbsolute)||Number(i)>=Number(n.lowAbsolute)&&Number(i)<=Number(n.hiAbsolute)}function l(e){var t=e.match(/\d+/g);return t?parseInt(t[0],10):null}function s(e,t,i){switch(!0){case e<=5&&t<=11.5&&t>0:i("red");break;case e<5&&t>11.5&&t<12.5:i("yellow");break;case e<5&&t>12.5:i("green");break;case e>5&&e<10&&t<=13.5&&t>0:i("red");break;case e>5&&e<10&&t>13.5&&t<14.5:i("yellow");break;case e>5&&e<10&&t>14.5:i("green");break;case e>10&&e<18&&t<=16.5&&t>0:i("red");break;case e>10&&e<18&&t>16.5&&t<19:i("yellow");break;case e>10&&e<18&&t>19:i("green");break;case e>18&&t<=19.5&&t>0:i("red");break;case e>18&&t>19&&t<22:i("yellow");break;case e>18&&t>22:i("green")}}},168:(e,t,i)=>{i.d(t,{WK:()=>f,tQ:()=>g,tX:()=>A,wA:()=>b,yL:()=>_});var n=i(268),r=i(6635),a=i(2870),o=i(4556),l=i(3461);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){c(e,t,i[t])}))}return e}function m(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i.push.apply(i,n)}return i}(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))})),e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,r,a=[],o=!0,l=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){l=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(l)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=100;function _(e){var t,i,s,_=arguments.length>1&&void 0!==arguments[1]&&arguments[1],A=(0,a.useConfig)().concepts,v=(0,o.useVitalsConceptMetadata)().conceptMetadata,h=[A.heightUuid,A.midUpperArmCircumferenceUuid,A.weightUuid],y=_?Object.values(A).join(","):Object.values(A).filter((function(e){return!h.includes(e)})).join(","),C=(0,n.useCallback)((function(t,i){var n;if(i&&!(null==i||null===(n=i.data)||void 0===n?void 0:n.link.some((function(e){return"next"===e.relation}))))return null;var r="".concat(a.fhirBaseUrl,"/Observation?subject:Patient=").concat(e,"&"),o=new URLSearchParams;return o.append("code",y),o.append("_summary","data"),o.append("_sort","-date"),o.append("_count",p.toString()),t&&o.append("_getpagesoffset",(t*p).toString()),r+o.toString()}),[y,e]),w=(0,r.ZP)(C,a.openmrsFetch),E=w.data,B=w.isValidating,x=w.setSize,S=w.error,k=w.size,U=w.mutate,D=function(e){switch(e){case A.systolicBloodPressureUuid:return"systolic";case A.diastolicBloodPressureUuid:return"diastolic";case A.pulseUuid:return"pulse";case A.temperatureUuid:return"temperature";case A.oxygenSaturationUuid:return"spo2";case A.respiratoryRateUuid:return"respiratoryRate";case A.heightUuid:return"height";case A.weightUuid:return"weight";case A.midUpperArmCircumferenceUuid:return"muac"}},I=function(e){var t,i,n,r,a,o,l,s;return{code:null==e||null===(n=e.code)||void 0===n||null===(i=n.coding)||void 0===i||null===(t=i[0])||void 0===t?void 0:t.code,interpretation:b(null==e||null===(r=e.valueQuantity)||void 0===r?void 0:r.value,g(null==e||null===(l=e.code)||void 0===l||null===(o=l.coding)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.code,v)),recordedDate:null==e?void 0:e.effectiveDateTime,value:null==e||null===(s=e.valueQuantity)||void 0===s?void 0:s.value}},R=new Map,N=null==E||null===(s=E[0])||void 0===s||null===(i=s.data)||void 0===i||null===(t=i.entry)||void 0===t?void 0:t.map((function(e){var t;return null!==(t=e.resource)&&void 0!==t?t:[]})).map(I);null==N||N.map((function(e){var t,i,n=new Date(new Date(e.recordedDate)).toISOString();R.has(n)&&R.get(n)?R.set(n,m(u({},R.get(n)),(c(t={},D(e.code),e.value),c(t,D(e.code)+"Interpretation",e.interpretation),t))):e.value&&R.set(n,(c(i={},D(e.code),e.value),c(i,D(e.code)+"Interpretation",e.interpretation),i))}));var P=Array.from(R).map((function(e,t){var i=d(e,2),n=i[0],r=i[1];return m(u({},r),{id:t.toString(),bmi:(0,l.Bc)(Number(r.weight),Number(r.height)),date:n,bloodPressureInterpretation:f(r.systolic,r.diastolic,A,v)})})),F=(0,n.useMemo)((function(){var e,t,i,n,r;return{vitals:E?[].concat(P):null,isLoading:!E&&!S,isError:S,hasMore:!!(null==E?void 0:E.length)&&!!(null==E||null===(t=E[(null==E?void 0:E.length)-1].data)||void 0===t||null===(e=t.link)||void 0===e?void 0:e.some((function(e){return"next"===e.relation}))),isValidating:B,loadingNewData:B,setPage:x,currentPage:k,totalResults:null!==(r=null==E||null===(n=E[0])||void 0===n||null===(i=n.data)||void 0===i?void 0:i.total)&&void 0!==r?r:null,mutate:U}}),[E,B,S,x,k,P,U]);return F}function A(e,t,i,n,r,o,l,s){return(0,a.openmrsFetch)("/ws/rest/v1/encounter",{method:"POST",headers:{"Content-Type":"application/json"},signal:l.signal,body:{patient:n,encounterDatetime:o,location:s,encounterType:e,form:t,obs:v(r,i)}})}function v(e,t){return Object.entries(e).filter((function(e){var t=d(e,2),i=(t[0],t[1]);return Boolean(i)})).map((function(e){var i=d(e,2),n=i[0],r=i[1];return{concept:t[n+"Uuid"],value:r}}))}function b(e,t){return(null==t?void 0:t.hiCritical)&&e>=t.hiCritical?"critically_high":(null==t?void 0:t.hiNormal)&&e>t.hiNormal?"high":(null==t?void 0:t.lowCritical)&&e<=t.lowCritical?"critically_low":(null==t?void 0:t.lowNormal)&&e<t.lowNormal?"low":"normal"}function g(e,t){return e&&(null==t?void 0:t.length)?null==t?void 0:t.find((function(t){return t.uuid===e})):null}function f(e,t,i,n){var r=b(e,g(null==i?void 0:i.systolicBloodPressureUuid,n)),a=b(t,g(null==i?void 0:i.diastolicBloodPressureUuid,n));return"critically_high"===r||"critically_high"===a?"critically_high":"critically_low"===r||"critically_low"===a?"critically_low":"high"===r||"high"===a?"high":"low"===r||"low"===a?"low":"normal"}}}]);