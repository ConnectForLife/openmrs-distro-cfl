"use strict";(self.webpackChunk_openmrs_esm_offline_tools_app=self.webpackChunk_openmrs_esm_offline_tools_app||[]).push([[567],{4065:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(361),o=n.n(a)()((function(e){return e[1]}));o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-offline-tools__shared-page-layout-styles__productiveHeading01___CXsOT{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-offline-tools__shared-page-layout-styles__productiveHeading02___ZcF5Z{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-offline-tools__shared-page-layout-styles__productiveHeading03___1pkiK,.-esm-offline-tools__shared-page-layout-styles__pageHeaderContainer___BgGBm .-esm-offline-tools__shared-page-layout-styles__pageHeader___nTpsF{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-offline-tools__shared-page-layout-styles__productiveHeading04___hbvhi{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-offline-tools__shared-page-layout-styles__bodyShort01___kGD3Y{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-offline-tools__shared-page-layout-styles__bodyLong01___UyYAR{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-offline-tools__shared-page-layout-styles__label01___MNQ2L{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px);color:#525252}.-esm-offline-tools__shared-page-layout-styles__pageHeaderContainer___BgGBm{display:flex;justify-content:space-between;align-items:center;padding:1rem;background-color:#ededed}.-esm-offline-tools__shared-page-layout-styles__pageHeaderContainer___BgGBm .-esm-offline-tools__shared-page-layout-styles__pageHeader___nTpsF{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}",""]),o.locals={productiveHeading01:"-esm-offline-tools__shared-page-layout-styles__productiveHeading01___CXsOT",productiveHeading02:"-esm-offline-tools__shared-page-layout-styles__productiveHeading02___ZcF5Z",productiveHeading03:"-esm-offline-tools__shared-page-layout-styles__productiveHeading03___1pkiK",pageHeaderContainer:"-esm-offline-tools__shared-page-layout-styles__pageHeaderContainer___BgGBm",pageHeader:"-esm-offline-tools__shared-page-layout-styles__pageHeader___nTpsF",productiveHeading04:"-esm-offline-tools__shared-page-layout-styles__productiveHeading04___hbvhi",bodyShort01:"-esm-offline-tools__shared-page-layout-styles__bodyShort01___kGD3Y",bodyLong01:"-esm-offline-tools__shared-page-layout-styles__bodyLong01___UyYAR",label01:"-esm-offline-tools__shared-page-layout-styles__label01___MNQ2L"};const i=o},215:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(361),o=n.n(a)()((function(e){return e[1]}));o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}:root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-offline-tools__last-updated-table-cell__productiveHeading01___RE4rK{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-offline-tools__last-updated-table-cell__productiveHeading02___qqO4Q{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-offline-tools__last-updated-table-cell__productiveHeading03___N56WM{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-offline-tools__last-updated-table-cell__productiveHeading04___NYu3O{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-offline-tools__last-updated-table-cell__bodyShort01___1Xkoo{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-offline-tools__last-updated-table-cell__bodyLong01___lBcBD{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-offline-tools__last-updated-table-cell__label01___j-tbY{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px);color:#525252}.-esm-offline-tools__last-updated-table-cell__errorIcon___X\\+q9m{color:#da1e28}.-esm-offline-tools__last-updated-table-cell__pendingIcon___KBj4y{color:#ff832b}.-esm-offline-tools__last-updated-table-cell__cellContainer___xDUA\\+{display:flex;align-items:center;gap:.25rem}",""]),o.locals={productiveHeading01:"-esm-offline-tools__last-updated-table-cell__productiveHeading01___RE4rK",productiveHeading02:"-esm-offline-tools__last-updated-table-cell__productiveHeading02___qqO4Q",productiveHeading03:"-esm-offline-tools__last-updated-table-cell__productiveHeading03___N56WM",productiveHeading04:"-esm-offline-tools__last-updated-table-cell__productiveHeading04___NYu3O",bodyShort01:"-esm-offline-tools__last-updated-table-cell__bodyShort01___1Xkoo",bodyLong01:"-esm-offline-tools__last-updated-table-cell__bodyLong01___lBcBD",label01:"-esm-offline-tools__last-updated-table-cell__label01___j-tbY",errorIcon:"-esm-offline-tools__last-updated-table-cell__errorIcon___X+q9m",pendingIcon:"-esm-offline-tools__last-updated-table-cell__pendingIcon___KBj4y",cellContainer:"-esm-offline-tools__last-updated-table-cell__cellContainer___xDUA+"};const i=o},7090:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(361),o=n.n(a)()((function(e){return e[1]}));o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}:root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-offline-tools__offline-patient-table__productiveHeading01___1SWQ0{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-offline-tools__offline-patient-table__productiveHeading02___K9Dzg{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-offline-tools__offline-patient-table__productiveHeading03___QIvSG{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-offline-tools__offline-patient-table__productiveHeading04___v0s2H{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-offline-tools__offline-patient-table__bodyShort01___mrgNn{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-offline-tools__offline-patient-table__bodyLong01___Wowak{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-offline-tools__offline-patient-table__label01___xbZtN{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px);color:#525252}.-esm-offline-tools__offline-patient-table__tableContainer___rqIiM{background-color:rgba(0,0,0,0)}.-esm-offline-tools__offline-patient-table__tableHeaderContainer___NTOoG{display:grid;grid-template-rows:auto auto;grid-template-columns:1fr 1fr auto auto}.-esm-offline-tools__offline-patient-table__tableHeaderContainer___NTOoG .-esm-offline-tools__offline-patient-table__tableHeader___xRLwl{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;padding:.75rem 0 .75rem .75rem;grid-row:1;grid-column:1/span 4}.-esm-offline-tools__offline-patient-table__tableHeaderContainer___NTOoG .-esm-offline-tools__offline-patient-table__tableSearch___pnm9P{grid-row:2;grid-column:2;align-self:end}.-esm-offline-tools__offline-patient-table__tableHeaderContainer___NTOoG .-esm-offline-tools__offline-patient-table__tablePrimaryAction___NgzzW{grid-row:2;grid-column:4;align-self:end}.-esm-offline-tools__offline-patient-table__tableHeaderContainer___NTOoG .-esm-offline-tools__offline-patient-table__tableSecondaryAction___oJ-yy{grid-row:2;grid-column:3;align-self:end}.omrs-breakpoint-gt-tablet .-esm-offline-tools__offline-patient-table__tableHeaderContainer___NTOoG{grid-template-columns:1fr 20% 250px auto auto}.omrs-breakpoint-gt-tablet .-esm-offline-tools__offline-patient-table__tableHeaderContainer___NTOoG .-esm-offline-tools__offline-patient-table__tableHeader___xRLwl{grid-column:1;padding:.75rem 0 .25rem .75rem}.omrs-breakpoint-gt-tablet .-esm-offline-tools__offline-patient-table__tableHeaderContainer___NTOoG .-esm-offline-tools__offline-patient-table__tableSearch___pnm9P{grid-row:1;grid-column:3}.omrs-breakpoint-gt-tablet .-esm-offline-tools__offline-patient-table__tableHeaderContainer___NTOoG .-esm-offline-tools__offline-patient-table__tablePrimaryAction___NgzzW{grid-row:1;grid-column:5}.omrs-breakpoint-gt-tablet .-esm-offline-tools__offline-patient-table__tableHeaderContainer___NTOoG .-esm-offline-tools__offline-patient-table__tableSecondaryAction___oJ-yy{grid-row:1;grid-column:4}",""]),o.locals={productiveHeading01:"-esm-offline-tools__offline-patient-table__productiveHeading01___1SWQ0",productiveHeading02:"-esm-offline-tools__offline-patient-table__productiveHeading02___K9Dzg",productiveHeading03:"-esm-offline-tools__offline-patient-table__productiveHeading03___QIvSG",productiveHeading04:"-esm-offline-tools__offline-patient-table__productiveHeading04___v0s2H",bodyShort01:"-esm-offline-tools__offline-patient-table__bodyShort01___mrgNn",bodyLong01:"-esm-offline-tools__offline-patient-table__bodyLong01___Wowak",label01:"-esm-offline-tools__offline-patient-table__label01___xbZtN",tableContainer:"-esm-offline-tools__offline-patient-table__tableContainer___rqIiM",tableHeaderContainer:"-esm-offline-tools__offline-patient-table__tableHeaderContainer___NTOoG",tableHeader:"-esm-offline-tools__offline-patient-table__tableHeader___xRLwl",tableSearch:"-esm-offline-tools__offline-patient-table__tableSearch___pnm9P",tablePrimaryAction:"-esm-offline-tools__offline-patient-table__tablePrimaryAction___NgzzW",tableSecondaryAction:"-esm-offline-tools__offline-patient-table__tableSecondaryAction___oJ-yy"};const i=o},5143:(e,t,n)=>{n.d(t,{Z:()=>i});var a=n(361),o=n.n(a)()((function(e){return e[1]}));o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-offline-tools__patient-name-table-cell__productiveHeading01___lnBiX{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-offline-tools__patient-name-table-cell__productiveHeading02___boYmb{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-offline-tools__patient-name-table-cell__productiveHeading03___\\+t9na{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-offline-tools__patient-name-table-cell__productiveHeading04___eaaYs{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-offline-tools__patient-name-table-cell__bodyShort01___-7CAB{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-offline-tools__patient-name-table-cell__bodyLong01___cXcvt{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-offline-tools__patient-name-table-cell__label01___QGgmJ{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px);color:#525252}.-esm-offline-tools__patient-name-table-cell__cellContainer___EHkf0{display:flex;align-items:center;column-gap:.5rem}",""]),o.locals={productiveHeading01:"-esm-offline-tools__patient-name-table-cell__productiveHeading01___lnBiX",productiveHeading02:"-esm-offline-tools__patient-name-table-cell__productiveHeading02___boYmb",productiveHeading03:"-esm-offline-tools__patient-name-table-cell__productiveHeading03___+t9na",productiveHeading04:"-esm-offline-tools__patient-name-table-cell__productiveHeading04___eaaYs",bodyShort01:"-esm-offline-tools__patient-name-table-cell__bodyShort01___-7CAB",bodyLong01:"-esm-offline-tools__patient-name-table-cell__bodyLong01___cXcvt",label01:"-esm-offline-tools__patient-name-table-cell__label01___QGgmJ",cellContainer:"-esm-offline-tools__patient-name-table-cell__cellContainer___EHkf0"};const i=o},6530:(e,t,n)=>{n.d(t,{Z:()=>y});var a=n(5776),o=n.n(a),i=n(487),r=n.n(i),l=n(631),s=n.n(l),c=n(2052),d=n.n(c),f=n(4010),_=n.n(f),u=n(9178),p=n.n(u),g=n(9329),m=n.n(g),h=n(4065),b={};b.styleTagTransform=m(),b.setAttributes=_(),b.insert=d().bind(null,"head"),b.domAPI=s(),b.insertStyleElement=p(),r()(h.Z,b);const v=h.Z&&h.Z.locals?h.Z.locals:void 0,y=function(e){var t=e.header,n=e.primaryActions,a=e.children;return o().createElement(o().Fragment,null,o().createElement("header",{className:v.pageHeaderContainer},o().createElement("h1",{className:v.pageHeader},t),n),a)}},524:(e,t,n)=>{n.d(t,{_$:()=>g,jH:()=>p,jJ:()=>h,mi:()=>m});var a=n(1602),o=n.n(a),i=n(4610),r=n(9373),l=n(5776),s=n(9136);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function d(e,t,n,a,o,i,r){try{var l=e[i](r),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,o)}function f(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return(0,s.ZP)("dynamicOfflineData/entries/".concat(e),(function(){return(0,i.getDynamicOfflineDataEntries)(e)}))}function u(e){return(0,s.ZP)("syncQueue/items/".concat(e),(function(){return(0,i.getSynchronizationItems)(e)}))}function p(){var e=_("patient"),t=u("patient-registration");return b((function(){return t.data.filter((function(t){return t.fhirPatient&&!e.data.find((function(e){return e.identifier===t.fhirPatient.id}))})).map((function(e){return e.fhirPatient}))}),[e,t])}function g(){var e,t,n,a,o=_("patient"),c=u("patient-registration"),d=(n=null!==(t=null===(e=o.data)||void 0===e?void 0:e.map((function(e){return e.identifier})))&&void 0!==t?t:[],a=(0,l.useMemo)((function(){return f(n).sort()}),[n]),(0,s.ZP)(["fhirPatients",a],(function(){return Promise.all(a.map((function(e){return(0,i.fetchCurrentPatient)(e).then((function(e){return e.data}))})))})));return b((function(){return o.data.map((function(e){var t=d.data.find((function(t){return t.id===e.identifier})),n=c.data.filter((function(t){return t.fhirPatient.id===e.identifier})).map((function(e){return e.fhirPatient}));return{patient:r.Z.apply(void 0,[t].concat(f(n))),entry:e}}))}),[o,c,d])}function m(){var e=_("patient"),t=p();return b((function(){return{downloadedCount:e.data.length,registeredCount:t.data.length}}),[e,t])}function h(e){return(0,s.ZP)("offlineTools/offlinePatient/".concat(e,"/lastSyncState"),(t=o().mark((function t(){var n,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.getDynamicOfflineDataEntries)("patient");case 2:return n=t.sent,a=n.find((function(t){return t.identifier===e})),t.abrupt("return",null==a?void 0:a.syncState);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,o){var i=t.apply(e,n);function r(e){d(i,a,o,r,l,"next",e)}function l(e){d(i,a,o,r,l,"throw",e)}r(void 0)}))}));var t}function b(e,t){return(0,l.useMemo)((function(){return{data:t.every((function(e){return!!e.data}))?e():null,error:t.find((function(e){return e.error})),mutate:function(){return Promise.all(t.map((function(e){return e.mutate()}))).then(e)},isValidating:t.some((function(e){return e.isValidating}))}}),[e].concat(f(t.flatMap((function(e){return[e.data,e.error,e.isValidating]})))))}},5750:(e,t,n)=>{n.d(t,{Z:()=>ne});var a=n(1602),o=n.n(a),i=n(5776),r=n.n(i),l=n(3727),s=n(1297),c=n(4610),d=n(2680),f=n(3130),_=n(8315),u=n(143),p=n(6332);const g=function(e){e=(0,f.Z)(e);var t=(0,u.Z)(e)?(0,p.Z)(e):void 0,n=t?t[0]:e.charAt(0),a=t?(0,_.Z)(t,1).join(""):e.slice(1);return n.toUpperCase()+a};var m=n(7414),h=n(1102),b=n(487),v=n.n(b),y=n(631),w=n.n(y),H=n(2052),S=n.n(H),z=n(4010),C=n.n(z),E=n(9178),T=n.n(E),P=n(9329),x=n.n(P),A=n(215),N={};N.styleTagTransform=x(),N.setAttributes=C(),N.insert=S().bind(null,"head"),N.domAPI=w(),N.insertStyleElement=T(),v()(A.Z,N);const Z=A.Z&&A.Z.locals?A.Z.locals:void 0;function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function O(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const I=function(e){var t=e.patientUuid,n=e.isSyncing,a=e.lastSyncState,o=(0,d.useTranslation)().t,i=function(){return n?r().createElement(r().Fragment,null,r().createElement(s.EK,{className:Z.pendingIcon}),o("offlinePatientsTableLastUpdatedDownloading","Downloading...")):a?function(e){var t=(0,c.getDynamicOfflineDataHandlers)().filter((function(e){return"patient"===e.type})).map((function(e){return e.id})),n=O(e.succeededHandlers).concat(O(e.erroredHandlers));return t.some((function(e){return!n.includes(e)}))}(a)?r().createElement(r().Fragment,null,r().createElement(m.Od,{className:Z.errorIcon}),o("offlinePatientsTableLastUpdatedOutdatedData","Outdated data")):a.erroredHandlers.length>0?r().createElement(r().Fragment,null,r().createElement(m.Od,{className:Z.errorIcon}),r().createElement(l.rUS,{onClick:function(){return(0,c.navigate)({to:"".concat(window.getOpenmrsSpaBase(),"offline-tools/patients/").concat(t,"/offline-data")})}},a.erroredHandlers.length," ",1===a.erroredHandlers.length?o("offlinePatientsTableLastUpdatedError","error"):o("offlinePatientsTableLastUpdatedErrors","errors"))):r().createElement(r().Fragment,null,r().createElement(h.Wz,null),a.syncedOn.toLocaleDateString()):r().createElement(r().Fragment,null,r().createElement(m.Od,{className:Z.errorIcon}),o("offlinePatientsTableLastUpdatedNotYetSynchronized","Not synchronized"))};return r().createElement("div",{className:Z.cellContainer},r().createElement(i,null))};var D=n(5143),L={};L.styleTagTransform=x(),L.setAttributes=C(),L.insert=S().bind(null,"head"),L.domAPI=w(),L.insertStyleElement=T(),v()(D.Z,L);const j=D.Z&&D.Z.locals?D.Z.locals:void 0,U=function(e){var t,n,a,o,i=e.patient,s=e.isNewlyRegistered,f=void 0!==s&&s,_=(0,d.useTranslation)().t,u="".concat([null===(t=i.name)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.given,null===(a=i.name)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.family].filter(Boolean).join(" "));return r().createElement("div",{className:j.cellContainer},r().createElement(l.rUS,{onClick:function(){return(0,c.navigate)({to:"".concat(window.getOpenmrsSpaBase(),"patient/").concat(i.id,"/chart")})}},u),f&&r().createElement(l.Vp9,{type:"magenta"},_("offlinePatientsTableNameNewlyRegistered","New")))};var B=n(524),G=n(7090),M={};M.styleTagTransform=x(),M.setAttributes=C(),M.insert=S().bind(null,"head"),M.domAPI=w(),M.insertStyleElement=T(),v()(G.Z,M);const R=G.Z&&G.Z.locals?G.Z.locals:void 0;function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Y(e,t,n,a,o,i,r){try{var l=e[i](r),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,o)}function Q(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function r(e){Y(i,a,o,r,l,"next",e)}function l(e){Y(i,a,o,r,l,"throw",e)}r(void 0)}))}}function W(){return W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},W.apply(this,arguments)}function X(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}var J=function(e){var t=e.showHeader;return r().createElement(l.xJi,{className:R.tableContainer},r().createElement("div",{className:R.tableHeaderContainer},t&&r().createElement(l.N2B,{heading:!0,width:"20%",className:R.tableHeader}),r().createElement(l.kD0,{className:R.tableSearch})),r().createElement(l.gqd,{showToolbar:!1,showHeader:!1}))};function K(e){var t=e.rowIds,n=e.headers,a=e.cellsById,o=e.inputValue,i=e.getCellId;return t.filter((function(e){return n.some((function(t){var n,r,l,s=t.key,c=i(e,s),d=a[c].value;return(null!==(l=null!==(r=null==d||null===(n=d.filterableValue)||void 0===n?void 0:n.toString())&&void 0!==r?r:null==d?void 0:d.toString())&&void 0!==l?l:"").replace(/\s/g,"").toLowerCase().includes(o.replace(/\s/g,"").toLowerCase())}))}))}function V(e){return $.apply(this,arguments)}function $(){return($=Q(o().mark((function e(t){var n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.getDynamicOfflineDataEntries)("patient");case 2:return n=e.sent,a=n.map((function(e){return e.identifier})),i=t.filter((function(e){return a.includes(e)})),e.next=7,Promise.all(i.map((function(e){return(0,c.syncDynamicOfflineData)("patient",e)})));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return te=Q(o().mark((function e(t){var n,a,i,r,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.getDynamicOfflineDataEntries)("patient");case 2:return n=e.sent,e.next=5,(0,c.getFullSynchronizationItems)("patient-registration");case 5:return a=e.sent,i=t.filter((function(e){return n.some((function(t){return t.identifier===e}))})),r=t.filter((function(e){return!i.includes(e)})),l=X(i.map((function(e){return(0,c.removeDynamicOfflineData)("patient",e)}))).concat(X(r.map(function(){var e=Q(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=a.find((function(e){return e.content.fhirPatient.id===t})))){e.next=4;break}return e.next=4,(0,c.deleteSynchronizationItem)(n.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))),e.next=11,Promise.all(l);case 11:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}const ne=function(e){var t,n,a,_,u=e.isInteractive,p=e.showHeader,m=(0,d.useTranslation)().t,h=(0,c.useLayoutType)(),b=(0,B._$)(),v=(0,B.jH)(),y=(0,c.isDesktop)(h)?"sm":void 0,w=(a=(0,i.useState)([]),_=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,i=[],r=!0,l=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);r=!0);}catch(e){l=!0,o=e}finally{try{r||null==n.return||n.return()}finally{if(l)throw o}}return i}}(a,_)||q(a,_)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),H=w[0],S=w[1],z=function(){var e=(0,d.useTranslation)().t;return(0,i.useMemo)((function(){return[{key:"name",header:e("offlinePatientsTableHeaderName","Name")},{key:"lastUpdated",header:e("offlinePatientsTableHeaderLastUpdated","Last updated")},{key:"gender",header:e("offlinePatientsTableHeaderGender","Gender")},{key:"age",header:e("offlinePatientsTableHeaderAge","Age")}]}),[e])}(),C=function(e){var t=(0,B._$)(),n=(0,B.jH)();return(0,i.useMemo)((function(){var a,o,i=[],l=function(t,n,a){return{id:t.id,name:{value:r().createElement(U,{key:t.id,patient:t,isNewlyRegistered:n}),filterableValue:JSON.stringify(t.name)},lastUpdated:n?"--":r().createElement(I,{key:t.id,patientUuid:t.id,isSyncing:e.includes(t.id),lastSyncState:a}),gender:(o=t.gender,g((0,f.Z)(o).toLowerCase())),age:t.birthDate?(0,c.age)(t.birthDate):""};var o},s=!0,d=!1,_=void 0;try{for(var u,p=(null!==(a=n.data)&&void 0!==a?a:[])[Symbol.iterator]();!(s=(u=p.next()).done);s=!0){var m=u.value;i.push(l(m,!0))}}catch(e){d=!0,_=e}finally{try{s||null==p.return||p.return()}finally{if(d)throw _}}var h=!0,b=!1,v=void 0;try{for(var y,w=(null!==(o=t.data)&&void 0!==o?o:[])[Symbol.iterator]();!(h=(y=w.next()).done);h=!0){var H=y.value,S=H.patient,z=H.entry;i.push(l(S,!1,z.syncState))}}catch(e){b=!0,v=e}finally{try{h||null==w.return||w.return()}finally{if(b)throw v}}return i}),[e,t.data,n.data])}(H),E=(t=Q(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e){return e.id})),S(n),e.next=4,V(n).finally((function(){return S([])}));case 4:b.mutate(),v.mutate();case 6:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),T=function(){var e=Q(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,c.showModal)("offline-tools-confirmation-modal",{title:m("offlinePatientsTableDeleteConfirmationModalTitle","Remove offline patients"),children:m("offlinePatientsTableDeleteConfirmationModalContent","Are you sure that you want to remove all selected patients from the offline list? Their charts will no longer be available in offline mode and any newly registered patient will be permanently deleted."),confirmText:m("offlinePatientsTableDeleteConfirmationModalConfirm","Remove patients"),cancelText:m("offlinePatientsTableDeleteConfirmationModalCancel","Cancel"),closeModal:function(){return n()},onConfirm:Q(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t.map((function(e){return e.id})));case 2:b.mutate(),v.mutate();case 4:case"end":return e.stop()}}),e)})))});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return b.isValidating||v.isValidating?r().createElement(J,{showHeader:p}):r().createElement(r().Fragment,null,r().createElement(l.wQF,{rows:C,headers:z,filterRows:K},(function(e){var t=e.rows,a=e.headers,o=e.getTableProps,i=e.getHeaderProps,c=e.getRowProps,d=e.getTableContainerProps,f=e.getSelectionProps,_=e.onInputChange,g=e.selectedRows;return r().createElement(l.xJi,W({className:R.tableContainer},d()),r().createElement("div",{className:R.tableHeaderContainer},p&&r().createElement("h4",{className:R.tableHeader},m("offlinePatientsTableTitle","Offline patients")),0===g.length&&r().createElement(l.mh4,null,r().createElement(l.olm,{className:R.tableSearch,labelText:m("offlinePatientsTableSearchLabel","Search this list"),placeholder:m("offlinePatientsTableSearchPlaceholder","Search this list"),size:y,onChange:_})),g.length>0&&r().createElement(r().Fragment,null,r().createElement(l.zxk,{className:R.tableSecondaryAction,kind:"ghost",size:y,renderIcon:function(e){return r().createElement(s.CQ,W({size:32},e))},onClick:function(){return E(g)}},1===g.length?m("offlinePatientsTableUpdatePatient","Update patient"):m("offlinePatientsTableUpdatePatients","Update patients")),r().createElement(l.zxk,{className:R.tablePrimaryAction,kind:"danger",size:y,onClick:function(){return T(g)}},m("offlinePatientsTableRemoveFromOfflineList","Remove from list")))),r().createElement(l.iA_,W({},o(),{useZebraStyles:!0}),r().createElement(l.ssF,null,r().createElement(l.SCH,null,u&&r().createElement(l.elY,W({},f())),a.map((function(e){return r().createElement(l.xDH,W({},i({header:e}),{isSortable:!0}),e.header)})))),r().createElement(l.RMI,null,t.map((function(e){return r().createElement(l.SCH,W({},c({row:e})),u&&r().createElement(l.wix,W({},f({row:e}))),e.cells.map((function(e){var t;return r().createElement(l.pj1,{key:e.id},null!==(n=null===(t=e.value)||void 0===t?void 0:t.value)&&void 0!==n?n:e.value)})))})))))})))}},6174:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(7851);var o=n(6575),i=n(963),r=n(4897);var l=a.Z?a.Z.prototype:void 0,s=l?l.toString:void 0;const c=function e(t){if("string"==typeof t)return t;if((0,o.Z)(t))return function(e,t){for(var n=-1,a=null==e?0:e.length,o=Array(a);++n<a;)o[n]=t(e[n],n,e);return o}(t,e)+"";if(function(e){return"symbol"==typeof e||(0,r.Z)(e)&&"[object Symbol]"==(0,i.Z)(e)}(t))return s?s.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},8315:(e,t,n)=>{n.d(t,{Z:()=>a});const a=function(e,t,n){var a=e.length;return n=void 0===n?a:n,!t&&n>=a?e:function(e,t,n){var a=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++a<o;)i[a]=e[a+t];return i}(e,t,n)}},143:(e,t,n)=>{n.d(t,{Z:()=>o});var a=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const o=function(e){return a.test(e)}},6332:(e,t,n)=>{n.d(t,{Z:()=>p});var a=n(143),o="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",r="[^\\ud800-\\udfff]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+o+"|"+i+")?",d="[\\ufe0e\\ufe0f]?",f=d+c+"(?:\\u200d(?:"+[r,l,s].join("|")+")"+d+c+")*",_="(?:"+[r+o+"?",o,l,s,"[\\ud800-\\udfff]"].join("|")+")",u=RegExp(i+"(?="+i+")|"+_+f,"g");const p=function(e){return(0,a.Z)(e)?function(e){return e.match(u)||[]}(e):function(e){return e.split("")}(e)}},3130:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(6174);const o=function(e){return null==e?"":(0,a.Z)(e)}}}]);