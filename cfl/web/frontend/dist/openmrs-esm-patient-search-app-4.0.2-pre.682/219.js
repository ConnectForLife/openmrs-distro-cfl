"use strict";(self.webpackChunk_openmrs_esm_patient_search_app=self.webpackChunk_openmrs_esm_patient_search_app||[]).push([[219],{3241:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(2609),r=a.n(n)()((function(e){return e[1]}));r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-search__compact-patient-search__productiveHeading01___YgWu-{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-patient-search__compact-patient-search__productiveHeading02___uog76{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-patient-search__compact-patient-search__productiveHeading03___oyCbf{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-patient-search__compact-patient-search__bodyLong01___5NEAS{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-patient-search__compact-patient-search__label01___yK1Yu{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-patient-search__compact-patient-search__bodyShort01___Jwlmy{font-size:var(--cds-body-short-01-font-size, 0.875rem);font-weight:var(--cds-body-short-01-font-weight, 400);line-height:var(--cds-body-short-01-line-height, 1.28572);letter-spacing:var(--cds-body-short-01-letter-spacing, 0.16px)}.-esm-patient-search__compact-patient-search__patientSearchBar___2szkd{width:50vw;position:relative}.-esm-patient-search__compact-patient-search__floatingSearchResultsContainer___dJlt6{position:absolute;overflow-y:auto;box-shadow:0 .5rem 1rem #e0e0e0;z-index:99;border:0 1px 1px 1px solid #e0e0e0;width:100%;background-color:#fff}",""]),r.locals={productiveHeading01:"-esm-patient-search__compact-patient-search__productiveHeading01___YgWu-",productiveHeading02:"-esm-patient-search__compact-patient-search__productiveHeading02___uog76",productiveHeading03:"-esm-patient-search__compact-patient-search__productiveHeading03___oyCbf",bodyLong01:"-esm-patient-search__compact-patient-search__bodyLong01___5NEAS",label01:"-esm-patient-search__compact-patient-search__label01___yK1Yu",bodyShort01:"-esm-patient-search__compact-patient-search__bodyShort01___Jwlmy",patientSearchBar:"-esm-patient-search__compact-patient-search__patientSearchBar___2szkd",floatingSearchResultsContainer:"-esm-patient-search__compact-patient-search__floatingSearchResultsContainer___dJlt6"};const c=r},2102:(e,t,a)=>{a.d(t,{Z:()=>c});var n=a(2609),r=a.n(n)()((function(e){return e[1]}));r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-search__patient-search-icon__patientSearchIconWrapper___XbSER{display:flex;justify-content:flex-end;align-items:center}.-esm-patient-search__patient-search-icon__searchIconButton___boGDs{background-color:#005d5d;background-color:var(--brand-01)}.-esm-patient-search__patient-search-icon__activeSearchIconButton___D2NlS{background-color:#004144;background-color:var(--brand-02)}",""]),r.locals={patientSearchIconWrapper:"-esm-patient-search__patient-search-icon__patientSearchIconWrapper___XbSER",searchIconButton:"-esm-patient-search__patient-search-icon__searchIconButton___boGDs",activeSearchIconButton:"-esm-patient-search__patient-search-icon__activeSearchIconButton___D2NlS"};const c=r},4219:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var n=a(5206),r=a.n(n),c=a(7228),o=a(4924),i=a(686),s=a(2074),l=a(3469),h=a(906),p=a(5148),_=a(3614),u=a(4557),d=a(6062),m=a.n(d),g=a(4036),f=a.n(g),b=a(6793),v=a.n(b),y=a(7892),S=a.n(y),w=a(1173),E=a.n(w),I=a(2464),C=a.n(I),k=a(3241),A={};A.styleTagTransform=C(),A.setAttributes=S(),A.insert=v().bind(null,"head"),A.domAPI=f(),A.insertStyleElement=E(),m()(k.Z,A);const P=k.Z&&k.Z.locals?k.Z.locals:void 0;var z=a(8652);function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}const x=function(e){var t,a,c=e.selectPatientAction,o=e.initialSearchTerm,i=e.isSearchPage,s=e.onPatientSelect,l=e.shouldNavigateToPatientSearchPage,p=(t=(0,n.useState)(o),a=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,c=[],o=!0,i=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(c.push(n.value),!t||c.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return c}}(t,a)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?B(e,t):void 0}}(t,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=p[0],m=p[1],g=(0,n.useMemo)((function(){return!!d.trim()}),[d]),f=(0,n.useCallback)((function(e){l&&e.trim()&&(i||window.localStorage.setItem("searchReturnUrl",window.location.pathname),(0,h.navigate)({to:"${openmrsSpaBase}/search?query=".concat(encodeURIComponent(e))}))}),[i,l]),b=(0,n.useCallback)((function(){m("")}),[m]),v=(0,n.useCallback)((function(){m(""),null==s||s()}),[s,m]),y=(0,z.Z)((function(e){return m(e)}),300);return r().createElement("div",{className:P.patientSearchBar},r().createElement(u.Z,{small:!0,initialSearchTerm:null!=o?o:"",onChange:y,onSubmit:f,onClear:b}),!i&&g&&r().createElement("div",{className:P.floatingSearchResultsContainer},r().createElement(_.Z,{query:d,selectPatientAction:c,hidePanel:v})))};var Z=a(2102),R={};R.styleTagTransform=C(),R.setAttributes=S(),R.insert=v().bind(null,"head"),R.domAPI=f(),R.insertStyleElement=E(),m()(Z.Z,R);const T=Z.Z&&Z.Z.locals?Z.Z.locals:void 0;function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,c=[],o=!0,i=!1;try{for(a=a.call(e);!(o=(n=a.next()).done)&&(c.push(n.value),!t||c.length!==t);o=!0);}catch(e){i=!0,r=e}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const j=function(){var e=(0,o.useTranslation)().t,t=(0,h.useLayoutType)(),a=(0,c.useParams)().page,_=(0,n.useMemo)((function(){return"search"===a}),[a]),u=H((0,c.useSearchParams)(),1)[0],d=_?u.get("query"):"",m=H((0,n.useState)(!1),2),g=m[0],f=m[1],b=H((0,n.useState)(!1),2),v=b[0],y=b[1],S=(0,n.useCallback)((function(){(0,h.isDesktop)(t)&&!_&&f(!1)}),[f,_,t]),w=(0,h.useOnClickOutside)(S,v),E=(0,n.useCallback)((function(){var e;g?(_&&((0,h.navigate)({to:null!==(e=window.localStorage.getItem("searchReturnUrl"))&&void 0!==e?e:"${openmrsSpaBase}/"}),window.localStorage.removeItem("searchReturnUrl")),f(!1)):f(!0)}),[_,f,g]),I=(0,n.useCallback)((function(){f(!1),y(!1)}),[f,y]);return(0,n.useEffect)((function(){f(_),_&&y(!1)}),[_]),(0,n.useEffect)((function(){y(!!g)}),[g]),r().createElement("div",{className:T.patientSearchIconWrapper,ref:w},g&&((0,h.isDesktop)(t)?r().createElement(x,{isSearchPage:_,initialSearchTerm:d,shouldNavigateToPatientSearchPage:!0,onPatientSelect:I}):r().createElement(p.Z,{onClose:E,query:d})),r().createElement("div",{className:"".concat(g&&T.closeButton)},r().createElement(i.JMr,{"aria-label":e("searchPatient","Search Patient"),"aria-labelledby":"Search Patient",className:"".concat(g?T.activeSearchIconButton:T.searchIconButton),name:"SearchPatientIcon",onClick:E},g?r().createElement(s.x8,{size:20}):r().createElement(l.ol,{size:20}))))},O=function(){return r().createElement(c.BrowserRouter,{basename:window.getOpenmrsSpaBase()},r().createElement(c.Routes,null,r().createElement(c.Route,{path:":page/*",element:r().createElement(j,null)})))}}}]);