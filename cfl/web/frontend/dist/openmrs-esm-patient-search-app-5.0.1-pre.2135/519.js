"use strict";(globalThis.webpackChunk_openmrs_esm_patient_search_app=globalThis.webpackChunk_openmrs_esm_patient_search_app||[]).push([[519],{9583:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(272),r=n.n(a),i=n(2609),o=n.n(i)()(r());o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}:root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-search__compact-patient-search__productiveHeading01___ex5h9{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-patient-search__compact-patient-search__productiveHeading02___s0923{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-patient-search__compact-patient-search__productiveHeading03___vDoKO{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-patient-search__compact-patient-search__bodyLong01___xKYsH{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-patient-search__compact-patient-search__label01___VxMvx{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-patient-search__compact-patient-search__bodyShort01___LQbus{font-size:var(--cds-body-short-01-font-size, 0.875rem);font-weight:var(--cds-body-short-01-font-weight, 400);line-height:var(--cds-body-short-01-line-height, 1.28572);letter-spacing:var(--cds-body-short-01-letter-spacing, 0.16px)}.-esm-patient-search__compact-patient-search__patientSearchBar___ZyiBz{width:50vw;position:relative}.-esm-patient-search__compact-patient-search__floatingSearchResultsContainer___xOzTc{position:absolute;overflow-y:auto;box-shadow:0 .5rem 1rem #e0e0e0;z-index:99;border:0 1px 1px 1px solid #e0e0e0;width:100%;background-color:#fff}.-esm-patient-search__compact-patient-search__searchArea___UL6Gp{width:inherit;display:flex;justify-content:center;align-items:center;border:1px solid #8d8d8d}.-esm-patient-search__compact-patient-search__patientSearchInput___HXB39{border:none}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/root.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./src/compact-patient-search-extension/compact-patient-search.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CAHF,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCpDF,0ECu0BI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CDn0BJ,0ECm0BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD/zBJ,0EC+zBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD3zBJ,iEC2zBI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CDvzBJ,8DCuzBI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CDnzBJ,kECmzBI,sDAAA,CAAA,qDAAA,CAAA,yDAAA,CAAA,8DAAA,CCr0BJ,uEACE,UAAA,CACA,iBAAA,CAGF,qFACE,iBAAA,CACA,eAAA,CACA,+BAAA,CACA,UAAA,CACA,kCAAA,CACA,UAAA,CACA,qBHhBM,CGmBR,iEACE,aAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,wBAAA,CAGF,yEACE,WAAA",sourceRoot:""}]),o.locals={productiveHeading01:"-esm-patient-search__compact-patient-search__productiveHeading01___ex5h9",productiveHeading02:"-esm-patient-search__compact-patient-search__productiveHeading02___s0923",productiveHeading03:"-esm-patient-search__compact-patient-search__productiveHeading03___vDoKO",bodyLong01:"-esm-patient-search__compact-patient-search__bodyLong01___xKYsH",label01:"-esm-patient-search__compact-patient-search__label01___VxMvx",bodyShort01:"-esm-patient-search__compact-patient-search__bodyShort01___LQbus",patientSearchBar:"-esm-patient-search__compact-patient-search__patientSearchBar___ZyiBz",floatingSearchResultsContainer:"-esm-patient-search__compact-patient-search__floatingSearchResultsContainer___xOzTc",searchArea:"-esm-patient-search__compact-patient-search__searchArea___UL6Gp",patientSearchInput:"-esm-patient-search__compact-patient-search__patientSearchInput___HXB39"};const c=o},2334:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var a=n(5206),r=n.n(a),i=n(553),o=n(895),c=n(4924),l=n(1354),s=n.n(l),u=n(1583),d=n.n(u),A=n(7378),p=n.n(A),h=n(5993),m=n.n(h),v=n(4154),_=n.n(v),f=n(8141),g=n.n(f),C=n(9583),b={};b.styleTagTransform=g(),b.setAttributes=m(),b.insert=p().bind(null,"head"),b.domAPI=d(),b.insertStyleElement=_(),s()(C.Z,b);const y=C.Z&&C.Z.locals?C.Z.locals:void 0;var E=n(634),w=n(2870),B=n(2224);function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},x.apply(this,arguments)}const D=function(e){var t,n,l,s=e.selectPatientAction,u=e.initialSearchTerm,d=void 0===u?"":u,A=e.buttonProps,p=(0,c.useTranslation)().t,h=(n=(0,a.useState)(d),l=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,i=[],o=!0,c=!1;try{for(n=n.call(e);!(o=(a=n.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){c=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(c)throw r}}return i}}(n,l)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(n,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=h[0],v=h[1],_=(0,a.useCallback)((function(e){return v(e)}),[v]),f=(0,a.useMemo)((function(){return!!(null==m?void 0:m.trim())}),[m]),g=(0,w.useConfig)(),C=(0,E.hk)(m,g.includeDead,f),b=C.data,D=(0,a.useCallback)((function(e){e.preventDefault()}),[]),S=(0,a.useCallback)((function(){v("")}),[v]),k=(0,a.useCallback)((function(){v("")}),[v]),H=(0,a.useCallback)((function(e,t){e.preventDefault(),s?s(b[t]):(0,w.navigate)({to:"".concat((0,w.interpolateString)(g.search.patientResultUrl,{patientUuid:b[t].uuid}))}),k()}),[g.search,s,b,k]),P=(0,a.useRef)(null),I=(0,a.useRef)(null),L=(0,a.useCallback)((function(){var e,t,n=null!==(t=null===(e=I.current.value)||void 0===e?void 0:e.length)&&void 0!==t?t:0;I.current.setSelectionRange(n,n),I.current.focus()}),[I]),F=(0,B.Z)(null!==(t=null==b?void 0:b.length)&&void 0!==t?t:0,H,L,-1);return(0,a.useEffect)((function(){var e,t,n,a;P.current&&F>-1?(null===(e=P.current.children)||void 0===e||null===(t=e[F])||void 0===t||t.focus(),null===(n=P.current.children)||void 0===n||null===(a=n[F])||void 0===a||a.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})):P.current&&I.current&&-1===F&&L()}),[F,P,L]),r().createElement("div",{className:y.patientSearchBar},r().createElement("form",{onSubmit:D,className:y.searchArea},r().createElement(o.olm,{autoFocus:!0,className:y.patientSearchInput,closeButtonLabelText:p("clearSearch","Clear"),labelText:"",onChange:function(e){return _(e.target.value)},onClear:S,placeholder:p("searchForPatient","Search for a patient by name or identifier number"),value:m,size:"lg",ref:I}),r().createElement(o.zxk,x({type:"submit",onClick:D},A),p("search","Search"))),f&&r().createElement("div",{className:y.floatingSearchResultsContainer},r().createElement(i.Z,x({query:m,selectPatientAction:H,ref:P},C))))}},634:(e,t,n)=>{n.d(t,{Ey:()=>h,cg:()=>A,hk:()=>d,jW:()=>p});var a=n(5206),r=n(4924),i=n(3255),o=n(6635),c=n(2870);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u="custom:(patientId,uuid,identifiers,display,patientIdentifier:(uuid,identifier),person:(gender,age,birthdate,birthdateEstimated,personName,addresses,display,dead,deathDate),attributes:(value,attributeType:(uuid,display)))";function d(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u,l=(0,a.useCallback)((function(n,a){var o;if(a&&!(null==a||null===(o=a.data)||void 0===o?void 0:o.links.some((function(e){return"next"===e.rel}))))return null;var c="/ws/rest/v1/patient?q=".concat(e,"&v=").concat(i,"&includeDead=").concat(t,"&limit=").concat(r,"&totalCount=true");return n&&(c+="&startIndex=".concat(n*r)),c}),[e,i,t,r]),d=(0,o.ZP)(n?l:null,c.openmrsFetch),A=d.data,p=d.isLoading,h=d.isValidating,m=d.setSize,v=d.error,_=d.size,f=(0,a.useMemo)((function(){var e,t,n,a,r;return{data:A?(e=[]).concat.apply(e,s(null==A?void 0:A.map((function(e){var t;return null==e||null===(t=e.data)||void 0===t?void 0:t.results})))):null,isLoading:p,fetchError:v,hasMore:!!(null==A?void 0:A.length)&&!!(null===(t=A[A.length-1].data)||void 0===t||null===(n=t.links)||void 0===n?void 0:n.some((function(e){return"next"===e.rel}))),loadingNewData:h,setPage:m,currentPage:_,totalResults:null==A||null===(a=A[0])||void 0===a||null===(r=a.data)||void 0===r?void 0:r.totalCount}}),[A,p,h,v,m,_]);return f}function A(){var e,t=(0,r.useTranslation)().t,n=(0,c.useSession)().user,o=null==n?void 0:n.uuid,l=(0,i.ZP)(o?"/ws/rest/v1/user/".concat(o):null,c.openmrsFetch),s=l.data,u=l.error,d=l.mutate;(0,a.useEffect)((function(){u&&(0,c.showNotification)({kind:"error",title:t("errorFetchingUserProperties","Error fetching user properties"),description:u.message})}),[u,t]);var A=(0,a.useMemo)((function(){var t,n,a;return{isLoadingPatients:!s&&!u,recentlyViewedPatients:null!==(e=null==s||null===(t=s.data)||void 0===t||null===(n=t.userProperties)||void 0===n||null===(a=n.patientsVisited)||void 0===a?void 0:a.split(","))&&void 0!==e?e:[],mutateUserProperties:d}}),[s,u,d]);return A}function p(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u,l=(0,r.useTranslation)().t,d=(0,o.ZP)(t?function(t){return t<e.length?"/ws/rest/v1/patient/".concat(e[t],"?v=").concat(i):null}:null,c.openmrsFetch,{initialSize:n<e.length?n:e.length}),A=d.data,p=d.isLoading,h=d.isValidating,m=d.setSize,v=d.error,_=d.size;(0,a.useEffect)((function(){v&&(0,c.showNotification)({kind:"error",title:l("fetchingPatientFailed","Fetching patient details failed"),description:v.message})}),[v,l]);var f=(0,a.useMemo)((function(){var e,t,n,a,r;return{data:A?(e=[]).concat.apply(e,s(null==A?void 0:A.map((function(e){return null==e?void 0:e.data})))):null,isLoading:p,fetchError:v,hasMore:!!(null==A?void 0:A.length)&&!!(null===(t=A[A.length-1].data)||void 0===t||null===(n=t.links)||void 0===n?void 0:n.some((function(e){return"next"===e.rel}))),loadingNewData:h,setPage:m,currentPage:_,totalResults:null==A||null===(a=A[0])||void 0===a||null===(r=a.data)||void 0===r?void 0:r.totalCount}}),[A,p,h,v,m,_]);return f}function h(e,t){var n,a,r,i=(null!==(r=null==t||null===(n=t.userProperties)||void 0===n||null===(a=n.patientsVisited)||void 0===a?void 0:a.split(","))&&void 0!==r?r:[]).filter((function(t){return t!==e})),o=[e].concat(s(i)).join(",");return(0,c.openmrsFetch)("/ws/rest/v1/user/".concat(null==t?void 0:t.uuid),{method:"POST",headers:{"content-type":"application/json"},body:{userProperties:{patientsVisited:o}}})}},9653:(e,t,n)=>{n.d(t,{Z:()=>r});var a=n(5206);const r=function(e){var t=e.width,n=void 0===t?"74":t,r=e.height,i=void 0===r?"72":r;return a.createElement("svg",{width:n,height:i,viewBox:"0 0 74 72"},a.createElement("title",null,"Empty data illustration"),a.createElement("g",{transform:"translate(1 1)",fill:"none","fill-rule":"evenodd"},a.createElement("path",{d:"M45.708 15.742h-19.4a1.666 1.666 0 0 0-1.668 1.661l-.222 41.947-5.084 1.588a.89.89 0 0 1-1.11-.588L4.39 15.223a.886.886 0 0 1 .59-1.106l7.334-2.237 21.262-6.482 7.334-2.237a.891.891 0 0 1 1.111.587l3.619 11.773.067.221z",fill:"#CEE6E5"}),a.createElement("path",{d:"M49.942 15.52 45.581 1.333A1.883 1.883 0 0 0 44.66.22a1.896 1.896 0 0 0-1.44-.137L32.908 3.226 11.65 9.71 1.336 12.854a1.883 1.883 0 0 0-1.254 2.351l14.906 48.492a1.892 1.892 0 0 0 2.36 1.25l7.069-2.156.222-.068v-.232l-.222.068-7.134 2.176a1.67 1.67 0 0 1-2.083-1.102L.296 15.14a1.653 1.653 0 0 1 .121-1.266c.208-.389.562-.68.985-.808L11.714 9.92l21.26-6.482L43.287.294a1.668 1.668 0 0 1 2.082 1.102L49.71 15.52l.069.221h.23l-.067-.221z",stroke:"#7BBCB9","stroke-width":"1.2"}),a.createElement("path",{d:"M13.639 14.153c-.44 0-.828-.286-.958-.705L11.25 8.789a.993.993 0 0 1 .664-1.244l19.56-5.965a1.002 1.002 0 0 1 1.25.661L34.155 6.9a.997.997 0 0 1-.664 1.245l-19.56 5.964a1 1 0 0 1-.292.044z",fill:"#7BBCB9"}),a.createElement("ellipse",{fill:"#C6C6C6",cx:"21.14",cy:"2.762",rx:"2.223",ry:"2.215"}),a.createElement("ellipse",{fill:"#FFF","fill-rule":"nonzero",cx:"21.14",cy:"2.762",rx:"1.408",ry:"1.402"}),a.createElement("path",{d:"M66.997 66.735H29.42c-.521 0-.944-.442-.944-.987V18.722c0-.545.423-.986.944-.987h37.577c.522 0 .945.442.945.987v47.026c0 .545-.423.987-.945.987z",fill:"#CEE6E5"}),a.createElement("path",{d:"M49.71 15.52H26.308a1.889 1.889 0 0 0-1.89 1.883v45.156l.222-.068V17.403a1.666 1.666 0 0 1 1.668-1.66h23.47l-.068-.222zm20.4 0H26.308a1.889 1.889 0 0 0-1.89 1.883v50.715A1.889 1.889 0 0 0 26.308 70H70.11A1.889 1.889 0 0 0 72 68.118V17.403a1.889 1.889 0 0 0-1.89-1.882zm1.668 52.598a1.666 1.666 0 0 1-1.668 1.66H26.308a1.666 1.666 0 0 1-1.668-1.66V17.403a1.666 1.666 0 0 1 1.668-1.66H70.11c.92 0 1.667.743 1.668 1.66v50.715z",stroke:"#7BBCB9","stroke-width":"1.2"}),a.createElement("path",{d:"M58.437 20.393H37.98a1 1 0 0 1-1-.997v-4.872a1 1 0 0 1 1-.997h20.456a1 1 0 0 1 1 .997v4.872a1 1 0 0 1-1 .997z",fill:"#7BBCB9"}),a.createElement("ellipse",{fill:"#C6C6C6",cx:"48.209",cy:"11.645",rx:"2.223",ry:"2.215"}),a.createElement("ellipse",{fill:"#FFF","fill-rule":"nonzero",cx:"48.209",cy:"11.645",rx:"1.354",ry:"1.349"})))}}}]);