(globalThis.webpackChunkreportsModule=globalThis.webpackChunkreportsModule||[]).push([[924],{6700:(e,t,r)=>{var n={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function s(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=o,e.exports=s,s.id=6700},1595:(e,t,r)=>{"use strict";r.d(t,{JC:()=>h,M3:()=>m,Sz:()=>b,TN:()=>w,Wg:()=>z,_8:()=>j,k5:()=>D,ob:()=>y,wv:()=>S,y_:()=>p});var n=r(1132),s=r(9734),o=r(381),a=r.n(o);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t,r,n,s,o,a){try{var u=e[o](a),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(n,s)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var o=e.apply(t,r);function a(e){i(o,n,s,a,u,"next",e)}function u(e){i(o,n,s,a,u,"throw",e)}a(void 0)}))}}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){var r,n,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function p(){return f.apply(this,arguments)}function f(){return(f=l((function(){return d(this,(function(e){switch(e.label){case 0:return[4,(0,n.openmrsFetch)("/ws/rest/v1/session")];case 1:return[2,e.sent().data]}}))}))).apply(this,arguments)}function h(){var e,t,r=(0,s.ZP)("/ws/rest/v1/location?tag=Login+Location",n.openmrsFetch).data;return{locations:r?null===(t=r)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.results:[]}}function j(e,t){var r,o,u,i="/ws/rest/v1/reportingrest/reportRequest?statusesGroup=".concat(e)+(t?"&sortBy=".concat(t):""),l=(0,s.ZP)(i,n.openmrsFetch),d=l.data,p=l.error,f=l.isValidating,h=l.mutate,j=null===(u=d)||void 0===u||null===(o=u.data)||void 0===o?void 0:o.results,m=j?(r=[]).concat.apply(r,c(j.map((function(e){return function(e){return{id:e.uuid,reportName:e.parameterizable.name,status:e.status,requestedBy:e.requestedBy.person.display,requestedByUserUuid:e.requestedBy.uuid,requestedOn:a()(e.requestDate).format("YYYY-MM-DD HH:mm"),outputFormat:e.renderingMode.label,parameters:R(e),evaluateCompleteDatetime:a()(e.evaluateCompleteDatetime).format("YYYY-MM-DD HH:mm"),schedule:e.schedule}}(e)})))):[];return{data:m,isError:p,isValidating:f,mutate:h}}function m(){var e,t,r=(0,s.ZP)("/ws/rest/v1/reportingrest/reportDefinition?v=full",n.openmrsFetch).data;return{reportDefinitions:r?null===(t=r)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.results:[]}}function y(e){return v.apply(this,arguments)}function v(){return(v=l((function(e){var t,r,s,o,a;return d(this,(function(u){switch(u.label){case 0:return t="/ws/rest/v1/reportingrest/designs?reportDefinitionUuid=".concat(e),e?[4,(0,n.openmrsFetch)(t)]:[3,2];case 1:return o=u.sent().data,[2,(a=null===(s=o)||void 0===s?void 0:s.results)?(r=[]).concat.apply(r,c(a.map((function(e){return function(e){return{name:e.name,uuid:e.uuid}}(e)})))):[]];case 2:return[2,[]]}}))}))).apply(this,arguments)}function b(e,t,r){return g.apply(this,arguments)}function g(){return(g=l((function(e,t,r){return d(this,(function(s){return[2,(0,n.openmrsFetch)("/ws/rest/v1/reportingrest/runReport",{body:{reportDefinitionUuid:e,renderModeUuid:t,reportParameters:r},method:"POST",headers:{"Content-Type":"application/json"}})]}))}))).apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return(k=l((function(e){var t;return d(this,(function(r){return t="/ws/rest/v1/reportingrest/cancelReport?reportRequestUuid=".concat(e),[2,(0,n.openmrsFetch)(t,{method:"DELETE"})]}))}))).apply(this,arguments)}function z(e){return E.apply(this,arguments)}function E(){return(E=l((function(e){var t;return d(this,(function(r){return t="/ws/rest/v1/reportingrest/preserveReport?reportRequestUuid=".concat(e),[2,(0,n.openmrsFetch)(t,{method:"POST"})]}))}))).apply(this,arguments)}function S(e){return M.apply(this,arguments)}function M(){return(M=l((function(e){var t;return d(this,(function(r){switch(r.label){case 0:return t="/ws/rest/v1/reportingrest/downloadReport?reportRequestUuid=".concat(e),[4,(0,n.openmrsFetch)(t)];case 1:return[2,r.sent().data]}}))}))).apply(this,arguments)}function D(e){return x.apply(this,arguments)}function x(){return(x=l((function(e){var t;return d(this,(function(r){switch(r.label){case 0:return t="/ws/rest/v1/reportingrest/downloadMultipleReports?reportRequestUuids=".concat(e),[4,(0,n.openmrsFetch)(t)];case 1:return[2,r.sent().data]}}))}))).apply(this,arguments)}function R(e){var t="",r=e.parameterizable.parameters;return r.length>0&&(r.forEach((function(r){var n=e.parameterMappings[r.name];if("java.util.Date"===r.type)n=a()(n).format("YYYY-MM-DD");else if("org.openmrs.Location"===r.type){var s;n=null===(s=n)||void 0===s?void 0:s.display}t=t+r.label+": "+n+", "})),","===(t=t.trim()).charAt(t.length-1)&&(t=t.slice(0,-1))),t}},2009:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var n=r(1672),s=r.n(n),o=r(604),a=r(3397),u=r(1595),i=r(1132),l=r(9734);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t,r,n,s,o,a){try{var u=e[o](a),i=u.value}catch(e){return void r(e)}u.done?t(i):Promise.resolve(i).then(n,s)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,s){var o=e.apply(t,r);function a(e){d(o,n,s,a,u,"next",e)}function u(e){d(o,n,s,a,u,"throw",e)}a(void 0)}))}}const f=function(e){var t,r,d=e.closeModal,f=e.reportRequestUuid,h=e.modalType,j=(0,a.useTranslation)().t,m=(t=(0,n.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,o=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){u=!0,s=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw s}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=m[0],v=m[1],b=(0,n.useCallback)(p((function(){return function(e,t){var r,n,s,o,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((s=(s=a.trys).length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}(this,(function(e){return v(!0),(0,u.TN)(f).then((function(){g(h),d(),(0,i.showToast)({critical:!0,kind:"success",title:w(h),description:k(h)})})).catch((function(e){(0,i.showToast)({critical:!0,kind:"error",title:w(h),description:z(h)})})),[2]}))})),[d]),g=function(e){var t="/ws/rest/v1/reportingrest/reportRequest?statusesGroup=";"delete"===e?(0,l.JG)(t+"ran"):"cancel"===e?((0,l.JG)(t+"ran"),(0,l.JG)(t+"processing")):"schedule"===e&&(0,l.JG)(t+"scheduled&sortBy=name")},w=function(e){return"delete"===e?j("deleteReport","Delete report"):"cancel"===e?j("cancelReport","Cancel report"):"schedule"===e?j("scheduleReport","Schedule report"):void 0},k=function(e){return"delete"===e?j("reportDeletedSuccessfully","Report deleted successfully"):"cancel"===e?j("reportCancelledSuccessfully","Report cancelled successfully"):"schedule"===e?j("reportScheduleDeletedSuccessfully","Report schedule deleted successfully"):void 0},z=function(e){return"delete"===e?j("reportDeletingErrorMsg","Error during report deleting"):"cancel"===e?j("reportCancelingErrorMsg","Error during report canceling"):"schedule"===e?j("reportScheduleDeletingErrorMsg","Error during report schedule deleting"):void 0};return s().createElement("div",null,s().createElement(o.xBx,{closeModal:d,title:w(h)}),s().createElement(o.fef,null,s().createElement("p",null,function(e){return"delete"===e?j("deleteReportModalText","Are you sure you want to delete this report?"):"cancel"===e?j("cancelReportModalText","Are you sure you want to cancel this report?"):"schedule"===e?j("deleteReportScheduleModalText","Are you sure you want to delete this schedule?"):void 0}(h))),s().createElement(o.mzw,null,s().createElement(o.zxk,{kind:"secondary",onClick:d},j("no","No")),s().createElement(o.zxk,{kind:"danger",onClick:b,disabled:y},y?s().createElement(o.lSo,{description:function(e){return"delete"===e||"schedule"===e?j("deleting","Deleting"):"cancel"===e?j("canceling","Canceling"):void 0}(h)+"..."}):s().createElement("span",null,j("yes","Yes")))))}}}]);