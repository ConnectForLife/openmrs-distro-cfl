"use strict";(self.webpackChunk_openmrs_esm_openconceptlab_app=self.webpackChunk_openmrs_esm_openconceptlab_app||[]).push([[251],{3749:(e,t,n)=>{n.r(t),n.d(t,{default:()=>xe});var r=n(6607),o=n(268),a=n.n(o),i=n(4924),c=n(9857),s=n(5047),l=n.n(s),u=n(906),p=n(9140);function d(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){d(a,r,o,i,c,"next",e)}function c(e){d(a,r,o,i,c,"throw",e)}i(void 0)}))}}function b(e,t){return f.apply(this,arguments)}function f(){return(f=m(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,p.Z)(t.uuid)?"/ws/rest/v1/openconceptlab/subscription":"/ws/rest/v1/openconceptlab/subscription/".concat(t.uuid),e.abrupt("return",(0,u.openmrsFetch)(r,{method:"POST",body:t,headers:{"Content-Type":"application/json"},signal:null==n?void 0:n.signal}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return g.apply(this,arguments)}function g(){return(g=m(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/ws/rest/v1/openconceptlab/subscription/".concat(t.uuid),e.abrupt("return",(0,u.openmrsFetch)(r,{method:"DELETE",signal:null==n?void 0:n.signal}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=n(6062),v=n.n(h),y=n(4036),E=n.n(y),w=n(6793),S=n.n(w),k=n(7892),N=n.n(k),x=n(1173),T=n.n(x),C=n(2464),O=n.n(C),P=n(7542),A={};A.styleTagTransform=O(),A.setAttributes=N(),A.insert=S().bind(null,"head"),A.domAPI=E(),A.insertStyleElement=T(),v()(P.Z,A);const D=P.Z&&P.Z.locals?P.Z.locals:void 0;var I=function(e){var t,n,r;e.endsWith("/")&&(e=e.substring(0,e.lastIndexOf("/")));try{n=new URL(e)}catch(e){return!1}return 5==(null!==(r=null===(t=n.pathname.match(/\//g))||void 0===t?void 0:t.length)&&void 0!==r?r:0)};function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){j(a,r,o,i,c,"next",e)}function c(e){j(a,r,o,i,c,"throw",e)}i(void 0)}))}}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){z(e,t,n[t])}))}return e}function L(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const R=function(){var e=(0,i.useTranslation)().t,t=(0,c.kY)().mutate,n=B((0,o.useState)(""),2),s=n[0],p=n[1],d=B((0,o.useState)(""),2),m=d[0],f=d[1],g=B((0,o.useState)(!1),2),h=g[0],v=g[1],y=B((0,o.useState)("FULL"),2),E=y[0],w=y[1],S=B((0,o.useState)(!1),2),k=S[0],N=S[1],x=function(){var e,t=(0,c.ZP)("/ws/rest/v1/openconceptlab/subscription?v=full",u.openmrsFetch),n=t.data,r=t.error,o=t.isValidating;return{data:null==n||null===(e=n.data)||void 0===e?void 0:e.results[0],isLoading:!n&&!r,isError:r,isValidating:o}}(),T=x.data,C=x.isLoading,O=x.isError;(0,o.useEffect)((function(){C||O||(p((null==T?void 0:T.url)||""),f((null==T?void 0:T.token)||""),v((null==T?void 0:T.subscribedToSnapshot)||!1),w((null==T?void 0:T.validationType)||"FULL"),N(!!T&&I(T.url)))}),[C,O,T]);var P,A=(0,o.useCallback)((function(e){p(e.target.value),I(e.target.value)?(N(!0),v(!1)):N(!1)}),[]),F=(0,o.useCallback)((function(e){f(e.target.value)}),[]),j=(0,o.useCallback)((function(e,t){var n=t.checked;t.id,w(n?"NONE":"FULL")}),[]),z=(0,o.useCallback)((function(e,t){var n=t.checked;t.id,v(n)}),[]),R=(0,o.useCallback)((P=Z(l().mark((function n(r){var o,a,i;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),r.stopPropagation(),!k||!h){n.next=5;break}return(0,u.showNotification)({kind:"error",description:e("snapshotDisabledError","You cannot subscribe to a SNAPSHOT if you've provided the collection version")}),n.abrupt("return");case 5:return o=new AbortController,a=L(H({},T),{url:s,token:m,validationType:E,subscribedToSnapshot:h}),t("/ws/rest/v1/openconceptlab/subscription?v=full",a,!1),n.next=10,b(a,o);case 10:return i=n.sent,t("/ws/rest/v1/openconceptlab/subscription?v=full"),i.ok?(0,u.showNotification)({kind:"success",description:e(201===i.status?"subscriptionCreated":"subscriptionUpdated",201===i.status?"Subscription created successfully":"Subscription updated successfully")}):(0,u.showNotification)({title:e("errorSavingSubscription","Error occured while saving the subscription"),kind:"error",critical:!0,description:JSON.stringify(i.data)}),n.abrupt("return",(function(){return o.abort()}));case 14:case"end":return n.stop()}}),n)}))),function(e){return P.apply(this,arguments)}),[s,m,E,h,k,T,e,t]),U=(0,o.useCallback)((function(){p((null==T?void 0:T.url)||""),f((null==T?void 0:T.token)||""),v((null==T?void 0:T.subscribedToSnapshot)||!1),w((null==T?void 0:T.validationType)||"FULL"),N(!!T&&I(T.url)),(0,u.showNotification)({kind:"info",description:e("cancelledChanges","Cancelled changes successfully")})}),[T,e]),M=(0,o.useCallback)(function(){var n=Z(l().mark((function n(r){var o,a;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),r.stopPropagation(),o=new AbortController,n.next=5,_(T,o);case 5:return a=n.sent,t("/ws/rest/v1/openconceptlab/subscription?v=full"),204===a.status?(p(""),f(""),v(!1),w("FULL"),N(!1),(0,u.showNotification)({kind:"success",description:e("subscriptionDeleted","Successfully unsubscribed")})):(0,u.showNotification)({title:e("errorDeletingSubscription","Error occured while deleting the subscription"),kind:"error",critical:!0,description:JSON.stringify(a.data)}),n.abrupt("return",(function(){return o.abort()}));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[T,e,t]);return C?a().createElement(r.rjZ,{className:D.grid},a().createElement(r.sgG,{sm:4,md:8,lg:10},a().createElement(r.l09,null,a().createElement(r.N2B,{className:D.productiveHeading03}),a().createElement(r.Kqy,{gap:5},a().createElement(r.znL,null),a().createElement(r.znL,null),a().createElement(r.cwH,{legendText:a().createElement(r.N2B,{width:"75px"}),className:D.formGroup},a().createElement(r.jJq,null),a().createElement(r.jJq,null))),a().createElement(r.Db,null),a().createElement(r.Db,null)),a().createElement(r.l09,{className:D.unsubscribeForm},a().createElement(r.N2B,{className:D.productiveHeading03}),a().createElement(r.N2B,{className:D.unsubscribeText}),a().createElement(r.Db,null)))):(O&&(0,u.showNotification)({kind:"error",description:e("subscriptionError","Error occured while fetching the subscription")}),a().createElement(r.rjZ,{className:D.grid},a().createElement(r.sgG,{sm:4,md:8,lg:10},a().createElement(r.l09,{onSubmit:R},a().createElement("h3",{className:D.productiveHeading03},e("setupSubscription","Setup Subscription")),a().createElement(r.Kqy,{gap:5},a().createElement(r.oil,{id:"subscriptionUrl",type:"url",labelText:e("subscriptionUrl","Subscription URL"),placeholder:"https://api.openconceptlab.org/orgs/organization-name/collections/dictionary-name",value:s,onChange:A,light:!0,required:!0}),a().createElement(r.oil,{id:"apiToken",type:"password",placeholder:"••••••••••••••••••••••••••••••••••••••••••••••••",labelText:e("apiToken","Token"),value:m,onChange:F,light:!0,required:!0}),a().createElement(r.cwH,{legendText:e("advancedOptions","Advanced Options"),className:D.formGroup},a().createElement(r.XZJ,{checked:h,onChange:z,labelText:e("subscribeToSnapshotText","Subscribe to SNAPSHOT versions (not recommended)"),id:"isSubscribedToSnapshot",disabled:k}),a().createElement(r.XZJ,{checked:"NONE"===E,onChange:j,labelText:e("disableValidationText","Disable validation (should be used with care for well curated collections or sources)"),id:"isValidationDisabled"}))),a().createElement(r.zxk,{kind:"secondary",onClick:U},e("cancelButton","Cancel changes")),a().createElement(r.zxk,{kind:"primary",type:"submit"},e("subscribeButton","Save changes"))),a().createElement(r.l09,{onSubmit:M,className:D.unsubscribeForm},a().createElement("h3",{className:D.productiveHeading03},e("unsubscribe","Unsubscribe")),a().createElement("p",{className:D.unsubscribeText},e("unsubscribeInfo","If you unsubscribe, no concepts will be deleted nor changed. All information about subscription will be deleted from your system.")),a().createElement(r.zxk,{kind:"danger",type:"submit",disabled:!T},e("unsubscribeButton","Unsubscribe"))))))};var U=n(302),M={};M.styleTagTransform=O(),M.setAttributes=N(),M.insert=S().bind(null,"head"),M.domAPI=E(),M.insertStyleElement=T(),v()(U.Z,M);const G=U.Z&&U.Z.locals?U.Z.locals:void 0;var K=n(3111),V={};V.styleTagTransform=O(),V.setAttributes=N(),V.insert=S().bind(null,"head"),V.domAPI=E(),V.insertStyleElement=T(),v()(K.Z,V);const J=K.Z&&K.Z.locals?K.Z.locals:void 0;function X(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function q(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){X(a,r,o,i,c,"next",e)}function c(e){X(a,r,o,i,c,"throw",e)}i(void 0)}))}}function Y(e){return W.apply(this,arguments)}function W(){return(W=q(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,u.openmrsFetch)("/ws/rest/v1/openconceptlab/import",{method:"POST",body:{},headers:{"Content-Type":"application/json"},signal:null==t?void 0:t.signal}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,t){return Q.apply(this,arguments)}function Q(){return(Q=q(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("file",t),e.abrupt("return",(0,u.openmrsFetch)("/ws/rest/v1/openconceptlab/import",{method:"POST",body:r,signal:null==n?void 0:n.signal}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function te(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function ne(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){te(a,r,o,i,c,"next",e)}function c(e){te(a,r,o,i,c,"throw",e)}i(void 0)}))}}function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const oe=function(){var e=(0,i.useTranslation)().t,t=re((0,o.useState)(!1),2),n=t[0],s=t[1],p=re((0,o.useState)(),2),d=p[0],m=p[1],b=re((0,o.useState)(!1),2),f=b[0],_=b[1],g=function(){var e,t=(0,c.ZP)("/ws/rest/v1/openconceptlab/subscription?v=full",u.openmrsFetch),n=t.data,r=t.error,o=t.isValidating;return{data:null==n||null===(e=n.data)||void 0===e?void 0:e.results[0],isLoading:!n&&!r,isError:r,isValidating:o}}(),h=g.data,v=g.isLoading,y=g.isError;(0,o.useEffect)((function(){v||y||s(!!h)}),[v,y,h]);var E,w=(0,o.useCallback)((function(t,n){var r=n.addedFiles[0];"application/zip"!==r.type?(0,u.showNotification)({kind:"error",description:e("fileFormatError","Only .zip files are allowed")}):m(r)}),[e]),S=(0,o.useCallback)((function(){m(null)}),[]),k=(0,o.useCallback)((E=ne(l().mark((function t(r){var o;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),r.stopPropagation(),n){t.next=5;break}return(0,u.showNotification)({kind:"error",description:e("noSubscriptionError","No saved subscription")}),t.abrupt("return");case 5:return o=new AbortController,t.next=8,Y(o);case 8:201===t.sent.status?(0,u.showNotification)({kind:"success",description:e("importSuccess","Import started successfully")}):(0,u.showNotification)({kind:"error",description:e("importFailed","Import failed")});case 10:case"end":return t.stop()}}),t)}))),function(e){return E.apply(this,arguments)}),[n,e]),N=(0,o.useCallback)(function(){var t=ne(l().mark((function t(n){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(_(!0),n.preventDefault(),n.stopPropagation(),d){t.next=7;break}return _(!1),(0,u.showNotification)({kind:"error",description:e("noFileSelected","No file selected")}),t.abrupt("return");case 7:return r=new AbortController,t.next=10,$(d,r);case 10:201===t.sent.status?(m(null),_(!1),(0,u.showNotification)({kind:"success",description:e("importSuccess","Import started successfully")})):(_(!1),(0,u.showNotification)({kind:"error",description:e("importFailed","Import failed")}));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[d,e]);return v?a().createElement(r.rjZ,{className:J.grid},a().createElement(r.sgG,{sm:4,md:8,lg:10},a().createElement(r.l09,null,a().createElement(r.N2B,{className:J.productiveHeading03,heading:!0}),a().createElement(r.N2B,{className:J.formText,paragraph:!0,lineCount:2}),a().createElement(r.Db,null)),a().createElement(r.l09,{className:J.form},a().createElement(r.N2B,{className:J.productiveHeading03,heading:!0}),a().createElement(r.N2B,{className:J.formText}),a().createElement(r.rhD,{style:{marginBottom:"1.5rem"}}),a().createElement(r.Db,null)))):(y&&(0,u.showNotification)({kind:"error",description:e("subscriptionError","Error occured while fetching the subscription")}),a().createElement(r.rjZ,{className:J.grid},a().createElement(r.sgG,{sm:4,md:8,lg:10},a().createElement(r.l09,{onSubmit:k},a().createElement("h3",{className:J.productiveHeading03},e("importConcepts","Import Concepts")),a().createElement("p",{className:J.formText},e("importInstructions","Avoid importing during data entry hours, because the operation may significantly slow down the system. You can either use the subscription or a zip file to import concepts.")),a().createElement(r.zxk,{kind:"primary",type:"submit",disabled:!n},e("importFromSubscription","Import from Subscription"))),a().createElement(r.l09,{className:J.form,onSubmit:N},a().createElement("h3",{className:J.productiveHeading03},e("importFromFileHeading","Import from file (Offline)")),a().createElement("p",{className:J.formText},e("importFromFileInfo","You can import data without setting up a subscription by using this option.")),d?a().createElement(r.Py3,{key:d.name,name:d.name,size:"default",status:"edit",iconDescription:e("fileAdded","File Added"),onDelete:S,style:{backgroundColor:"#e0e0e0"}}):a().createElement(r.awp,{accept:["application/zip"],multiple:!0,labelText:e("importFromFileDragInfo","Drag and drop file here or click to upload"),onAddFiles:w,style:{marginBottom:"1.5rem"}}),a().createElement(r.Kqy,{gap:6,orientation:"horizontal"},a().createElement(r.zxk,{kind:"primary",type:"submit"},e("importFromFile","Import from file")),f&&a().createElement(r.lSo,{description:e("uploading","Uploading...")}))))))};var ae=n(2258),ie={};ie.styleTagTransform=O(),ie.setAttributes=N(),ie.insert=S().bind(null,"head"),ie.domAPI=E(),ie.insertStyleElement=T(),v()(ae.Z,ie);const ce=ae.Z&&ae.Z.locals?ae.Z.locals:void 0;var se=n(385),le={};le.styleTagTransform=O(),le.setAttributes=N(),le.insert=S().bind(null,"head"),le.domAPI=E(),le.insertStyleElement=T(),v()(se.Z,le);const ue=se.Z&&se.Z.locals?se.Z.locals:void 0;function pe(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){pe(a,r,o,i,c,"next",e)}function c(e){pe(a,r,o,i,c,"throw",e)}i(void 0)}))}}function me(e,t){return be.apply(this,arguments)}function be(){return(be=de(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/ws/rest/v1/openconceptlab/import/".concat(t,"/item?state=ERROR&v=full"),e.abrupt("return",(0,u.openmrsFetch)(r,{method:"GET",signal:null==n?void 0:n.signal}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe=n(8850),_e={};_e.styleTagTransform=O(),_e.setAttributes=N(),_e.insert=S().bind(null,"head"),_e.domAPI=E(),_e.insertStyleElement=T(),v()(fe.Z,_e);const ge=fe.Z&&fe.Z.locals?fe.Z.locals:void 0;function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ve(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Ee=function(e){var t,n,c=e.importUuid,s=(0,i.useTranslation)().t,p=ye((0,o.useState)(),2),d=p[0],m=p[1],b=ye((0,o.useState)(5),2),f=b[0],_=b[1],g=ye((0,o.useState)([]),2),h=g[0],v=g[1],y=(0,u.usePagination)(h,f),E=y.results,w=y.currentPage,S=y.goTo,k=(0,o.useCallback)((t=l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),n=new AbortController,e.next=4,me(t,n);case 4:return(r=e.sent).ok?v(r.data.results):(0,u.showNotification)({title:s("importItemsFetchError","Error occured while fetching the import items"),kind:"error",critical:!0,description:JSON.stringify(r.data)}),m(!1),e.abrupt("return",(function(){return n.abort()}));case 8:case"end":return e.stop()}}),e)})),n=function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(e){ve(a,r,o,i,c,"next",e)}function c(e){ve(a,r,o,i,c,"throw",e)}i(void 0)}))},function(e){return n.apply(this,arguments)}),[s]);if((0,o.useEffect)((function(){k(c)}),[k,c]),d)return a().createElement("div",null,a().createElement(r.gqd,{showHeader:!1,showToolbar:!1,columnCount:2}),a().createElement(r.F3O,null));var N=[{header:s("conceptOrMapping","Concept/Mapping"),key:"uuid"},{header:s("message","Message"),key:"errorMessage"}];return!d&&a().createElement("div",null,a().createElement(r.iA_,{size:"sm",className:ge.tableBordered},a().createElement(r.ssF,null,a().createElement(r.SCH,{className:ge.tableHeaderRow},N.map((function(e,t){return a().createElement(r.xDH,{key:t,isSortable:!0},e.header)})))),a().createElement(r.RMI,null,null==E?void 0:E.map((function(e){return a().createElement(o.Fragment,{key:e.uuid},a().createElement(r.SCH,{className:ge.tableDataRow},a().createElement(r.pj1,null,a().createElement(r.rUS,{href:e.versionUrl},e.type," ",e.uuid)),a().createElement(r.pj1,null,e.errorMessage)))})))),a().createElement(r.tlE,{className:ge.pagination,size:"sm",page:w,pageSize:f,pageSizes:[5,10,20,50,100],totalItems:null==h?void 0:h.length,onChange:function(e){var t=e.page,n=e.pageSize;S(t),_(n)}}))},we=function(e){var t=e.selectedImportObject,n=(0,i.useTranslation)().t;return a().createElement("div",null,a().createElement("span",{className:ue.heading01},n("startedOn","Started on")," "),a().createElement("span",{className:"body"},(0,u.formatDatetime)(new Date(t.localDateStarted))),a().createElement("br",null),a().createElement("span",{className:ue.heading01},n("completedOn","Completed on")," "),a().createElement("span",{className:"body"},(0,u.formatDatetime)(new Date(t.localDateStopped))),a().createElement("br",null),a().createElement("span",{className:ue.heading01},n("duration","Duration")," "),a().createElement("span",{className:"body"},t.importTime),a().createElement("br",null),a().createElement("br",null),a().createElement("span",{className:ue.heading01},n("result","Result:")," "),a().createElement("br",null),a().createElement("div",{className:"body ".concat(ue.indentedContent)},a().createElement("span",null,t.upToDateItemsCount," ",n("conceptsUpToDate","concepts up to date")),a().createElement("br",null),a().createElement("span",null,t.addedItemsCount," ",n("conceptsAdded","concepts added")),a().createElement("br",null),a().createElement("span",null,t.updatedItemsCount," ",n("conceptsUpdated","concepts updated")),a().createElement("br",null),a().createElement("span",null,t.retiredItemsCount," ",n("conceptsRetired","concepts retired")),a().createElement("br",null),a().createElement("span",null,t.errorItemsCount," ",n("errorsFound","errors found")),a().createElement("br",null),a().createElement("span",null,t.ignoredErrorsCount," ",n("errorsIgnored","errors ignored")),a().createElement("br",null)),a().createElement("br",null),0!=t.errorItemsCount&&a().createElement(Ee,{importUuid:t.uuid}))};function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ke(){return ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(this,arguments)}const Ne=function(){var e,t,n=(0,i.useTranslation)().t,s=(e=(0,o.useState)(10),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Se(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],p=s[1],d=function(){var e,t=(0,c.ZP)("/ws/rest/v1/openconceptlab/import?v=full",u.openmrsFetch),n=t.data,r=t.error,o=t.isValidating;return{data:null==n||null===(e=n.data)||void 0===e?void 0:e.results,isLoading:!n&&!r,isError:r,isValidating:o}}(),m=d.data,b=d.isLoading,f=d.isError,_=(0,u.usePagination)(m,l),g=_.results,h=_.currentPage,v=_.goTo;if(b)return a().createElement(r.rjZ,{className:ce.grid},a().createElement(r.sgG,{sm:4,md:8,lg:10},a().createElement(r.N2B,{className:ce.productiveHeading03}),a().createElement(r.gqd,{showHeader:!1,showToolbar:!1,rowCount:10,columnCount:3}),a().createElement(r.F3O,null)));f&&(0,u.showNotification)({kind:"error",description:n("previousImportsFetchError","Error occured while fetching the imports")});var y=[{header:n("dateAndTime","Date and Time"),key:"localDateStarted"},{header:n("duration","Duration"),key:"importTime"},{header:n("status","Status"),key:"status"}],E=null==g?void 0:g.map((function(e){return{id:e.uuid,localDateStarted:(0,u.formatDatetime)(new Date(e.localDateStarted)),importTime:e.importTime,status:e.status}}));return!b&&!f&&a().createElement(r.rjZ,{className:ce.grid},a().createElement(r.sgG,{sm:4,md:8,lg:10},a().createElement("h3",{className:ce.productiveHeading03},n("previousImports","Previous Imports")),a().createElement(r.wQF,{rows:E,headers:y,size:"sm"},(function(e){var t=e.rows,n=e.headers,i=e.getHeaderProps,c=e.getRowProps,s=e.getTableProps;return a().createElement(r.iA_,ke({},s(),{className:ce.tableBordered}),a().createElement(r.ssF,null,a().createElement(r.SCH,null,a().createElement(r.MOD,null),n.map((function(e,t){return a().createElement(r.xDH,ke({key:t},i({header:e})),e.header)})))),a().createElement(r.RMI,null,t.map((function(e){return a().createElement(o.Fragment,{key:e.id},a().createElement(r.RcE,ke({},c({row:e}),{className:ce.tableRow}),e.cells.map((function(e){return a().createElement(r.pj1,{key:e.id},e.value)}))),e.isExpanded&&a().createElement(r.WdL,{colSpan:n.length+1,className:ce.tableExpandedRow},a().createElement(we,{selectedImportObject:m.find((function(t){return t.uuid===e.id}))})))}))))})),a().createElement(r.tlE,{className:ce.pagination,size:"sm",page:h,pageSize:l,pageSizes:[10,20,50,100],totalItems:m.length,onChange:function(e){var t=e.page,n=e.pageSize;v(t),p(n)}})))},xe=function(){var e=(0,i.useTranslation)().t;return a().createElement(c.J$,null,a().createElement("main",{className:"omrs-main-content ".concat(G.main)},a().createElement("h3",{className:G.moduleHeader},e("moduleTitle","OCL Subscription Module")),a().createElement(r.mQc,null,a().createElement(r.tdY,{className:G.tabList,contained:!0},a().createElement(r.OK9,null,e("subscription","Subscription")," "),a().createElement(r.OK9,null,e("import","Import")," "),a().createElement(r.OK9,null,e("previousImports","Previous Imports")," ")),a().createElement(r.nPR,null,a().createElement(r.x45,{className:G.tabPanel},a().createElement(R,null)),a().createElement(r.x45,{className:G.tabPanel},a().createElement(oe,null)),a().createElement(r.x45,{className:G.tabPanel},a().createElement(Ne,null))))))}},3111:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(2609),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-openconceptlab__import-component__grid___5wW0H{margin-left:0;margin-right:0;padding-left:0;padding-right:0}.-esm-openconceptlab__import-component__productiveHeading03___m6cC7{font-size:var(--cds-productive-heading-03-font-size, 1.25rem);font-weight:var(--cds-productive-heading-03-font-weight, 400);line-height:var(--cds-productive-heading-03-line-height, 1.4);letter-spacing:var(--cds-productive-heading-03-letter-spacing, 0);margin-bottom:.5rem}.-esm-openconceptlab__import-component__form___BAtOz{margin-top:2rem}.-esm-openconceptlab__import-component__formText___-LFNS{padding-bottom:1rem}.-esm-openconceptlab__import-component__fileUploaderDropContainer___u9wb\\+{margin-bottom:1.5rem}",""]),o.locals={grid:"-esm-openconceptlab__import-component__grid___5wW0H",productiveHeading03:"-esm-openconceptlab__import-component__productiveHeading03___m6cC7",form:"-esm-openconceptlab__import-component__form___BAtOz",formText:"-esm-openconceptlab__import-component__formText___-LFNS",fileUploaderDropContainer:"-esm-openconceptlab__import-component__fileUploaderDropContainer___u9wb+"};const a=o},8850:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(2609),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-openconceptlab__import-items-component__pagination___UFodW{font-size:var(--cds-body-short-01-font-size, 0.875rem);font-weight:var(--cds-body-short-01-font-weight, 400);line-height:var(--cds-body-short-01-line-height, 1.28572);letter-spacing:var(--cds-body-short-01-letter-spacing, 0.16px);background-color:#fff;color:#525252;border:1px solid #e0e0e0;display:flex}.-esm-openconceptlab__import-items-component__tableBordered___agwp-{border:1px solid #e0e0e0}.-esm-openconceptlab__import-items-component__tableDataRow___BdXBZ>td{padding-left:1rem !important;background-color:#fff !important}.-esm-openconceptlab__import-items-component__tableHeaderRow___rp03z>th{background-color:#e0e0e0 !important}",""]),o.locals={pagination:"-esm-openconceptlab__import-items-component__pagination___UFodW",tableBordered:"-esm-openconceptlab__import-items-component__tableBordered___agwp-",tableDataRow:"-esm-openconceptlab__import-items-component__tableDataRow___BdXBZ",tableHeaderRow:"-esm-openconceptlab__import-items-component__tableHeaderRow___rp03z"};const a=o},385:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(2609),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-openconceptlab__import-overview-component__heading01___wV6-M{font-size:var(--cds-heading-01-font-size, 0.875rem);font-weight:var(--cds-heading-01-font-weight, 600);line-height:var(--cds-heading-01-line-height, 1.42857);letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px)}.-esm-openconceptlab__import-overview-component__indentedContent___kMG5X{margin-left:2rem}",""]),o.locals={heading01:"-esm-openconceptlab__import-overview-component__heading01___wV6-M",indentedContent:"-esm-openconceptlab__import-overview-component__indentedContent___kMG5X"};const a=o},2258:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(2609),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-openconceptlab__previous-imports-component__grid___VG\\+Rw{margin-left:0;margin-right:0;padding-left:0;padding-right:0}.-esm-openconceptlab__previous-imports-component__productiveHeading03___-O6sL{font-size:var(--cds-productive-heading-03-font-size, 1.25rem);font-weight:var(--cds-productive-heading-03-font-weight, 400);line-height:var(--cds-productive-heading-03-line-height, 1.4);letter-spacing:var(--cds-productive-heading-03-letter-spacing, 0);margin-bottom:.5rem}.-esm-openconceptlab__previous-imports-component__pagination___JXNSt{font-size:var(--cds-body-short-01-font-size, 0.875rem);font-weight:var(--cds-body-short-01-font-weight, 400);line-height:var(--cds-body-short-01-line-height, 1.28572);letter-spacing:var(--cds-body-short-01-letter-spacing, 0.16px);background-color:#fff;color:#525252;border:1px solid #e0e0e0;display:flex}.-esm-openconceptlab__previous-imports-component__tableBordered___440s3{border:1px solid #e0e0e0}.-esm-openconceptlab__previous-imports-component__tableRow___tM2aj>td{background-color:#fff;border-bottom:1px solid #e0e0e0 !important}.-esm-openconceptlab__previous-imports-component__tableExpandedRow___fQwKD>td{padding-left:3rem !important;padding-right:3rem;padding-top:1rem;padding-bottom:1rem}",""]),o.locals={grid:"-esm-openconceptlab__previous-imports-component__grid___VG+Rw",productiveHeading03:"-esm-openconceptlab__previous-imports-component__productiveHeading03___-O6sL",pagination:"-esm-openconceptlab__previous-imports-component__pagination___JXNSt",tableBordered:"-esm-openconceptlab__previous-imports-component__tableBordered___440s3",tableRow:"-esm-openconceptlab__previous-imports-component__tableRow___tM2aj",tableExpandedRow:"-esm-openconceptlab__previous-imports-component__tableExpandedRow___fQwKD"};const a=o},302:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(2609),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-openconceptlab__root-component__main___G0\\+lN{background-color:#fff}.-esm-openconceptlab__root-component__moduleHeader___yB-PY{font-size:var(--cds-productive-heading-03-font-size, 1.25rem);font-weight:var(--cds-productive-heading-03-font-weight, 400);line-height:var(--cds-productive-heading-03-line-height, 1.4);letter-spacing:var(--cds-productive-heading-03-letter-spacing, 0);padding-left:1rem;padding-top:1rem;padding-bottom:1rem}.-esm-openconceptlab__root-component__tabList___aXyg4{padding:0 1rem}.-esm-openconceptlab__root-component__tabPanel___2e0wL{height:100%;background-color:#f4f4f4}",""]),o.locals={main:"-esm-openconceptlab__root-component__main___G0+lN",moduleHeader:"-esm-openconceptlab__root-component__moduleHeader___yB-PY",tabList:"-esm-openconceptlab__root-component__tabList___aXyg4",tabPanel:"-esm-openconceptlab__root-component__tabPanel___2e0wL"};const a=o},7542:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(2609),o=n.n(r)()((function(e){return e[1]}));o.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-openconceptlab__subscription-component__grid___Kwugy{margin-left:0;margin-right:0;padding-left:0;padding-right:0}.-esm-openconceptlab__subscription-component__productiveHeading03___xgZur{font-size:var(--cds-productive-heading-03-font-size, 1.25rem);font-weight:var(--cds-productive-heading-03-font-weight, 400);line-height:var(--cds-productive-heading-03-line-height, 1.4);letter-spacing:var(--cds-productive-heading-03-letter-spacing, 0);margin-bottom:.5rem}.-esm-openconceptlab__subscription-component__formGroup___GmK5h{margin-bottom:1rem}.-esm-openconceptlab__subscription-component__unsubscribeText___B9jCa{padding-bottom:1rem}.-esm-openconceptlab__subscription-component__unsubscribeForm___dMi0v{margin-top:1rem}",""]),o.locals={grid:"-esm-openconceptlab__subscription-component__grid___Kwugy",productiveHeading03:"-esm-openconceptlab__subscription-component__productiveHeading03___xgZur",formGroup:"-esm-openconceptlab__subscription-component__formGroup___GmK5h",unsubscribeText:"-esm-openconceptlab__subscription-component__unsubscribeText___B9jCa",unsubscribeForm:"-esm-openconceptlab__subscription-component__unsubscribeForm___dMi0v"};const a=o}}]);