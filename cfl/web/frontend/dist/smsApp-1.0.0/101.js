/*! For license information please see 101.js.LICENSE.txt */
"use strict";(globalThis.webpackChunksmsApp=globalThis.webpackChunksmsApp||[]).push([[101,123],{5792:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(2001),o=r.n(n),i=r(935),a=r.n(i)()(o());a.push([e.id,".smsApp__provider-config-form__heading___aPNah{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);margin-bottom:.5rem}.smsApp__provider-config-form__columnLabel___jPhZQ{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252}.smsApp__provider-config-form__radioButtonGroup___J12m5 .cds--radio-button-group--vertical{gap:1rem}.smsApp__provider-config-form__dynamicRow___UO8UU{padding-block:1rem}.smsApp__provider-config-form__checkBox___Hu7BW .cds--checkbox-label-text{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252}.smsApp__provider-config-form__checkBox___Hu7BW .cds--checkbox-label{padding-top:0}.smsApp__provider-config-form__button___Ljb_s{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.smsApp__provider-config-form__spinner___PZ6Zp{min-height:1rem}.smsApp__provider-config-form__tablet___tl690{padding:1.5rem 1rem;background-color:#fff}.smsApp__provider-config-form__desktop___ZgWvd{padding:0}.smsApp__provider-config-form__formContainer___a0txL{margin:2.5rem 1rem}.smsApp__provider-config-form__form___d267w{display:flex;flex-direction:column;justify-content:space-between;height:var(--desktop-workspace-window-height)}.smsApp__provider-config-form__grid___iEuLU{margin:0;padding:0}.smsApp__provider-config-form__row___XySFs{margin:.5rem 0 2.5rem}.smsApp__provider-config-form__errorMessage___FkE6Y{font-size:var(--cds-label-02-font-size, 0.875rem);font-weight:var(--cds-label-02-font-weight, 400);line-height:var(--cds-label-02-line-height, 1.28572);letter-spacing:var(--cds-label-02-letter-spacing, 0.16px);color:#da1e28}.omrs-breakpoint-lt-desktop .smsApp__provider-config-form__form___d267w{height:var(--tablet-workspace-window-height)}.omrs-breakpoint-lt-desktop .smsApp__provider-config-form__row___XySFs{display:flex;gap:4rem}.omrs-breakpoint-lt-desktop .smsApp__provider-config-form__row___XySFs .cds--col-sm-1{flex-basis:30%;min-width:8rem;text-align:left}.omrs-breakpoint-lt-desktop .smsApp__provider-config-form__row___XySFs .cds--col-sm-3{flex-basis:70%}.omrs-breakpoint-lt-desktop .smsApp__provider-config-form__skeleton___Wn3Al{height:2.5rem}.smsApp__provider-config-form__errorNotification___FPAF9{margin-top:.25rem}.omrs-breakpoint-gt-tablet .smsApp__provider-config-form__row___XySFs{display:flex;flex-direction:column;gap:1rem}","",{version:3,sources:["webpack://./src/providers/add-config-form/provider-config-form.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAIA,+CC81BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD51BF,mBAAA,CAGF,mDCy1BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CDv1BF,aEqCQ,CFjCR,2FACE,QAAA,CAKJ,kDACE,kBAAA,CAIA,0ECw0BE,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CDt0BA,aEoBM,CFlBR,qEACE,aAAA,CAIJ,8CACE,WAAA,CACA,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAGF,+CACE,eAAA,CAGF,8CACE,mBAAA,CACA,qBAAA,CAGF,+CACE,SAAA,CAGF,qDACE,kBAAA,CAGF,4CACE,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,6CAAA,CAGF,4CACE,QAAA,CACA,SAAA,CAGF,2CACE,qBAAA,CAGF,oDCsxBI,iDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CDpxBF,aEmBO,CFfP,wEACE,4CAAA,CAGF,uEACE,YAAA,CACA,QAAA,CAEA,sFACE,cAAA,CACA,cAAA,CACA,eAAA,CAGF,sFACE,cAAA,CAIJ,4EACE,aAAA,CAIJ,yDACE,iBAAA,CAIA,sEACE,YAAA,CACA,qBAAA,CACA,QAAA",sourceRoot:""}]),a.locals={heading:"smsApp__provider-config-form__heading___aPNah",columnLabel:"smsApp__provider-config-form__columnLabel___jPhZQ",radioButtonGroup:"smsApp__provider-config-form__radioButtonGroup___J12m5",dynamicRow:"smsApp__provider-config-form__dynamicRow___UO8UU",checkBox:"smsApp__provider-config-form__checkBox___Hu7BW",button:"smsApp__provider-config-form__button___Ljb_s",spinner:"smsApp__provider-config-form__spinner___PZ6Zp",tablet:"smsApp__provider-config-form__tablet___tl690",desktop:"smsApp__provider-config-form__desktop___ZgWvd",formContainer:"smsApp__provider-config-form__formContainer___a0txL",form:"smsApp__provider-config-form__form___d267w",grid:"smsApp__provider-config-form__grid___iEuLU",row:"smsApp__provider-config-form__row___XySFs",errorMessage:"smsApp__provider-config-form__errorMessage___FkE6Y",skeleton:"smsApp__provider-config-form__skeleton___Wn3Al",errorNotification:"smsApp__provider-config-form__errorNotification___FPAF9"};const s=a},2025:(e,t,r)=>{r.d(t,{Ki:()=>d,ql:()=>c,yD:()=>p,yh:()=>A});var n=r(1083);function o(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function s(e){o(a,n,i,s,l,"next",e)}function l(e){o(a,n,i,s,l,"throw",e)}s(void 0)}))}}function a(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function s(e){return l.apply(this,arguments)}function l(){return l=i((function(e){var t,r,o=arguments;return a(this,(function(i){switch(i.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},r=o.length>2&&void 0!==o[2]?o[2]:new AbortController,[4,(0,n.openmrsFetch)(e,{signal:r.signal,method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return[2,i.sent().data]}}))})),l.apply(this,arguments)}function c(e){return u.apply(this,arguments)}function u(){return(u=i((function(e){return a(this,(function(t){switch(t.label){case 0:return[4,s("/ws/sms/configs",{configs:e})];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=i((function(e){var t,r;return a(this,(function(o){switch(o.label){case 0:return t=new AbortController,(r=new FormData).append("file",e),[4,(0,n.openmrsFetch)("/ws/sms/templates/import",{signal:t.signal,method:"POST",headers:{},body:r})];case 1:return[2,o.sent()]}}))}))).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=i((function(e){return a(this,(function(t){switch(t.label){case 0:return[4,s("/ws/sms/send",e)];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}function A(e){return _.apply(this,arguments)}function _(){return(_=i((function(e){return a(this,(function(t){switch(t.label){case 0:return[4,s("/ws/sms/configs",e)];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}},2116:(e,t,r)=>{r.d(t,{L9:()=>c,_5:()=>l,e:()=>u});var n=r(1083),o=r(380);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a={isOverlayOpen:!1,component:Function,header:""},s=function(){return(0,n.getGlobalStore)("providers-store",a)},l=function(e,t){c(),s().setState({isOverlayOpen:!0,component:t,header:e})},c=function(){s().setState({component:null,isOverlayOpen:!1})},u=function(){var e,t,r=(e=(0,o.useState)(),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],a=r[1];return(0,o.useEffect)((function(){var e=function(e){a(e)};e(s().getState()),s().subscribe(e)}),[]),{isOverlayOpen:null==n?void 0:n.isOverlayOpen,component:null==n?void 0:n.component,header:null==n?void 0:n.header}}},8482:(e,t,r)=>{r.d(t,{S:()=>i});var n=r(1083),o=r(1123);function i(){var e,t=(0,o.Ay)("ws/sms/templates",n.openmrsFetch),r=t.data,i=t.isLoading,a=t.mutate,s=t.error;return{templates:null!==(e=null==r?void 0:r.data)&&void 0!==e?e:{},isLoadingTemplates:i,mutateTemplates:a,error:s}}},8004:(e,t,r)=>{r.d(t,{U:()=>s});var n=r(1083),o=r(1123),i=r(380);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(){var e,t,r,s=(0,o.Ay)("/ws/sms/configs",n.openmrsFetch),l=s.data,c=s.isLoading,u=s.error,d=s.mutate,f=s.isValidating,p=(0,i.useMemo)((function(){return c&&f?[]:l.data.configs.map((function(e){return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){a(e,t,r[t])}))}return e}({},e),r=null!=(r={isDefaultConfig:l.data.defaultConfigName===e.name})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})),t;var t,r}))}),[null==l||null===(e=l.data)||void 0===e?void 0:e.configs,null==l||null===(t=l.data)||void 0===t?void 0:t.defaultConfigName,c,f]);return{providerConfigurations:p,defaultConfig:null==l||null===(r=l.data)||void 0===r?void 0:r.defaultConfigName,isLoadingConfigs:c,isValidatingConfigs:f,mutateConfigs:d,error:u}}},5101:(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});var n=r(3373),o=r.n(n),i=r(7131),a=r(380),s=r.n(a),l=r(3150),c=r(1083),u=r(8482),d=r(6195),f=r(1160),p=r(824),m=r(2025),A=r(8004),_=r(2116),v=r(2591),g=r.n(v),b=r(1740),h=r.n(b),y=r(8128),E=r.n(y),C=r(855),w=r.n(C),S=r(3051),O=r.n(S),x=r(3656),k=r.n(x),F=r(5792),P={};P.styleTagTransform=k(),P.setAttributes=w(),P.insert=E().bind(null,"head"),P.domAPI=h(),P.insertStyleElement=O(),g()(F.A,P);const T=F.A&&F.A.locals?F.A.locals:void 0;function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function j(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){D(e,t,r[t])}))}return e}function I(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function L(e,t){if(e){if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,t):void 0}}var V=d.z.object({providerName:d.z.string(),templateName:d.z.string(),maxRetries:d.z.number(),splitHeader:d.z.string(),splitFooter:d.z.string(),excludeLastFooter:d.z.boolean(),autoScript:d.z.string().optional(),dynamicFields:d.z.record(d.z.string(),d.z.string())});const B=function(e){var t,r,n,d,v=e.providerName,g=e.templateName,b=e.excludeLastFooter,h=e.splitFooter,y=e.splitHeader,E=e.maxRetries,C=e.autoScript,w=e.props,S=(0,l.useTranslation)().t,O="tablet"===(0,c.useLayoutType)(),x=(0,A.U)(),k=x.mutateConfigs,F=x.providerConfigurations,P=(0,u.S)(),B=P.templates,U=P.isLoadingTemplates,W=(P.error,(0,p.mN)({mode:"all",resolver:(0,f.u)(V),defaultValues:{providerName:v||void 0,templateName:g||void 0,maxRetries:E||0,splitHeader:y||void 0,splitFooter:h||void 0,excludeLastFooter:b||!1,autoScript:C||void 0}})),Z=W.handleSubmit,z=W.control,G=W.watch,M=W.setValue,H=W.formState,q=H.isSubmitting,J=H.isDirty,Y=(t=function(e){var t,r,n,o;return function(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(i){switch(i.label){case 0:return J?(t=Object.entries(e.dynamicFields).map((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}(t,r)||L(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{name:n[0],value:n[1]}})),r=e.providerName,e.dynamicFields,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["providerName","dynamicFields"]),o=I(R({},n),{props:t,name:r}),[4,(0,m.ql)((a=F,function(e){if(Array.isArray(e))return N(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||L(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([o])).then((function(){(0,c.showSnackbar)({title:S("configSaved","Configuration saved"),kind:"success"}),k(),(0,_.L9)()})).catch((function(){return(0,c.showSnackbar)({title:S("configNotSaved","Configuration not saved"),kind:"error"})}))]):[2,(0,_.L9)()];case 1:return i.sent(),[2]}var a}))},r=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(e){j(i,n,o,a,s,"next",e)}function s(e){j(i,n,o,a,s,"throw",e)}a(void 0)}))},function(e){return r.apply(this,arguments)}),Q=null!==(n=B[G("templateName")])&&void 0!==n?n:null;return(0,a.useEffect)((function(){w&&w.forEach((function(e){var t=e.name,r=e.value;M("dynamicFields.".concat(t),r)}))}),[w,M]),s().createElement(i.lVW,{className:T.form,onSubmit:Z(Y)},s().createElement(i.BJc,{gap:2,className:T.formContainer},s().createElement(i.fI1,{className:T.row},s().createElement(i.VPZ,{sm:1},s().createElement("span",{className:T.columnLabel},S("providerName"," Provider Name"))),s().createElement(i.VPZ,{sm:3},s().createElement(c.ResponsiveWrapper,null,s().createElement(p.xI,{name:"providerName",control:z,render:function(e){var t=e.field,r=e.fieldState.error;return s().createElement(i.ksK,I(R({},t),{invalid:!!(null==r?void 0:r.message),invalidText:null==r?void 0:r.message,labelText:S("nameOfProvider","Name of the provider"),placeholder:S("namePlaceHolder","Enter provider name e.g Twilio")}))}})))),s().createElement(i.fI1,{className:T.row},s().createElement(i.VPZ,{sm:1},s().createElement("span",{className:T.columnLabel},S("template","Template"))),s().createElement(i.VPZ,{sm:3},s().createElement(c.ResponsiveWrapper,null,U?s().createElement(i.aB4,null):s().createElement(p.xI,{name:"templateName",control:z,render:function(e){var t=e.field,r=e.fieldState.error;return s().createElement(i.l6P,I(R({},t),{labelText:S("selectTemplate","Select a template"),invalid:!!(null==r?void 0:r.message),invalidText:null==r?void 0:r.message}),s().createElement(i.ebT,{value:"",text:S("chooseTemplate","Choose a template")}),Object.keys(B).map((function(e){return s().createElement(i.ebT,{value:e,text:e})})))}})))),s().createElement(i.fI1,{className:T.row},s().createElement(i.VPZ,{sm:1},s().createElement("span",{className:T.columnLabel},S("maximumRetries","Maximum retries"))),s().createElement(i.VPZ,{sm:3},s().createElement(c.ResponsiveWrapper,null,s().createElement(p.xI,{name:"maxRetries",control:z,render:function(e){var t=e.field,r=e.fieldState.error;return s().createElement(i.Q7x,I(R({},t),{invalid:!!(null==r?void 0:r.message),invalidText:null==r?void 0:r.message,onChange:function(e,r){var n=r.value;return t.onChange(Number(n))},labelText:S("numberOfRetries","Number of retries")}))}})))),s().createElement(i.fI1,{className:T.row},s().createElement(i.VPZ,{sm:1},s().createElement("span",{className:T.columnLabel},S("headerSplitMessage","Header split message"))),s().createElement(i.VPZ,{sm:3},s().createElement(c.ResponsiveWrapper,null,s().createElement(p.xI,{name:"splitHeader",control:z,render:function(e){var t=e.field,r=e.fieldState.error;return s().createElement(i.ksK,I(R({invalid:!!(null==r?void 0:r.message),invalidText:null==r?void 0:r.message},t),{labelText:S("headerSplitText","Header split text")}))}})))),s().createElement(i.fI1,{className:T.row},s().createElement(i.VPZ,{sm:1},s().createElement("span",{className:T.columnLabel},S("footerSplitMessage","Footer split message"))),s().createElement(i.VPZ,{sm:3},s().createElement(c.ResponsiveWrapper,null,s().createElement(p.xI,{name:"splitFooter",control:z,render:function(e){var t=e.field,r=e.fieldState.error;return s().createElement(i.ksK,I(R({},t),{invalid:!!(null==r?void 0:r.message),invalidText:null==r?void 0:r.message,labelText:S("footerSplitText","Footers split text")}))}})))),s().createElement(i.fI1,{className:T.row},s().createElement(i.VPZ,{sm:3},s().createElement(c.ResponsiveWrapper,null,s().createElement(p.xI,{name:"excludeLastFooter",control:z,render:function(e){var t=e.field;return s().createElement(i.Sc0,{id:t.name,name:t.name,checked:t.value,onChange:function(e,t){var r=t.checked;return M("excludeLastFooter",r)},onBlur:t.onBlur,className:T.checkBox,labelText:S("excludeLastFooter","Exclude footer from last split message")})}})))),s().createElement(i.fI1,{className:T.row},s().createElement(i.nD3,null,s().createElement(i.AsP,{title:S("advanced","Advanced")},s().createElement(i.VPZ,{sm:1},s().createElement("span",{className:T.columnLabel},S("automaticResponseScript","Automatic response script (Optional)"))),s().createElement(i.VPZ,{sm:3},s().createElement(c.ResponsiveWrapper,null,s().createElement(p.xI,{name:"autoScript",control:z,render:function(e){var t=e.field,r=e.fieldState.error;return s().createElement(i.fs1,I(R({},t),{invalid:!!(null==r?void 0:r.message),invalidText:null==r?void 0:r.message,labelText:S("writeYourScript","Write your script"),placeholder:S("enterAutomaticScript","Enter your script")}))}})))))),function(){if(Q)return Q.configurables.map((function(e,t){return s().createElement(i.fI1,{className:T.dynamicRow,key:t},s().createElement(c.ResponsiveWrapper,null,s().createElement(p.xI,{name:"dynamicFields.".concat(e),control:z,render:function(t){var r=t.field,n=t.fieldState.error;return s().createElement(i.ksK,I(R({},r),{invalid:!!(null==n?void 0:n.message),invalidText:null==n?void 0:n.message,labelText:e}))}})))}))}()),s().createElement(i.Te$,{className:o()((d={},D(d,T.tablet,O),D(d,T.desktop,!O),d))},s().createElement(i.$nd,{className:T.button,kind:"secondary",onClick:_.L9},S("discard","Discard")),s().createElement(i.$nd,{className:T.button,kind:"primary",disabled:q,type:"submit"},q?s().createElement(i.OuH,{description:S("sending","Sending")+"..."}):s().createElement("span",null,S("saveAndClose","Save and close")))))}},4026:(e,t,r)=>{var n=r(380),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useState,a=n.useEffect,s=n.useLayoutEffect,l=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!o(e,r)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=i({inst:{value:r,getSnapshot:t}}),o=n[0].inst,u=n[1];return s((function(){o.value=r,o.getSnapshot=t,c(o)&&u({inst:o})}),[e,r,t]),a((function(){return c(o)&&u({inst:o}),e((function(){c(o)&&u({inst:o})}))}),[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},8139:(e,t,r)=>{e.exports=r(4026)},1123:(e,t,r)=>{r.d(t,{Ay:()=>l});var n=r(380),o=r(8139),i=r(5434);const a=n.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e)}),s={dedupe:!0},l=(i.OBJECT.defineProperty(i.SWRConfig,"defaultValue",{value:i.defaultConfig}),(0,i.withArgs)(((e,t,r)=>{const{cache:l,compare:c,suspense:u,fallbackData:d,revalidateOnMount:f,revalidateIfStale:p,refreshInterval:m,refreshWhenHidden:A,refreshWhenOffline:_,keepPreviousData:v}=r,[g,b,h,y]=i.SWRGlobalState.get(l),[E,C]=(0,i.serialize)(e),w=(0,n.useRef)(!1),S=(0,n.useRef)(!1),O=(0,n.useRef)(E),x=(0,n.useRef)(t),k=(0,n.useRef)(r),F=()=>k.current,P=()=>F().isVisible()&&F().isOnline(),[T,N,j,D]=(0,i.createCacheHelper)(l,E),R=(0,n.useRef)({}).current,I=(0,i.isUndefined)(d)?r.fallback[E]:d,L=(e,t)=>{for(const r in R){const n=r;if("data"===n){if(!c(e[n],t[n])){if(!(0,i.isUndefined)(e[n]))return!1;if(!c(H,t[n]))return!1}}else if(t[n]!==e[n])return!1}return!0},V=(0,n.useMemo)((()=>{const e=!!E&&!!t&&((0,i.isUndefined)(f)?!F().isPaused()&&!u&&(!!(0,i.isUndefined)(p)||p):f),r=t=>{const r=(0,i.mergeObjects)(t);return delete r._k,e?{isValidating:!0,isLoading:!0,...r}:r},n=T(),o=D(),a=r(n),s=n===o?a:r(o);let l=a;return[()=>{const e=r(T());return L(e,l)?(l.data=e.data,l.isLoading=e.isLoading,l.isValidating=e.isValidating,l.error=e.error,l):(l=e,e)},()=>s]}),[l,E]),B=(0,o.useSyncExternalStore)((0,n.useCallback)((e=>j(E,((t,r)=>{L(r,t)||e()}))),[l,E]),V[0],V[1]),U=!w.current,W=g[E]&&g[E].length>0,Z=B.data,z=(0,i.isUndefined)(Z)?I:Z,G=B.error,M=(0,n.useRef)(z),H=v?(0,i.isUndefined)(Z)?M.current:Z:z,q=!(W&&!(0,i.isUndefined)(G))&&(U&&!(0,i.isUndefined)(f)?f:!F().isPaused()&&(u?!(0,i.isUndefined)(z)&&p:(0,i.isUndefined)(z)||p)),J=!!(E&&t&&U&&q),Y=(0,i.isUndefined)(B.isValidating)?J:B.isValidating,Q=(0,i.isUndefined)(B.isLoading)?J:B.isLoading,K=(0,n.useCallback)((async e=>{const t=x.current;if(!E||!t||S.current||F().isPaused())return!1;let n,o,a=!0;const s=e||{},l=!h[E]||!s.dedupe,u=()=>i.IS_REACT_LEGACY?!S.current&&E===O.current&&w.current:E===O.current,d={isValidating:!1,isLoading:!1},f=()=>{N(d)},p=()=>{const e=h[E];e&&e[1]===o&&delete h[E]},m={isValidating:!0};(0,i.isUndefined)(T().data)&&(m.isLoading=!0);try{if(l&&(N(m),r.loadingTimeout&&(0,i.isUndefined)(T().data)&&setTimeout((()=>{a&&u()&&F().onLoadingSlow(E,r)}),r.loadingTimeout),h[E]=[t(C),(0,i.getTimestamp)()]),[n,o]=h[E],n=await n,l&&setTimeout(p,r.dedupingInterval),!h[E]||h[E][1]!==o)return l&&u()&&F().onDiscarded(E),!1;d.error=i.UNDEFINED;const e=b[E];if(!(0,i.isUndefined)(e)&&(o<=e[0]||o<=e[1]||0===e[1]))return f(),l&&u()&&F().onDiscarded(E),!1;const s=T().data;d.data=c(s,n)?s:n,l&&u()&&F().onSuccess(n,E,r)}catch(e){p();const t=F(),{shouldRetryOnError:r}=t;t.isPaused()||(d.error=e,l&&u()&&(t.onError(e,E,t),(!0===r||(0,i.isFunction)(r)&&r(e))&&(F().revalidateOnFocus&&F().revalidateOnReconnect&&!P()||t.onErrorRetry(e,E,t,(e=>{const t=g[E];t&&t[0]&&t[0](i.revalidateEvents.ERROR_REVALIDATE_EVENT,e)}),{retryCount:(s.retryCount||0)+1,dedupe:!0}))))}return a=!1,f(),!0}),[E,l]),X=(0,n.useCallback)(((...e)=>(0,i.internalMutate)(l,O.current,...e)),[]);if((0,i.useIsomorphicLayoutEffect)((()=>{x.current=t,k.current=r,(0,i.isUndefined)(Z)||(M.current=Z)})),(0,i.useIsomorphicLayoutEffect)((()=>{if(!E)return;const e=K.bind(i.UNDEFINED,s);let t=0;const r=(0,i.subscribeCallback)(E,g,((r,n={})=>{if(r==i.revalidateEvents.FOCUS_EVENT){const r=Date.now();F().revalidateOnFocus&&r>t&&P()&&(t=r+F().focusThrottleInterval,e())}else if(r==i.revalidateEvents.RECONNECT_EVENT)F().revalidateOnReconnect&&P()&&e();else{if(r==i.revalidateEvents.MUTATE_EVENT)return K();if(r==i.revalidateEvents.ERROR_REVALIDATE_EVENT)return K(n)}}));return S.current=!1,O.current=E,w.current=!0,N({_k:C}),q&&((0,i.isUndefined)(z)||i.IS_SERVER?e():(0,i.rAF)(e)),()=>{S.current=!0,r()}}),[E]),(0,i.useIsomorphicLayoutEffect)((()=>{let e;function t(){const t=(0,i.isFunction)(m)?m(T().data):m;t&&-1!==e&&(e=setTimeout(r,t))}function r(){T().error||!A&&!F().isVisible()||!_&&!F().isOnline()?t():K(s).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[m,A,_,E]),(0,n.useDebugValue)(H),u&&(0,i.isUndefined)(z)&&E){if(!i.IS_REACT_LEGACY&&i.IS_SERVER)throw new Error("Fallback data is required when using suspense in SSR.");x.current=t,k.current=r,S.current=!1;const e=y[E];if(!(0,i.isUndefined)(e)){const t=X(e);a(t)}if(!(0,i.isUndefined)(G))throw G;{const e=K(s);(0,i.isUndefined)(H)||(e.status="fulfilled",e.value=!0),a(e)}}return{mutate:X,get data(){return R.data=!0,H},get error(){return R.error=!0,G},get isValidating(){return R.isValidating=!0,Y},get isLoading(){return R.isLoading=!0,Q}}})))}}]);