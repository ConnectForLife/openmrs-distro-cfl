"use strict";(self.webpackChunk_openmrs_esm_outpatient_app=self.webpackChunk_openmrs_esm_outpatient_app||[]).push([[937,94],{6043:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(2609),a=n.n(i)()((function(e){return e[1]}));a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-outpatient__outpatient-dashboard__productiveHeading01___l3-Qd{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-outpatient__outpatient-dashboard__productiveHeading02___KdSHg{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0)}.-esm-outpatient__outpatient-dashboard__bodyLong01___G9gHD{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-outpatient__outpatient-dashboard__dashboardContainer___igbRm{display:-webkit-flex;height:90vh;position:relative;overflow-y:hidden}.-esm-outpatient__outpatient-dashboard__dashboardContent___dgW3u{margin:0;flex-basis:75%;flex-grow:1;flex-shrink:1;position:relative;overflow-y:auto;margin-left:16rem;padding-left:0;padding-right:0;max-width:100% !important}@media(max-width: 1200px){.-esm-outpatient__outpatient-dashboard__dashboardContent___dgW3u{margin-left:0}}",""]),a.locals={productiveHeading01:"-esm-outpatient__outpatient-dashboard__productiveHeading01___l3-Qd",productiveHeading02:"-esm-outpatient__outpatient-dashboard__productiveHeading02___KdSHg",bodyLong01:"-esm-outpatient__outpatient-dashboard__bodyLong01___G9gHD",dashboardContainer:"-esm-outpatient__outpatient-dashboard__dashboardContainer___igbRm",dashboardContent:"-esm-outpatient__outpatient-dashboard__dashboardContent___dgW3u"};const r=a},4288:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(2609),a=n.n(i)()((function(e){return e[1]}));a.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-outpatient__patient-queue-header__header___L\\+3kB{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#525252;height:6rem;background-color:#fff;border:1px solid #e0e0e0;border-left:0px;display:flex;justify-content:space-between}.-esm-outpatient__patient-queue-header__left-justified-items___YOFv8{display:flex;flex-direction:row;align-items:center}.-esm-outpatient__patient-queue-header__right-justified-items___pGSNR{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);color:#525252;padding-top:1rem}.-esm-outpatient__patient-queue-header__page-name___\\+xnhI{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-outpatient__patient-queue-header__page-labels___p7K71 p:first-of-type{margin-bottom:.25rem}.-esm-outpatient__patient-queue-header__date-and-location___WVdtD{display:flex;justify-content:flex-end;align-items:center;margin-right:1rem}.-esm-outpatient__patient-queue-header__value___zipi7{margin-left:.25rem}.-esm-outpatient__patient-queue-header__middot___SOgfM{margin:0 .5rem}.-esm-outpatient__patient-queue-header__view___0wHPA{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-outpatient__patient-queue-header__dropdown___lqmok{display:flex;align-items:center;justify-content:flex-end;margin-top:.25rem}.-esm-outpatient__patient-queue-header__dropdown___lqmok .cds--dropdown__wrapper--inline{align-items:center;display:flex}.-esm-outpatient__patient-queue-header__dropdown___lqmok .cds--list-box__menu{left:-10.15rem}",""]),a.locals={header:"-esm-outpatient__patient-queue-header__header___L+3kB","left-justified-items":"-esm-outpatient__patient-queue-header__left-justified-items___YOFv8","right-justified-items":"-esm-outpatient__patient-queue-header__right-justified-items___pGSNR","page-name":"-esm-outpatient__patient-queue-header__page-name___+xnhI","page-labels":"-esm-outpatient__patient-queue-header__page-labels___p7K71","date-and-location":"-esm-outpatient__patient-queue-header__date-and-location___WVdtD",value:"-esm-outpatient__patient-queue-header__value___zipi7",middot:"-esm-outpatient__patient-queue-header__middot___SOgfM",view:"-esm-outpatient__patient-queue-header__view___0wHPA",dropdown:"-esm-outpatient__patient-queue-header__dropdown___lqmok"};const r=a},8053:(e,t,n)=>{n.d(t,{$z:()=>_,Di:()=>q,KW:()=>f,P4:()=>g,Su:()=>v,W_:()=>h,zI:()=>y});var i=n(5047),a=n.n(i),r=n(8879),o=n.n(r),u=n(9857),s=n(2303),d=n(906),l=n(2228),p=n(7279);function c(e,t,n,i,a,r,o){try{var u=e[r](o),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(i,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var r=e.apply(t,n);function o(e){c(r,i,a,o,u,"next",e)}function u(e){c(r,i,a,o,u,"throw",e)}o(void 0)}))}}function v(e){var t,n="/ws/rest/v1/queue?location=".concat(e),i=(0,s.Z)(n,d.openmrsFetch).data;return{services:i?null==i||null===(t=i.data)||void 0===t?void 0:t.results:[]}}function _(){var e,t=(0,d.useConfig)().concepts.statusConceptSetUuid,n="/ws/rest/v1/concept/".concat(t),i=(0,s.Z)(n,d.openmrsFetch),a=i.data,r=i.error;return{statuses:a?null==a||null===(e=a.data)||void 0===e?void 0:e.setMembers:[],isLoading:!a&&!r}}function h(){var e,t=(0,d.useConfig)().concepts.priorityConceptSetUuid,n="/ws/rest/v1/concept/".concat(t),i=(0,s.Z)(n,d.openmrsFetch).data;return{priorities:i?null==i||null===(e=i.data)||void 0===e?void 0:e.setMembers:[]}}function g(){var e,t,n=(0,u.ZP)("/ws/rest/v1/visit-queue-entry?v=full",d.openmrsFetch),i=n.data,a=n.error,r=n.isValidating,s=function(e){var t,n,i;return{diagnoses:e.diagnoses,encounterDatetime:e.encounterDatetime,encounterType:e.encounterType.display,obs:e.obs,provider:null===(t=e.encounterProviders[0])||void 0===t||null===(n=t.provider)||void 0===n||null===(i=n.person)||void 0===i?void 0:i.display,uuid:e.uuid,voided:e.voided}},l=null==i||null===(e=i.data)||void 0===e||null===(t=e.results)||void 0===t?void 0:t.map((function(e){var t,n,i,a,r,u,l,p,c,m,v;return{id:e.queueEntry.uuid,encounters:null===(t=e.visit)||void 0===t||null===(n=t.encounters)||void 0===n?void 0:n.map(s),name:e.queueEntry.display,patientUuid:e.queueEntry.patient.uuid,patientAge:null===(i=e.queueEntry.patient.person)||void 0===i?void 0:i.age,patientSex:"M"===(null===(a=e.queueEntry.patient.person)||void 0===a?void 0:a.gender)?"MALE":"FEMALE",patientDob:(null==e||null===(r=e.queueEntry)||void 0===r||null===(u=r.patient)||void 0===u||null===(l=u.person)||void 0===l?void 0:l.birthdate)?(0,d.formatDate)((0,d.parseDate)(e.queueEntry.patient.person.birthdate),{time:!1}):"--",priority:"Urgent"===e.queueEntry.priority.display?"Priority":e.queueEntry.priority.display,priorityComment:e.queueEntry.priorityComment,priorityUuid:e.queueEntry.priority.uuid,service:e.queueEntry.queue.service.display,status:e.queueEntry.status.display,statusUuid:e.queueEntry.status.uuid,waitTime:e.queueEntry.startedAt?"".concat(o()().diff(o()(e.queueEntry.startedAt),"minutes")):"--",visitStartDateTime:null===(p=e.visit)||void 0===p?void 0:p.visitStartDateTime,visitType:null===(c=e.visit)||void 0===c||null===(m=c.visitType)||void 0===m?void 0:m.display,visitUuid:null===(v=e.visit)||void 0===v?void 0:v.uuid,queueUuid:e.queueEntry.queue.uuid,queueEntryUuid:e.queueEntry.uuid}}));return{visitQueueEntries:l||null,isLoading:!i&&!a,isError:a,isValidating:r}}var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("/");return(0,l.Z)(t)};function y(e,t,n,i,a,r,o,u,s){return b.apply(this,arguments)}function b(){return(b=m(a().mark((function e(t,n,i,r,o,u,s,l,c){var m;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m=(0,p.Z)(i)?n:i,e.next=3,Promise.all([E(n,c,r,l)]);case 3:return e.abrupt("return",(0,d.openmrsFetch)("/ws/rest/v1/visit-queue-entry",{method:"POST",headers:{"Content-Type":"application/json"},signal:c.signal,body:{visit:{uuid:t},queueEntry:{status:{uuid:s},priority:{uuid:u},queue:{uuid:m},patient:{uuid:o},startedAt:(0,d.toDateObjectStrict)((0,d.toOmrsIsoString)(new Date))}}}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e,t,n,i){return w.apply(this,arguments)}function w(){return(w=m(a().mark((function e(t,n,i,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.openmrsFetch)("/ws/rest/v1/queue/".concat(t,"/entry/").concat(i),{method:"POST",headers:{"Content-Type":"application/json"},signal:n.signal,body:{endedAt:r}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){var t,n,i="/ws/rest/v1/visit-queue-entry?status=waiting&service=".concat(e,"&v=full"),a=(0,u.ZP)(i,d.openmrsFetch),r=a.data,o=a.error,s=a.isValidating,l=null==r||null===(t=r.data)||void 0===t||null===(n=t.results)||void 0===n?void 0:n.map((function(e){var t,n,i,a,r,o,u,s,d,l;return{id:e.queueEntry.uuid,name:e.queueEntry.display,age:e.queueEntry.patient?null==e||null===(t=e.queueEntry)||void 0===t||null===(n=t.patient)||void 0===n||null===(i=n.person)||void 0===i?void 0:i.age:"--",returnDate:null===(a=e.visit)||void 0===a?void 0:a.visitStartDateTime,visitType:null===(r=e.visit)||void 0===r||null===(o=r.visitType)||void 0===o?void 0:o.display,phoneNumber:e.patient?null===(u=e.patient)||void 0===u?void 0:u.phoneNumber:"--",gender:e.queueEntry.patient?null==e||null===(s=e.queueEntry)||void 0===s||null===(d=s.patient)||void 0===d||null===(l=d.person)||void 0===l?void 0:l.gender:"--",patientUuid:e.queueEntry?null==e?void 0:e.queueEntry.uuid:"--"}}));return{serviceQueueEntries:l||null,isLoading:!r&&!o,isError:o,isValidating:s}}},3069:(e,t,n)=>{n.d(t,{k:()=>s,z:()=>u});var i=n(9857),a=n(906),r=n(8879),o=n.n(r);function u(){var e=o()((new Date).setHours(0,0,0,0)).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"),t="/ws/rest/v1/appointment/appointmentStatus?forDate=".concat(e,"&status=Scheduled"),n=(0,i.ZP)(t,a.openmrsFetch),r=n.data,u=n.error,s=n.isValidating;return{appointmentQueueEntries:r?null==r?void 0:r.data:[],isLoading:!r&&!u,isError:u,isValidating:s}}function s(){var e,t="/ws/rest/v1/provider?q=&v=".concat("custom:(uuid,display,person:(age,display,gender,uuid))"),n=(0,i.ZP)(t,a.openmrsFetch),r=n.data,o=n.error,u=n.isValidating;return{providers:r?null===(e=r.data)||void 0===e?void 0:e.results:[],isLoading:!r&&!o,isError:o,isValidating:u}}},8094:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=n(5206),a=n.n(i),r=n(4924),o=n(2650),u=n(906),s=n(8053);const d=function(){var e=(0,r.useTranslation)().t,t=window.location.pathname.split("/")[4],n=(0,s.Di)(t),d=n.serviceQueueEntries,l=n.isLoading,p=(0,i.useMemo)((function(){return[{id:0,header:e("name","Name"),key:"name"},{id:1,header:e("returnDate","Return Date"),key:"returnDate"},{id:2,header:e("gender","Gender"),key:"gender"},{id:3,header:e("age","Age"),key:"age"},{id:4,header:e("visitType","Visit Type"),key:"visitType"},{id:5,header:e("phoneNumber","Phone Number"),key:"phoneNumber"}]}),[e]),c=(0,i.useMemo)((function(){return null==d?void 0:d.map((function(e){return{id:e.id,name:{content:a().createElement(u.ConfigurableLink,{to:"${openmrsSpaBase}/patient/".concat(e.patientUuid,"/chart")},e.name)},returnDate:(0,u.formatDatetime)((0,u.parseDate)(e.returnDate),{mode:"wide"}),gender:e.gender,age:e.age,visitType:e.visitType,phoneNumber:e.phoneNumber}}))}),[d]);return a().createElement("div",null,a().createElement(o.Z,{title:e("alistOfClients","A list of clients waiting for "),headers:p,rows:c,patientData:d,serviceType:t,isLoading:l}))}},1121:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=n(5206),a=n.n(i),r=n(4924),o=n(2650),u=n(906),s=n(3069);const d=function(){var e=(0,r.useTranslation)().t,t=(0,s.z)(),n=t.appointmentQueueEntries,d=t.isLoading,l=(0,u.usePagination)(n,20).results,p=(0,i.useMemo)((function(){return[{id:0,header:e("name","Name"),key:"name"},{id:1,header:e("returnDate","Return Date"),key:"returnDate"},{id:2,header:e("gender","Gender"),key:"gender"},{id:3,header:e("age","Age"),key:"age"},{id:4,header:e("visitType","Visit Type"),key:"visitType"},{id:5,header:e("phoneNumber","Phone Number"),key:"phoneNumber"}]}),[e]),c=(0,i.useMemo)((function(){return null==l?void 0:l.map((function(e){var t,n;return{id:e.uuid,name:{content:a().createElement(u.ConfigurableLink,{to:"${openmrsSpaBase}/patient/".concat(e.patient.uuid,"/chart")},e.patient.name)},returnDate:(0,u.formatDatetime)((0,u.parseDate)(e.startDateTime.toString()),{mode:"wide"}),gender:null===(t=e.patient)||void 0===t?void 0:t.gender,age:e.patient.age,visitType:e.appointmentKind,phoneNumber:null===(n=e.patient)||void 0===n?void 0:n.phoneNumber}}))}),[l]);return a().createElement("div",null,a().createElement(o.Z,{title:e("scheduledAppointmentsList","Scheduled appointments patient list"),headers:p,rows:c,patientData:l,serviceType:"",isLoading:d}))}},1937:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var i=n(5206),a=n.n(i),r=n(9857),o=n(7228),u=n(8179),s=n(906),d=n(4924),l=n(4717),p=n(9884),c=n(8648);const m=function(){return a().createElement("svg",{width:"92",height:"94",viewBox:"0 0 92 94",xmlns:"http://www.w3.org/2000/svg"},a().createElement("title",null,"Patient queue illustration"),a().createElement("g",{fill:"none",fillRule:"evenodd"},a().createElement("path",{fill:"#FFF",d:"M0 0h92v94H0z"}),a().createElement("path",{d:"M40 32c.84-.602 1.12-1.797 1-3 .12-5.005-3.96-9-9-9s-9.12 3.995-9 9c-.12 3.572 2.1 6.706 5 8-6.76 1.741-12 7.91-12 15v15h28V32h-4zM76 67V52c0-7.09-5.24-13.278-12-15 2.9-1.294 5.12-4.428 5-8 .12-5.005-3.96-9-9-9s-9.12 3.995-9 9c-.12 1.203.14 2.398 1 3h-4v35h28z",fill:"#CEE6E5"}),a().createElement("path",{d:"M32 75V60.312c0-7.402 5.24-13.59 12.3-15.216-3.2-1.39-5.42-4.523-5.42-8.166 0-4.935 4.08-8.93 9.12-8.93 5.04 0 9.12 3.995 9.12 8.93 0 3.642-2.22 6.776-5.42 8.166C58.76 46.741 64 52.91 64 60.313V75",fill:"#7BBCB9"})))};var v=n(6062),_=n.n(v),h=n(4036),g=n.n(h),f=n(6793),y=n.n(f),b=n(7892),E=n.n(b),w=n(1173),q=n.n(w),T=n(2464),x=n.n(T),D=n(4288),S={};S.styleTagTransform=x(),S.setAttributes=E(),S.insert=y().bind(null,"head"),S.domAPI=g(),S.insertStyleElement=q(),_()(D.Z,S);const k=D.Z&&D.Z.locals?D.Z.locals:void 0,N=function(e){var t,n=e.title,i=(0,d.useTranslation)().t,r=(0,s.useSession)(),o=null==r||null===(t=r.sessionLocation)||void 0===t?void 0:t.display,u=[{id:"option-1",text:i("ncdCare","NCD Care")},{id:"option-2",text:i("hivCare","HIV Care")},{id:"option-3",text:i("tbCare","TB Care")}];return a().createElement("div",{className:k.header},a().createElement("div",{className:k["left-justified-items"]},a().createElement(m,null),a().createElement("div",{className:k["page-labels"]},a().createElement("p",null,i("serviceQueue","Service queue")),a().createElement("p",{className:k["page-name"]},n))),a().createElement("div",{className:k["right-justified-items"]},a().createElement("div",{className:k["date-and-location"]},a().createElement(l.Ye,{size:16}),a().createElement("span",{className:k.value},o),a().createElement("span",{className:k.middot},"Â·"),a().createElement(p.f,{size:16}),a().createElement("span",{className:k.value},(0,s.formatDate)(new Date,{mode:"standard"}))),a().createElement("div",{className:k.dropdown},a().createElement("label",{className:k.view},i("view","View"),":"),a().createElement(c.Ltx,{id:"typeOfCare",label:i("careType","Type of Care"),initialSelectedItem:u[0],items:u,itemToString:function(e){return e?e.text:""},type:"inline"}))))};var C=(0,s.createGlobalStore)("outpatient-nav-groups",{navGroups:[]}),L=(0,s.createUseStore)(C),z=n(6043),P={};P.styleTagTransform=x(),P.setAttributes=E(),P.insert=y().bind(null,"head"),P.domAPI=g(),P.insertStyleElement=q(),_()(z.Z,P);const Z=z.Z&&z.Z.locals?z.Z.locals:void 0;var M=function(){var e,t=(0,o.useParams)().view,n=(0,s.useLayoutType)(),r=(0,o.useNavigate)(),u=(0,s.useExtensionStore)(),d=L().navGroups,l=(null===(e=u.slots["outpatient-dashboard-slot"])||void 0===e?void 0:e.assignedExtensions.map((function(e){return e.meta})).filter((function(e){return Object.keys(e).length})))||[],p=d.map((function(e){var t;return null===(t=u.slots[e])||void 0===t?void 0:t.assignedExtensions.map((function(e){return e.meta}))})).flat(),c=l.concat(p),m=(0,i.useMemo)((function(){return c.find((function(e){return e.name===t}))}),[c,t]);return(0,i.useEffect)((function(){if(!m)return r("/home")}),[m,r]),(0,i.useEffect)((function(){return(0,s.isDesktop)(n)||(0,s.attach)("global-nav-menu-slot","outpatient-side-nav-ext"),function(){return(0,s.detach)("global-nav-menu-slot","outpatient-side-nav-ext")}}),[n]),a().createElement("div",{className:Z.dashboardContainer},(0,s.isDesktop)(n)&&a().createElement(s.ExtensionSlot,{extensionSlotName:"outpatient-sidebar-slot",key:n}),m&&a().createElement("div",{className:"cds--grid ".concat(Z.dashboardContent)},a().createElement(N,{title:m.title}),a().createElement(s.ExtensionSlot,{extensionSlotName:m.slot})))},A=n(1121),V=n(8094),H=n(2650),j=n(3069);const F=function(){var e=(0,d.useTranslation)().t,t=(0,j.k)(),n=t.providers,r=t.isLoading,o=(0,s.usePagination)(n,20).results,u=(0,i.useMemo)((function(){return[{id:0,header:e("providerName","Provider Name"),key:"name"},{id:1,header:e("serviceType","Service Type"),key:"serviceType"},{id:2,header:e("location","Location"),key:"location"}]}),[e]),l=(0,i.useMemo)((function(){return null==o?void 0:o.map((function(e){var t;return{id:e.uuid?e.uuid:"--",name:(null==e?void 0:e.person)?null===(t=e.person)||void 0===t?void 0:t.display:"--",serviceType:(null==e?void 0:e.serviceType)?null==e?void 0:e.serviceType:"--",location:(null==e?void 0:e.location)?e.location:"--"}}))}),[o]);return a().createElement("div",null,a().createElement(H.Z,{title:e("providersAvailable","Providers available"),headers:u,rows:l,patientData:o,serviceType:"",isLoading:r}))};var R={errorRetryCount:3};const B=function(){return(0,i.useEffect)((function(){return(0,s.setLeftNav)({name:"outpatient-dashboard-slot",basePath:u.JB}),function(){return(0,s.unsetLeftNav)("outpatient-dashboard-slot")}}),[]),a().createElement("main",null,a().createElement(r.J$,{value:R},a().createElement(o.BrowserRouter,{basename:u.JB},a().createElement(o.Routes,null,a().createElement(o.Route,{path:"/",element:a().createElement(M,null)}),a().createElement(o.Route,{path:"/:view",element:a().createElement(M,null)}),a().createElement(o.Route,{path:"/appointments-list/:value/",element:a().createElement(A.default,null)}),a().createElement(o.Route,{path:"/queue-list/:value/",element:a().createElement(V.default,null)}),a().createElement(o.Route,{path:"/providers",element:a().createElement(F,null)})))))}}}]);