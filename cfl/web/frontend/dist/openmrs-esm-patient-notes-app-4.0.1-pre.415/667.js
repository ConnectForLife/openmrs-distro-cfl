"use strict";(self.webpackChunk_openmrs_esm_patient_notes_app=self.webpackChunk_openmrs_esm_patient_notes_app||[]).push([[667],{1368:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(9601),r=n.n(o),a=n(2609),i=n.n(a)()(r());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-notes__notes-overview__widgetCard___WzB_a{border:1px solid #e0e0e0}.-esm-patient-notes__notes-overview__expandedRow___DPijZ>td{padding-left:2.5rem !important}.-esm-patient-notes__notes-overview__expandedRow___DPijZ>td>div{max-height:max-content !important}.-esm-patient-notes__notes-overview__expandedRow___DPijZ th[colspan] td[colspan]>div:first-child{padding:0 1rem}.-esm-patient-notes__notes-overview__copy___bAAS0{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px);display:flex;flex-direction:column}.-esm-patient-notes__notes-overview__container___BxDZw{margin:.5rem}.-esm-patient-notes__notes-overview__metadata___dsa2Y{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px);color:#525252;margin:.5rem 0}.-esm-patient-notes__notes-overview__hiddenRow___EdPRM{display:none}",""]),i.locals={widgetCard:"-esm-patient-notes__notes-overview__widgetCard___WzB_a",expandedRow:"-esm-patient-notes__notes-overview__expandedRow___DPijZ",copy:"-esm-patient-notes__notes-overview__copy___bAAS0",container:"-esm-patient-notes__notes-overview__container___BxDZw",metadata:"-esm-patient-notes__notes-overview__metadata___dsa2Y",hiddenRow:"-esm-patient-notes__notes-overview__hiddenRow___EdPRM"};const s=i},5452:(e,t,n)=>{n.d(t,{Z:()=>R});var o=n(268),r=n.n(o),a=n(4924),i=n(1367),s=n(6759),l=n(906),c=n(6217),d=n(3236),u=n(6062),p=n.n(u),m=n(4036),v=n.n(m),_=n(6793),g=n.n(_),f=n(7892),b=n.n(f),h=n(1173),w=n.n(h),y=n(2464),E=n.n(y),P=n(1368),O={};O.styleTagTransform=E(),O.setAttributes=b(),O.insert=g().bind(null,"head"),O.domAPI=v(),O.insertStyleElement=w(),p()(P.Z,O);const j=P.Z&&P.Z.locals?P.Z.locals:void 0;function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(){return N=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},N.apply(this,arguments)}const S=function(e){var t=e.notes,n=e.pageSize,o=e.pageUrl,s=e.urlLabel,d=(0,a.useTranslation)().t,u=(0,l.usePagination)(t,n),p=u.results,m=u.goTo,v=u.currentPage,_=[{key:"encounterDate",header:d("date","Date")},{key:"diagnoses",header:d("diagnoses","Diagnoses")}],g=r().useMemo((function(){return null==p?void 0:p.map((function(e){return t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){D(e,t,n[t])}))}return e}({},e),n=null!=(n={id:"".concat(e.id),encounterDate:(0,l.formatDate)((0,l.parseDate)(e.encounterDate),{mode:"wide"}),diagnoses:e.diagnoses})?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n}(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})),t;var t,n}))}),[p]);return r().createElement(r().Fragment,null,r().createElement(i.wQF,{rows:g,headers:_,isSortable:!0,size:"sm",useZebraStyles:!0},(function(e){var t=e.rows,n=e.headers,o=e.getTableProps,a=e.getTableContainerProps,s=e.getHeaderProps,c=e.getRowProps;return r().createElement(i.xJi,N({},a),r().createElement(i.iA_,N({},o()),r().createElement(i.ssF,null,r().createElement(i.SCH,null,r().createElement(i.MOD,null),n.map((function(e,t){return r().createElement(i.xDH,N({key:t,className:"".concat(j.productiveHeading01," ").concat(j.text02)},s({header:e})),e.header)})))),r().createElement(i.RMI,null,t.map((function(e,t){var o,a,s,u,p;return r().createElement(r().Fragment,{key:e.id},r().createElement(i.RcE,N({},c({row:e})),e.cells.map((function(e){return r().createElement(i.pj1,{key:e.id},e.value)}))),e.isExpanded?r().createElement(i.WdL,{className:j.expandedRow,colSpan:n.length+1},r().createElement("div",{className:j.container,key:t},(null==g||null===(o=g[t])||void 0===o?void 0:o.encounterNote)?r().createElement("div",{className:j.copy},r().createElement("span",{className:j.content},null==g||null===(a=g[t])||void 0===a?void 0:a.encounterNote),r().createElement("span",{className:j.metadata},(0,l.formatTime)(new Date(null==g||null===(s=g[t])||void 0===s?void 0:s.encounterNoteRecordedAt))," Â·"," ",null==g||null===(u=g[t])||void 0===u?void 0:u.encounterProvider,", ",null==g||null===(p=g[t])||void 0===p?void 0:p.encounterProviderRole)):r().createElement("span",{className:j.copy},d("noVisitNoteToDisplay","No visit note to display")))):r().createElement(i.WdL,{className:j.hiddenRow,colSpan:n.length+2}))})))))})),r().createElement(c.PatientChartPagination,{pageNumber:v,totalItems:t.length,currentItems:p.length,pageSize:n,onPageNumberChange:function(e){var t=e.page;return m(t)},dashboardLinkUrl:o,dashboardLinkLabel:s}))};function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},x.apply(this,arguments)}const R=function(e){var t=e.patientUuid,n=e.showAddNote,o=e.pageSize,u=e.urlLabel,p=e.pageUrl,m=(0,a.useTranslation)().t,v=(0,l.useVisit)(t).currentVisit,_=m("visitNotes","Visit notes"),g=m("visitNotes","Visit notes"),f=(0,d.q6)(t),b=f.visitNotes,h=f.isError,w=f.isLoading,y=f.isValidating,E=r().useCallback((function(){v?(0,c.launchPatientWorkspace)("visit-notes-form-workspace"):(0,c.launchStartVisitPrompt)()}),[v]);return r().createElement(r().Fragment,null,w?r().createElement(i.gqd,{role:"progressbar"}):h?r().createElement(c.ErrorState,{error:h,headerTitle:g}):(null==b?void 0:b.length)?r().createElement("div",{className:j.widgetCard},r().createElement(c.CardHeader,{title:g},r().createElement("span",null,y?r().createElement(i.lSo,null):null),n&&r().createElement(i.zxk,{kind:"ghost",renderIcon:function(e){return r().createElement(s.mm,x({size:16},e))},iconDescription:"Add visit note",onClick:E},m("add","Add"))),r().createElement(S,{notes:b,pageSize:o,urlLabel:u,pageUrl:p})):r().createElement(c.EmptyState,{displayText:_,headerTitle:g,launchForm:E}))}},9667:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var o=n(268),r=n.n(o),a=n(4924),i=n(5452);const s=function(e){var t=e.patientUuid,n=(e.patient,e.showAddNote),o=e.basePath,s=(0,a.useTranslation)().t,l=window.spaBase+o+"/forms",c=s("seeAll","See all");return r().createElement(i.Z,{patientUuid:t,showAddNote:n,pageSize:5,urlLabel:c,pageUrl:l})}},3236:(e,t,n)=>{n.d(t,{BH:()=>u,Ti:()=>c,aH:()=>d,jm:()=>s,lu:()=>l,q6:()=>i});var o=n(9857),r=n(2188),a=n(906);function i(e){var t,n,r=(0,a.useConfig)().visitNoteConfig,i=r.encounterNoteTextConceptUuid,s=(r.problemListConceptUuid,r.visitDiagnosesConceptUuid),l="/ws/rest/v1/encounter?patient=".concat(e,"&obs=").concat(s,"&v=").concat("custom:(uuid,display,encounterDatetime,patient,obs,encounterProviders:(uuid,display,encounterRole:(uuid,display),provider:(uuid,person:(uuid,display))),diagnoses"),c=(0,o.ZP)(l,a.openmrsFetch),d=c.data,u=c.error,p=c.isValidating,m=null==d||null===(t=d.data)||void 0===t||null===(n=t.results)||void 0===n?void 0:n.map((function(e,t){var n,o,r,a,s,l,c;return{id:"".concat(t),diagnoses:e.diagnoses.map((function(e){return e.display})).filter((function(e){return e})).join(", "),encounterDate:e.encounterDatetime,encounterNote:null===(n=e.obs.find((function(e){return e.concept.uuid===i})))||void 0===n?void 0:n.value,encounterNoteRecordedAt:null===(o=e.obs.find((function(e){return e.concept.uuid===i})))||void 0===o?void 0:o.obsDatetime,encounterProvider:null===(r=null==e?void 0:e.encounterProviders[0])||void 0===r||null===(a=r.provider)||void 0===a||null===(s=a.person)||void 0===s?void 0:s.display,encounterProviderRole:null===(l=null==e?void 0:e.encounterProviders[0])||void 0===l||null===(c=l.encounterRole)||void 0===c?void 0:c.display}}));return{visitNotes:d?m:null,isError:u,isLoading:!d&&!u,isValidating:p}}function s(e,t){return(0,a.openmrsFetch)("/ws/rest/v1/location/".concat(t),{signal:e.signal})}function l(e,t){return(0,a.openmrsFetch)("/ws/rest/v1/provider/".concat(t),{signal:e.signal})}function c(e){return(0,a.openmrsObservableFetch)("/ws/rest/v1/concept?q=".concat(e,"&searchType=fuzzy&class=8d4918b0-c2cc-11de-8d13-0010c6dffd0f&q=&v=custom:(uuid,display)")).pipe((0,r.U)((function(e){return e.data.results})))}function d(e,t){return(0,a.openmrsFetch)("/ws/rest/v1/encounter",{headers:{"Content-Type":"application/json"},method:"POST",body:t,signal:e.signal})}function u(e,t){return(0,a.openmrsFetch)("/ws/rest/v1/patientdiagnoses",{headers:{"Content-Type":"application/json"},method:"POST",body:t})}}}]);