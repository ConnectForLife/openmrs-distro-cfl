(globalThis.webpackChunk_openmrs_esm_patient_forms_app=globalThis.webpackChunk_openmrs_esm_patient_forms_app||[]).push([[2,556],{8179:(e,t,r)=>{"use strict";r.d(t,{HW:()=>a,_V:()=>o,dr:()=>c,lA:()=>i});var n="(uuid,name,display,encounterType:(uuid,name,viewPrivilege,editPrivilege),version,published,retired,resources:(uuid,name,dataType,valueReference))",o="custom:(uuid,encounterDatetime,encounterType:(uuid,name,viewPrivilege,editPrivilege),form:".concat(n),i="/ws/rest/v1/form?v=custom:".concat(n),a="/ws/rest/v1/form?v=custom:".concat(n,"&q=poc"),c="patient-form-entry-workspace"},5993:(e,t,r)=>{"use strict";r.d(t,{K:()=>h,U:()=>d});var n=r(2870),o=r(5986),i=r(2263),a=r(4405),c=r(7885),s=r(3282),u=r(2143),f=r(5441),l=r(2663),m=Object.prototype.hasOwnProperty;var p=r(4556);function d(e,t,r,d,y,b,v){if(e){var g=d.find((function(e){return e.formUuid===t}));!function(e){if(null==e)return!0;if((0,s.Z)(e)&&((0,c.Z)(e)||"string"==typeof e||"function"==typeof e.splice||(0,u.Z)(e)||(0,l.Z)(e)||(0,a.Z)(e)))return!e.length;var t=(0,i.Z)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if((0,f.Z)(e))return!(0,o.Z)(e).length;for(var r in e)if(m.call(e,r))return!1;return!0}(g)?(0,n.navigate)({to:"${openmrsBase}/htmlformentryui/htmlform/".concat(g.formUiPage,".page?patientId=").concat(r.id,"&visitId=").concat(e.uuid,"&definitionUiResource=").concat(g.formUiResource,"&returnUrl=").concat(window.location.href)}):h(t,r.id,y,b,v,e)}else(0,p.launchStartVisitPrompt)()}function h(e,t,r,n,o,i){(0,p.launchPatientWorkspace)("patient-form-entry-workspace",{workspaceTitle:n,mutateForm:o,formInfo:{encounterUuid:r,formUuid:e,visit:i}})}},2:(e,t,r)=>{"use strict";r.r(t),r.d(t,{clinicalFormActionMenu:()=>E,clinicalFormsWorkspace:()=>x,importTranslation:()=>D,offlineFormOverviewCard:()=>W,offlineForms:()=>N,offlineFormsNavLink:()=>Z,startupApp:()=>H});var n=r(2870),o=r(4556),i={htmlFormEntryForms:{_type:n.Type.Array,_elements:{formUuid:{_type:n.Type.String,_description:"The UUID of the form"},formName:{_type:n.Type.String,_description:"The name of the form"},formUiResource:{_type:n.Type.String,_description:'The resource file that defines the form. For example "referenceapplication:htmlforms/vitals.xml"'},formUiPage:{_type:n.Type.String,_description:'The HTMLFormEntry page to use to show this form. Should be one of "enterHtmlFormWithStandardUi" or "enterHtmlFormWithSimpleUi"',_validators:[(0,n.validator)((function(e){return"enterHtmlFormWithStandardUi"===e||"enterHtmlFormWithSimpleUi"===e}),'Must be one of "enterHtmlFormWithStandardUi" or "enterHtmlFormWithSimpleUi"')]}},_default:[{formUuid:"d2c7532c-fb01-11e2-8ff2-fd54ab5fdb2a",formName:"Admission (Simple)",formUiResource:"referenceapplication:htmlforms/simpleAdmission.xml",formUiPage:"enterHtmlFormWithStandardUi"},{formUuid:"b5f8ffd8-fbde-11e2-8ff2-fd54ab5fdb2a",formName:"Discharge (Simple)",formUiResource:"referenceapplication:htmlforms/simpleDischarge.xml",formUiPage:"enterHtmlFormWithStandardUi"},{formUuid:"a007bbfe-fbe5-11e2-8ff2-fd54ab5fdb2a",formName:"Transfer Within Hospital (Simple)",formUiResource:"referenceapplication:htmlforms/simpleTransfer.xml",formUiPage:"enterHtmlFormWithStandardUi"},{formUuid:"c75f120a-04ec-11e3-8780-2b40bef9a44b",formName:"Visit Note",formUiResource:"referenceapplication:htmlforms/simpleVisitNote.xml",formUiPage:"enterHtmlFormWithStandardUi"},{formUuid:"a000cb34-9ec1-4344-a1c8-f692232f6edd",formName:"Vitals",formUiResource:"referenceapplication:htmlforms/vitals.xml",formUiPage:"enterHtmlFormWithSimpleUi"}]},showHtmlFormEntryForms:{_type:n.Type.Boolean,_default:!0,_description:"Whether HTML Form Entry forms should be included in lists of forms."},customFormsUrl:{_type:n.Type.String,_description:"Custom forms endpoint to fetch forms using a custom url.",_default:""},orderFormsByName:{_type:n.Type.Boolean,_description:"Order forms alphabetically.",_default:!0}},a=r(5993),c=r(8179),s=r(8407);function u(e,t,r,n,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,c,"next",e)}function c(e){u(i,n,o,a,c,"throw",e)}a(void 0)}))}}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){l(e,t,r[t])}))}return e}function p(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})),e}function d(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}var h="patient-form";function y(){return(y=f((function(){return d(this,(function(e){return(0,n.setupOfflineSync)(h,["visit"],b,{onBeginEditSyncItem:function(e){(0,a.K)(e.content.formSchemaUuid,e.descriptor.patientUuid,e.content._id,"Form Entry")}}),[2]}))}))).apply(this,arguments)}function b(e,t){return v.apply(this,arguments)}function v(){return v=f((function(e,t){var r,n,o,i;return d(this,(function(a){switch(a.label){case 0:return r=t.dependencies[0],n=e._payloads,o=n.encounterCreate,i=n.personUpdate,[4,Promise.all([g(r,o),U(null==i?void 0:i.uuid,i)])];case 1:return a.sent(),[2]}}))})),v.apply(this,arguments)}function g(e,t){return w.apply(this,arguments)}function w(){return(w=f((function(e,t){var r,o;return d(this,(function(i){switch(i.label){case 0:return t?(o=p(m({},t),{encounterDatetime:null!==(r=t.encounterDatetime)&&void 0!==r?r:null==e?void 0:e.stopDatetime}),[4,(0,n.openmrsFetch)("/ws/rest/v1/encounter",{headers:{"Content-Type":"application/json"},method:"POST",body:o})]):[2];case 1:return i.sent(),[2]}}))}))).apply(this,arguments)}function U(e,t){return S.apply(this,arguments)}function S(){return(S=f((function(e,t){return d(this,(function(r){switch(r.label){case 0:return e&&t?[4,(0,n.openmrsFetch)("/ws/rest/v1/person/".concat(e),{headers:{"Content-Type":"application/json"},method:"POST",body:t})]:[2];case 1:return r.sent(),[2]}}))}))).apply(this,arguments)}function O(){return O=f((function(){return d(this,(function(e){return(0,n.setupDynamicOfflineDataHandler)({id:"esm-patient-forms-app:form",type:"form",displayName:"Patient forms",isSynced:function(e){return f((function(){var t,r,o;return d(this,(function(i){switch(i.label){case 0:return[4,P(e)];case 1:return t=i.sent(),r=t.map((function(e){return window.origin+(0,n.makeUrl)(e)})),[4,caches.open("omrs-spa-cache-v1")];case 2:return[4,i.sent().keys()];case 3:return o=i.sent().map((function(e){return e.url})),[2,r.every((function(e){return o.includes(e)}))]}}))}))()},sync:function(e){return f((function(){var t;return d(this,(function(r){switch(r.label){case 0:return[4,P(e)];case 1:return t=r.sent(),[4,Promise.allSettled(t.map((o=f((function(e){return d(this,(function(t){switch(t.label){case 0:return[4,(0,n.messageOmrsServiceWorker)({type:"registerDynamicRoute",pattern:(0,s.Z)(e),strategy:"network-first"})];case 1:return t.sent(),[4,(0,n.openmrsFetch)(e,{headers:l({},n.omrsOfflineCachingStrategyHttpHeaderName,"network-first")})];case 2:return t.sent(),[2]}}))})),function(e){return o.apply(this,arguments)})))];case 2:if(r.sent().some((function(e){return"rejected"===e.status})))throw new Error("Some form data could not be properly downloaded. (Form UUID: ".concat(e,")"));return[2]}var o}))}))()}}),[2]}))})),O.apply(this,arguments)}function P(e){return _.apply(this,arguments)}function _(){return(_=f((function(e){return d(this,(function(t){switch(t.label){case 0:return[4,(0,n.openmrsFetch)("/ws/rest/v1/form/".concat(e,"?v=full"))];case 1:if(!t.sent().data)throw new Error("The form data could not be loaded from the server. (Form UUID: ".concat(e,")"));return[2,[c.lA,c.HW].filter(Boolean)]}}))}))).apply(this,arguments)}var F=r(268),T=r.n(F),k="@openmrs/esm-patient-forms-app",j={featureName:"patient-forms",moduleName:k},D=r(3979);function H(){(0,n.defineConfigSchema)(k,i),(0,n.registerBreadcrumbs)([{path:"".concat(window.spaBase,"/offline-tools/forms"),title:"Offline forms",parent:"".concat(window.spaBase,"/offline-tools")}]),function(){y.apply(this,arguments)}(),function(){O.apply(this,arguments)}(),(0,n.subscribePrecacheStaticDependencies)((function(){return(0,n.syncAllDynamicOfflineData)("form")})),(0,o.registerWorkspace)({name:"patient-form-entry-workspace",title:"Clinical Form",load:(0,n.getAsyncLifecycle)((function(){return r.e(513).then(r.bind(r,6513))}),j),canMaximize:!0,canHide:!0,width:"wider",type:"clinical-form"})}var W=(0,n.getAsyncLifecycle)((function(){return Promise.all([r.e(773),r.e(924),r.e(217)]).then(r.bind(r,4217))}),j),Z=(0,n.getSyncLifecycle)((function(){return t=(e={page:"forms",title:"Offline forms"}).page,r=e.title,T().createElement("div",{key:t},T().createElement(n.ConfigurableLink,{to:"${openmrsSpaBase}/offline-tools"+(t?"/".concat(t):""),className:"cds--side-nav__link"},r));var e,t,r}),j),N=(0,n.getAsyncLifecycle)((function(){return Promise.all([r.e(773),r.e(924),r.e(565),r.e(338)]).then(r.bind(r,6338))}),j),E=(0,n.getAsyncLifecycle)((function(){return Promise.all([r.e(525),r.e(924),r.e(834)]).then(r.bind(r,7834))}),j),x=(0,n.getAsyncLifecycle)((function(){return Promise.all([r.e(773),r.e(924),r.e(565),r.e(139)]).then(r.bind(r,4139))}),j)},3979:(e,t,r)=>{var n={"./am.json":[8788,788],"./en.json":[3574,574],"./es.json":[8319,319],"./fr.json":[2757,757],"./he.json":[5833,833],"./km.json":[7807,807]};function o(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return r.e(t[1]).then((()=>r(o)))}o.keys=()=>Object.keys(n),o.id=3979,e.exports=o},8407:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(4020),o=/[\\^$.*+?()[\]{}|]/g,i=RegExp(o.source);const a=function(e){return(e=(0,n.Z)(e))&&i.test(e)?e.replace(o,"\\$&"):e}},2758:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(8147),o=r(3391);const i=function(e){return"symbol"==typeof e||(0,o.Z)(e)&&"[object Symbol]"==(0,n.Z)(e)}},4020:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(187);var o=r(7885),i=r(2758),a=n.Z?n.Z.prototype:void 0,c=a?a.toString:void 0;const s=function e(t){if("string"==typeof t)return t;if((0,o.Z)(t))return function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(t,e)+"";if((0,i.Z)(t))return c?c.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},u=function(e){return null==e?"":s(e)}}}]);