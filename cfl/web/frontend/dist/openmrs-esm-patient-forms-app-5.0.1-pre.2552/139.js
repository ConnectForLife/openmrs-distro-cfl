"use strict";(globalThis.webpackChunk_openmrs_esm_patient_forms_app=globalThis.webpackChunk_openmrs_esm_patient_forms_app||[]).push([[139],{2924:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(272),o=r.n(n),a=r(2609),i=r.n(a)()(o());i.push([e.id,".omrs-breakpoint-gt-tablet .-esm-patient-forms__forms-dashboard__container___jHiRr{margin:0}.omrs-breakpoint-lt-desktop .-esm-patient-forms__forms-dashboard__container___jHiRr{margin:1rem}","",{version:3,sources:["webpack://./src/forms/forms-dashboard.scss"],names:[],mappings:"AAEE,mFACE,QAAA,CAMF,oFACE,WAAA",sourceRoot:""}]),i.locals={container:"-esm-patient-forms__forms-dashboard__container___jHiRr"};const s=i},6726:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(272),o=r.n(n),a=r(2609),i=r.n(a)()(o());i.push([e.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-forms__forms-list__container___xgwVa{padding:2rem;background-color:#f4f4f4}.-esm-patient-forms__forms-list__backgroundDataFetchingIndicator___sBW6B{flex:1}.-esm-patient-forms__forms-list__flexContainer___kG5Iq{display:flex;justify-content:space-between}.-esm-patient-forms__forms-list__toolbarWrapper___ZzsNI{position:relative;display:flex;height:3rem;justify-content:flex-end}.-esm-patient-forms__forms-list__tableToolbar___ObNDb{width:20%;min-width:12.5rem}.-esm-patient-forms__forms-list__search___hzYIS input{padding:0 4rem !important}.-esm-patient-forms__forms-list__search___hzYIS .cds--search-close:focus{outline:none;outline-offset:0}.-esm-patient-forms__forms-list__search___hzYIS .cds--search-close:focus:before{background-color:none}.-esm-patient-forms__forms-list__table___QQOPl tr:last-of-type td{border-bottom:none}.-esm-patient-forms__forms-list__heading___CM6tO{margin-bottom:1.5rem}.-esm-patient-forms__forms-list__toolbar___sm5JG{position:relative;display:flex;width:100%;min-height:3rem;margin-bottom:.5rem}.-esm-patient-forms__forms-list__emptyContainer___MAOhX{justify-content:center;align-items:center;width:100%;padding:1rem}.-esm-patient-forms__forms-list__tableContainer___wBefR{padding:0}.-esm-patient-forms__forms-list__tableContainer___wBefR .cds--data-table-content{border:1px solid #e0e0e0;border-bottom:none;overflow:visible}.-esm-patient-forms__forms-list__tableContainer___wBefR .cds--table-toolbar{position:relative;height:2rem;min-height:0rem;overflow:visible;top:0}.-esm-patient-forms__forms-list__tableContainer___wBefR.cds--data-table-container{padding-top:0rem}.-esm-patient-forms__forms-list__filterContainer___MGW4a{flex:1}.-esm-patient-forms__forms-list__filterContainer___MGW4a .cds--dropdown__wrapper--inline{gap:0}.-esm-patient-forms__forms-list__filterContainer___MGW4a .cds--list-box__menu-icon{height:1rem}.-esm-patient-forms__forms-list__tileContainer___INhlH{background-color:#fff;border-top:1px solid #e0e0e0;padding:5rem 0}.-esm-patient-forms__forms-list__tile___hxTl4{margin:auto;width:fit-content}.-esm-patient-forms__forms-list__content___ESb5d{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin-bottom:.5rem}.-esm-patient-forms__forms-list__tileContent___DjLG8{display:flex;flex-direction:column;align-items:center}.-esm-patient-forms__forms-list__emptyState___msVPw{text-align:center;border:1px solid #e0e0e0}.-esm-patient-forms__forms-list__emptyStateContent___D36gX{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);color:#525252;margin-top:1rem;margin-bottom:.5rem}.-esm-patient-forms__forms-list__desktopHeading___H0ZOv h4{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252}.-esm-patient-forms__forms-list__tabletHeading___WoN_X h4{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);color:#525252}.-esm-patient-forms__forms-list__desktopHeading___H0ZOv,.-esm-patient-forms__forms-list__tabletHeading___WoN_X{text-align:left;text-transform:capitalize;margin-bottom:1rem}.-esm-patient-forms__forms-list__desktopHeading___H0ZOv h4:after,.-esm-patient-forms__forms-list__tabletHeading___WoN_X h4:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-patient-forms__forms-list__heading___CM6tO:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}',"",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/forms/forms-list.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CClDF,mDACE,YAAA,CACA,wBDPM,CCUR,yEACE,MAAA,CAGF,uDACE,YAAA,CACA,6BAAA,CAGF,wDACE,iBAAA,CACA,YAAA,CACA,WC6BW,CD5BX,wBAAA,CAGF,sDACE,SAAA,CACA,iBAAA,CAIA,sDACE,yBAAA,CAGF,yEACE,YAAA,CACA,gBAAA,CAGF,gFACE,qBAAA,CAKF,kEACE,kBAAA,CAIJ,iDACE,oBAAA,CAGF,iDACE,iBAAA,CACA,YAAA,CACA,UAAA,CACA,eAAA,CACA,mBAAA,CAGF,wDACE,sBAAA,CACA,kBAAA,CACA,UAAA,CACA,YAAA,CAGF,wDACE,SAAA,CAEA,iFACE,wBAAA,CACA,kBAAA,CACA,gBAAA,CAGF,4EACE,iBAAA,CACA,WAAA,CACA,eAAA,CACA,gBAAA,CACA,KAAA,CAGF,kFACE,gBAAA,CAIJ,yDACE,MAAA,CAEA,yFACE,KAAA,CAGF,mFACE,WAAA,CAIJ,uDACE,qBDzGM,CC0GN,4BAAA,CACA,cAAA,CAGF,8CACE,WAAA,CACA,iBAAA,CAGF,iDEstBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CFptBF,aDjHQ,CCkHR,mBAAA,CAGF,qDACE,YAAA,CACA,qBAAA,CACA,kBAAA,CAGF,oDACE,iBAAA,CACA,wBAAA,CAGF,2DEqsBI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CFnsBF,aDlIQ,CCmIR,eCzGW,CD0GX,mBCpHW,CDwHX,2DE6rBE,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CF3rBA,aD1IM,CC+IR,0DEsrBE,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CFprBA,aDjJM,CCqJV,+GACE,eAAA,CACA,yBAAA,CACA,kBC9HW,CDgIX,iIACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAIJ,uDACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA",sourceRoot:""}]),i.locals={container:"-esm-patient-forms__forms-list__container___xgwVa",backgroundDataFetchingIndicator:"-esm-patient-forms__forms-list__backgroundDataFetchingIndicator___sBW6B",flexContainer:"-esm-patient-forms__forms-list__flexContainer___kG5Iq",toolbarWrapper:"-esm-patient-forms__forms-list__toolbarWrapper___ZzsNI",tableToolbar:"-esm-patient-forms__forms-list__tableToolbar___ObNDb",search:"-esm-patient-forms__forms-list__search___hzYIS",table:"-esm-patient-forms__forms-list__table___QQOPl",heading:"-esm-patient-forms__forms-list__heading___CM6tO",toolbar:"-esm-patient-forms__forms-list__toolbar___sm5JG",emptyContainer:"-esm-patient-forms__forms-list__emptyContainer___MAOhX",tableContainer:"-esm-patient-forms__forms-list__tableContainer___wBefR",filterContainer:"-esm-patient-forms__forms-list__filterContainer___MGW4a",tileContainer:"-esm-patient-forms__forms-list__tileContainer___INhlH",tile:"-esm-patient-forms__forms-list__tile___hxTl4",content:"-esm-patient-forms__forms-list__content___ESb5d",tileContent:"-esm-patient-forms__forms-list__tileContent___DjLG8",emptyState:"-esm-patient-forms__forms-list__emptyState___msVPw",emptyStateContent:"-esm-patient-forms__forms-list__emptyStateContent___D36gX",desktopHeading:"-esm-patient-forms__forms-list__desktopHeading___H0ZOv",tabletHeading:"-esm-patient-forms__forms-list__tabletHeading___WoN_X"};const s=i},2292:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(272),o=r.n(n),a=r(2609),i=r.n(a)()(o());i.push([e.id,".-esm-patient-forms__forms-workspace__container___FFyWY{height:100vh}","",{version:3,sources:["webpack://./src/forms/forms-workspace.scss"],names:[],mappings:"AAAA,wDACE,YAAA",sourceRoot:""}]),i.locals={container:"-esm-patient-forms__forms-workspace__container___FFyWY"};const s=i},4139:(e,t,r)=>{r.r(t),r.d(t,{default:()=>q});var n=r(268),o=r.n(n),a=r(2870),i=r(4556),s=r(4924),l=r(7883),m=r(5993),A=r(4450),c=r(1354),_=r.n(c),f=r(1583),u=r.n(f),d=r(7378),p=r.n(d),C=r(3927),h=r.n(C),g=r(4154),v=r.n(g),b=r(8141),y=r.n(b),E=r(6726),w={};w.styleTagTransform=y(),w.setAttributes=h(),w.insert=p().bind(null,"head"),w.domAPI=u(),w.insertStyleElement=v(),_()(E.Z,w);const D=E.Z&&E.Z.locals?E.Z.locals:void 0;var F=r(3122),k=r(3221);const B=function(){return k.Z.Date.now()};var O=/\s/;var S=/^\s+/;const N=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&O.test(e.charAt(t)););return t}(e)+1).replace(S,""):e};var I=r(2758),x=/^[-+]0x[0-9a-f]+$/i,Z=/^0b[01]+$/i,H=/^0o[0-7]+$/i,j=parseInt;const G=function(e){if("number"==typeof e)return e;if((0,I.Z)(e))return NaN;if((0,F.Z)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,F.Z)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=N(e);var r=Z.test(e);return r||H.test(e)?j(e.slice(2),r?2:8):x.test(e)?NaN:+e};var T=Math.max,P=Math.min;function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const z=function(e){var t,r,c=e.currentVisit,_=e.htmlFormEntryForms,f=e.patient,u=e.patientUuid,d=(0,s.useTranslation)().t,p=(0,A.MS)(u),C=p.data,h=p.error,g=p.mutateForms,v=(t=(0,n.useState)(""),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,s=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(s)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=v[0],y=v[1],E="tablet"===(0,a.useLayoutType)(),w=(0,n.useMemo)((function(){return b?C.filter((function(e){var t;return(null!==(t=e.form.display)&&void 0!==t?t:e.form.name).toLowerCase().includes(b.toLowerCase())})):C}),[C,b]),k=o().useMemo((function(){return function(e,t,r){var n,o,a,i,s,l,m=0,A=!1,c=!1,_=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var r=n,a=o;return n=o=void 0,m=t,i=e.apply(a,r)}function u(e){return m=e,s=setTimeout(p,t),A?f(e):i}function d(e){var r=e-l;return void 0===l||r>=t||r<0||c&&e-m>=a}function p(){var e=B();if(d(e))return C(e);s=setTimeout(p,function(e){var r=t-(e-l);return c?P(r,a-(e-m)):r}(e))}function C(e){return s=void 0,_&&n?f(e):(n=o=void 0,i)}function h(){var e=B(),r=d(e);if(n=arguments,o=this,l=e,r){if(void 0===s)return u(l);if(c)return clearTimeout(s),s=setTimeout(p,t),f(l)}return void 0===s&&(s=setTimeout(p,t)),i}return t=G(t)||0,(0,F.Z)(r)&&(A=!!r.leading,a=(c="maxWait"in r)?T(G(r.maxWait)||0,t):a,_="trailing"in r?!!r.trailing:_),h.cancel=function(){void 0!==s&&clearTimeout(s),m=0,n=l=o=s=void 0},h.flush=function(){return void 0===s?i:C(B())},h}((function(e){return y(e)}),300)}),[]),O=(0,n.useCallback)((function(e,t,r){(0,i.closeWorkspace)("clinical-forms-workspace",!0),(0,m.U)(c,e,f,_,t,r,g)}),[c,_,g,f]),S=[{header:d("formName","Form name (A-Z)"),key:"formName"},{header:d("lastCompleted","Last completed"),key:"lastCompleted"}],N=(0,n.useMemo)((function(){return null==w?void 0:w.map((function(e){var t,r;return{id:e.form.uuid,lastCompleted:e.lastCompleted?(0,a.formatDatetime)(e.lastCompleted):void 0,formName:null!==(r=e.form.display)&&void 0!==r?r:e.form.name,formUuid:e.form.uuid,encounterUuid:null==e||null===(t=e.associatedEncounters[0])||void 0===t?void 0:t.uuid}}))}),[w]);return C||h?0===(null==C?void 0:C.length)?o().createElement(l.mh4,null,o().createElement(l.n9L,{className:D.emptyState},o().createElement("div",{className:E?D.tabletHeading:D.desktopHeading},o().createElement("h4",null,d("forms","Forms"))),o().createElement(i.EmptyDataIllustration,null),o().createElement("p",{className:D.emptyStateContent},d("noFormsToDisplay","There are no forms to display.")))):o().createElement(l.wQF,{rows:N,headers:S,size:E?"lg":"sm",useZebraStyles:!0},(function(e){var t,r,n=e.rows,a=e.headers,i=e.getTableProps,s=e.getHeaderProps,m=e.getRowProps;return e.onInputChange,o().createElement(o().Fragment,null,o().createElement(l.xJi,{className:D.tableContainer},o().createElement("div",{className:D.toolbarWrapper},o().createElement(l.fjU,{className:D.tableToolbar},o().createElement(l.Vj0,null,o().createElement(l.Ys1,{className:D.search,expanded:!0,onChange:function(e){return k(e.target.value)},placeholder:d("searchThisList","Search this list"),size:"sm"})))),o().createElement(l.iA_,(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){M(e,t,r[t])}))}return e}({},i()),r=null!=(r={className:D.table})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})),t),o().createElement(l.ssF,null,o().createElement(l.SCH,null,a.map((function(e){return o().createElement(l.xDH,s({header:e}),e.header)})))),o().createElement(l.RMI,null,n.map((function(e,t){var r,n;return o().createElement(l.SCH,m({row:e}),o().createElement(l.pj1,{key:e.cells[0].id},o().createElement(l.rUS,{style:{cursor:"pointer"},onClick:function(){O(e.id,"",N[t].formName)},role:"presentation",className:D.formName},null===(r=N[t])||void 0===r?void 0:r.formName)),o().createElement(l.pj1,{className:D.editCell},o().createElement("label",null,null!==(n=e.cells[1].value)&&void 0!==n?n:d("never","Never"))))}))))),0===(null==n?void 0:n.length)?o().createElement("div",{className:D.tileContainer},o().createElement(l.n9L,{className:D.tile},o().createElement("div",{className:D.tileContent},o().createElement("p",{className:D.content},d("noMatchingFormsToDisplay","No matching forms to display")),o().createElement("p",{className:D.helper},d("checkFilters","Check the filters above"))))):null)})):o().createElement(l.gqd,{role:"progressbar"})};var U=r(2924),R={};R.styleTagTransform=y(),R.setAttributes=h(),R.insert=p().bind(null,"head"),R.domAPI=u(),R.insertStyleElement=v(),_()(U.Z,R);const Y=U.Z&&U.Z.locals?U.Z.locals:void 0,V=function(){var e=(0,a.useConfig)().htmlFormEntryForms,t=(0,a.usePatient)(),r=t.patient,n=t.patientUuid,s=(0,i.useVisitOrOfflineVisit)(n).currentVisit;return o().createElement("div",{className:Y.container},o().createElement(z,{currentVisit:s,htmlFormEntryForms:e,patient:r,patientUuid:n}))};var X=r(2292),J={};J.styleTagTransform=y(),J.setAttributes=h(),J.insert=p().bind(null,"head"),J.domAPI=u(),J.insertStyleElement=v(),_()(X.Z,J);const L=X.Z&&X.Z.locals?X.Z.locals:void 0;function q(){return o().createElement("div",{className:L.container},o().createElement(V,null))}},4450:(e,t,r)=>{r.d(t,{MS:()=>u,cq:()=>_});var n=r(3565),o=r.n(n),a=r(3255),i=r(2870),s=r(8179),l=r(5186);function m(e,t,r,n,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,o)}function A(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){m(a,n,o,i,s,"next",e)}function s(e){m(a,n,o,i,s,"throw",e)}i(void 0)}))}}function c(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function _(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=(0,i.useConfig)(),n=r.customFormsUrl,o=r.showHtmlFormEntryForms,l=Boolean(n),m=l?n.concat("?patientUuid=".concat(t)):o?s.lA:s.HW;return(0,a.ZP)([m,e],A((function(){var t,r,n,o,a,s;return c(this,(function(A){switch(A.label){case 0:return[4,(0,i.openmrsFetch)(m)];case 1:return n=A.sent(),a=l?null==n?void 0:n.data.results:null!==(o=null===(r=n.data)||void 0===r||null===(t=r.results)||void 0===t?void 0:t.filter((function(e){return e.published&&!/component/i.test(e.name)})))&&void 0!==o?o:[],e?[4,(0,i.getDynamicOfflineDataEntries)("form")]:[2,a];case 2:return s=A.sent(),[2,a.filter((function(e){return s.some((function(t){return t.identifier===e.uuid}))}))]}}))})))}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o()(new Date).startOf("day").subtract(500,"day").toDate(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o()(new Date).endOf("day").toDate(),n="/ws/rest/v1/encounter?v=".concat(s._V,"&patient=").concat(e,"&fromdate=").concat(t.toISOString(),"&todate=").concat(r.toISOString());return(0,a.ZP)(n,(function(e){return(0,i.openmrsFetch)(e)}))}function u(e,t,r){var n,o,a,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],m=(0,i.useConfig)().htmlFormEntryForms,A=_(s,e),c=f(e,t,r),u=null!==(a=null===(o=c.data)||void 0===o||null===(n=o.data)||void 0===n?void 0:n.results)&&void 0!==a?a:[],p=A.data?d(A.data,u):void 0,C=(0,i.useSession)(),h=function(){A.mutate(),c.mutate()},g=s?null==p?void 0:p.filter((function(e){return(0,l.LD)(e.form,m)})):p;return(null==C?void 0:C.user)&&(g=null==g?void 0:g.filter((function(e){var t,r,n;return(0,i.userHasAccess)(null==e||null===(n=e.form)||void 0===n||null===(r=n.encounterType)||void 0===r||null===(t=r.editPrivilege)||void 0===t?void 0:t.display,C.user)}))),{data:g,error:A.error,isValidating:A.isValidating||c.isValidating,allForms:A.data,mutateForms:h}}function d(e,t){return e.map((function(e){var r=t.filter((function(t){var r;return(null===(r=t.form)||void 0===r?void 0:r.uuid)===(null==e?void 0:e.uuid)})).sort((function(e,t){var r,n;return(null===(r=e.form)||void 0===r?void 0:r.display)>(null===(n=t.form)||void 0===n?void 0:n.display)?1:-1})),n=r.length>0?new Date(null==r?void 0:r[0].encounterDatetime):void 0;return{form:e,associatedEncounters:r,lastCompleted:n}}))}},5186:(e,t,r)=>{r.d(t,{LD:()=>a,nY:()=>s});var n=r(3255),o=r(2870);function a(e,t){var r=t.some((function(t){return t.formUuid===e.uuid})),n=e.resources.some(i);return!r&&n}function i(e){return"AmpathJsonSchema"===e.dataType||"JSON schema"===e.name}function s(){return(0,n.ZP)("dynamicFormEntries",(function(){return(0,o.getDynamicOfflineDataEntries)("form")}))}},2758:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(8147),o=r(3391);const a=function(e){return"symbol"==typeof e||(0,o.Z)(e)&&"[object Symbol]"==(0,n.Z)(e)}}}]);