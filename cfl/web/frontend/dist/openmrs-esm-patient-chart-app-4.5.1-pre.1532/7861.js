(globalThis.webpackChunk_openmrs_esm_patient_chart_app=globalThis.webpackChunk_openmrs_esm_patient_chart_app||[]).push([[7861,3903],{5552:(e,t,n)=>{"use strict";n.d(t,{Fd:()=>l,JB:()=>r,S_:()=>a,Yh:()=>o,e1:()=>s,sb:()=>i});var a=window.getOpenmrsSpaBase(),i="/patient/:patientUuid/chart",o="".concat(i,"/:view/*"),r="".concat(window.spaBase).concat(i),s="@openmrs/esm-patient-chart-app",l="patient-chart-workspace-header-slot"},7861:(e,t,n)=>{"use strict";n.r(t),n.d(t,{backendDependencies:()=>A,importTranslation:()=>g,setupOpenMRS:()=>_,version:()=>v});var a=n(906),i=n(414),o={visitDiagnosisConceptUuid:{_default:"159947AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA",_type:a.Type.ConceptUuid},notesConceptUuids:{_type:a.Type.Array,_default:["162169AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"]},offlineVisitTypeUuid:{_type:a.Type.UUID,_description:"The UUID of the visit type to be used for the automatically created offline visits.",_default:"a22733fa-3501-4020-a520-da024eeff088"},showRecommendedVisitTypeTab:{_type:a.Type.Boolean,_description:"Whether start visit form should display recommended visit type tab. Requires `visitTypeResourceUrl`",_default:!1},visitTypeResourceUrl:{_type:a.Type.String,_default:"/etl-latest/etl/patient/",_description:"Custom URL to load resources required for showing recommended visit types"},disableEmptyTabs:{_type:a.Type.Boolean,_default:!1,_description:"Disable notes/tests/medications/encounters tabs when empty"},showAllEncountersTab:{_type:a.Type.Boolean,_description:"Shows the All Encounters Tab of Patient Visits section in Patient Chart",_default:!1},startVisitLabel:{_type:a.Type.String,_description:"Custom label to use on the start visit actions",_default:""},endVisitLabel:{_type:a.Type.String,_description:"Custom label to use on the end visit actions",_default:""},visitAttributeTypes:{_type:a.Type.Array,_description:"List of visit attribute types shown when filling the visit form",_elements:{uuid:{_type:a.Type.UUID,_description:"UUID of the visit attribute type"},required:{_type:a.Type.Boolean,_description:"Whether the attribute type field is required or not",_default:!1},displayInThePatientBanner:{_type:a.Type.Boolean,_description:"Whether we should show this visit attribute's value in the patient banner",_default:!0}},_default:[{uuid:"57ea0cbb-064f-4d09-8cf4-e8228700491c",required:!1,displayInThePatientBanner:!0},{uuid:"aac48226-d143-4274-80e0-264db4e368ee",required:!1,displayInThePatientBanner:!0}]},showServiceQueueFields:{_type:a.Type.Boolean,_description:"Whether start visit form should display service queue fields`",_default:!1},visitQueueNumberAttributeUuid:{_type:a.Type.ConceptUuid,_description:"The UUID of the visit attribute that contains the visit queue number.",_default:"c61ce16f-272a-41e7-9924-4c555d0932c5"},defaultFacilityUrl:{_type:a.Type.String,_default:"",_description:"Custom URL to load default facility if it is not in the session"},showUpcomingAppointments:{_type:a.Type.Boolean,_description:"Whether start visit form should display upcoming appointments",_default:!1},logo:{src:{_type:a.Type.String,_default:null,_description:"A path or URL to an image. Defaults to the OpenMRS SVG sprite."},alt:{_type:a.Type.String,_default:"Logo",_description:"Alt text, shown on hover"},name:{_type:a.Type.String,_default:null,_description:"The organization name displayed when image is absent"}}},r=(a.Type.UUID,n(5552)),s={slot:"patient-chart-summary-dashboard-slot",columns:4,title:"Patient Summary"},l={slot:"patient-chart-encounters-dashboard-slot",columns:1,title:"Visits"},c=n(5047),u=n.n(c);function d(e,t,n,a,i,o,r){try{var s=e[o](r),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(a,i)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){m(e,t,n[t])}))}return e}function f(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var y=n(8638),h=n(680);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var v="4.5.1-pre.1532",g=n(3979),A={};function _(){return(0,a.setupOfflineSync)(i.visitSyncType,["patient-registration"],(e=u().mark((function e(t,n){var i,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=f(p({},t),{stopDatetime:new Date}),e.next=3,(0,a.saveVisit)(i,n.abort).toPromise();case 3:if((o=e.sent).ok){e.next=6;break}throw new Error("Failed to synchronize offline visit with the UUID: ".concat(t.uuid,". Error: ").concat(JSON.stringify(o.data)));case 6:return e.abrupt("return",o.data);case 7:case"end":return e.stop()}}),e)})),t=function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function r(e){d(o,a,i,r,s,"next",e)}function s(e){d(o,a,i,r,s,"throw",e)}r(void 0)}))},function(e,n){return t.apply(this,arguments)})),(0,a.messageOmrsServiceWorker)({type:"registerDynamicRoute",pattern:".+/ws/fhir2/R4/Patient/.+"}),(0,a.messageOmrsServiceWorker)({type:"registerDynamicRoute",pattern:".+/ws/rest/v1/visit.+"}),(0,a.defineConfigSchema)(r.e1,o),(0,a.defineExtensionConfigSchema)("nav-group",h.genericNavGroupConfigSchema),(0,a.defineExtensionConfigSchema)("dashboard",y.genericDashboardConfigSchema),(0,a.registerBreadcrumbs)([{path:r.JB,title:function(){return Promise.resolve(window.i18next.t("patientBreadcrumb",{defaultValue:"Patient",ns:r.e1}))},parent:"".concat(window.spaBase,"/home")},{path:"".concat(r.JB,"/:view"),title:function(e){var t,n,a=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,o=[],r=!0,s=!1;try{for(n=n.call(e);!(r=(a=n.next()).done)&&(o.push(a.value),!t||o.length!==t);r=!0);}catch(e){s=!0,i=e}finally{try{r||null==n.return||n.return()}finally{if(s)throw i}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=(a[0],a[1]);return Promise.resolve(window.i18next.t("".concat(decodeURIComponent(i)," Dashboard"),{ns:r.e1,defaultValue:i}))},parent:r.JB}]),{pages:[{route:/^patient\/.+\/chart/,load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(3255),n.e(7631),n.e(4583),n.e(8760),n.e(4924),n.e(4350),n.e(4302)]).then(n.bind(n,4302))}),{featureName:"patient-chart",moduleName:r.e1}),online:!0,offline:!0}],extensions:[{name:"charts-summary-dashboard",slot:"patient-chart-dashboard-slot",order:0,load:(0,a.getSyncLifecycle)((0,i.createDashboardLink)(s),{featureName:"summary-dashboard",moduleName:r.e1}),meta:s,online:!0,offline:!0},{name:"start-visit-button",slot:"patient-actions-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(4924),n.e(8926)]).then(n.bind(n,8926))}),{featureName:"patient-actions-slot",moduleName:r.e1})},{name:"stop-visit-button",slot:"patient-actions-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(4924),n.e(5043)]).then(n.bind(n,5043))}),{featureName:"patient-actions-slot",moduleName:r.e1})},{name:"mark-alive-button",slot:"patient-actions-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(3255),n.e(4924),n.e(4350),n.e(3419)]).then(n.bind(n,3419))}),{featureName:"patient-actions-slot",moduleName:r.e1})},{name:"stop-visit-button-patient-search",slot:"patient-search-actions-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(4924),n.e(5043)]).then(n.bind(n,5043))}),{featureName:"patient-actions-slot",moduleName:r.e1})},{name:"cancel-visit-button",slot:"patient-actions-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(4924),n.e(427)]).then(n.bind(n,427))}),{featureName:"patient-actions-slot",moduleName:r.e1})},{name:"mark-patient-deceased-button",slot:"patient-actions-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(3255),n.e(4924),n.e(4350),n.e(7892)]).then(n.bind(n,7892))}),{featureName:"patient-actions-slot-deceased-button",moduleName:r.e1})},{name:"cancel-visit-button",slot:"patient-search-actions-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(4924),n.e(427)]).then(n.bind(n,427))}),{featureName:"patient-actions-slot-cancel-visit-button",moduleName:r.e1})},{name:"add-past-visit-button",slot:"patient-actions-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(4924),n.e(1581)]).then(n.bind(n,1581))}),{featureName:"patient-actions-slot-add-past-visit-button",moduleName:r.e1})},{name:"add-past-visit-button",slot:"patient-search-actions-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(4924),n.e(1581)]).then(n.bind(n,1581))}),{featureName:"patient-search-actions-slot-add-past-visit-button",moduleName:r.e1})},{name:"encounters-summary-dashboard",slot:"patient-chart-dashboard-slot",order:5,load:(0,a.getSyncLifecycle)((0,i.createDashboardLink)(l),{featureName:"encounter",moduleName:r.e1}),meta:l,online:!0,offline:!0},{name:"past-visits-detail-overview",order:1,slot:"patient-chart-encounters-dashboard-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(3255),n.e(9692),n.e(7631),n.e(2990),n.e(4924),n.e(4350),n.e(9063)]).then(n.bind(n,9063))}),{featureName:"visits-detail-slot",moduleName:r.e1}),meta:{title:"Visits",view:"visits"}},{name:"past-visits-overview",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(3255),n.e(4924),n.e(4350),n.e(4158)]).then(n.bind(n,4158))}),{featureName:"past-visits-overview",moduleName:r.e1}),meta:{title:"Edit or load a past visit",view:"visits"}},{name:"start-visit-workspace-form",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(3255),n.e(9692),n.e(6913),n.e(3753),n.e(4924),n.e(4350),n.e(3565),n.e(2437)]).then(n.bind(n,2437))}),{featureName:"start-visit-form",moduleName:r.e1}),meta:{title:"Start a visit"}},{name:"mark-patient-deceased-workspace-form",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(3255),n.e(9692),n.e(781),n.e(338),n.e(4924),n.e(4350),n.e(3565),n.e(129)]).then(n.bind(n,129))}),{featureName:"mark-patient-deceased-form",moduleName:r.e1}),meta:{title:"Mark Deceased"}},{name:"patient-details-tile",slot:"visit-form-header-slot",order:1,load:(0,a.getAsyncLifecycle)((function(){return n.e(3030).then(n.bind(n,3030))}),{featureName:"patient-details-tile",moduleName:r.e1})},{name:"nav-group",load:(0,a.getAsyncLifecycle)((function(){return Promise.resolve().then(n.bind(n,680))}),{featureName:"Nav group",moduleName:r.e1})},{name:"dashboard",load:(0,a.getAsyncLifecycle)((function(){return Promise.resolve().then(n.bind(n,8638))}),{featureName:"Dashboard",moduleName:r.e1})},{name:"cancel-visit-dialog",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(3255),n.e(4924),n.e(4350),n.e(3126)]).then(n.bind(n,3126))}),{featureName:"cancel visit",moduleName:r.e1})},{name:"start-visit-dialog",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(4924),n.e(4350),n.e(2534)]).then(n.bind(n,2534))}),{featureName:"start visit",moduleName:r.e1})},{id:"end-visit-dialog",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(3255),n.e(6913),n.e(4924),n.e(4350),n.e(3478)]).then(n.bind(n,3478))}),{featureName:"end visit",moduleName:r.e1})},{name:"confirm-deceased-dialog",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(4924),n.e(4350),n.e(9922)]).then(n.bind(n,236))}),{featureName:"confirm death",moduleName:r.e1})},{name:"confirm-alive-modal",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(3255),n.e(4924),n.e(4350),n.e(4846)]).then(n.bind(n,4846))}),{featureName:"confirm alive",moduleName:r.e1})},{id:"start-visit-button-patient-search",slot:"start-visit-button-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(4924),n.e(4350),n.e(3375)]).then(n.bind(n,3375))}),{featureName:"start-visit-button-patient-search",moduleName:r.e1})},{id:"visit-attribute-tags",slot:"patient-banner-tags-slot",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(4350),n.e(1539)]).then(n.bind(n,1539))}),{featureName:"visit-attribute-tags",moduleName:r.e1})},{name:"delete-encounter-modal",load:(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(4924),n.e(4350),n.e(6190)]).then(n.bind(n,6190))}),{featureName:"delete-encounter-modal",moduleName:r.e1}),online:!0,offline:!0}]};var e,t}},8638:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c,genericDashboardConfigSchema:()=>l});var a=n(268),i=n.n(a),o=n(906),r=n(8744),s=n(414),l={title:{_default:"New Dashboard",_type:o.Type.String},slot:{_default:"new-dashboard-slot",_type:o.Type.String},columns:{_default:1,_type:o.Type.Number,_description:"The number of columns that widgets in the dashboard can use to display themselves in. Note that '2' will not necessarily result in a two-column layout—rather that widgets will be able to occupy either one or both of those columns."}};function c(e){var t=e.basePath,n=(0,o.useConfig)();return i().createElement(r.BrowserRouter,null,i().createElement(s.DashboardExtension,{title:n.title,basePath:t}))}},680:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,genericNavGroupConfigSchema:()=>s});var a=n(268),i=n.n(a),o=n(906),r=n(414),s={title:{_type:o.Type.String,_description:"The title of the nav group.",_default:"My Group"},slotName:{_type:o.Type.String,_description:"The name of the slot to create, which links can be added to.",_default:"my-group-nav-slot"}};function l(e){var t=e.basePath,n=(0,o.useConfig)();return i().createElement(r.DashboardGroupExtension,{title:n.title,slotName:n.slotName,basePath:t})}},3979:(e,t,n)=>{var a={"./en.json":[3574,3574],"./fr.json":[2757,2757],"./km.json":[7807,7807]};function i(e){if(!n.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],i=t[0];return n.e(t[1]).then((()=>n(i)))}i.keys=()=>Object.keys(a),i.id=3979,e.exports=i}}]);